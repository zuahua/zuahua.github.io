<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>标准输入输出</title>
    <url>/2018-08-10-python-3.html</url>
    <content><![CDATA[<p>python自学第三节<br>标准输入输出</p>
<h2 id="标准输入输出"><a href="#标准输入输出" class="headerlink" title="标准输入输出"></a>标准输入输出</h2><ul>
<li>input（） 要求用户键入</li>
<li>print（） 屏幕输出</li>
</ul>
<a id="more"></a>

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">age = input(<span class="string">"请输入你的年龄，按回车键结束"</span>)</span><br><span class="line">print(age)</span><br></pre></td></tr></table></figure>

<pre><code>请输入你的年龄，按回车键结束20
20</code></pre>]]></content>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>python中的运算符</title>
    <url>/2018-08-10-python-2.html</url>
    <content><![CDATA[<p>python自学第二节<br>运算符</p>
<h2 id="python中的运算符"><a href="#python中的运算符" class="headerlink" title="python中的运算符"></a>python中的运算符</h2><h3 id="1、算数运算符"><a href="#1、算数运算符" class="headerlink" title="1、算数运算符"></a>1、算数运算符</h3><ul>
<li>+</li>
<li>-</li>
<li>*</li>
<li>/</li>
<li>//地板除,得到整的结果：如：4   8   9.0  ….</li>
<li>% 取余</li>
<li>** 指数幂</li>
</ul>
<a id="more"></a>

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = <span class="number">5.0</span></span><br><span class="line">a/<span class="number">4</span></span><br></pre></td></tr></table></figure>




<pre><code>1.25</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = <span class="number">5</span></span><br><span class="line">a/<span class="number">4</span></span><br></pre></td></tr></table></figure>




<pre><code>1.25</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = <span class="number">5</span></span><br><span class="line">a/<span class="number">3</span></span><br></pre></td></tr></table></figure>




<pre><code>1.6666666666666667</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 得到结果为整！</span></span><br><span class="line">a = <span class="number">22</span></span><br><span class="line">a // <span class="number">2</span></span><br></pre></td></tr></table></figure>




<pre><code>11</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = <span class="number">22.9</span></span><br><span class="line">a // <span class="number">2</span></span><br></pre></td></tr></table></figure>




<pre><code>11.0</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = <span class="number">17</span></span><br><span class="line">a // <span class="number">3</span></span><br></pre></td></tr></table></figure>




<pre><code>5</code></pre><ul>
<li>** 指数幂</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">4</span> ** <span class="number">4</span></span><br></pre></td></tr></table></figure>




<pre><code>256</code></pre><h3 id="算数运算符的优先级"><a href="#算数运算符的优先级" class="headerlink" title="算数运算符的优先级"></a>算数运算符的优先级</h3><ul>
<li>（）</li>
<li>**</li>
<li>/ *   //  %</li>
<li>+,-</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">5</span> + <span class="number">4</span> ** <span class="number">2</span> - <span class="number">7</span> // <span class="number">4</span> - (<span class="number">5</span> % <span class="number">2</span>)</span><br></pre></td></tr></table></figure>




<pre><code>19</code></pre><h3 id="运算中出现浮点数，结果一定是浮点数"><a href="#运算中出现浮点数，结果一定是浮点数" class="headerlink" title="运算中出现浮点数，结果一定是浮点数"></a>运算中出现浮点数，结果一定是浮点数</h3><h3 id="运算小练习"><a href="#运算小练习" class="headerlink" title="运算小练习"></a>运算小练习</h3><ul>
<li>摄氏度、华氏温度、开氏温度的转换</li>
<li>摄氏度=5.0/9.0*(华氏温度 - 32)</li>
<li>开氏温度=5.0/9.0*(华氏温度 - 32) + 273.15</li>
<li>今天32摄氏度，求华氏温度，开氏温度</li>
<li>华氏温度=摄氏度*9.0/5.0+32</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">s = <span class="number">32</span></span><br><span class="line">h = s*<span class="number">9.0</span>/<span class="number">5.0</span>+<span class="number">32</span></span><br><span class="line">k = <span class="number">5.0</span>/<span class="number">9.0</span>*(h - <span class="number">32</span>) + <span class="number">273.15</span></span><br><span class="line">print(<span class="string">"华氏温度h: %f"</span> % h)</span><br><span class="line">print(<span class="string">"开氏温度k: %f"</span> % k)</span><br></pre></td></tr></table></figure>

<pre><code>华氏温度h: 89.600000
开氏温度k: 305.150000</code></pre><h3 id="2、赋值运算符"><a href="#2、赋值运算符" class="headerlink" title="2、赋值运算符"></a>2、赋值运算符</h3><ul>
<li>=，+=，-=,*=,/=</li>
<li>** = ,//=</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = <span class="number">3</span></span><br><span class="line">a **= <span class="number">6</span></span><br><span class="line">b = <span class="number">4</span></span><br><span class="line">b //= <span class="number">3</span></span><br><span class="line">print(a)</span><br><span class="line">print(b)</span><br></pre></td></tr></table></figure>

<pre><code>729
1</code></pre><ul>
<li>批量赋值</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a,b,c = <span class="number">100</span>,<span class="number">234</span>,<span class="number">456</span></span><br><span class="line">print(<span class="string">"%d\n%d\n%d"</span> %(a,b,c))</span><br></pre></td></tr></table></figure>

<pre><code>100
234
456</code></pre><ul>
<li>数值交换</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a,b = <span class="number">123</span>,<span class="number">456</span></span><br><span class="line">a,b = b,a</span><br><span class="line">print(<span class="string">"%d\n%d"</span> %(a,b))</span><br></pre></td></tr></table></figure>

<pre><code>456
123</code></pre><h4 id="数值运算练习"><a href="#数值运算练习" class="headerlink" title="数值运算练习"></a>数值运算练习</h4><ul>
<li>(1)求r=6.6cm的球的体积和面积</li>
<li>面积s=4<em>pi</em>r^2</li>
<li>体积v=4/3<em>pi</em>r^3</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">pi = <span class="number">3.1415926</span></span><br><span class="line">r = <span class="number">6.6</span></span><br><span class="line">s = <span class="number">4</span>*pi*r**<span class="number">2</span></span><br><span class="line">v = <span class="number">4</span>/<span class="number">3</span>*pi*r**<span class="number">3</span></span><br><span class="line">print(<span class="string">"面积为%f;体积为%f"</span> % (s,v))</span><br></pre></td></tr></table></figure>

<pre><code>面积为547.391095;体积为1204.260408</code></pre><ul>
<li>(2)求当前时间<ul>
<li>从7：00：00开始已经过去476589s，求现在的时间</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">startTime = <span class="number">7</span></span><br><span class="line">doneTimeS = <span class="number">476589</span></span><br><span class="line">minute = doneTimeS//<span class="number">60</span></span><br><span class="line">S = doneTimeS%<span class="number">60</span></span><br><span class="line">Time = minute//<span class="number">60</span></span><br><span class="line">M = minute%<span class="number">60</span></span><br><span class="line">nowTime = (startTime + Time)//<span class="number">24</span></span><br><span class="line">print(<span class="string">"现在的时间：%02d:%02d:%02d"</span> % (nowTime,M,S))</span><br></pre></td></tr></table></figure>

<pre><code>现在的时间：05:23:09</code></pre><h3 id="3、比较运算符"><a href="#3、比较运算符" class="headerlink" title="3、比较运算符"></a>3、比较运算符</h3><ul>
<li>&lt; &gt; &lt;= &gt;= == !=</li>
<li>比较的结果是bool值</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = <span class="number">5</span> &gt; <span class="number">1</span></span><br><span class="line">a</span><br></pre></td></tr></table></figure>




<pre><code>True</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = <span class="number">6</span> != <span class="number">6</span></span><br><span class="line">a</span><br></pre></td></tr></table></figure>




<pre><code>False</code></pre><h3 id="4、逻辑运算符"><a href="#4、逻辑运算符" class="headerlink" title="4、逻辑运算符"></a>4、逻辑运算符</h3><ul>
<li><p>and逻辑与,短路与</p>
</li>
<li><p>or 逻辑或</p>
</li>
<li><p>not 逻辑非</p>
</li>
<li><p>and从左往右运算值时，都为真则返回最后一个值</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = <span class="number">1</span> <span class="keyword">and</span> <span class="number">2</span></span><br><span class="line">a</span><br></pre></td></tr></table></figure>




<pre><code>2</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = <span class="number">6</span> <span class="keyword">and</span> <span class="number">1</span> <span class="keyword">and</span> <span class="number">1111</span></span><br><span class="line">a</span><br></pre></td></tr></table></figure>




<pre><code>1111</code></pre><ul>
<li>or只要第一个值为真，就直接返回第一个值</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">111</span> <span class="keyword">or</span> <span class="number">0</span></span><br></pre></td></tr></table></figure>




<pre><code>111</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = <span class="number">2</span></span><br><span class="line">b = <span class="number">9</span></span><br><span class="line">a &gt; b <span class="keyword">and</span> a</span><br></pre></td></tr></table></figure>




<pre><code>False</code></pre><h3 id="5、特殊运算符"><a href="#5、特殊运算符" class="headerlink" title="5、特殊运算符"></a>5、特殊运算符</h3><ul>
<li><p>is 判断两个对象的内存地址是否相同</p>
</li>
<li><p>is not 与is相反</p>
</li>
<li><p>del 删除某个对象，解除对象的绑定值，可能释放掉它的内存（视情况）</p>
</li>
<li><p>在python中，对于一些初级的，常用的对象，无论把它赋值给几个变量，它会被存储在相同的内存中；而其他才会重新开辟内存存储</p>
</li>
<li><p>例子如下</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = <span class="number">1</span></span><br><span class="line">b = <span class="number">1</span></span><br><span class="line">a <span class="keyword">is</span> b</span><br></pre></td></tr></table></figure>




<pre><code>True</code></pre><ul>
<li>查看地址用  id()</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = <span class="number">1</span></span><br><span class="line">b = <span class="number">1</span></span><br><span class="line">a <span class="keyword">is</span> b</span><br></pre></td></tr></table></figure>




<pre><code>True</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">id(a)</span><br></pre></td></tr></table></figure>




<pre><code>2012965952</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">id(b)</span><br></pre></td></tr></table></figure>




<pre><code>2012965952</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">c = <span class="number">456</span></span><br><span class="line">d = <span class="number">456</span></span><br><span class="line">c <span class="keyword">is</span> d</span><br></pre></td></tr></table></figure>




<pre><code>False</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">id(c)</span><br></pre></td></tr></table></figure>




<pre><code>2069301952784</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">id(d)</span><br></pre></td></tr></table></figure>




<pre><code>2069301953168</code></pre><ul>
<li>del</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">em = <span class="number">678</span></span><br><span class="line"><span class="comment"># 删除em</span></span><br><span class="line"><span class="keyword">del</span> em</span><br><span class="line">id(em)</span><br></pre></td></tr></table></figure>


<pre><code>---------------------------------------------------------------------------

NameError                                 Traceback (most recent call last)

&lt;ipython-input-34-aa4fc6229635&gt; in &lt;module&gt;()
      2 # 删除em
      3 del em
----&gt; 4 id(em)


NameError: name &apos;em&apos; is not defined</code></pre>]]></content>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>python数据类型</title>
    <url>/2018-08-10-python-1.html</url>
    <content><![CDATA[<p>python自学第一节<br>数据类型</p>
<a id="more"></a>

<h1 id="python数据类型"><a href="#python数据类型" class="headerlink" title="python数据类型"></a>python数据类型</h1><h2 id="1-数字类型"><a href="#1-数字类型" class="headerlink" title="1 数字类型"></a>1 数字类型</h2><p>常量数字</p>
<p> 数字类型  |  数字举例</p>
<p> ————–| —————–</p>
<p> 十进制整数 |  222， 666</p>
<p> 浮点数     |  0.8765， 4e-12</p>
<p> 复数       |  4+5j</p>
<p> 二进制（0b开头）| 0b1001</p>
<p> 十六进制（0x开头）| 0xfec</p>
<p> 八进制（0o开头）| 0o432</p>
<pre><code>-补充，八进制在python2.x中可以以0开头，而在python3中只能0o开头</code></pre><p>整数</p>
<p>浮点数</p>
<p>复数</p>
<p>bool作为数字使用</p>
<!--more-->

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 0b二进制</span></span><br><span class="line">a = <span class="number">0b101</span></span><br><span class="line">print(a)</span><br></pre></td></tr></table></figure>

<pre><code>5</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 十六进制</span></span><br><span class="line">a = <span class="number">0xfbe</span></span><br><span class="line">print(a)</span><br></pre></td></tr></table></figure>

<pre><code>4030</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 八进制</span></span><br><span class="line">a = <span class="number">0o776</span></span><br><span class="line">print(a)</span><br></pre></td></tr></table></figure>

<pre><code>510</code></pre><h3 id="1-整数"><a href="#1-整数" class="headerlink" title="(1)整数"></a>(1)整数</h3><p>可以表示任何大的数</p>
<p>  -二进制</p>
<p>  -八进制</p>
<p>  -十六进制</p>
<h4 id="进制之间的转换"><a href="#进制之间的转换" class="headerlink" title="进制之间的转换"></a>进制之间的转换</h4><h4 id="转换成二进制"><a href="#转换成二进制" class="headerlink" title="转换成二进制"></a>转换成二进制</h4><pre><code>bin()</code></pre><h4 id="转换为八进制"><a href="#转换为八进制" class="headerlink" title="转换为八进制"></a>转换为八进制</h4><pre><code>oct()</code></pre><h4 id="转换为十六进制"><a href="#转换为十六进制" class="headerlink" title="转换为十六进制"></a>转换为十六进制</h4><pre><code>hex()</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 十进制转换为二进制</span></span><br><span class="line">a = <span class="number">678</span></span><br><span class="line">b = bin(a)</span><br><span class="line">print(b)</span><br><span class="line"><span class="comment"># 十进制转换为八进制</span></span><br><span class="line">c = oct(a)</span><br><span class="line">print(c)</span><br><span class="line"><span class="comment"># 十进制转换为十六进制</span></span><br><span class="line">d = hex(a)</span><br><span class="line">print(d)</span><br></pre></td></tr></table></figure>

<pre><code>0b1010100110
0o1246
0x2a6</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 二进制转换为八进制</span></span><br><span class="line">a = <span class="number">0b1011</span></span><br><span class="line">b = oct(a)</span><br><span class="line">print(b)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 检验是否正确转换</span></span><br><span class="line">c = <span class="number">0o13</span></span><br><span class="line">print(a)</span><br><span class="line">print(c)</span><br></pre></td></tr></table></figure>

<pre><code>0o13
11
11</code></pre><h3 id="2-浮点数"><a href="#2-浮点数" class="headerlink" title="(2)浮点数"></a>(2)浮点数</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 小数</span></span><br><span class="line">a = <span class="number">3.456</span></span><br><span class="line">print(a)</span><br><span class="line"><span class="comment"># 科学计数法</span></span><br><span class="line">b = <span class="number">3.356e9</span></span><br><span class="line">print(b)</span><br></pre></td></tr></table></figure>

<pre><code>3.456
3356000000.0</code></pre><h3 id="3-复数"><a href="#3-复数" class="headerlink" title="(3)复数"></a>(3)复数</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 实部和虚部</span></span><br><span class="line">a = <span class="number">55</span> + <span class="number">6j</span></span><br><span class="line">print(a)</span><br></pre></td></tr></table></figure>

<pre><code>(55+6j)</code></pre><h3 id="4-bool"><a href="#4-bool" class="headerlink" title="(4)bool"></a>(4)bool</h3><h2 id="2字符串"><a href="#2字符串" class="headerlink" title="2字符串"></a>2字符串</h2><p>单引号 ‘’</p>
<p>双引号 “”</p>
<p>三单引号 ‘’’ ‘’’</p>
<p>三双单引号””” “””</p>
<h4 id="几个引号表示字符串的区别"><a href="#几个引号表示字符串的区别" class="headerlink" title="几个引号表示字符串的区别"></a>几个引号表示字符串的区别</h4><ul>
<li>单引号和双引号没有区别</li>
<li>三单引号和三双单引号没有区别</li>
<li>三引号可表示换行类的字符串，或者在函数开头解释</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = <span class="string">'''这世界</span></span><br><span class="line"><span class="string">不可能</span></span><br><span class="line"><span class="string">有这么美丽'''</span></span><br><span class="line"></span><br><span class="line">print(a)</span><br><span class="line">b = <span class="string">"这世界不可能有这么美丽"</span></span><br><span class="line">print(b)</span><br></pre></td></tr></table></figure>

<pre><code>这世界
不可能
有这么美丽
这世界不可能有这么美丽</code></pre><h4 id="当字符串中出现引号的表示方法及转义字符"><a href="#当字符串中出现引号的表示方法及转义字符" class="headerlink" title="当字符串中出现引号的表示方法及转义字符"></a>当字符串中出现引号的表示方法及转义字符</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = <span class="string">"Let's go"</span></span><br><span class="line">b =  <span class="string">'''Let's go '''</span></span><br><span class="line">c = <span class="string">"""这是'FF' """</span></span><br><span class="line"><span class="comment">#转义字符</span></span><br><span class="line">d = <span class="string">"Let\'s go"</span></span><br><span class="line">print(a)</span><br><span class="line">print(b)</span><br><span class="line">print(c)</span><br><span class="line">print(d)</span><br></pre></td></tr></table></figure>

<pre><code>Let&apos;s go
Let&apos;s go 
这是&apos;FF&apos; 
Let&apos;s go</code></pre><h3 id="3转义字符"><a href="#3转义字符" class="headerlink" title="3转义字符"></a>3转义字符</h3><ul>
<li>一些不好直接表示的符号，如引号，换行符，制表符</li>
<li>单引号 &#39;</li>
<li>双引号 &quot;</li>
<li>响铃 \a</li>
<li>换行 \n</li>
<li>水平制表 \t</li>
<li>垂直制表 \v</li>
<li>倒退 \b</li>
<li>空字符串，字符值为0 \0</li>
<li>unicode16位的十六进制数值 \uXXXX (四个数字)</li>
<li>unicode32为的十六进制数值 \uXXXX XXXX (八个数字)</li>
<li>八进制 \oXX</li>
<li>十六进制 \xXX (第一个为x，后面为数字)</li>
</ul>
<h3 id="4-string类型的API"><a href="#4-string类型的API" class="headerlink" title="4   string类型的API"></a>4   string类型的API</h3><ul>
<li>API 应用程序接口<h4 id="（1）一般函数"><a href="#（1）一般函数" class="headerlink" title="（1）一般函数"></a>（1）一般函数</h4></li>
<li>startswith\endswith<br>判断\检查以什么开头\结尾</li>
<li>count<pre><code>-计数，计算一个字符串中一个子字符串出现的个数</code></pre></li>
<li>find<pre><code>-查找一个字符串中一个字符出现的位置</code></pre></li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">s = <span class="string">"I well well"</span></span><br><span class="line">s.startswith(<span class="string">"I"</span>)</span><br></pre></td></tr></table></figure>




<pre><code>True</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">s = <span class="string">"I well well"</span></span><br><span class="line">s.endswith(<span class="string">"l"</span>)</span><br></pre></td></tr></table></figure>




<pre><code>True</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">s = <span class="string">"I well well"</span></span><br><span class="line">s.count(<span class="string">"w"</span>)</span><br></pre></td></tr></table></figure>




<pre><code>2</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">s = <span class="string">"I well well"</span></span><br><span class="line">s.count(<span class="string">"l"</span>)</span><br></pre></td></tr></table></figure>




<pre><code>4</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 字符下标从0开始</span></span><br><span class="line">s = <span class="string">"I well well"</span></span><br><span class="line">s.find(<span class="string">"w"</span>)</span><br></pre></td></tr></table></figure>




<pre><code>2</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">s = <span class="string">"I well well"</span></span><br><span class="line">s.find(<span class="string">"a"</span>)</span><br></pre></td></tr></table></figure>




<pre><code>-1</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">help(str)</span><br><span class="line">```python</span><br><span class="line"></span><br><span class="line">    Help on <span class="class"><span class="keyword">class</span> <span class="title">str</span> <span class="title">in</span> <span class="title">module</span> <span class="title">builtins</span>:</span></span><br><span class="line">    </span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">str</span><span class="params">(object)</span></span></span><br><span class="line"><span class="class">     |  <span class="title">str</span><span class="params">(object=<span class="string">''</span>)</span> -&gt; str</span></span><br><span class="line"><span class="class">     |  str(bytes_or_buffer[, encoding[, errors]]) -&gt; str</span></span><br><span class="line"><span class="class">     |  </span></span><br><span class="line"><span class="class">     |  Create a new string object from the given object. If encoding or</span></span><br><span class="line"><span class="class">     |  errors is specified, then the object must expose a data buffer</span></span><br><span class="line"><span class="class">     |  that will be decoded using the given encoding and error handler.</span></span><br><span class="line"><span class="class">     |  Otherwise, returns the result of object.__str__() (if defined)</span></span><br><span class="line"><span class="class">     |  or repr(object).</span></span><br><span class="line"><span class="class">     |  encoding defaults to sys.getdefaultencoding().</span></span><br><span class="line"><span class="class">     |  errors defaults to 'strict'.</span></span><br><span class="line"><span class="class">     |  </span></span><br><span class="line"><span class="class">     |  Methods defined here:</span></span><br><span class="line">     |  </span><br><span class="line">     |  __add__(self, value, /)</span><br><span class="line">     |      Return self+value.</span><br><span class="line">     |  </span><br><span class="line">     |  __contains__(self, key, /)</span><br><span class="line">     |      Return key <span class="keyword">in</span> self.</span><br><span class="line">     |  </span><br><span class="line">     |  __eq__(self, value, /)</span><br><span class="line">     |      Return self==value.</span><br><span class="line">     |  </span><br><span class="line">     |  __format__(...)</span><br><span class="line">     |      S.__format__(format_spec) -&gt; str</span><br><span class="line">     |      </span><br><span class="line">     |      Return a formatted version of S <span class="keyword">as</span> described by format_spec.</span><br><span class="line">     |  </span><br><span class="line">     |  __ge__(self, value, /)</span><br><span class="line">     |      Return self&gt;=value.</span><br><span class="line">     |  </span><br><span class="line">     |  __getattribute__(self, name, /)</span><br><span class="line">     |      Return getattr(self, name).</span><br><span class="line">     |  </span><br><span class="line">     |  __getitem__(self, key, /)</span><br><span class="line">     |      Return self[key].</span><br><span class="line">     |  </span><br><span class="line">     |  __getnewargs__(...)</span><br><span class="line">     |  </span><br><span class="line">     |  __gt__(self, value, /)</span><br><span class="line">     |      Return self&gt;value.</span><br><span class="line">     |  </span><br><span class="line">     |  __hash__(self, /)</span><br><span class="line">     |      Return hash(self).</span><br><span class="line">     |  </span><br><span class="line">     |  __iter__(self, /)</span><br><span class="line">     |      Implement iter(self).</span><br><span class="line">     |  </span><br><span class="line">     |  __le__(self, value, /)</span><br><span class="line">     |      Return self&lt;=value.</span><br><span class="line">     |  </span><br><span class="line">     |  __len__(self, /)</span><br><span class="line">     |      Return len(self).</span><br><span class="line">     |  </span><br><span class="line">     |  __lt__(self, value, /)</span><br><span class="line">     |      Return self&lt;value.</span><br><span class="line">     |  </span><br><span class="line">     |  __mod__(self, value, /)</span><br><span class="line">     |      Return self%value.</span><br><span class="line">     |  </span><br><span class="line">     |  __mul__(self, value, /)</span><br><span class="line">     |      Return self*value.n</span><br><span class="line">     |  </span><br><span class="line">     |  __ne__(self, value, /)</span><br><span class="line">     |      Return self!=value.</span><br><span class="line">     |  </span><br><span class="line">     |  __new__(*args, **kwargs) <span class="keyword">from</span> builtins.type</span><br><span class="line">     |      Create <span class="keyword">and</span> <span class="keyword">return</span> a new object.  See help(type) <span class="keyword">for</span> accurate signature.</span><br><span class="line">     |  </span><br><span class="line">     |  __repr__(self, /)</span><br><span class="line">     |      Return repr(self).</span><br><span class="line">     |  </span><br><span class="line">     |  __rmod__(self, value, /)</span><br><span class="line">     |      Return value%self.</span><br><span class="line">     |  </span><br><span class="line">     |  __rmul__(self, value, /)</span><br><span class="line">     |      Return self*value.</span><br><span class="line">     |  </span><br><span class="line">     |  __sizeof__(...)</span><br><span class="line">     |      S.__sizeof__() -&gt; size of S in memory, in bytes</span><br><span class="line">     |  </span><br><span class="line">     |  __str__(self, /)</span><br><span class="line">     |      Return str(self).</span><br><span class="line">     |  </span><br><span class="line">     |  capitalize(...)</span><br><span class="line">     |      S.capitalize() -&gt; str</span><br><span class="line">     |      </span><br><span class="line">     |      Return a capitalized version of S, i.e. make the first character</span><br><span class="line">     |      have upper case <span class="keyword">and</span> the rest lower case.</span><br><span class="line">     |  </span><br><span class="line">     |  casefold(...)</span><br><span class="line">     |      S.casefold() -&gt; str</span><br><span class="line">     |      </span><br><span class="line">     |      Return a version of S suitable <span class="keyword">for</span> caseless comparisons.</span><br><span class="line">     |  </span><br><span class="line">     |  center(...)</span><br><span class="line">     |      S.center(width[, fillchar]) -&gt; str</span><br><span class="line">     |      </span><br><span class="line">     |      Return S centered <span class="keyword">in</span> a string of length width. Padding <span class="keyword">is</span></span><br><span class="line">     |      done using the specified fill character (default <span class="keyword">is</span> a space)</span><br><span class="line">     |  </span><br><span class="line">     |  count(...)</span><br><span class="line">     |      S.count(sub[, start[, end]]) -&gt; int</span><br><span class="line">     |      </span><br><span class="line">     |      Return the number of non-overlapping occurrences of substring sub <span class="keyword">in</span></span><br><span class="line">     |      string S[start:end].  Optional arguments start <span class="keyword">and</span> end are</span><br><span class="line">     |      interpreted <span class="keyword">as</span> <span class="keyword">in</span> slice notation.</span><br><span class="line">     |  </span><br><span class="line">     |  encode(...)</span><br><span class="line">     |      S.encode(encoding='utf-8', errors='strict') -&gt; bytes</span><br><span class="line">     |      </span><br><span class="line">     |      Encode S using the codec registered <span class="keyword">for</span> encoding. Default encoding</span><br><span class="line">     |      <span class="keyword">is</span> <span class="string">'utf-8'</span>. errors may be given to set a different error</span><br><span class="line">     |      handling scheme. Default <span class="keyword">is</span> <span class="string">'strict'</span> meaning that encoding errors <span class="keyword">raise</span></span><br><span class="line">     |      a UnicodeEncodeError. Other possible values are <span class="string">'ignore'</span>, <span class="string">'replace'</span> <span class="keyword">and</span></span><br><span class="line">     |      <span class="string">'xmlcharrefreplace'</span> <span class="keyword">as</span> well <span class="keyword">as</span> any other name registered <span class="keyword">with</span></span><br><span class="line">     |      codecs.register_error that can handle UnicodeEncodeErrors.</span><br><span class="line">     |  </span><br><span class="line">     |  endswith(...)</span><br><span class="line">     |      S.endswith(suffix[, start[, end]]) -&gt; bool</span><br><span class="line">     |      </span><br><span class="line">     |      Return <span class="literal">True</span> <span class="keyword">if</span> S ends <span class="keyword">with</span> the specified suffix, <span class="literal">False</span> otherwise.</span><br><span class="line">     |      With optional start, test S beginning at that position.</span><br><span class="line">     |      With optional end, stop comparing S at that position.</span><br><span class="line">     |      suffix can also be a tuple of strings to <span class="keyword">try</span>.</span><br><span class="line">     |  </span><br><span class="line">     |  expandtabs(...)</span><br><span class="line">     |      S.expandtabs(tabsize=8) -&gt; str</span><br><span class="line">     |      </span><br><span class="line">     |      Return a copy of S where all tab characters are expanded using spaces.</span><br><span class="line">     |      If tabsize <span class="keyword">is</span> <span class="keyword">not</span> given, a tab size of <span class="number">8</span> characters <span class="keyword">is</span> assumed.</span><br><span class="line">     |  </span><br><span class="line">     |  find(...)</span><br><span class="line">     |      S.find(sub[, start[, end]]) -&gt; int</span><br><span class="line">     |      </span><br><span class="line">     |      Return the lowest index <span class="keyword">in</span> S where substring sub <span class="keyword">is</span> found,</span><br><span class="line">     |      such that sub <span class="keyword">is</span> contained within S[start:end].  Optional</span><br><span class="line">     |      arguments start <span class="keyword">and</span> end are interpreted <span class="keyword">as</span> <span class="keyword">in</span> slice notation.</span><br><span class="line">     |      </span><br><span class="line">     |      Return <span class="number">-1</span> on failure.</span><br><span class="line">     |  </span><br><span class="line">     |  format(...)</span><br><span class="line">     |      S.format(*args, **kwargs) -&gt; str</span><br><span class="line">     |      </span><br><span class="line">     |      Return a formatted version of S, using substitutions <span class="keyword">from</span> args <span class="keyword">and</span> kwargs.</span><br><span class="line">     |      The substitutions are identified by braces (<span class="string">'&#123;'</span> <span class="keyword">and</span> <span class="string">'&#125;'</span>).</span><br><span class="line">     |  </span><br><span class="line">     |  format_map(...)</span><br><span class="line">     |      S.format_map(mapping) -&gt; str</span><br><span class="line">     |      </span><br><span class="line">     |      Return a formatted version of S, using substitutions <span class="keyword">from</span> mapping.</span><br><span class="line">     |      The substitutions are identified by braces (<span class="string">'&#123;'</span> <span class="keyword">and</span> <span class="string">'&#125;'</span>).</span><br><span class="line">     |  </span><br><span class="line">     |  index(...)</span><br><span class="line">     |      S.index(sub[, start[, end]]) -&gt; int</span><br><span class="line">     |      </span><br><span class="line">     |      Return the lowest index <span class="keyword">in</span> S where substring sub <span class="keyword">is</span> found, </span><br><span class="line">     |      such that sub <span class="keyword">is</span> contained within S[start:end].  Optional</span><br><span class="line">     |      arguments start <span class="keyword">and</span> end are interpreted <span class="keyword">as</span> <span class="keyword">in</span> slice notation.</span><br><span class="line">     |      </span><br><span class="line">     |      Raises ValueError when the substring <span class="keyword">is</span> <span class="keyword">not</span> found.</span><br><span class="line">     |  </span><br><span class="line">     |  isalnum(...)</span><br><span class="line">     |      S.isalnum() -&gt; bool</span><br><span class="line">     |      </span><br><span class="line">     |      Return <span class="literal">True</span> <span class="keyword">if</span> all characters <span class="keyword">in</span> S are alphanumeric</span><br><span class="line">     |      <span class="keyword">and</span> there <span class="keyword">is</span> at least one character <span class="keyword">in</span> S, <span class="literal">False</span> otherwise.</span><br><span class="line">     |  </span><br><span class="line">     |  isalpha(...)</span><br><span class="line">     |      S.isalpha() -&gt; bool</span><br><span class="line">     |      </span><br><span class="line">     |      Return <span class="literal">True</span> <span class="keyword">if</span> all characters <span class="keyword">in</span> S are alphabetic</span><br><span class="line">     |      <span class="keyword">and</span> there <span class="keyword">is</span> at least one character <span class="keyword">in</span> S, <span class="literal">False</span> otherwise.</span><br><span class="line">     |  </span><br><span class="line">     |  isdecimal(...)</span><br><span class="line">     |      S.isdecimal() -&gt; bool</span><br><span class="line">     |      </span><br><span class="line">     |      Return <span class="literal">True</span> <span class="keyword">if</span> there are only decimal characters <span class="keyword">in</span> S,</span><br><span class="line">     |      <span class="literal">False</span> otherwise.</span><br><span class="line">     |  </span><br><span class="line">     |  isdigit(...)</span><br><span class="line">     |      S.isdigit() -&gt; bool</span><br><span class="line">     |      </span><br><span class="line">     |      Return <span class="literal">True</span> <span class="keyword">if</span> all characters <span class="keyword">in</span> S are digits</span><br><span class="line">     |      <span class="keyword">and</span> there <span class="keyword">is</span> at least one character <span class="keyword">in</span> S, <span class="literal">False</span> otherwise.</span><br><span class="line">     |  </span><br><span class="line">     |  isidentifier(...)</span><br><span class="line">     |      S.isidentifier() -&gt; bool</span><br><span class="line">     |      </span><br><span class="line">     |      Return <span class="literal">True</span> <span class="keyword">if</span> S <span class="keyword">is</span> a valid identifier according</span><br><span class="line">     |      to the language definition.</span><br><span class="line">     |      </span><br><span class="line">     |      Use keyword.iskeyword() to test <span class="keyword">for</span> reserved identifiers</span><br><span class="line">     |      such <span class="keyword">as</span> <span class="string">"def"</span> <span class="keyword">and</span> <span class="string">"class"</span>.</span><br><span class="line">     |  </span><br><span class="line">     |  islower(...)</span><br><span class="line">     |      S.islower() -&gt; bool</span><br><span class="line">     |      </span><br><span class="line">     |      Return <span class="literal">True</span> <span class="keyword">if</span> all cased characters <span class="keyword">in</span> S are lowercase <span class="keyword">and</span> there <span class="keyword">is</span></span><br><span class="line">     |      at least one cased character <span class="keyword">in</span> S, <span class="literal">False</span> otherwise.</span><br><span class="line">     |  </span><br><span class="line">     |  isnumeric(...)</span><br><span class="line">     |      S.isnumeric() -&gt; bool</span><br><span class="line">     |      </span><br><span class="line">     |      Return <span class="literal">True</span> <span class="keyword">if</span> there are only numeric characters <span class="keyword">in</span> S,</span><br><span class="line">     |      <span class="literal">False</span> otherwise.</span><br><span class="line">     |  </span><br><span class="line">     |  isprintable(...)</span><br><span class="line">     |      S.isprintable() -&gt; bool</span><br><span class="line">     |      </span><br><span class="line">     |      Return <span class="literal">True</span> <span class="keyword">if</span> all characters <span class="keyword">in</span> S are considered</span><br><span class="line">     |      printable <span class="keyword">in</span> repr() <span class="keyword">or</span> S <span class="keyword">is</span> empty, <span class="literal">False</span> otherwise.</span><br><span class="line">     |  </span><br><span class="line">     |  isspace(...)</span><br><span class="line">     |      S.isspace() -&gt; bool</span><br><span class="line">     |      </span><br><span class="line">     |      Return <span class="literal">True</span> <span class="keyword">if</span> all characters <span class="keyword">in</span> S are whitespace</span><br><span class="line">     |      <span class="keyword">and</span> there <span class="keyword">is</span> at least one character <span class="keyword">in</span> S, <span class="literal">False</span> otherwise.</span><br><span class="line">     |  </span><br><span class="line">     |  istitle(...)</span><br><span class="line">     |      S.istitle() -&gt; bool</span><br><span class="line">     |      </span><br><span class="line">     |      Return <span class="literal">True</span> <span class="keyword">if</span> S <span class="keyword">is</span> a titlecased string <span class="keyword">and</span> there <span class="keyword">is</span> at least one</span><br><span class="line">     |      character <span class="keyword">in</span> S, i.e. upper- <span class="keyword">and</span> titlecase characters may only</span><br><span class="line">     |      follow uncased characters <span class="keyword">and</span> lowercase characters only cased ones.</span><br><span class="line">     |      Return <span class="literal">False</span> otherwise.</span><br><span class="line">     |  </span><br><span class="line">     |  isupper(...)</span><br><span class="line">     |      S.isupper() -&gt; bool</span><br><span class="line">     |      </span><br><span class="line">     |      Return <span class="literal">True</span> <span class="keyword">if</span> all cased characters <span class="keyword">in</span> S are uppercase <span class="keyword">and</span> there <span class="keyword">is</span></span><br><span class="line">     |      at least one cased character <span class="keyword">in</span> S, <span class="literal">False</span> otherwise.</span><br><span class="line">     |  </span><br><span class="line">     |  join(...)</span><br><span class="line">     |      S.join(iterable) -&gt; str</span><br><span class="line">     |      </span><br><span class="line">     |      Return a string which <span class="keyword">is</span> the concatenation of the strings <span class="keyword">in</span> the</span><br><span class="line">     |      iterable.  The separator between elements <span class="keyword">is</span> S.</span><br><span class="line">     |  </span><br><span class="line">     |  ljust(...)</span><br><span class="line">     |      S.ljust(width[, fillchar]) -&gt; str</span><br><span class="line">     |      </span><br><span class="line">     |      Return S left-justified <span class="keyword">in</span> a Unicode string of length width. Padding <span class="keyword">is</span></span><br><span class="line">     |      done using the specified fill character (default <span class="keyword">is</span> a space).</span><br><span class="line">     |  </span><br><span class="line">     |  lower(...)</span><br><span class="line">     |      S.lower() -&gt; str</span><br><span class="line">     |      </span><br><span class="line">     |      Return a copy of the string S converted to lowercase.</span><br><span class="line">     |  </span><br><span class="line">     |  lstrip(...)</span><br><span class="line">     |      S.lstrip([chars]) -&gt; str</span><br><span class="line">     |      </span><br><span class="line">     |      Return a copy of the string S <span class="keyword">with</span> leading whitespace removed.</span><br><span class="line">     |      If chars <span class="keyword">is</span> given <span class="keyword">and</span> <span class="keyword">not</span> <span class="literal">None</span>, remove characters <span class="keyword">in</span> chars instead.</span><br><span class="line">     |  </span><br><span class="line">     |  partition(...)</span><br><span class="line">     |      S.partition(sep) -&gt; (head, sep, tail)</span><br><span class="line">     |      </span><br><span class="line">     |      Search <span class="keyword">for</span> the separator sep <span class="keyword">in</span> S, <span class="keyword">and</span> <span class="keyword">return</span> the part before it,</span><br><span class="line">     |      the separator itself, <span class="keyword">and</span> the part after it.  If the separator <span class="keyword">is</span> <span class="keyword">not</span></span><br><span class="line">     |      found, <span class="keyword">return</span> S <span class="keyword">and</span> two empty strings.</span><br><span class="line">     |  </span><br><span class="line">     |  replace(...)</span><br><span class="line">     |      S.replace(old, new[, count]) -&gt; str</span><br><span class="line">     |      </span><br><span class="line">     |      Return a copy of S <span class="keyword">with</span> all occurrences of substring</span><br><span class="line">     |      old replaced by new.  If the optional argument count <span class="keyword">is</span></span><br><span class="line">     |      given, only the first count occurrences are replaced.</span><br><span class="line">     |  </span><br><span class="line">     |  rfind(...)</span><br><span class="line">     |      S.rfind(sub[, start[, end]]) -&gt; int</span><br><span class="line">     |      </span><br><span class="line">     |      Return the highest index <span class="keyword">in</span> S where substring sub <span class="keyword">is</span> found,</span><br><span class="line">     |      such that sub <span class="keyword">is</span> contained within S[start:end].  Optional</span><br><span class="line">     |      arguments start <span class="keyword">and</span> end are interpreted <span class="keyword">as</span> <span class="keyword">in</span> slice notation.</span><br><span class="line">     |      </span><br><span class="line">     |      Return <span class="number">-1</span> on failure.</span><br><span class="line">     |  </span><br><span class="line">     |  rindex(...)</span><br><span class="line">     |      S.rindex(sub[, start[, end]]) -&gt; int</span><br><span class="line">     |      </span><br><span class="line">     |      Return the highest index <span class="keyword">in</span> S where substring sub <span class="keyword">is</span> found,</span><br><span class="line">     |      such that sub <span class="keyword">is</span> contained within S[start:end].  Optional</span><br><span class="line">     |      arguments start <span class="keyword">and</span> end are interpreted <span class="keyword">as</span> <span class="keyword">in</span> slice notation.</span><br><span class="line">     |      </span><br><span class="line">     |      Raises ValueError when the substring <span class="keyword">is</span> <span class="keyword">not</span> found.</span><br><span class="line">     |  </span><br><span class="line">     |  rjust(...)</span><br><span class="line">     |      S.rjust(width[, fillchar]) -&gt; str</span><br><span class="line">     |      </span><br><span class="line">     |      Return S right-justified <span class="keyword">in</span> a string of length width. Padding <span class="keyword">is</span></span><br><span class="line">     |      done using the specified fill character (default <span class="keyword">is</span> a space).</span><br><span class="line">     |  </span><br><span class="line">     |  rpartition(...)</span><br><span class="line">     |      S.rpartition(sep) -&gt; (head, sep, tail)</span><br><span class="line">     |      </span><br><span class="line">     |      Search <span class="keyword">for</span> the separator sep <span class="keyword">in</span> S, starting at the end of S, <span class="keyword">and</span> <span class="keyword">return</span></span><br><span class="line">     |      the part before it, the separator itself, <span class="keyword">and</span> the part after it.  If the</span><br><span class="line">     |      separator <span class="keyword">is</span> <span class="keyword">not</span> found, <span class="keyword">return</span> two empty strings <span class="keyword">and</span> S.</span><br><span class="line">     |  </span><br><span class="line">     |  rsplit(...)</span><br><span class="line">     |      S.rsplit(sep=None, maxsplit=-1) -&gt; list of strings</span><br><span class="line">     |      </span><br><span class="line">     |      Return a list of the words <span class="keyword">in</span> S, using sep <span class="keyword">as</span> the</span><br><span class="line">     |      delimiter string, starting at the end of the string <span class="keyword">and</span></span><br><span class="line">     |      working to the front.  If maxsplit <span class="keyword">is</span> given, at most maxsplit</span><br><span class="line">     |      splits are done. If sep <span class="keyword">is</span> <span class="keyword">not</span> specified, any whitespace string</span><br><span class="line">     |      <span class="keyword">is</span> a separator.</span><br><span class="line">     |  </span><br><span class="line">     |  rstrip(...)</span><br><span class="line">     |      S.rstrip([chars]) -&gt; str</span><br><span class="line">     |      </span><br><span class="line">     |      Return a copy of the string S <span class="keyword">with</span> trailing whitespace removed.</span><br><span class="line">     |      If chars <span class="keyword">is</span> given <span class="keyword">and</span> <span class="keyword">not</span> <span class="literal">None</span>, remove characters <span class="keyword">in</span> chars instead.</span><br><span class="line">     |  </span><br><span class="line">     |  split(...)</span><br><span class="line">     |      S.split(sep=None, maxsplit=-1) -&gt; list of strings</span><br><span class="line">     |      </span><br><span class="line">     |      Return a list of the words <span class="keyword">in</span> S, using sep <span class="keyword">as</span> the</span><br><span class="line">     |      delimiter string.  If maxsplit <span class="keyword">is</span> given, at most maxsplit</span><br><span class="line">     |      splits are done. If sep <span class="keyword">is</span> <span class="keyword">not</span> specified <span class="keyword">or</span> <span class="keyword">is</span> <span class="literal">None</span>, any</span><br><span class="line">     |      whitespace string <span class="keyword">is</span> a separator <span class="keyword">and</span> empty strings are</span><br><span class="line">     |      removed <span class="keyword">from</span> the result.</span><br><span class="line">     |  </span><br><span class="line">     |  splitlines(...)</span><br><span class="line">     |      S.splitlines([keepends]) -&gt; list of strings</span><br><span class="line">     |      </span><br><span class="line">     |      Return a list of the lines <span class="keyword">in</span> S, breaking at line boundaries.</span><br><span class="line">     |      Line breaks are <span class="keyword">not</span> included <span class="keyword">in</span> the resulting list unless keepends</span><br><span class="line">     |      <span class="keyword">is</span> given <span class="keyword">and</span> true.</span><br><span class="line">     |  </span><br><span class="line">     |  startswith(...)</span><br><span class="line">     |      S.startswith(prefix[, start[, end]]) -&gt; bool</span><br><span class="line">     |      </span><br><span class="line">     |      Return <span class="literal">True</span> <span class="keyword">if</span> S starts <span class="keyword">with</span> the specified prefix, <span class="literal">False</span> otherwise.</span><br><span class="line">     |      With optional start, test S beginning at that position.</span><br><span class="line">     |      With optional end, stop comparing S at that position.</span><br><span class="line">     |      prefix can also be a tuple of strings to <span class="keyword">try</span>.</span><br><span class="line">     |  </span><br><span class="line">     |  strip(...)</span><br><span class="line">     |      S.strip([chars]) -&gt; str</span><br><span class="line">     |      </span><br><span class="line">     |      Return a copy of the string S <span class="keyword">with</span> leading <span class="keyword">and</span> trailing</span><br><span class="line">     |      whitespace removed.</span><br><span class="line">     |      If chars <span class="keyword">is</span> given <span class="keyword">and</span> <span class="keyword">not</span> <span class="literal">None</span>, remove characters <span class="keyword">in</span> chars instead.</span><br><span class="line">     |  </span><br><span class="line">     |  swapcase(...)</span><br><span class="line">     |      S.swapcase() -&gt; str</span><br><span class="line">     |      </span><br><span class="line">     |      Return a copy of S <span class="keyword">with</span> uppercase characters converted to lowercase</span><br><span class="line">     |      <span class="keyword">and</span> vice versa.</span><br><span class="line">     |  </span><br><span class="line">     |  title(...)</span><br><span class="line">     |      S.title() -&gt; str</span><br><span class="line">     |      </span><br><span class="line">     |      Return a titlecased version of S, i.e. words start <span class="keyword">with</span> title case</span><br><span class="line">     |      characters, all remaining cased characters have lower case.</span><br><span class="line">     |  </span><br><span class="line">     |  translate(...)</span><br><span class="line">     |      S.translate(table) -&gt; str</span><br><span class="line">     |      </span><br><span class="line">     |      Return a copy of the string S <span class="keyword">in</span> which each character has been mapped</span><br><span class="line">     |      through the given translation table. The table must implement</span><br><span class="line">     |      lookup/indexing via __getitem__, <span class="keyword">for</span> instance a dictionary <span class="keyword">or</span> list,</span><br><span class="line">     |      mapping Unicode ordinals to Unicode ordinals, strings, <span class="keyword">or</span> <span class="literal">None</span>. If</span><br><span class="line">     |      this operation raises LookupError, the character <span class="keyword">is</span> left untouched.</span><br><span class="line">     |      Characters mapped to <span class="literal">None</span> are deleted.</span><br><span class="line">     |  </span><br><span class="line">     |  upper(...)</span><br><span class="line">     |      S.upper() -&gt; str</span><br><span class="line">     |      </span><br><span class="line">     |      Return a copy of S converted to uppercase.</span><br><span class="line">     |  </span><br><span class="line">     |  zfill(...)</span><br><span class="line">     |      S.zfill(width) -&gt; str</span><br><span class="line">     |      </span><br><span class="line">     |      Pad a numeric string S <span class="keyword">with</span> zeros on the left, to fill a field</span><br><span class="line">     |      of the specified width. The string S <span class="keyword">is</span> never truncated.</span><br><span class="line">     |  </span><br><span class="line">     |  ----------------------------------------------------------------------</span><br><span class="line">     |  Static methods defined here:</span><br><span class="line">     |  </span><br><span class="line">     |  maketrans(x, y=<span class="literal">None</span>, z=<span class="literal">None</span>, /)</span><br><span class="line">     |      Return a translation table usable <span class="keyword">for</span> str.translate().</span><br><span class="line">     |      </span><br><span class="line">     |      If there <span class="keyword">is</span> only one argument, it must be a dictionary mapping Unicode</span><br><span class="line">     |      ordinals (integers) <span class="keyword">or</span> characters to Unicode ordinals, strings <span class="keyword">or</span> <span class="literal">None</span>.</span><br><span class="line">     |      Character keys will be then converted to ordinals.</span><br><span class="line">     |      If there are two arguments, they must be strings of equal length, <span class="keyword">and</span></span><br><span class="line">     |      <span class="keyword">in</span> the resulting dictionary, each character <span class="keyword">in</span> x will be mapped to the</span><br><span class="line">     |      character at the same position <span class="keyword">in</span> y. If there <span class="keyword">is</span> a third argument, it</span><br><span class="line">     |      must be a string, whose characters will be mapped to <span class="literal">None</span> <span class="keyword">in</span> the result.</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"><span class="comment">#### (2) 判断字符串</span></span><br><span class="line">- islower/isupper</span><br><span class="line">        - 判断字符串是否全是大写小写</span><br><span class="line">- isdigit</span><br><span class="line">        - 判断字符串是否全是数字</span><br><span class="line">- isalpha</span><br><span class="line">        - 判断是否全是英文字母</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">```python</span><br><span class="line">w = <span class="string">"XDFGHJ"</span></span><br><span class="line">w.isupper()</span><br></pre></td></tr></table></figure>




<pre><code>True</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">w = <span class="string">"asdfgh"</span></span><br><span class="line">w.islower()</span><br></pre></td></tr></table></figure>




<pre><code>True</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">w = <span class="string">"123467"</span></span><br><span class="line">w.isdigit()</span><br></pre></td></tr></table></figure>




<pre><code>True</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">w = <span class="string">"AaSs"</span></span><br><span class="line">w.isalpha()</span><br></pre></td></tr></table></figure>




<pre><code>True</code></pre><h4 id="（3）操作字符串"><a href="#（3）操作字符串" class="headerlink" title="（3）操作字符串"></a>（3）操作字符串</h4><ul>
<li>lower/upper<ul>
<li>将字符串转换为小写、大写</li>
</ul>
</li>
<li>strip/lstrip/rstrip<ul>
<li>去掉字符串最左和最右的空格/去掉最左的空格/去掉最右的空格</li>
</ul>
</li>
<li>swapcase<ul>
<li>交换大小写</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">w = <span class="string">"AS DD"</span></span><br><span class="line">w1 = w.lower()</span><br><span class="line">w2 = w1.upper()</span><br><span class="line">print(w1)</span><br><span class="line">print(w2)</span><br></pre></td></tr></table></figure>

<pre><code>as dd
AS DD</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 交换大小写</span></span><br><span class="line">w = <span class="string">"AS bbbbbbb"</span></span><br><span class="line">w.swapcase()</span><br></pre></td></tr></table></figure>




<pre><code>&apos;as BBBBBBB&apos;</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">w = <span class="string">"  .   123,wehdjahsk   .   "</span></span><br><span class="line">w1 = w.strip()</span><br><span class="line">w2 = w.lstrip()</span><br><span class="line">w3 = w.rstrip()</span><br><span class="line">print(w1)</span><br><span class="line">print(w2)</span><br><span class="line">print(w3)</span><br></pre></td></tr></table></figure>

<pre><code>.   123,wehdjahsk   .
.   123,wehdjahsk   .   
  .   123,wehdjahsk   .</code></pre><h4 id="4-字符串的格式化"><a href="#4-字符串的格式化" class="headerlink" title="(4)字符串的格式化"></a>(4)字符串的格式化</h4><ul>
<li>%</li>
<li>format</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">w = <span class="string">"My name is Inno and my age is 19,my height is 172"</span></span><br><span class="line"><span class="comment">#格式化</span></span><br><span class="line">s = <span class="string">"My name ia %s and my age is %d,my height is %d"</span> % (<span class="string">"Inno"</span>,<span class="number">19</span>,<span class="number">172</span>)</span><br><span class="line">print(w)</span><br><span class="line">print(s)</span><br></pre></td></tr></table></figure>

<pre><code>My name is Inno and my age is 19,my height is 172
My name ia Inno and my age is 19,my height is 172</code></pre><ul>
<li>用%进行格式化<ul>
<li>%d 整形数</li>
<li>%f 浮点数</li>
<li>%s 字符</li>
</ul>
</li>
<li>当替换只有一个时，后面括号可省略</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">s = <span class="string">"I don\'t have %f"</span> % <span class="number">5.55</span></span><br><span class="line">print(s)</span><br></pre></td></tr></table></figure>

<pre><code>I don&apos;t have 5.550000</code></pre><ul>
<li>对小数位数进行限制   .xf<ul>
<li>要替换的参数数量与后面括号中参数对应</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 对小数位数进行限制   .xf</span></span><br><span class="line">s = <span class="string">"I don\'t have %.1f"</span> % <span class="number">5.55</span></span><br><span class="line">print(s)</span><br></pre></td></tr></table></figure>

<pre><code>I don&apos;t have 5.5</code></pre><ul>
<li>如果想要输出%，只要字符串后面不跟% （）就行</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">s = <span class="string">"这是%100会出现%"</span></span><br><span class="line">print(s)</span><br></pre></td></tr></table></figure>

<pre><code>这是%100会出现%</code></pre><h4 id="占位符的种类"><a href="#占位符的种类" class="headerlink" title="占位符的种类"></a>占位符的种类</h4><ul>
<li>%s 字符串</li>
<li>%r 字符串，但是是使用repr而不是str</li>
<li>%c 整数转换为单个字符</li>
<li>%d 十进制整数</li>
<li>%u 无符号整数</li>
<li>%o 八进制整数</li>
<li>%x %X 十六进制</li>
<li>%e %E 科学计数法浮点数，如2.35e5  7.89898E19</li>
<li>%f %F 浮点数十进制形式</li>
<li>%g %G 十进制浮点数或指数浮点数自动转换</li>
<li>格式字符前出现 - 表示左对齐</li>
<li>格式字符前出现 0 表示高位不足用0补齐</li>
<li>width表示宽度</li>
<li>pricision表示精度</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">s = <span class="number">2.35E+12</span></span><br><span class="line">print(s)</span><br></pre></td></tr></table></figure>

<pre><code>2350000000000.0</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 左对齐，右对齐，0补全</span></span><br><span class="line">s = <span class="string">"you are%7dage"</span> % <span class="number">16</span></span><br><span class="line">print(s)</span><br><span class="line">w = <span class="string">"you are%-7dage"</span> % <span class="number">16</span></span><br><span class="line">print(w)</span><br><span class="line"></span><br><span class="line">h = <span class="string">"you are%07dage"</span> % <span class="number">16</span></span><br><span class="line"></span><br><span class="line">print(h)</span><br></pre></td></tr></table></figure>

<pre><code>you are     16age
you are16     age
you are0000016age</code></pre><h3 id="bool类型"><a href="#bool类型" class="headerlink" title="bool类型"></a>bool类型</h3><ul>
<li>True/False</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">3</span> &gt; <span class="number">4</span></span><br></pre></td></tr></table></figure>




<pre><code>False</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure>




<pre><code>True</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">b = <span class="literal">False</span></span><br><span class="line">b</span><br></pre></td></tr></table></figure>




<pre><code>False</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 字符可直接比较</span></span><br><span class="line"><span class="string">"H"</span> &gt; <span class="string">"A"</span></span><br></pre></td></tr></table></figure>




<pre><code>True</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">"haha"</span> &gt; <span class="string">"kkkk"</span></span><br></pre></td></tr></table></figure>




<pre><code>False</code></pre><ul>
<li>bool类型作为数字参与运算，表示1</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># bool类型作为数字参与运算，表示1</span></span><br><span class="line"><span class="literal">True</span> * <span class="number">3</span></span><br></pre></td></tr></table></figure>




<pre><code>3</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="literal">True</span> + <span class="number">8</span></span><br></pre></td></tr></table></figure>




<pre><code>9</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="literal">True</span> * <span class="number">0</span></span><br></pre></td></tr></table></figure>




<pre><code>0</code></pre><ul>
<li>数字作为判断，非0都为True</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="number">6</span>:</span><br><span class="line">    print(<span class="string">"True"</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">"False"</span>)</span><br></pre></td></tr></table></figure>

<pre><code>True</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="number">4</span>&gt;<span class="number">5</span>):</span><br><span class="line">    print(<span class="string">"True"</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">"False"</span>)</span><br></pre></td></tr></table></figure>

<pre><code>False</code></pre><h3 id="None"><a href="#None" class="headerlink" title="None"></a>None</h3><ul>
<li>一个特殊的常量</li>
<li>不表示任何类型，用来占位或者解除变量绑定，None与任何类型比较返回False<ul>
<li>作用：<ul>
<li>占位</li>
<li>解除绑定</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = <span class="number">567</span></span><br><span class="line">print(a)</span><br><span class="line">a = <span class="literal">None</span></span><br><span class="line">print(a)</span><br></pre></td></tr></table></figure>

<pre><code>567
None</code></pre><ul>
<li>None与其他类型比较会报错</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = <span class="literal">None</span></span><br><span class="line">a &gt; <span class="number">8</span></span><br></pre></td></tr></table></figure>


<pre><code>---------------------------------------------------------------------------

TypeError                                 Traceback (most recent call last)

&lt;ipython-input-27-93a628a0a8a1&gt; in &lt;module&gt;()
      1 a = None
----&gt; 2 a &gt; 8


TypeError: &apos;&gt;&apos; not supported between instances of &apos;NoneType&apos; and &apos;int&apos;</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="literal">None</span> &gt; <span class="string">"L"</span></span><br></pre></td></tr></table></figure>


<pre><code>---------------------------------------------------------------------------

TypeError                                 Traceback (most recent call last)

&lt;ipython-input-28-210e6e66cd8b&gt; in &lt;module&gt;()
----&gt; 1 None &gt; &quot;L&quot;


TypeError: &apos;&gt;&apos; not supported between instances of &apos;NoneType&apos; and &apos;str&apos;</code></pre>]]></content>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>函数、return、函数参数、列表字典传入函数、函数文档</title>
    <url>/2018-08-10-python-5.html</url>
    <content><![CDATA[<p>python自学第五节<br>函数、return、函数参数、列表字典传入函数、函数文档</p>
<h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><ul>
<li>作用：<ul>
<li>代码组织</li>
<li>代码复用</li>
</ul>
</li>
<li>函数名</li>
<li>参数</li>
<li>返回值（可没有）</li>
<li>函数的定义</li>
<li>函数的调用</li>
</ul>
<a id="more"></a>

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 函数定义</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">FirstFun</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">"这是一个函数"</span>)</span><br><span class="line"><span class="comment"># 函数调用</span></span><br><span class="line">FirstFun()</span><br></pre></td></tr></table></figure>

<pre><code>这是一个函数</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">numFun</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">6</span>):</span><br><span class="line">        print(i)</span><br><span class="line">numFun()</span><br></pre></td></tr></table></figure>

<pre><code>1
2
3
4
5</code></pre><h3 id="1、函数返回，return语句"><a href="#1、函数返回，return语句" class="headerlink" title="1、函数返回，return语句"></a>1、函数返回，return语句</h3><ul>
<li>表示无条件结束函数并返回结果</li>
<li>约定，任何函数都应该以return语句表示结束；无返回值可return None</li>
</ul>
<h4 id="写一个求阶乘的函数"><a href="#写一个求阶乘的函数" class="headerlink" title="写一个求阶乘的函数"></a>写一个求阶乘的函数</h4><ul>
<li>要求键入一个大于0的数</li>
<li>返回它的阶乘值</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">getnum = int(input(<span class="string">"输入大于0的数："</span>))</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Fact</span><span class="params">(num)</span>:</span></span><br><span class="line">    w = num</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,num):</span><br><span class="line">        w *= (num-i)</span><br><span class="line">    <span class="keyword">return</span> w</span><br><span class="line">Fact(getnum)</span><br></pre></td></tr></table></figure>

<pre><code>输入大于0的数：5





120</code></pre><h3 id="2、函数的参数"><a href="#2、函数的参数" class="headerlink" title="2、函数的参数"></a>2、函数的参数</h3><ul>
<li>形参，函数定义时</li>
<li>实参，函数调用时</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Func1</span><span class="params">(yourname)</span>:</span></span><br><span class="line">    print(<span class="string">"your name is "</span> + yourname)</span><br><span class="line">Func1(<span class="string">"I"</span>)</span><br></pre></td></tr></table></figure>

<pre><code>your name is I</code></pre><ul>
<li>关键字参数</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Func2</span><span class="params">(name,food)</span>:</span></span><br><span class="line">    print(name + <span class="string">" like eat "</span> + food)</span><br><span class="line">Func2(<span class="string">"Jony"</span>,<span class="string">"fish"</span>)</span><br></pre></td></tr></table></figure>

<pre><code>Jony like eat fish</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Func2(<span class="string">"fish"</span>,<span class="string">"Jony"</span>)</span><br></pre></td></tr></table></figure>

<pre><code>fish like eat Jony</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 设置关键字参数</span></span><br><span class="line">Func2(name = <span class="string">"Jony"</span>,food = <span class="string">"fish"</span>)</span><br></pre></td></tr></table></figure>

<pre><code>Jony like eat fish</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 可换位置</span></span><br><span class="line">Func2(food = <span class="string">"fish"</span>,name = <span class="string">"Jony"</span>)</span><br></pre></td></tr></table></figure>

<pre><code>Jony like eat fish</code></pre><h3 id="3、默认参数"><a href="#3、默认参数" class="headerlink" title="3、默认参数"></a>3、默认参数</h3><ul>
<li>函数在定义时，就给参数一个默认值</li>
<li>注意：函数定义时，给某个参数默认值，其之后不能出现没有默认值的参数</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 给出一个默认参数</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Func3</span><span class="params">(score1,score2 = <span class="number">50</span>)</span>:</span></span><br><span class="line">    print(score1+score2)</span><br><span class="line"><span class="comment"># 调用时只写了一个参数，另一参数使用默认值</span></span><br><span class="line">Func3(<span class="number">10</span>)</span><br></pre></td></tr></table></figure>

<pre><code>60</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Func3(<span class="number">10</span>,<span class="number">20</span>)</span><br></pre></td></tr></table></figure>

<pre><code>30</code></pre><h3 id="4、序列参数、字典参数（即将序列，字典传入函数）"><a href="#4、序列参数、字典参数（即将序列，字典传入函数）" class="headerlink" title="4、序列参数、字典参数（即将序列，字典传入函数）"></a>4、序列参数、字典参数（即将序列，字典传入函数）</h3><ul>
<li>列表参数：所有参数作为一个列表传入<ul>
<li>在调用时列表前使用一个*号</li>
<li>列表的参数个数与函数参数个数一致</li>
</ul>
</li>
<li>字典参数：所有参数作为一个字典传入<ul>
<li>在调用时列表前使用两个**号</li>
<li>字典的参数个数与函数参数个数一致</li>
<li>字典的键与函数形参相同，键作为字符串类型</li>
<li>字典的值传给键所对应的形参</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">myFunc</span><span class="params">(a,b,c)</span>:</span></span><br><span class="line">    print(<span class="string">"Value of a is %s"</span> %a)</span><br><span class="line">    print(<span class="string">"Value of b is %s"</span> %b)</span><br><span class="line">    print(<span class="string">"Value of c is %s"</span> %c)</span><br><span class="line">L1 = [<span class="string">"one"</span>,<span class="string">"two"</span>,<span class="string">"three"</span>]</span><br><span class="line"><span class="comment"># 在调用时列表前使用一个*号</span></span><br><span class="line">myFunc(*L1)</span><br></pre></td></tr></table></figure>

<pre><code>Value of a is one
Value of b is two
Value of c is three</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">L2 = &#123;<span class="string">"a"</span>:<span class="string">"one"</span>,<span class="string">"b"</span>:<span class="string">"two"</span>,<span class="string">"c"</span>:<span class="string">"three"</span>&#125;</span><br><span class="line"><span class="comment"># 使用两个*号</span></span><br><span class="line">myFunc(**L2)</span><br></pre></td></tr></table></figure>

<pre><code>Value of a is one
Value of b is two
Value of c is three</code></pre><h3 id="5、星号元组参数"><a href="#5、星号元组参数" class="headerlink" title="5、星号元组参数"></a>5、星号元组参数</h3><ul>
<li>星号元组参数</li>
<li>语法：<ul>
<li>def 函数名(*元组形参):<br>   语句块</li>
</ul>
</li>
<li>含义： *元组形参相当于将参数设置成列表<ul>
<li>形参可以任意个数</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Lfunc</span><span class="params">(*arg)</span>:</span></span><br><span class="line">    print(<span class="string">"进入元组参数"</span>)</span><br><span class="line">    print(arg)</span><br><span class="line"><span class="comment"># 不给参数代表列表为空</span></span><br><span class="line">Lfunc()</span><br></pre></td></tr></table></figure>

<pre><code>进入元组参数
()</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 可放多个参数</span></span><br><span class="line">Lfunc(<span class="string">"1"</span>,<span class="string">"2"</span>,<span class="string">"3"</span>)</span><br></pre></td></tr></table></figure>

<pre><code>进入元组参数
(&apos;1&apos;, &apos;2&apos;, &apos;3&apos;)</code></pre><h3 id="6、双星号字典参数"><a href="#6、双星号字典参数" class="headerlink" title="6、双星号字典参数"></a>6、双星号字典参数</h3><ul>
<li>语法：<ul>
<li>def 函数名(**元组参数):<br>   函数体</li>
</ul>
</li>
<li>**函数名 代表的是字典</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">DiFun</span><span class="params">(**args)</span>:</span></span><br><span class="line">    print(<span class="string">"进入字典"</span>)</span><br><span class="line">    print(args)</span><br><span class="line">DiFun()</span><br></pre></td></tr></table></figure>

<pre><code>进入字典
{}</code></pre><ul>
<li>双星号字典参数，调用时必须按照字典的格式；有”键”和”值”</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">DiFun(a=<span class="string">"one"</span>,b=<span class="string">"two"</span>,c=<span class="string">"three"</span>)</span><br></pre></td></tr></table></figure>

<pre><code>进入字典
{&apos;a&apos;: &apos;one&apos;, &apos;b&apos;: &apos;two&apos;, &apos;c&apos;: &apos;three&apos;}</code></pre><h3 id="7、单星号元组参数与双星号字典参数都叫做-不定长参数"><a href="#7、单星号元组参数与双星号字典参数都叫做-不定长参数" class="headerlink" title="7、单星号元组参数与双星号字典参数都叫做 不定长参数"></a>7、单星号元组参数与双星号字典参数都叫做 不定长参数</h3><ul>
<li>说明：<ul>
<li>位置形参，单星号元组形参，双星号字典形参可以混用</li>
<li>混用时，顺序必须是：位置形参，单星号元组形参，双星号字典形参</li>
</ul>
</li>
</ul>
<h3 id="8、函数返回值"><a href="#8、函数返回值" class="headerlink" title="8、函数返回值"></a>8、函数返回值</h3><ul>
<li>一般需要返回值，使用return</li>
<li>函数的类型就是返回值的类型</li>
<li>可以没有return，不建议去掉</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Fun1</span><span class="params">(one)</span>:</span></span><br><span class="line">    print(<span class="string">"skr skr skr!!!"</span>)</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">Fun1(<span class="number">999</span>)</span><br></pre></td></tr></table></figure>

<pre><code>skr skr skr!!!</code></pre><ul>
<li>有return无返回值时，返回None</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">w = Fun1(<span class="number">999</span>)</span><br><span class="line">print(w)</span><br></pre></td></tr></table></figure>

<pre><code>skr skr skr!!!
None</code></pre><ul>
<li>没有return时，返回值也为None</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">SecFun</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">"第二个 skr,没有return"</span>)</span><br><span class="line">w = SecFun()</span><br><span class="line">print(w)</span><br></pre></td></tr></table></figure>

<pre><code>第二个 skr,没有return
None</code></pre><ul>
<li>返回值为多个的用法<ul>
<li>当函数有多个返回值却给它一个存储变量时，自动将其打包为tuple类型</li>
<li>可以将多个返回值赋值给对应个数的变量</li>
<li>所以多个返回值只能打包成一个tuple或者与其对应数量的变量</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">nFunc</span><span class="params">(one,two)</span>:</span></span><br><span class="line">    one += <span class="number">10</span></span><br><span class="line">    two *= <span class="number">3</span></span><br><span class="line">    three = one + two</span><br><span class="line">    <span class="keyword">return</span> one,two,three</span><br><span class="line">a = nFunc(<span class="number">2</span>,<span class="number">4</span>)</span><br><span class="line">print(a)</span><br><span class="line">type(a)</span><br></pre></td></tr></table></figure>

<pre><code>(12, 12, 24)





tuple</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">o,t,h = nFunc(<span class="number">2</span>,<span class="number">4</span>)</span><br><span class="line">print(o,t,h)</span><br></pre></td></tr></table></figure>

<pre><code>12 12 24</code></pre><h3 id="9、函数文档"><a href="#9、函数文档" class="headerlink" title="9、函数文档"></a>9、函数文档</h3><ul>
<li>函数文档值在函数开头起一定说明的文字</li>
<li>例子如下：</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Sum</span><span class="params">(one,two)</span>:</span></span><br><span class="line">    <span class="string">'''这是函数文档，解释函数的作用</span></span><br><span class="line"><span class="string">    这个函数是用来求one到two值的求和'''</span></span><br><span class="line">    three = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(one,two + <span class="number">1</span>):</span><br><span class="line">        three += i</span><br><span class="line">    <span class="keyword">return</span> three</span><br><span class="line">Sum(<span class="number">100</span>,<span class="number">150</span>)</span><br></pre></td></tr></table></figure>




<pre><code>6375</code></pre><ul>
<li>查看函数文档可用； 函数.<strong>doc</strong>  doc两边是两个下划线</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Sum.__doc__</span><br></pre></td></tr></table></figure>




<pre><code>&apos;这是函数文档，解释函数的作用\n    这个函数是用来求one到two值的求和&apos;</code></pre><ul>
<li>可使用help来查询某个函数的函数文档</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">help(Sum)</span><br></pre></td></tr></table></figure>

<pre><code>Help on function Sum in module __main__:

Sum(one, two)
    这是函数文档，解释函数的作用
    这个函数是用来求one到two值的求和</code></pre>]]></content>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>程序结构、分支语句、条件、列表、循环</title>
    <url>/2018-08-10-python-4.html</url>
    <content><![CDATA[<p>python自学第四节<br>程序结构、分支语句、条件、列表、循环</p>
<h2 id="程序结构"><a href="#程序结构" class="headerlink" title="程序结构"></a>程序结构</h2><ul>
<li>程序结构只需要由三种构成： 程序=顺序+分支+循环</li>
<li>顺序</li>
<li>分支：即选择条件</li>
<li>循环</li>
</ul>
<h3 id="1、条件语句"><a href="#1、条件语句" class="headerlink" title="1、条件语句"></a>1、条件语句</h3><ul>
<li>语法如下：<pre><code>if (条件表达式)：
    程序处理模块</code></pre></li>
<li>python用缩进来表示代码层级关系<ul>
<li>python2空格和tab可混用</li>
<li>python3不能混用</li>
</ul>
</li>
</ul>
<a id="more"></a>

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="number">1</span>):</span><br><span class="line">    print(<span class="string">"True"</span>)</span><br></pre></td></tr></table></figure>

<pre><code>True</code></pre><ul>
<li>在python中  pass语句，占位，不执行任何语句，不起任何作用</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="number">5</span> &gt; <span class="number">3</span>):</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>

<h4 id="练习：判断学生成绩的等级"><a href="#练习：判断学生成绩的等级" class="headerlink" title="练习：判断学生成绩的等级"></a>练习：判断学生成绩的等级</h4><ul>
<li>90及以上为A</li>
<li>80-90为B</li>
<li>70-80为C</li>
<li>60-70为D</li>
<li>其余为E</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">score = input(<span class="string">"键入学生成绩："</span>)</span><br><span class="line">score1 = int(score)   <span class="comment">#input键入的是字符，这里强转为整型</span></span><br><span class="line"><span class="keyword">if</span> (score1 &gt;= <span class="number">90</span> ):</span><br><span class="line">    print(<span class="string">"A"</span>)</span><br><span class="line"><span class="keyword">if</span> (score1 &gt;= <span class="number">80</span> <span class="keyword">and</span> score1 &lt; <span class="number">90</span>):</span><br><span class="line">    print(<span class="string">"B"</span>)</span><br><span class="line"><span class="keyword">if</span> (score1 &gt;= <span class="number">70</span> <span class="keyword">and</span> score1 &lt; <span class="number">80</span>):</span><br><span class="line">    print(<span class="string">"C"</span>)</span><br><span class="line"><span class="keyword">if</span> (score1 &gt;= <span class="number">60</span> <span class="keyword">and</span> score1 &lt; <span class="number">70</span>):</span><br><span class="line">    print(<span class="string">"D"</span>)</span><br><span class="line"><span class="keyword">if</span> (score1 &lt; <span class="number">60</span>):</span><br><span class="line">    print(<span class="string">"E"</span>)</span><br></pre></td></tr></table></figure>

<pre><code>键入学生成绩：70
C</code></pre><h3 id="if…else"><a href="#if…else" class="headerlink" title="if…else"></a>if…else</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 60分以上及格，60分以下重考，90分以上为优，70-90为良；60-70为中；20-60为差；20分以下：请到老师办公室</span></span><br><span class="line">score = input(<span class="string">"输入成绩："</span>)</span><br><span class="line">score = int(score)</span><br><span class="line"><span class="keyword">if</span> (score &gt;<span class="number">60</span>):</span><br><span class="line">    print(<span class="string">"及格"</span>)</span><br><span class="line">    <span class="keyword">if</span> (score &gt; <span class="number">90</span>):</span><br><span class="line">        print(<span class="string">"优"</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">if</span> (score &gt; <span class="number">70</span>):</span><br><span class="line">            print(<span class="string">"良"</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            print(<span class="string">"中"</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">"重考"</span>)</span><br><span class="line">    <span class="keyword">if</span> (score &gt; <span class="number">20</span>):</span><br><span class="line">        print(<span class="string">"差"</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        print(<span class="string">"请到老师办公室"</span>)</span><br></pre></td></tr></table></figure>

<pre><code>输入成绩：99
及格
优</code></pre><h3 id="2、三元运算符"><a href="#2、三元运算符" class="headerlink" title="2、三元运算符"></a>2、三元运算符</h3><ul>
<li>语法： x if 条件 else y</li>
<li>表示如果条件成立则输出x；否则输出y</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">"优秀"</span> <span class="keyword">if</span> <span class="number">2</span>&gt;<span class="number">1</span> <span class="keyword">else</span> <span class="string">"不行"</span></span><br></pre></td></tr></table></figure>




<pre><code>&apos;优秀&apos;</code></pre><h4 id="运用三元运算符求最大值"><a href="#运用三元运算符求最大值" class="headerlink" title="运用三元运算符求最大值"></a>运用三元运算符求最大值</h4><ul>
<li>a,b,c由用户输入</li>
<li>输出最大值</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = int(input(<span class="string">"输入a:"</span>))</span><br><span class="line">b = int(input(<span class="string">"输入b:"</span>))</span><br><span class="line">c = int(input(<span class="string">"输入c:"</span>))</span><br><span class="line">d = (a <span class="keyword">if</span> a&gt;b <span class="keyword">else</span> b) <span class="keyword">if</span> ((a <span class="keyword">if</span> a &gt;b <span class="keyword">else</span> b)&gt;c) <span class="keyword">else</span> c</span><br><span class="line">print(d)</span><br></pre></td></tr></table></figure>

<pre><code>输入a:23
输入b:45
输入c:11
45</code></pre><h3 id="3、列表-list"><a href="#3、列表-list" class="headerlink" title="3、列表 list"></a>3、列表 list</h3><ul>
<li>可以放数字、字符串、列表、和其他结构</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">L1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="string">"fuck shit"</span>,[<span class="number">7</span>,<span class="number">9</span>,<span class="number">11</span>]]</span><br><span class="line">print(L1)</span><br></pre></td></tr></table></figure>

<pre><code>[1, 2, 3, &apos;fuck shit&apos;, [7, 9, 11]]</code></pre><h3 id="4、range"><a href="#4、range" class="headerlink" title="4、range"></a>4、range</h3><ul>
<li>可以看成一个函数</li>
<li>产生一个有规律的有数字组成的列表</li>
<li>语法： range(start,end,step)</li>
<li>start:开始数字，生成列表包含start,默认为0；end:结束值，结果列表不包含end;</li>
<li>step:步长，默认为1</li>
<li>python2中range()生成的是列表，同时有xrange()函数，功能类似</li>
<li>python3中，生成结果是迭代器，不是列表，可粗略地认为是列表</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">L1 = range(<span class="number">1</span>,<span class="number">6</span>)</span><br><span class="line"><span class="comment">#   可看成L1 == [1,2,3,4,5]</span></span><br></pre></td></tr></table></figure>

<pre><code>range(1, 6)</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = range(<span class="number">2</span>,<span class="number">15</span>,<span class="number">4</span>)</span><br><span class="line"><span class="comment">#  可看成a == [2,6,10,14]</span></span><br></pre></td></tr></table></figure>

<h3 id="5、for循环"><a href="#5、for循环" class="headerlink" title="5、for循环"></a>5、for循环</h3><ul>
<li>一般明确循环次数</li>
<li>语法：    for i in xxx:</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">L1 = [<span class="number">5</span>,<span class="number">9</span>,<span class="number">55</span>,<span class="number">99</span>,<span class="number">77</span>,<span class="string">"fuck"</span>]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> L1:</span><br><span class="line">    print(i)</span><br></pre></td></tr></table></figure>

<pre><code>5
9
55
99
77
fuck</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = range(<span class="number">1</span>,<span class="number">100</span>,<span class="number">19</span>)</span><br><span class="line"><span class="keyword">for</span> a1 <span class="keyword">in</span> a:</span><br><span class="line">    print(a1)</span><br></pre></td></tr></table></figure>

<pre><code>1
20
39
58
77
96</code></pre><h4 id="运用循环求和"><a href="#运用循环求和" class="headerlink" title="运用循环求和"></a>运用循环求和</h4><ul>
<li>求从1加到100</li>
<li>使用range</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">L = range(<span class="number">1</span>,<span class="number">101</span>)</span><br><span class="line">mySum = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> idx <span class="keyword">in</span> L:</span><br><span class="line">    mySum += idx</span><br><span class="line">print(mySum)</span><br></pre></td></tr></table></figure>

<pre><code>5050</code></pre><h3 id="6、while循环"><a href="#6、while循环" class="headerlink" title="6、while循环"></a>6、while循环</h3><ul>
<li>不明确循环次数，却满足一定条件</li>
<li>语法；      while (条件):<pre><code>循环体</code></pre></li>
</ul>
<h4 id="示例：银行存款"><a href="#示例：银行存款" class="headerlink" title="示例：银行存款"></a>示例：银行存款</h4><ul>
<li>本金10000</li>
<li>年利率： %2.5</li>
<li>多少年总金额超过20000<ul>
<li>分析：没有明确循环次数</li>
<li>条件：总金额超过20000</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">year = <span class="number">0</span></span><br><span class="line">money = <span class="number">10000</span></span><br><span class="line">ratio = <span class="number">0.025</span></span><br><span class="line"><span class="keyword">while</span> (money &lt; <span class="number">20000</span>):</span><br><span class="line">    year += <span class="number">1</span></span><br><span class="line">    money = money + money*ratio</span><br><span class="line">print(<span class="string">"year is %d"</span> %year)</span><br></pre></td></tr></table></figure>

<pre><code>year is 29</code></pre><h4 id="累加求和"><a href="#累加求和" class="headerlink" title="累加求和"></a>累加求和</h4><ul>
<li>1-100</li>
<li>while循环</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">sum = <span class="number">0</span></span><br><span class="line">i = <span class="number">1</span></span><br><span class="line"><span class="keyword">while</span> (i &lt;= <span class="number">100</span>):</span><br><span class="line">    sum += i</span><br><span class="line">    i += <span class="number">1</span></span><br><span class="line">print(sum)</span><br></pre></td></tr></table></figure>

<pre><code>5050</code></pre><h3 id="7、-break语句"><a href="#7、-break语句" class="headerlink" title="7、 break语句"></a>7、 break语句</h3><ul>
<li>无条件终止循环，并跳出循环体</li>
</ul>
<h4 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h4><ul>
<li>在200-300中找到第一个可以被9整除的数</li>
<li>使用break</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">num = <span class="number">1</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">200</span>,<span class="number">301</span>):</span><br><span class="line">    num = i%<span class="number">9</span></span><br><span class="line">    <span class="keyword">if</span> (num == <span class="number">0</span>):</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">print(i)</span><br></pre></td></tr></table></figure>

<pre><code>207</code></pre><h4 id="对于嵌套多重循环，break跳出离他最近的循环"><a href="#对于嵌套多重循环，break跳出离他最近的循环" class="headerlink" title="对于嵌套多重循环，break跳出离他最近的循环"></a>对于嵌套多重循环，break跳出离他最近的循环</h4><h4 id="打印9-9乘法表"><a href="#打印9-9乘法表" class="headerlink" title="打印9*9乘法表"></a>打印9*9乘法表</h4><ul>
<li>要求最大值为36</li>
<li>典型 for 嵌套循环</li>
<li>break</li>
<li>调用sys模块中write可以在打印时不会换行</li>
<li>sys.stdout.write();括号内只能用字符型</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">10</span>):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">10</span>):</span><br><span class="line">        <span class="keyword">if</span> (i*j&gt;<span class="number">36</span>):</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        sys.stdout.write(str(i*j))</span><br><span class="line">        sys.stdout.write(<span class="string">" "</span>)</span><br><span class="line">    print(<span class="string">" "</span>)</span><br></pre></td></tr></table></figure>

<pre><code>1 2 3 4 5 6 7 8 9  
2 4 6 8 10 12 14 16 18  
3 6 9 12 15 18 21 24 27  
4 8 12 16 20 24 28 32 36  
5 10 15 20 25 30 35  
6 12 18 24 30 36  
7 14 21 28 35  
8 16 24 32  
9 18 27 36  </code></pre><h3 id="8、continue"><a href="#8、continue" class="headerlink" title="8、continue"></a>8、continue</h3><ul>
<li>含义：继续下一轮循环</li>
<li>当我们已经确定不需要此轮循环时使用</li>
</ul>
<h4 id="例：累加求和"><a href="#例：累加求和" class="headerlink" title="例：累加求和"></a>例：累加求和</h4><ul>
<li>当数为偶数时才求和</li>
<li>1-100</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">sum = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">101</span>):</span><br><span class="line">    <span class="keyword">if</span> (i%<span class="number">2</span> == <span class="number">1</span>):</span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line">    sum += i</span><br><span class="line">print(sum)</span><br></pre></td></tr></table></figure>

<pre><code>2550</code></pre><h4 id="例：9-9乘法表"><a href="#例：9-9乘法表" class="headerlink" title="例：9*9乘法表"></a>例：9*9乘法表</h4><ul>
<li>要求：打印值小于12的数</li>
<li>嵌套for循环</li>
<li>使用continue</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">10</span>):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">10</span>):</span><br><span class="line">        <span class="keyword">if</span> (i*j&gt;<span class="number">12</span>):</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        sys.stdout.write(str(i*j))</span><br><span class="line">        sys.stdout.write(<span class="string">" "</span>)</span><br><span class="line">    print(<span class="string">"\n"</span>)</span><br></pre></td></tr></table></figure>

<pre><code>1 2 3 4 5 6 7 8 9 

2 4 6 8 10 12 

3 6 9 12 

4 8 12 

5 10 

6 12 

7 

8 

9 </code></pre>]]></content>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>从0开始的python飞机外星人大战 (1)</title>
    <url>/2018-08-20-pygame-1.html</url>
    <content><![CDATA[<p>由于学了几天python的基础知识，意识到python作为一门语言，它的语法的简单，严格的格式；……这里是作为一个菜鸡，开始写的（抄的）一个经典的实战：飞机大战</p>
<p>下面我们开始。</p>
<h2 id="环境说明"><a href="#环境说明" class="headerlink" title="环境说明"></a>环境说明</h2><p>本文使用的是python3 + pycharm</p>
<h2 id="创建项目文件"><a href="#创建项目文件" class="headerlink" title="创建项目文件"></a>创建项目文件</h2><p>创建文件：alien_invasion,后面创建的py文件都放在这个文件下</p>
<h2 id="安装pygame包"><a href="#安装pygame包" class="headerlink" title="安装pygame包"></a>安装pygame包</h2><p>在pycharm中，file–&gt;Default settings–&gt;Project Interpreter(项目解释器)–&gt;右边的+号–&gt;搜索pygame–&gt;install</p>
<a id="more"></a>

<h2 id="新建alien-invasion-py文件；创建pygame窗口以及响应用户输入"><a href="#新建alien-invasion-py文件；创建pygame窗口以及响应用户输入" class="headerlink" title="新建alien_invasion.py文件；创建pygame窗口以及响应用户输入"></a>新建alien_invasion.py文件；创建pygame窗口以及响应用户输入</h2> <figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> pygame</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run_game</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="comment"># 初始化</span></span><br><span class="line">    pygame.init()</span><br><span class="line">    <span class="comment"># 绘制屏幕</span></span><br><span class="line">    screen = pygame.display.set_mode((<span class="number">1200</span>,<span class="number">800</span>))</span><br><span class="line">    <span class="comment"># 设置屏幕标题</span></span><br><span class="line">    pygame.display.set_caption(<span class="string">"Alien Invasion"</span>)</span><br><span class="line">    <span class="comment"># 游戏主函数</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="comment"># 获取键盘鼠标输入，设置退出</span></span><br><span class="line">        <span class="keyword">for</span> event <span class="keyword">in</span> pygame.event.get():</span><br><span class="line">            <span class="keyword">if</span> event.type == pygame.QUIT:</span><br><span class="line">                sys.exit()</span><br><span class="line">        <span class="comment"># 让绘制屏幕可见</span></span><br><span class="line">        pygame.display.flip()</span><br><span class="line">run_game()</span><br></pre></td></tr></table></figure>
<h2 id="加入背景颜色"><a href="#加入背景颜色" class="headerlink" title="加入背景颜色"></a>加入背景颜色</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line">pygame.display.set_caption(<span class="string">"Alien Invasion"</span>)</span><br><span class="line"><span class="comment"># 设置背景色，RGB</span></span><br><span class="line">bg_color = (<span class="number">230</span>,<span class="number">230</span>,<span class="number">230</span>)</span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    ...</span><br><span class="line">    <span class="comment"># 每次循环都重绘屏幕</span></span><br><span class="line">    screen.fill(bg_color)</span><br><span class="line">    pygame.display.flip()</span><br><span class="line">run_game()</span><br></pre></td></tr></table></figure>
<h2 id="创建一个设置的类"><a href="#创建一个设置的类" class="headerlink" title="创建一个设置的类"></a>创建一个设置的类</h2><p>新建一个settings.py</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Settings</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="string">"""存储外星人入侵所有设置的类"""</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.screen_width = <span class="number">1200</span></span><br><span class="line">        self.screen_heught = <span class="number">800</span></span><br><span class="line">        self.bg_corlor = (<span class="number">230</span>,<span class="number">230</span>,<span class="number">230</span>)</span><br></pre></td></tr></table></figure>
<h2 id="更改alien-invasion-py参数，完整代码如下"><a href="#更改alien-invasion-py参数，完整代码如下" class="headerlink" title="更改alien_invasion.py参数，完整代码如下"></a>更改alien_invasion.py参数，完整代码如下</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> pygame</span><br><span class="line"><span class="comment"># 导入类</span></span><br><span class="line"><span class="keyword">from</span> settings <span class="keyword">import</span> Settings</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run_game</span><span class="params">()</span>:</span></span><br><span class="line">    pygame.init()</span><br><span class="line">    <span class="comment"># 将Settings类中属性存储在ai_settings中</span></span><br><span class="line">    ai_settings = Settings()</span><br><span class="line">    <span class="comment"># 调用类中属性</span></span><br><span class="line">    screen = pygame.display.set_mode((ai_settings.screen_width,ai_settings.screen_height))</span><br><span class="line">    pygame.display.caption(<span class="string">"Alien Invasion"</span>)</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="keyword">for</span> event <span class="keyword">in</span> pygame.event.get():</span><br><span class="line">            <span class="keyword">if</span> event.type == pygame.QUIT:</span><br><span class="line">                sys.exit()</span><br><span class="line">        screen.fill(ai_settings.bg_color)</span><br><span class="line">        pygame.display.flip()</span><br><span class="line">run_game()</span><br></pre></td></tr></table></figure>
<h2 id="下载飞船图片，建立ship-py，构建Ship类"><a href="#下载飞船图片，建立ship-py，构建Ship类" class="headerlink" title="下载飞船图片，建立ship.py，构建Ship类"></a>下载飞船图片，建立ship.py，构建Ship类</h2><p>在alien_invasion下新建文件夹images，将图片放在其下（图片为位图格式，因为python能识别位图，其他格式需要安装包）</p>
<p>ship.py</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pygame</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Ship</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,screen)</span>:</span></span><br><span class="line">        <span class="string">"""初始化飞船，设置它的位置"""</span></span><br><span class="line">        <span class="comment"># 设置screen属性</span></span><br><span class="line">        self.screen = screen</span><br><span class="line">        <span class="comment"># 加载飞船图片</span></span><br><span class="line">        self.image = pygame.image.load(<span class="string">'images/ship.bmp'</span>)</span><br><span class="line">        <span class="comment"># 获取图片外接矩形和屏幕矩形</span></span><br><span class="line">        self.rect = self.image.get_rect()</span><br><span class="line">        self.screen_rect = self.screen.get_rect()</span><br><span class="line">    </span><br><span class="line">        <span class="comment"># 将飞船的位置放在屏幕底部中央</span></span><br><span class="line">        self.rect.centerx = self.screen_rect.centerx</span><br><span class="line">        self.rect.bottom = self.screen_rect.bottom</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 按指定的位置绘制飞船</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">blitme</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.screen.blit(self.image,self.rect)</span><br></pre></td></tr></table></figure>
<h2 id="在alien-invasion-py中引用Ship类来创建飞船"><a href="#在alien-invasion-py中引用Ship类来创建飞船" class="headerlink" title="在alien_invasion.py中引用Ship类来创建飞船"></a>在alien_invasion.py中引用Ship类来创建飞船</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> pygame</span><br><span class="line"><span class="comment"># 导入类</span></span><br><span class="line"><span class="keyword">from</span> settings <span class="keyword">import</span> Settings</span><br><span class="line"><span class="keyword">from</span> ship <span class="keyword">import</span> Ship</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run_game</span><span class="params">()</span>:</span></span><br><span class="line">    pygame.init()</span><br><span class="line">    <span class="comment"># 将Settings类中属性存储在ai_settings中</span></span><br><span class="line">    ai_settings = Settings()</span><br><span class="line">    <span class="comment"># 调用类中属性</span></span><br><span class="line">    screen = pygame.display.set_mode((ai_settings.screen_width,ai_settings.screen_height))</span><br><span class="line">    pygame.display.caption(<span class="string">"Alien Invasion"</span>)</span><br><span class="line">    <span class="comment"># 创建飞船</span></span><br><span class="line">    ship = Ship(screen)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="keyword">for</span> event <span class="keyword">in</span> pygame.event.get():</span><br><span class="line">            <span class="keyword">if</span> event.type == pygame.QUIT:</span><br><span class="line">                sys.exit()</span><br><span class="line">        screen.fill(ai_settings.bg_color)</span><br><span class="line">        </span><br><span class="line">        ship.blitme()</span><br><span class="line">        </span><br><span class="line">        pygame.display.flip()</span><br><span class="line">run_game()</span><br></pre></td></tr></table></figure>






]]></content>
      <tags>
        <tag>pygame</tag>
      </tags>
  </entry>
  <entry>
    <title>从0开始的python飞机外星人大战 (2)</title>
    <url>/2018-08-21-pygame-2.html</url>
    <content><![CDATA[<h2 id="重构：模块game-Function-由于每次重构都需要改alien-invasin-py，在写笔记时很麻烦，所以我这儿先重构一些，最后给出alien-invasion-py的代码"><a href="#重构：模块game-Function-由于每次重构都需要改alien-invasin-py，在写笔记时很麻烦，所以我这儿先重构一些，最后给出alien-invasion-py的代码" class="headerlink" title="重构：模块game_Function  由于每次重构都需要改alien_invasin.py，在写笔记时很麻烦，所以我这儿先重构一些，最后给出alien_invasion.py的代码"></a>重构：模块game_Function  由于每次重构都需要改alien_invasin.py，在写笔记时很麻烦，所以我这儿先重构一些，最后给出alien_invasion.py的代码</h2><h3 id="新建文件：game-Functions-py"><a href="#新建文件：game-Functions-py" class="headerlink" title="新建文件：game_Functions.py"></a>新建文件：game_Functions.py</h3><h3 id="函数check-event"><a href="#函数check-event" class="headerlink" title="函数check_event()"></a>函数check_event()</h3><h3 id="函数update-screen"><a href="#函数update-screen" class="headerlink" title="函数update_screen()"></a>函数update_screen()</h3><a id="more"></a>

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> pygame</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">check_events</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">for</span> event <span class="keyword">in</span> pygame.event.get():</span><br><span class="line">        <span class="keyword">if</span> event.type == pygame.QUIT:</span><br><span class="line">            sys.exit</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">update_screen</span><span class="params">(ai_settings,screen,ship)</span>:</span></span><br><span class="line">    <span class="string">"""更新屏幕"""</span></span><br><span class="line">    <span class="comment"># 每次循环都重绘屏幕</span></span><br><span class="line">    screen.fill(ai_settings.bg_color)</span><br><span class="line">    ship.blitme()</span><br><span class="line">    </span><br><span class="line">    pygame.display.flip()</span><br></pre></td></tr></table></figure>
<h3 id="响应按键，飞船的左右连续移动"><a href="#响应按键，飞船的左右连续移动" class="headerlink" title="响应按键，飞船的左右连续移动"></a>响应按键，飞船的左右连续移动</h3><p>我们让moving_right和moving_left来存储是否左右移动，True和False;  KEYDOWN代表键被按住，KEYUP代表松开键； 在ship类中初始化moving_right和moving_left的值为False,并设置在为True时的移动； 在check_event()中则设置了判断True和Fale的依据</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> pygame</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">check_events</span><span class="params">(ship)</span>:</span></span><br><span class="line">    <span class="keyword">for</span> event <span class="keyword">in</span> pygame.event.get():</span><br><span class="line">        <span class="keyword">if</span> event.type == pygame.QUIT:</span><br><span class="line">            sys.exit</span><br><span class="line">        <span class="comment">##################</span></span><br><span class="line">        <span class="keyword">elif</span> event.type == pygame.KEYDOWN:</span><br><span class="line">            <span class="keyword">if</span> event.key == pygame.K_RIGHT:</span><br><span class="line">                ship.moving_right = <span class="literal">True</span></span><br><span class="line">            <span class="keyword">if</span> event.key == pygame.K_LEFT:</span><br><span class="line">                ship.moving_left = <span class="literal">True</span></span><br><span class="line">        <span class="keyword">elif</span> event.type == pygame.KEYUP</span><br><span class="line">            <span class="keyword">if</span> event.key == pygame.K_RIGHT:</span><br><span class="line">                ship.moving_right = <span class="literal">False</span></span><br><span class="line">            <span class="keyword">if</span> event.key == pygame.K_LEFT:</span><br><span class="line">                ship.moving_left = <span class="literal">False</span></span><br><span class="line">        <span class="comment">#########################        </span></span><br><span class="line">            </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">update_screen</span><span class="params">(ai_settings,screen,ship)</span>:</span></span><br><span class="line">    <span class="string">"""更新屏幕"""</span></span><br><span class="line">    <span class="comment"># 每次循环都重绘屏幕</span></span><br><span class="line">    screen.fill(ai_settings.bg_color)</span><br><span class="line">    ship.blitme()</span><br><span class="line">    </span><br><span class="line">    pygame.display.flip()</span><br></pre></td></tr></table></figure>
<h3 id="ship类中的更改"><a href="#ship类中的更改" class="headerlink" title="ship类中的更改"></a>ship类中的更改</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pygame</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Ship</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,screen)</span>:</span></span><br><span class="line">        <span class="string">"""初始化飞船，设置它的位置"""</span></span><br><span class="line">        <span class="comment"># 设置screen属性</span></span><br><span class="line">        self.screen = screen</span><br><span class="line">        <span class="comment"># 加载飞船图片</span></span><br><span class="line">        self.image = pygame.image.load(<span class="string">'images/ship.bmp'</span>)</span><br><span class="line">        <span class="comment"># 获取图片外接矩形和屏幕矩形</span></span><br><span class="line">        self.rect = self.image.get_rect()</span><br><span class="line">        self.screen_rect = self.screen.get_rect()</span><br><span class="line">    </span><br><span class="line">        <span class="comment"># 将飞船的位置放在屏幕底部中央</span></span><br><span class="line">        self.rect.centerx = self.screen_rect.centerx</span><br><span class="line">        self.rect.bottom = self.screen_rect.bottom</span><br><span class="line">     <span class="comment">########   </span></span><br><span class="line">        self.moving_right = <span class="literal">False</span></span><br><span class="line">        self.moving_left = <span class="literal">False</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">update</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> self.moving_right:</span><br><span class="line">            self.rect.centerx += <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> self.moving_left:</span><br><span class="line">            self.rect.centerx -= <span class="number">1</span></span><br><span class="line">    <span class="comment">################</span></span><br><span class="line">    <span class="comment"># 按指定的位置绘制飞船</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">blitme</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.screen.blit(self.image,self.rect)</span><br></pre></td></tr></table></figure>
<h3 id="alien-invasion-py的更改"><a href="#alien-invasion-py的更改" class="headerlink" title="alien_invasion.py的更改"></a>alien_invasion.py的更改</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> pygame</span><br><span class="line"><span class="comment"># 导入类</span></span><br><span class="line"><span class="keyword">from</span> settings <span class="keyword">import</span> Settings</span><br><span class="line"><span class="keyword">from</span> ship <span class="keyword">import</span> Ship</span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="keyword">import</span> game_Functions <span class="keyword">as</span> gf</span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run_game</span><span class="params">()</span>:</span></span><br><span class="line">    pygame.init()</span><br><span class="line">    <span class="comment"># 将Settings类中属性存储在ai_settings中</span></span><br><span class="line">    ai_settings = Settings()</span><br><span class="line">    <span class="comment"># 调用类中属性</span></span><br><span class="line">    screen = pygame.display.set_mode((ai_settings.screen_width,ai_settings.screen_height))</span><br><span class="line">    pygame.display.caption(<span class="string">"Alien Invasion"</span>)</span><br><span class="line">    <span class="comment"># 创建飞船</span></span><br><span class="line">    ship = Ship(screen)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="comment">#########</span></span><br><span class="line">        gf.check_event(ship)</span><br><span class="line">        ship.update()</span><br><span class="line">        <span class="comment">##</span></span><br><span class="line">        gf.update_screen(ai_settings,screen,ship)</span><br><span class="line">        </span><br><span class="line">       </span><br><span class="line">run_game()</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>pygame</tag>
      </tags>
  </entry>
  <entry>
    <title>复习C语言二级笔记</title>
    <url>/2018-08-23-fu-xi-c-yu-yan-er-ji-bi-ji.html</url>
    <content><![CDATA[<p>学完一学期C语言，没啥感觉</p>
<p>好多题也不会做</p>
<p>二级临近，只有边刷题，边学习了</p>
<p>内容比较杂乱，刷题遇到便逐渐解决的问题</p>
<a id="more"></a>

<hr>
<h3 id="1、-a-getchar-只获取键盘上-一个-字符；getchar函数的作用是从-终端-读入一个字符"><a href="#1、-a-getchar-只获取键盘上-一个-字符；getchar函数的作用是从-终端-读入一个字符" class="headerlink" title="1、   a = getchar() 只获取键盘上++一个++字符；getchar函数的作用是从==终端==读入一个字符"></a>1、   a = getchar() 只获取键盘上++一个++字符；getchar函数的作用是从==终端==读入一个字符</h3><hr>
<h3 id="2、数据库常用的关系运算为三种："><a href="#2、数据库常用的关系运算为三种：" class="headerlink" title="2、数据库常用的关系运算为三种："></a>2、数据库常用的关系运算为三种：</h3><p>1、即选择。</p>
<p>2、投影。</p>
<p>3、连接。 </p>
<p>（1）选择，是从二维表中选出符合条件的记录，它是从行的角度对关系进行的运算。</p>
<p>（2）投影，是从二维表中选出所需要的列，它是从列的角度对关系进行的运算。</p>
<p>（3）连接，是同时涉及到两个二维表的运算，它是将两个关系在给定的属性上满足给定条件的记录连接起来而得到的一个新的关系</p>
<hr>
<h3 id="3、-C语言没有逻辑值，用-1-0-代替"><a href="#3、-C语言没有逻辑值，用-1-0-代替" class="headerlink" title="3、   C语言没有逻辑值，用 1 0 代替"></a>3、   C语言没有逻辑值，用 <strong>1 0</strong> 代替</h3><hr>
<h3 id="4、当有序链表为顺序存储时才能采用二分查找，二分查找最多需要比较log2-n次，而顺序查找最多需要n次。"><a href="#4、当有序链表为顺序存储时才能采用二分查找，二分查找最多需要比较log2-n次，而顺序查找最多需要n次。" class="headerlink" title="4、当有序链表为顺序存储时才能采用二分查找，二分查找最多需要比较log2 n次，而顺序查找最多需要n次。"></a>4、当有序链表为顺序存储时才能采用二分查找，二分查找最多需要比较log2 n次，而顺序查找最多需要n次。</h3><hr>
<h3 id="5、数据流程图（DFD图）是结构化方法的需求分析工具"><a href="#5、数据流程图（DFD图）是结构化方法的需求分析工具" class="headerlink" title="5、数据流程图（DFD图）是结构化方法的需求分析工具"></a>5、数据流程图（DFD图）是结构化方法的<strong>需求分析工具</strong></h3><hr>
<h3 id="6、-字符数组的赋值："><a href="#6、-字符数组的赋值：" class="headerlink" title="6、 字符数组的赋值："></a>6、 字符数组的赋值：</h3><p>char str[] = {‘h’,’a’,’p’,’p’,’y’,’\0’}</p>
<p>char str[] = “happy”;        </p>
<p>char str[] = {“happy”};</p>
<p>char *str;                 str = “happy”;</p>
<p>==错误赋值==：char str[6];  str = “happy”;</p>
<p>char *str;  str={“happy”};</p>
<hr>
<h3 id="7、关于自定义函数中的return"><a href="#7、关于自定义函数中的return" class="headerlink" title="7、关于自定义函数中的return:"></a>7、关于自定义函数中的return:</h3><p>一个自定义函数中可以没有返回值，定义为void，程序执行结束后自动返回到调用处；</p>
<p>自定义函数中可以设置多个return语句，但返回值只能是一个。</p>
<hr>
<h3 id="8、指针与数组："><a href="#8、指针与数组：" class="headerlink" title="8、指针与数组："></a>8、指针与数组：</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">int a=10,*p;</span><br><span class="line">int a=10;</span><br><span class="line">p=&amp;a;  //int *p=&amp;a;</span><br><span class="line"><span class="built_in">printf</span>(“%p”,p);  //为a的地址</span><br><span class="line"><span class="built_in">printf</span>(“%d”,*p)  //为a的值，*p代表指向a地址的值</span><br><span class="line"><span class="built_in">printf</span>(“%d”，&amp;p);  //为指针型变量p自己的地址</span><br><span class="line">/////////////////////////////</span><br><span class="line">int a[5]=&#123;1,2,3,4,5&#125;;</span><br><span class="line">int *p=a;  //a的首地址给了指针p</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%d"</span>,*(p+1));等价于<span class="built_in">printf</span>(<span class="string">"%d"</span>,*(a+1));  //输出为2</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="9、指针数组和数组指针"><a href="#9、指针数组和数组指针" class="headerlink" title="9、指针数组和数组指针"></a>9、指针数组和数组指针</h3><h4 id="数组指针："><a href="#数组指针：" class="headerlink" title="数组指针："></a>数组指针：</h4><p>int (*p)[3];  //定义了一个指针型变量p，指向一个整型数组</p>
<h4 id="指针数组："><a href="#指针数组：" class="headerlink" title="指针数组："></a>指针数组：</h4><p>int *p[3];     //定义了一个数组，里面存放指针型元素，指向整型</p>
<hr>
<h3 id="10、静态变量static"><a href="#10、静态变量static" class="headerlink" title="10、静态变量static"></a>10、静态变量static</h3><h4 id="静态局部变量："><a href="#静态局部变量：" class="headerlink" title="静态局部变量："></a>静态局部变量：</h4><p>在函数中时，函数运行结束，这个静态变量的值不会被销毁，函数下次使用时仍能使用。</p>
<h4 id="静态全局变量："><a href="#静态全局变量：" class="headerlink" title="静态全局变量："></a>静态全局变量：</h4><p>静态全局变量 作用于仅限于变量被定义的文件。在函数中引用不会改变他的值</p>
<hr>
<h3 id="11、结构体"><a href="#11、结构体" class="headerlink" title="11、结构体"></a>11、结构体</h3><p>结构体类型的变量在程序运行期间要作==为一个整体占用连续的内存单元==</p>
<h4 id="结构体的定义"><a href="#结构体的定义" class="headerlink" title="结构体的定义"></a>结构体的定义</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">struct student   //struct student为结构体类型</span><br><span class="line">        &#123; </span><br><span class="line">         int num;</span><br><span class="line">         char  name[20];</span><br><span class="line">         char sex;</span><br><span class="line">         int age;</span><br><span class="line">         <span class="built_in">float</span> score;</span><br><span class="line">         char addr[30];</span><br><span class="line">        &#125;; </span><br><span class="line">struct student   stu1,stu2;   //声明结构体变量stu1,stu2</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">struct student</span><br><span class="line">    &#123; </span><br><span class="line">     int num;</span><br><span class="line">     char  name[20];</span><br><span class="line">     char sex;</span><br><span class="line">     int age;</span><br><span class="line">     <span class="built_in">float</span> score;</span><br><span class="line">     char addr[30];</span><br><span class="line">    &#125;stu1,stu2;</span><br></pre></td></tr></table></figure>

<h4 id="初始化："><a href="#初始化：" class="headerlink" title="初始化："></a>初始化：</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">struct student</span><br><span class="line">    &#123; char name[10];</span><br><span class="line">    int age;</span><br><span class="line">    <span class="built_in">float</span> score[5];</span><br><span class="line">    &#125;stu=&#123;“zhangsan”,20,78,92,83,75,69&#125;;</span><br><span class="line">    struct student li,zhang=&#123;<span class="string">"zhangsan"</span>,20,78,92,83,75,69&#125;; </span><br><span class="line">    li=zhang; //将zhang对象拷贝一份赋值给li</span><br><span class="line">      /*</span><br><span class="line">      但li=&#123; “li si”,19,76,56,90,69,80&#125;;是非法的</span><br><span class="line">      */</span><br></pre></td></tr></table></figure>
<h4 id="typedef定义的数据类型"><a href="#typedef定义的数据类型" class="headerlink" title="typedef定义的数据类型"></a>typedef定义的数据类型</h4><p>typedef struct student STUDENT  为==结构体类型==定义一个新的名字，即==strct student与STUDENT同义==</p>
<p>等价于下程序</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">typedef struct student</span><br><span class="line">    &#123; char name[10];</span><br><span class="line">    int age;</span><br><span class="line">    float score[5];</span><br><span class="line">    &#125;STUDENT;</span><br></pre></td></tr></table></figure>

<h3 id="11-1-共用体"><a href="#11-1-共用体" class="headerlink" title="11.1 共用体"></a>11.1 共用体</h3><p>共用体的每个成员的==起始地址都相同==</p>
<p>变量所占的内存长度等于==最长的成员的长度==</p>
<p>C 语言规定 ,==不能==把共用体变量作为函数的参数</p>
<hr>
<h3 id="12、文件操作"><a href="#12、文件操作" class="headerlink" title="12、文件操作"></a>12、文件操作</h3><p>文件的打开操作 fopen 打开一个文件</p>
<p>文件的关闭操作 fclose 关闭一个文件</p>
<p>文件的读写操作 fgetc 从文件中读取一个字符</p>
<p>fputc 写一个字符到文件中去</p>
<p>fgets 从文件中读取一个字符串</p>
<p>fputs 写一个字符串到文件中去</p>
<p>fprintf 往文件中写格式化数据</p>
<p>fscanf(fp,”%d”,n) 格式化读取文件中数据</p>
<p>fread(stu,sizeof(STUDENT),n,fp) 以二进制形式读取文件中的数据</p>
<p>fwrite 以二进制形式写数据到文件中去</p>
<p>getw 以二进制形式读取一个整数</p>
<p>putw 以二进制形式存贮一个整数</p>
<p>文件状态检查函数 feof 文件结束</p>
<p>ferror 文件读/写出错</p>
<p>feof 读入到字符尾’\0’时返回0</p>
<p>以 “wt” 方式写入的是字符文件 ,转义字符 \n 被看作两个字符来处理</p>
<p>“wb”方式写入的是二进制文件 ,转义字符 ‘\n’是一个字符</p>
<hr>
<h3 id="13、设某循环队列的容量为50，如果头指针front-＝45（指向队头元素的前一位置），尾指针-rear-＝10（指向队尾元素），则该循环队列中共有15个元素。"><a href="#13、设某循环队列的容量为50，如果头指针front-＝45（指向队头元素的前一位置），尾指针-rear-＝10（指向队尾元素），则该循环队列中共有15个元素。" class="headerlink" title="13、设某循环队列的容量为50，如果头指针front ＝45（指向队头元素的前一位置），尾指针 rear ＝10（指向队尾元素），则该循环队列中共有15个元素。"></a>13、设某循环队列的容量为50，如果头指针front ＝45（指向队头元素的前一位置），尾指针 rear ＝10（指向队尾元素），则该循环队列中共有15个元素。</h3><h4 id="计算公式（队列头为front-队列尾为rear-M为容量）"><a href="#计算公式（队列头为front-队列尾为rear-M为容量）" class="headerlink" title="计算公式（队列头为front,队列尾为rear,M为容量）"></a>计算公式（队列头为front,队列尾为rear,M为容量）</h4><h4 id="rear-front-M-M"><a href="#rear-front-M-M" class="headerlink" title="|rear - front + M|%M"></a>|rear - front + M|%M</h4><p>这里为 |10-45+50|%50=15</p>
<hr>
<h3 id="14、二叉树的遍历"><a href="#14、二叉树的遍历" class="headerlink" title="14、二叉树的遍历"></a>14、二叉树的遍历</h3><p>遍历就是不重复地访问二叉树的所有结点。</p>
<p>二叉树遍历的方法有3种：++前序遍历、中序遍历和后序遍历++。</p>
<p>记住3种遍历的顺序：</p>
<p>①前序，访问根→按前序遍历左子树→按前序遍历右子树。 </p>
<p>②中序，按中序遍历左子树→访问根→按中序遍历右子树。 </p>
<p>③后序，按后序遍历左子树→按后序遍历右子树→访问根。</p>
<h4 id="例子：后序遍历"><a href="#例子：后序遍历" class="headerlink" title="例子：后序遍历"></a>例子：后序遍历</h4><p>  E</p>
<p> /  \</p>
<p>S    C</p>
<p>|    / \</p>
<p>A   B  P</p>
<p>结果：ASBPCE</p>
<h4 id="14、1-在任意一棵二叉树中-度为-0-的结点-即叶子结点-总是比度为-2-的结点-多一个-。"><a href="#14、1-在任意一棵二叉树中-度为-0-的结点-即叶子结点-总是比度为-2-的结点-多一个-。" class="headerlink" title="14、1  在任意一棵二叉树中 ,度为 0 的结点 (即叶子结点 )总是比度为 2 的结点==多一个==。"></a>14、1  在任意一棵二叉树中 ,度为 0 的结点 (即叶子结点 )总是比度为 2 的结点==多一个==。</h4><h4 id="14-2-在树形结构中-每一个结点只有一个-前件-称为-父结点-没有前件的结点只有一个-称为-树的根结点-每一个结点可以有多个-后件-它们都称为该结点的-子结点-没有后件的结点称为-叶子结点-。"><a href="#14-2-在树形结构中-每一个结点只有一个-前件-称为-父结点-没有前件的结点只有一个-称为-树的根结点-每一个结点可以有多个-后件-它们都称为该结点的-子结点-没有后件的结点称为-叶子结点-。" class="headerlink" title="14.2 在树形结构中 ,每一个结点只有一个==前件== ,称为==父结点==;没有前件的结点只有一个 ,称为==树的根结点== ;每一个结点可以有多个==后件== ,它们都称为该结点的==子结点== ;没有后件的结点称为==叶子结点==。"></a>14.2 在树形结构中 ,每一个结点只有一个==前件== ,称为==父结点==;没有前件的结点只有一个 ,称为==树的根结点== ;每一个结点可以有多个==后件== ,它们都称为该结点的==子结点== ;没有后件的结点称为==叶子结点==。</h4><hr>
<h3 id="15、软件是-程序数据-和-文档-的集合"><a href="#15、软件是-程序数据-和-文档-的集合" class="headerlink" title="15、软件是==程序数据==和==文档==的集合"></a>15、软件是==程序数据==和==文档==的集合</h3><hr>
<h3 id="16、else-与其最近的没有配对的if配对"><a href="#16、else-与其最近的没有配对的if配对" class="headerlink" title="16、else 与其最近的没有配对的if配对"></a>16、else 与其最近的没有配对的if配对</h3><h4 id="下题注意else-if与else的配对"><a href="#下题注意else-if与else的配对" class="headerlink" title="下题注意else if与else的配对"></a>下题注意else if与else的配对</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">        int a&#x3D;1,b&#x3D;2,c&#x3D;3,d&#x3D;0;</span><br><span class="line">        if （ a&#x3D;&#x3D;1 ）</span><br><span class="line">        &#123;</span><br><span class="line">                if （ b!&#x3D;2 ）</span><br><span class="line">                &#123;</span><br><span class="line">                        if （ c&#x3D;&#x3D;3 ）</span><br><span class="line">                        &#123;</span><br><span class="line">                                d&#x3D;1;</span><br><span class="line">                        &#125;</span><br><span class="line">                        else</span><br><span class="line">                        &#123;</span><br><span class="line">                                d&#x3D;2;</span><br><span class="line">                        &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                else if （ c!&#x3D;3 ） </span><br><span class="line">                &#123;       </span><br><span class="line">                        d&#x3D;3;    </span><br><span class="line">                &#125;       </span><br><span class="line">                else    </span><br><span class="line">                &#123;       </span><br><span class="line">                        d&#x3D;4;    </span><br><span class="line">                &#125;       </span><br><span class="line">        &#125;       </span><br><span class="line">        else    </span><br><span class="line">        &#123;       </span><br><span class="line">                d&#x3D;5;    </span><br><span class="line">        &#125;</span><br><span class="line">        printf （ &quot; %d\n &quot; ,d ） ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="17、c语言中的字符数组的结尾"><a href="#17、c语言中的字符数组的结尾" class="headerlink" title="17、c语言中的字符数组的结尾"></a>17、c语言中的字符数组的结尾</h3><p>因为c语言中没有字符串类型，所以借助字符数组来存储字符串，为了区别字符串，需要在字符数组的末尾添加ASCII为0，即’\0’，来作为字符串的结束标志，并且不计入字符串长度。</p>
<h4 id="即strlen-输出结果为实际数组长度"><a href="#即strlen-输出结果为实际数组长度" class="headerlink" title="即strlen()输出结果为实际数组长度"></a>即strlen()输出结果为实际数组长度</h4><hr>
<h2 id="算法及理论题汇总"><a href="#算法及理论题汇总" class="headerlink" title="算法及理论题汇总"></a>算法及理论题汇总</h2><h3 id="18-1-、N-S图"><a href="#18-1-、N-S图" class="headerlink" title="18.1 、N-S图"></a>18.1 、N-S图</h3><p>为了避免流程图在描述程序逻辑时的灵活性,提出了用方框图来代替传统的程序流程图 ,通常也把这种图称为==N-S图==</p>
<p>N-S 图是由 Nassi 和 Shneiderman 提出的一种符合程序化结构<br>设计原则的图形描述工具。 它的提出是为了避免流程图在描述程序逻辑时的随意性上灵活性。</p>
<h3 id="18-2、结构化程序设计方法的主要原则可以概括为-自顶向下-、-逐步求精-、-模块化-及限制使用goto语句-总的来说可使-程序结构良好、-易读、易理解、易维护-。"><a href="#18-2、结构化程序设计方法的主要原则可以概括为-自顶向下-、-逐步求精-、-模块化-及限制使用goto语句-总的来说可使-程序结构良好、-易读、易理解、易维护-。" class="headerlink" title="18.2、结构化程序设计方法的主要原则可以概括为==自顶向下==、==逐步求精==、==模块化==及限制使用goto语句,总的来说可使==程序结构良好、 易读、易理解、易维护==。"></a>18.2、结构化程序设计方法的主要原则可以概括为==自顶向下==、==逐步求精==、==模块化==及限制使用goto语句,总的来说可使==程序结构良好、 易读、易理解、易维护==。</h3><h3 id="18-2-1-软件设计遵循软件工程的基本目标和原则-建立了适用于在软件设计中应该遵循的基本原理和与软件设计有关的概念-它们具有-抽象、-模块化、信息隐蔽和数据独立性-。自底向上是集成测试中增量测试的一种"><a href="#18-2-1-软件设计遵循软件工程的基本目标和原则-建立了适用于在软件设计中应该遵循的基本原理和与软件设计有关的概念-它们具有-抽象、-模块化、信息隐蔽和数据独立性-。自底向上是集成测试中增量测试的一种" class="headerlink" title="18.2.1 软件设计遵循软件工程的基本目标和原则,建立了适用于在软件设计中应该遵循的基本原理和与软件设计有关的概念,它们具有==抽象、 模块化、信息隐蔽和数据独立性==。自底向上是集成测试中增量测试的一种"></a>18.2.1 软件设计遵循软件工程的基本目标和原则,建立了适用于在软件设计中应该遵循的基本原理和与软件设计有关的概念,它们具有==抽象、 模块化、信息隐蔽和数据独立性==。自底向上是集成测试中增量测试的一种</h3><h3 id="18-3、为了使模块尽可能独立-要求模块的-内聚程度要尽量高-且各模块间的-耦合程度要尽量弱"><a href="#18-3、为了使模块尽可能独立-要求模块的-内聚程度要尽量高-且各模块间的-耦合程度要尽量弱" class="headerlink" title="18.3、为了使模块尽可能独立,要求模块的==内聚程度要尽量高==,且各模块间的==耦合程度要尽量弱=="></a>18.3、为了使模块尽可能独立,要求模块的==内聚程度要尽量高==,且各模块间的==耦合程度要尽量弱==</h3><h3 id="18-3-1模块之间的耦合程度反映了模块的独立性-也反映了系统分解后的复杂程度。按照耦合程度从强到弱分别是-内容耦合、公共耦合、外部耦合、控制耦合、标记耦合、数据耦合和非直接耦合-没有异构耦合这种方式。"><a href="#18-3-1模块之间的耦合程度反映了模块的独立性-也反映了系统分解后的复杂程度。按照耦合程度从强到弱分别是-内容耦合、公共耦合、外部耦合、控制耦合、标记耦合、数据耦合和非直接耦合-没有异构耦合这种方式。" class="headerlink" title="18.3.1模块之间的耦合程度反映了模块的独立性,也反映了系统分解后的复杂程度。按照耦合程度从强到弱分别是:==内容耦合、公共耦合、外部耦合、控制耦合、标记耦合、数据耦合和非直接耦合==,没有异构耦合这种方式。"></a>18.3.1模块之间的耦合程度反映了模块的独立性,也反映了系统分解后的复杂程度。按照耦合程度从强到弱分别是:==内容耦合、公共耦合、外部耦合、控制耦合、标记耦合、数据耦合和非直接耦合==,没有异构耦合这种方式。</h3><p>。</p>
<p>模块的独立程度可以由两个定性标准度量:耦合性和内聚性。耦合性是衡量不同模块彼此间互相依赖(连接)的紧密程度;内聚性是衡量一个模块内部各个元素彼此结合的紧密程度。一般来说,要求模块之间的耦合尽可能地低 ,而内聚性尽可能地高。</p>
<h3 id="18-4、需求分析"><a href="#18-4、需求分析" class="headerlink" title="18.4、需求分析"></a>18.4、需求分析</h3><p>需求分析是软件定义时期的最后一个阶段；任务是确定==软件系统功能==</p>
<h4 id="软件开发方法是在总体设计阶段需完成的任务"><a href="#软件开发方法是在总体设计阶段需完成的任务" class="headerlink" title="软件开发方法是在总体设计阶段需完成的任务"></a>软件开发方法是在总体设计阶段需完成的任务</h4><h4 id="软件开发工具是在实现阶段需完成的任务"><a href="#软件开发工具是在实现阶段需完成的任务" class="headerlink" title="软件开发工具是在实现阶段需完成的任务"></a>软件开发工具是在实现阶段需完成的任务</h4><h4 id="软件开发费用是在可行性研究阶段需完成的任务"><a href="#软件开发费用是在可行性研究阶段需完成的任务" class="headerlink" title="软件开发费用是在可行性研究阶段需完成的任务"></a>软件开发费用是在可行性研究阶段需完成的任务</h4><h3 id="18-4-1软件需求规格说明书-SRS-Software-Requirement-Specification-是需求分析阶段的最后成果-是软件开发中的重要文档之一。"><a href="#18-4-1软件需求规格说明书-SRS-Software-Requirement-Specification-是需求分析阶段的最后成果-是软件开发中的重要文档之一。" class="headerlink" title="18.4.1软件需求规格说明书 (SRS,Software Requirement Specification)是需求分析阶段的最后成果 ,是软件开发中的重要文档之一。"></a>18.4.1软件需求规格说明书 (SRS,Software Requirement Specification)是需求分析阶段的最后成果 ,是软件开发中的重要文档之一。</h3><p>它具有以下几个方面的作用:==①便于用户、开发人员进行理解和交流 ;② 反映出用户问题的结构 ,可以作为软件开发工作的基础和依据 ;③ 作为确认测试和验收的依据==。</p>
<h3 id="18-5、算法的特征"><a href="#18-5、算法的特征" class="headerlink" title="18.5、算法的特征"></a>18.5、算法的特征</h3><p>算法具有 5 个特性:①==有穷性==:一个算法必须(对任何合法的输入值 )在执行有穷步之后结束,且每一步都可在==有限时间内完成==,即运行时间是有限的 ;②==确定性==:算法中每一条指令必须有确切的含义 ,读者理解时不会产生歧义;③==可行性==:一个算法是可行的,即算法中描述的操作都是可以通过已经实现的基本运算执行有限次来实现;④ ==输入:一个算法有零个或多个输入==,这些输入取自于某个特定的对象的集合 ;⑤ ==输出 :一个算法有一个或多个输出==。</p>
<h3 id="18-6、如果进栈序列为-e1-e2-e3-e4-则可能的出栈序列是"><a href="#18-6、如果进栈序列为-e1-e2-e3-e4-则可能的出栈序列是" class="headerlink" title="18.6、如果进栈序列为 e1,e2,e3,e4,则可能的出栈序列是"></a>18.6、如果进栈序列为 e1,e2,e3,e4,则可能的出栈序列是</h3><p>进栈与出栈的规则是：==后进先出==</p>
<p>可能的情况：e1进e2进e3进e4进，则出的顺序e4/e3/e2/e1</p>
<p>e1进，e2进再出，e3进再出，e4进；出的顺序:e2/e3/e4/e1</p>
<p>e1进，e2进，e3进再出，e4进；出的顺序e3/e4/e2/e1</p>
<p>等等</p>
<h3 id="18-7、结构体对链表的定义"><a href="#18-7、结构体对链表的定义" class="headerlink" title="18.7、结构体对链表的定义"></a>18.7、结构体对链表的定义</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">struct link</span><br><span class="line">&#123;</span><br><span class="line">    int data;              &#x2F;&#x2F;数据域</span><br><span class="line">    struct link *next;           &#x2F;&#x2F;指针域</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<hr>
<h3 id="19、在最坏情况下-快速排序、冒泡排序和直接插入排序需要的比较次数都为-n-n-1-2-堆排序需要的比较次数为-nlog2n。"><a href="#19、在最坏情况下-快速排序、冒泡排序和直接插入排序需要的比较次数都为-n-n-1-2-堆排序需要的比较次数为-nlog2n。" class="headerlink" title="19、在最坏情况下,快速排序、冒泡排序和直接插入排序需要的比较次数都为 n(n-1)/2,堆排序需要的比较次数为 nlog2n。"></a>19、在最坏情况下,快速排序、冒泡排序和直接插入排序需要的比较次数都为 n(n-1)/2,堆排序需要的比较次数为 nlog2n。</h3><hr>
<h3 id="20、数据的物理独立性是指数据的物理结构的改变-不会影响数据库的逻辑结构"><a href="#20、数据的物理独立性是指数据的物理结构的改变-不会影响数据库的逻辑结构" class="headerlink" title="20、数据的物理独立性是指数据的物理结构的改变,不会影响数据库的逻辑结构"></a>20、数据的物理独立性是指数据的物理结构的改变,不会影响数据库的逻辑结构</h3><hr>
<h3 id="21、关系中的-行称为元组-对应存储文件中的记录-关系中的-列称为属性-对应存储文件中的字段"><a href="#21、关系中的-行称为元组-对应存储文件中的记录-关系中的-列称为属性-对应存储文件中的字段" class="headerlink" title="21、关系中的==行称为元组==,对应存储文件中的记录,关系中的==列称为属性==,对应存储文件中的字段"></a>21、关系中的==行称为元组==,对应存储文件中的记录,关系中的==列称为属性==,对应存储文件中的字段</h3><hr>
<h3 id="22、C-语言中-在定义并初始化二维数组时-可以省略数组第一维的长度-但是-不能省略第二维的长度-。"><a href="#22、C-语言中-在定义并初始化二维数组时-可以省略数组第一维的长度-但是-不能省略第二维的长度-。" class="headerlink" title="22、C 语言中 ,在定义并初始化二维数组时 ,可以省略数组第一维的长度 ,但是==不能省略第二维的长度==。"></a>22、C 语言中 ,在定义并初始化二维数组时 ,可以省略数组第一维的长度 ,但是==不能省略第二维的长度==。</h3><hr>
<h3 id="23、预处理"><a href="#23、预处理" class="headerlink" title="23、预处理"></a>23、预处理</h3><p>在程序中凡是以 “#”开始的语句行都是预处理命令行</p>
<p>C 语言中的预处理命令以符号#开头,这些命令是在==程序编译之前进行处理的==</p>
<hr>
<h3 id="24、位运算"><a href="#24、位运算" class="headerlink" title="24、位运算"></a>24、位运算</h3><h4 id="按位取反"><a href="#按位取反" class="headerlink" title="~ 按位取反"></a>~ 按位取反</h4><h4 id="lt-lt-左移-gt-gt-右移"><a href="#lt-lt-左移-gt-gt-右移" class="headerlink" title="&lt;&lt;左移    &gt;&gt;右移"></a>&lt;&lt;左移    &gt;&gt;右移</h4><p>a &lt;&lt; n</p>
<p>二进制数a向左移动n位，左边n位舍去，右边n位用0补齐</p>
<h4 id="按位异或"><a href="#按位异或" class="headerlink" title="^按位异或"></a>^按位异或</h4><p>规则：相同为0,不同为1</p>
<p>&nbsp; 011100</p>
<p>^100111</p>
<p>&nbsp;111011</p>
<hr>
<h3 id="25、-测试-的目的是暴露错误-评价程序的可靠性；-调试-的目的是发现错误的位置并改正错误"><a href="#25、-测试-的目的是暴露错误-评价程序的可靠性；-调试-的目的是发现错误的位置并改正错误" class="headerlink" title="25、==测试==的目的是暴露错误 ,评价程序的可靠性；==调试==的目的是发现错误的位置并改正错误"></a>25、==测试==的目的是暴露错误 ,评价程序的可靠性；==调试==的目的是发现错误的位置并改正错误</h3><hr>
<h3 id="26、当循环队列非空且队尾指针等于队头指针时-说明循环队列已满-不能进行入队运算。这种情况称为-上溢"><a href="#26、当循环队列非空且队尾指针等于队头指针时-说明循环队列已满-不能进行入队运算。这种情况称为-上溢" class="headerlink" title="26、当循环队列非空且队尾指针等于队头指针时 ,说明循环队列已满 ,不能进行入队运算。这种情况称为==上溢=="></a>26、当循环队列非空且队尾指针等于队头指针时 ,说明循环队列已满 ,不能进行入队运算。这种情况称为==上溢==</h3><h3 id="27、在关系模型中-把数据看成一个二维表-每一个二维表称为一个-关系"><a href="#27、在关系模型中-把数据看成一个二维表-每一个二维表称为一个-关系" class="headerlink" title="27、在关系模型中 ,把数据看成一个二维表 ,每一个二维表称为一个==关系=="></a>27、在关系模型中 ,把数据看成一个二维表 ,每一个二维表称为一个==关系==</h3><p>在关系模型中 ,把数据看成一个二维表 ,每一个二维表称为一个==关系==。表中的每一列称为一个==属性== ,相当于记录中的一个数据项 ,对属性的命名称为属性名 ;表中的一行称为一个==元组== ,相当于记录值。</p>
<hr>
<h3 id="27、在计算机软件系统的体系结构中-数据库管理系统位于用户和-操作系统-之间"><a href="#27、在计算机软件系统的体系结构中-数据库管理系统位于用户和-操作系统-之间" class="headerlink" title="27、在计算机软件系统的体系结构中 ,数据库管理系统位于用户和==操作系统==之间"></a>27、在计算机软件系统的体系结构中 ,数据库管理系统位于用户和==操作系统==之间</h3><h3 id="28、fseek函数的调用-fseek-文件指针-位移量-起始点"><a href="#28、fseek函数的调用-fseek-文件指针-位移量-起始点" class="headerlink" title="28、fseek函数的调用  ==fseek(文件指针 ,位移量 ,起始点)=="></a>28、fseek函数的调用  ==fseek(文件指针 ,位移量 ,起始点)==</h3><p>“起始点 “用 0,1 或 2 代替 ,其中 ,0 代表 “文件开始 “;1 为”当前位置 “;2 为”文件末尾 “ 。 “位移量 “指以 “起始点 “为基点 ,向前移动的字节数。 ANSI C 和大多数 C 版本要求位移量是 long 型数据 ,这样当文件的长度大于 64k 时不致出现问题。 ANSI C标准规定在数字的末尾加一个字母 L,就表示 long 型。</p>
<h3 id="29、流程图"><a href="#29、流程图" class="headerlink" title="29、流程图"></a>29、流程图</h3><p>程序流程图是人们对解决问题的方法、思路或算法的一种图形方式的描述。其中 ,==图框==表示各种==操作的类型==,图框中的==文字==和符号表示操作的==内容== ;==流程线==表示操作的==先后次序==。带箭头的线段在数据流程图中表示==数据流==;带箭头的线段在程序流程图中表示==控制流==。在图元之间用带有箭头的线段表示==图元关系==。在模块之间用带有箭头的线段表示==调用关系==。</p>
<hr>
<h3 id="30、已知数据表中-每个元素距其最终位置不远-，为节省时间，应采用的算法是-直接插入排序"><a href="#30、已知数据表中-每个元素距其最终位置不远-，为节省时间，应采用的算法是-直接插入排序" class="headerlink" title="30、已知数据表中==每个元素距其最终位置不远==，为节省时间，应采用的算法是==直接插入排序=="></a>30、已知数据表中==每个元素距其最终位置不远==，为节省时间，应采用的算法是==直接插入排序==</h3><p>堆排序的比较次数为nlog2n;直接插入排序的比较次数为n(n-1)/2;快速排序的比较次数为 nlog2n</p>
<hr>
<h3 id="31、C-语言的语法规定-字母-e-E-之前必须有数字-且-e-E-后面的指数必须是整数"><a href="#31、C-语言的语法规定-字母-e-E-之前必须有数字-且-e-E-后面的指数必须是整数" class="headerlink" title="31、C 语言的语法规定 ,字母 e(E)==之前必须有数字== ,且 e(E)==后面的指数必须是整数=="></a>31、C 语言的语法规定 ,字母 e(E)==之前必须有数字== ,且 e(E)==后面的指数必须是整数==</h3><p>3E04</p>
<p>0.2E5</p>
<hr>
<h3 id="32、数据结构分为逻辑结构与存储结构-线性链表属于-存储结构"><a href="#32、数据结构分为逻辑结构与存储结构-线性链表属于-存储结构" class="headerlink" title="32、数据结构分为逻辑结构与存储结构 ,线性链表属于==存储结构=="></a>32、数据结构分为逻辑结构与存储结构 ,线性链表属于==存储结构==</h3><p>数据的逻辑结构是指反映数据元素之间逻辑关系的数据结构 ;数据的存储结构是指数据的逻辑结构在计算机存储空间中的存放<br>形式。在数据的存储结构中 ,不仅要存放各数据元素的信息 ,还需要存放各数据元素之间前后件关系的信息。</p>
<hr>
<h3 id="33、数据库设计分为以下-6-个设计阶段-需求分析阶段、概念设计阶段、逻辑设计阶段、物理设计阶段、实施阶段及数据库运行和维护阶段。"><a href="#33、数据库设计分为以下-6-个设计阶段-需求分析阶段、概念设计阶段、逻辑设计阶段、物理设计阶段、实施阶段及数据库运行和维护阶段。" class="headerlink" title="33、数据库设计分为以下 6 个设计阶段 :需求分析阶段、概念设计阶段、逻辑设计阶段、物理设计阶段、实施阶段及数据库运行和维护阶段。"></a>33、数据库设计分为以下 6 个设计阶段 :需求分析阶段、概念设计阶段、逻辑设计阶段、物理设计阶段、实施阶段及数据库运行和维护阶段。</h3><hr>
<h3 id="34、gets-puts-fgets-标准输入输出"><a href="#34、gets-puts-fgets-标准输入输出" class="headerlink" title="34、gets();puts();fgets();标准输入输出"></a>34、gets();puts();fgets();标准输入输出</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">int name[10];</span><br><span class="line">gets(name);</span><br><span class="line">fgets(name,sizeof(name),stdin);</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="35、字符操作函数"><a href="#35、字符操作函数" class="headerlink" title="35、字符操作函数"></a>35、字符操作函数</h3><p>strlen(str)返回实际数组的长度</p>
<p>strcpy(str1,str2)将str2复制到str1，注意数组长度</p>
<p>strcmp(str1,str2)比较str1与str2，从左到右以ASCII码值比较，str1&gt;str2，返回值大于1，str1=str2返回0，str1&lt;str2，返回值小于0</p>
<hr>
]]></content>
      <tags>
        <tag>C语言</tag>
      </tags>
  </entry>
  <entry>
    <title>C语言的写入文件数据与读取文件数据</title>
    <url>/2018-10-22-c-yu-yan-de-xie-ru-wen-jian-shu-ju-yu-du-qu-wen-jian-shu-ju.html</url>
    <content><![CDATA[<p>C语言的写入文件数据与读取文件数据</p>
<p>vc6.0</p>
<p>MFC</p>
<a id="more"></a>

<hr>
<h3 id="C语言的写入文件"><a href="#C语言的写入文件" class="headerlink" title="C语言的写入文件"></a>C语言的写入文件</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">FILE *fp;</span><br><span class="line">fp &#x3D; fopen(&quot;F:\\Clanuage\\GISALG\\dataFile\\fffffff.txt&quot;,&quot;w&quot;);</span><br><span class="line">&#x2F;&#x2F; 第一行输出点的个数</span><br><span class="line">fprintf(fp,&quot;%d\n&quot;,num);</span><br><span class="line">&#x2F;&#x2F; 输出点的坐标</span><br><span class="line">for(int i&#x3D;0;i&lt;num;i++)</span><br><span class="line">&#123;</span><br><span class="line">	fprintf(fp,&quot;%d,%d\n&quot;,p[i].x,p[i].y);</span><br><span class="line">&#125;</span><br><span class="line">fclose(fp);</span><br></pre></td></tr></table></figure>
<h3 id="读取文件数据"><a href="#读取文件数据" class="headerlink" title="读取文件数据"></a>读取文件数据</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">FILE *fp;</span><br><span class="line">fp &#x3D; fopen(&quot;F:\\Clanuage\\GISALG\\dataFile\\fffffff.txt&quot;,&quot;r&quot;);</span><br><span class="line">fscanf(fp,&quot;%d&quot;,&amp;num);</span><br><span class="line">for(int i&#x3D;0;i&lt;num;i++)</span><br><span class="line">&#123;</span><br><span class="line">	fscanf(fp,&quot;%d,%d&quot;,&amp;p[i].x,&amp;p[i].y);</span><br><span class="line">&#125;</span><br><span class="line">fclose(fp);</span><br><span class="line">&#x2F;&#x2F; 绘制</span><br><span class="line">CDC *pdc &#x3D; GetDC();</span><br><span class="line">for(int j&#x3D;0;j&lt;num;j++)</span><br><span class="line">&#123;</span><br><span class="line">	pdc-&gt;Ellipse(p[j].x-5,p[j].y-5,p[j].x+5,p[j].y+5);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>C语言</tag>
      </tags>
  </entry>
  <entry>
    <title>vc6.0;MFC；画笔与填充</title>
    <url>/2018-10-22-vc6.0-mfc-hua-bi-yu-ju-xing-tian-chong.html</url>
    <content><![CDATA[<p>C语言MFC中画笔与矩形填充</p>
<a id="more"></a>

<hr>
<h3 id="画笔与填充"><a href="#画笔与填充" class="headerlink" title="画笔与填充"></a>画笔与填充</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line">CDC *pDC = GetDC();</span><br><span class="line"><span class="comment">//绘制红线</span></span><br><span class="line">CPen pen;</span><br><span class="line">pen.CreatePen(PS_SOLID,<span class="number">2</span>,RGB(<span class="number">255</span>,<span class="number">0</span>,<span class="number">0</span>));</span><br><span class="line">pDC-&gt;SelectObject(&amp;pen);</span><br><span class="line"><span class="comment">//矩形透明</span></span><br><span class="line">CBrush *pBrush = CBrush::FromHandle((HBRUSH)GetStockObject(NULL_BRUSH));</span><br><span class="line">CBrush *pOldBrush = pDC-&gt;SelectObject(pBrush);</span><br><span class="line">pDC-&gt;Rectangle(xmin,ymin,xmax,ymax);</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 矩形填充</span></span><br><span class="line"><span class="function">CRect <span class="title">rt</span><span class="params">(x1+i*b1,y1+j*b2,x2+i*b1,y2+j*b2)</span></span>;</span><br><span class="line">pdc-&gt;FillSolidRect(&amp;rt,RGB(<span class="number">255</span>,<span class="number">0</span>,<span class="number">0</span>));</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>C语言</tag>
      </tags>
  </entry>
  <entry>
    <title>bwg搭建ss教程</title>
    <url>/2018-11-22-bwg-ss.html</url>
    <content><![CDATA[<p>bwg搭建ss教程</p>
<p>本文来自：<a href="https://www.vpnask.com/fanqiang/bandwagonhost-install-shadowsocks/" target="_blank" rel="noopener external nofollow noreferrer">搬瓦工(BandwagonHost)取消了一键安装SS后，最新搬瓦工手动安装SS教程！</a></p>
<a id="more"></a>

<hr>
<h4 id="安装SSR脚本"><a href="#安装SSR脚本" class="headerlink" title="安装SSR脚本"></a>安装SSR脚本</h4><p><strong>第一步</strong>：（登录服务器后）等到出现root@host~字样，复制下面脚本第1条命令，回车：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">wget --no-check-certificate -O shadowsocks-all.sh https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;teddysun&#x2F;shadowsocks_install&#x2F;master&#x2F;shadowsocks-all.sh</span><br></pre></td></tr></table></figure>
<p>注意⚠️：国外服务器运行脚本时容易出错，如出现错误提示 bash: wget: command not found，可以请在先执行 yum -y install wget 命令。成功后，再执行上面的命令。如果没有出现提示错误，请略过。</p>
<p><strong>第二步</strong>：等待如上图所示之后，我们输入第2条脚本命令，回车：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">chmod +x shadowsocks-all.sh</span><br></pre></td></tr></table></figure>
<p><strong>第三步</strong>：等待如上图所示之后，输入第3条脚本命令，回车：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">.&#x2F;shadowsocks-all.sh 2&gt;&amp;1 | tee shadowsocks-all.log</span><br></pre></td></tr></table></figure>
<p><strong>第四步</strong>：出现以上画面，根据需要选择，不懂的话直接选1，或者默认回车。下面会提示你输入你的SS SERVER的密码，和端口。不输入就是默认。跑完命令后会出来你的SS客户端的信息。</p>
<p><strong>第五步</strong>：我们输入完成ss的密码和端口号之后，进行回车：</p>
<p><strong>第六步</strong>：特别注意，由于iPhone端的的wingy目前只支持到cfb，所以我们选择aes-256-cfb，即7 ，回车：</p>
<p> <strong>第七步</strong>：这一步按回车继续，然后需要几分钟的安装过程，请耐心等待出现下面的画面：</p>
<p><strong>第八步</strong>：当我们看到Congratulations, Shadowsocks-Python server install completed!时，则证明我们已经成功安装了ss。请立即将这些信息复制下来加以保存，我们就会用到这几个比较重要的信息：主机服务器IP地址、端口号、密码和加密方式。上面的命令全部回车执行后，如果没有报错，即为执行成功，出现确认提示的时候，输入 y 后，回车即可。</p>
]]></content>
      <tags>
        <tag>ss</tag>
      </tags>
  </entry>
  <entry>
    <title>python爬虫入门学习笔记</title>
    <url>/2019-02-19-python-spider.html</url>
    <content><![CDATA[<p>学习环境:python3<br>python IDLE</p>
<a id="more"></a>

<h4 id="1-python安装3-0及以上版本"><a href="#1-python安装3-0及以上版本" class="headerlink" title="1.python安装3.0及以上版本"></a>1.python安装3.0及以上版本</h4><h4 id="2-安装requests库"><a href="#2-安装requests库" class="headerlink" title="2.安装requests库"></a>2.安装requests库</h4><p>cmd指令:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">pip install requests</span><br></pre></td></tr></table></figure>
<p>测试:(打开python 的IDLE)</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">// 获取网页</span><br><span class="line">r = requests.get(<span class="string">"https://www.baidu.com"</span>)</span><br><span class="line">// 获取状态码<span class="number">200</span>为正常</span><br><span class="line">r.status_code</span><br><span class="line">// 更改编码方式为utf<span class="number">-8</span></span><br><span class="line">r.encoding = <span class="string">'utf-8'</span></span><br><span class="line">// 打印</span><br><span class="line">r.text</span><br></pre></td></tr></table></figure>
<h4 id="3-requests库的get-方法"><a href="#3-requests库的get-方法" class="headerlink" title="3.requests库的get()方法"></a>3.requests库的get()方法</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">requests.get(url)</span><br></pre></td></tr></table></figure>
<p>它有Request和Response两个对象</p>
<h4 id="4-Response对象"><a href="#4-Response对象" class="headerlink" title="4.Response对象"></a>4.Response对象</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">r = requests.get(<span class="string">"https://www.baidu.com"</span>)</span><br><span class="line">print(r.status_code)</span><br><span class="line">// 查看r的类型</span><br><span class="line">type(r)</span><br><span class="line">// 查看r的头</span><br><span class="line">r.headers</span><br></pre></td></tr></table></figure>
<h5 id="4-1-Response对象的属性"><a href="#4-1-Response对象的属性" class="headerlink" title="4.1 Response对象的属性"></a>4.1 Response对象的属性</h5><p><img src="/python-spider/python-1.png" alt="image"></p>
<h5 id="4-2-Request库异常"><a href="#4-2-Request库异常" class="headerlink" title="4.2 Request库异常"></a>4.2 Request库异常</h5><p><img src="/python-spider/python-2.png" alt="image"></p>
<h5 id="4-3-判断是否异常-通用代码框架"><a href="#4-3-判断是否异常-通用代码框架" class="headerlink" title="4.3 判断是否异常(通用代码框架)"></a>4.3 判断是否异常(通用代码框架)</h5><p>方法:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">r.raise_for_status()</span><br><span class="line"><span class="comment"># 如果状态不是200，报错</span></span><br></pre></td></tr></table></figure>
<p>通用代码框架:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getHTMLText</span><span class="params">(url)</span>:</span></span><br><span class="line">	<span class="keyword">try</span>:</span><br><span class="line">		r = requests.get(url, timeout = <span class="number">30</span>)</span><br><span class="line">		r.raise_for_status() <span class="comment"># 判断状态是否为200</span></span><br><span class="line">		r.encoding = r.apparent_encoding</span><br><span class="line">		<span class="keyword">return</span> r.text</span><br><span class="line">	<span class="keyword">except</span>:</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"产生异常"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">     url = <span class="string">"https://www.baidu.com"</span></span><br><span class="line">     print(getHTMLText(url))</span><br></pre></td></tr></table></figure>
<h4 id="5-Request库的主要方法"><a href="#5-Request库的主要方法" class="headerlink" title="5 Request库的主要方法"></a>5 Request库的主要方法</h4><p> <img src="/python-spider/python-3.png" alt="image"><br>put方法会将原有覆盖</p>
<p>patch对资源更新</p>
<h4 id="6-网络爬虫的尺寸"><a href="#6-网络爬虫的尺寸" class="headerlink" title="6 网络爬虫的尺寸"></a>6 网络爬虫的尺寸</h4><p><img src="/python-spider/python-4.png" alt="image"></p>
<h4 id="7-对网络爬虫限制"><a href="#7-对网络爬虫限制" class="headerlink" title="7 对网络爬虫限制"></a>7 对网络爬虫限制</h4><p><img src="/python-spider/python-5.png" alt="image"></p>
<h5 id="7-1-Robots协议"><a href="#7-1-Robots协议" class="headerlink" title="7.1 Robots协议"></a>7.1 Robots协议</h5><p><img src="/python-spider/python-6.png" alt="image"></p>
<h4 id="8-爬取被拒绝，如果是User-Agent，如何爬取？"><a href="#8-爬取被拒绝，如果是User-Agent，如何爬取？" class="headerlink" title="8 爬取被拒绝，如果是User-Agent，如何爬取？"></a>8 爬取被拒绝，如果是User-Agent，如何爬取？</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 查看头部User-Agent,发现User-Agent: python-requests...</span><br><span class="line">r.request.headers</span><br><span class="line"># 定义键值对去模拟浏览器访问，更改User-Agent</span><br><span class="line">kv &#x3D; &#123;&#39;User-Agent&#39;:&#39;Mozilla&#x2F;5.0&#39;&#125;</span><br><span class="line">url &#x3D; ...</span><br><span class="line"># 爬取页面，更改User-Agent</span><br><span class="line">r &#x3D; requests.get(url,headers &#x3D; kv)</span><br><span class="line"># 查看状态码，如为200则成功</span><br><span class="line">r.status_code</span><br></pre></td></tr></table></figure>
<p>例如爬取amazon的页面全代码</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getHTMLText</span><span class="params">(url)</span>:</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        kv = &#123;<span class="string">'User-Agent'</span>:<span class="string">'Mozilla/5.0'</span>&#125;</span><br><span class="line">        r = requests.get(url,headers = kv)</span><br><span class="line">        r.raise_for_status()</span><br><span class="line">        r.encoding = r.apparent_encoding</span><br><span class="line">        print(r.text) <span class="comment"># r.text[1000:2000]指打印第1001~1999个字符</span></span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        print(<span class="string">"错误"</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    url = <span class="string">"https://www.amazon.com"</span></span><br><span class="line">    print(getHTMLText(url))</span><br></pre></td></tr></table></figure>
<h4 id="9-爬取百度-360关键词搜索结果"><a href="#9-爬取百度-360关键词搜索结果" class="headerlink" title="9 爬取百度 360关键词搜索结果"></a>9 爬取百度 360关键词搜索结果</h4><p>搜索引擎关键词提交接口:<br>百度</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">http:&#x2F;&#x2F;www.baidu.com&#x2F;s?wd&#x3D;keyword</span><br></pre></td></tr></table></figure>
<p>360：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">http:&#x2F;&#x2F;www.so.com&#x2F;s?q&#x3D;keyword</span><br></pre></td></tr></table></figure>
<h4 id="10-爬取网络图片并保存"><a href="#10-爬取网络图片并保存" class="headerlink" title="10 爬取网络图片并保存"></a>10 爬取网络图片并保存</h4><p>网络图片链接的格式</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">http:&#x2F;&#x2F;www.example.com&#x2F;picture.jpg</span><br></pre></td></tr></table></figure>
<p>案例，爬取google一张图</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line">url = <span class="string">"http://news.qingdaonews.com/images/attachement/jpg/site1/20170720/48d224f8c5531ada49cc0a.jpg"</span></span><br><span class="line">root = <span class="string">"F:/py/py-creeper/spider-picture/"</span></span><br><span class="line">path = root  +  url.split(<span class="string">'/'</span>)[<span class="number">-1</span>] <span class="comment"># 剪切出图片名称</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">     <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(root): <span class="comment"># 判断root路径是否存在</span></span><br><span class="line">          os.mkdir(root)</span><br><span class="line">     <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(path): <span class="comment"># 判断path下文件是否存在</span></span><br><span class="line">          r = requests.get(url)</span><br><span class="line">          <span class="keyword">with</span> open(path, <span class="string">'wb'</span>) <span class="keyword">as</span> f:</span><br><span class="line">               f.write(r.content)</span><br><span class="line">               f.close()</span><br><span class="line">               printf(<span class="string">"OK"</span>)</span><br><span class="line">     <span class="keyword">else</span>:</span><br><span class="line">          print(<span class="string">"文件已存在"</span>)</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">     print(<span class="string">"爬取失败"</span>)</span><br></pre></td></tr></table></figure>
<h4 id="11-IP地址归属地的自动查询"><a href="#11-IP地址归属地的自动查询" class="headerlink" title="11 IP地址归属地的自动查询"></a>11 IP地址归属地的自动查询</h4><p>ip138接口形式</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">http:&#x2F;&#x2F;m.ip138.com&#x2F;ip.asp?ip&#x3D;IpAddress</span><br></pre></td></tr></table></figure>
<p>完整代码</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">url = <span class="string">"http://m.ip138.com/ip.asp?ip="</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">     r = requests.get(url + <span class="string">'202.204.80.112'</span>)</span><br><span class="line">     r.raise_for_status()</span><br><span class="line">     <span class="comment"># r.encoding = r.apparent.encoding</span></span><br><span class="line">     print(r.text)</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">     print(<span class="string">"爬取失败"</span>)</span><br></pre></td></tr></table></figure>
<h4 id="12-网页数据的解析，beautifulsoup库"><a href="#12-网页数据的解析，beautifulsoup库" class="headerlink" title="12 网页数据的解析，beautifulsoup库"></a>12 网页数据的解析，beautifulsoup库</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 安装,打开cmd</span><br><span class="line">pip install beautifulsoup4</span><br></pre></td></tr></table></figure>
<p>使用方法</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup <span class="comment"># 从BeautifulSoup4导入BeautifulSoup类</span></span><br><span class="line"><span class="comment"># data是网页数据,html.parser是解析方式</span></span><br><span class="line">soup = BeautifulSoup(&lt;p&gt;data&lt;/p&gt;,"html.parser")</span><br></pre></td></tr></table></figure>

<h5 id="12-1-测试解析效果"><a href="#12-1-测试解析效果" class="headerlink" title="12.1 测试解析效果"></a>12.1 测试解析效果</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">     url = <span class="string">"https://python123.io/ws/demo.html"</span></span><br><span class="line">     r = requests.get(url)</span><br><span class="line">     r.raise_for_status() <span class="comment"># 判断状态200</span></span><br><span class="line">     demo = r.text</span><br><span class="line">     <span class="comment"># 解析网页</span></span><br><span class="line">     soup = BeautifulSoup(demo , <span class="string">"html.parser"</span>) <span class="comment"># html.parser是解析方式</span></span><br><span class="line">     print(soup.prettify()) <span class="comment"># prettify意为美化</span></span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">     print(<span class="string">"失败"</span>)</span><br></pre></td></tr></table></figure>
<p>它可以将网页标签解析为容易看的格式</p>
<p>解析结果</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span></span><br><span class="line">   This is a python demo page</span><br><span class="line">  <span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"title"</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">b</span>&gt;</span></span><br><span class="line">    The demo python introduces several python courses.</span><br><span class="line">   <span class="tag">&lt;/<span class="name">b</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"course"</span>&gt;</span></span><br><span class="line">   Python is a wonderful general-purpose programming language. You can learn Python from novice to professional by tracking the following courses:</span><br><span class="line">   <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"py1"</span> <span class="attr">href</span>=<span class="string">"http://www.icourse163.org/course/BIT-268001"</span> <span class="attr">id</span>=<span class="string">"link1"</span>&gt;</span></span><br><span class="line">    Basic Python</span><br><span class="line">   <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">   and</span><br><span class="line">   <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"py2"</span> <span class="attr">href</span>=<span class="string">"http://www.icourse163.org/course/BIT-1001870001"</span> <span class="attr">id</span>=<span class="string">"link2"</span>&gt;</span></span><br><span class="line">    Advanced Python</span><br><span class="line">   <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">   .</span><br><span class="line">  <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="12-2-理解BeautifulSoup"><a href="#12-2-理解BeautifulSoup" class="headerlink" title="12.2 理解BeautifulSoup"></a>12.2 理解BeautifulSoup</h5><p>如有需要，可直接导入整个库</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> bs4</span><br></pre></td></tr></table></figure>
<p>BeautifulSoup是bs4库中的类</p>
<p>HTML = 标签树 = BeautifulSoup</p>
<h5 id="12-3-BeautifulSoup解析本地html文件方式"><a href="#12-3-BeautifulSoup解析本地html文件方式" class="headerlink" title="12.3 BeautifulSoup解析本地html文件方式"></a>12.3 BeautifulSoup解析本地html文件方式</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 impor BeautifulSoup</span><br><span class="line"><span class="comment"># 编码方式为utf-8</span></span><br><span class="line">soup1 = BeautifulSoup(open(<span class="string">"F:\\HTML\\text2.html"</span> , encoding = <span class="string">"utf-8"</span>) , <span class="string">"html.parser"</span> )</span><br><span class="line">print(soup1.prettify())</span><br></pre></td></tr></table></figure>
<h5 id="12-4-BeautifulSoup的解析器"><a href="#12-4-BeautifulSoup的解析器" class="headerlink" title="12.4 BeautifulSoup的解析器"></a>12.4 BeautifulSoup的解析器</h5><p><img src="/python-spider/python-7.png" alt="image"></p>
<h5 id="12-5-BeautifulSoup的基本元素"><a href="#12-5-BeautifulSoup的基本元素" class="headerlink" title="12.5 BeautifulSoup的基本元素"></a>12.5 BeautifulSoup的基本元素</h5><p><img src="/python-spider/python-8.png" alt="image"></p>
<h5 id="12-6-利用BeautifulSoup查看元素信息"><a href="#12-6-利用BeautifulSoup查看元素信息" class="headerlink" title="12.6 利用BeautifulSoup查看元素信息"></a>12.6 利用BeautifulSoup查看元素信息</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line">r = requests.get(<span class="string">"https://python123.io/ws/demo.html"</span>)</span><br><span class="line">demo = r.text</span><br><span class="line">soup = BeautifulSoup(demo , <span class="string">"html.parser"</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 查看标题</span></span><br><span class="line">soup.title</span><br><span class="line"><span class="comment"># 输出： &lt;title&gt;This is a python demo page&lt;/title&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 查询标签为&lt;a&gt;的</span></span><br><span class="line">tag = soup.a</span><br><span class="line"><span class="comment"># 输出其中第一个: &lt;a class="py1" href="http://www.icourse163.org/course/BIT-268001" id="link1"&gt;Basic Python&lt;/a&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 查看标签名</span></span><br><span class="line">soup.a.name</span><br><span class="line"><span class="comment"># 输出： 'a'</span></span><br><span class="line"><span class="comment"># 查看其父名</span></span><br><span class="line">soup.a.parent.name</span><br><span class="line"><span class="comment"># 输出：'p'</span></span><br><span class="line"><span class="comment"># 查看其父父名</span></span><br><span class="line">soup.a.parent.parent.name</span><br><span class="line"><span class="comment"># 输出 ：'body'</span></span><br></pre></td></tr></table></figure>
<p>查看标签属性信息</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">tag1 = soup.a</span><br><span class="line"><span class="comment"># .attrs属性</span></span><br><span class="line">tag1.attrs <span class="comment"># 输出：&#123;'href': 'http://www.icourse163.org/course/BIT-268001', 'class': ['py1'], 'id': 'link1'&#125;</span></span><br><span class="line"><span class="comment"># &lt;a&gt;标签的属性也是一个字典</span></span><br></pre></td></tr></table></figure>
<p>提取属性中的信息</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 提取class中值</span></span><br><span class="line">tag1.attrs[<span class="string">'class'</span>]</span><br><span class="line"><span class="comment"># 输出: ['py1']</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 提取链接</span></span><br><span class="line">tag1.attrs[<span class="string">'href'</span>]</span><br><span class="line"><span class="comment"># 输出：'http://www.icourse163.org/course/BIT-268001'</span></span><br></pre></td></tr></table></figure>
<p>提取标签中的内容</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">soup.a.string</span><br><span class="line"><span class="comment"># 输出： 'Basic Python'</span></span><br><span class="line">soup.p.string</span><br><span class="line"><span class="comment"># 输出：'The demo python introduces several python courses.'</span></span><br></pre></td></tr></table></figure>
<p>特别的是：注释标签，获取内容时不会表示其中是否是注释，只有通过查看它的类型来区分</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>newsoup = BeautifulSoup(<span class="string">"&lt;b&gt;&lt;!--This is a comment--&gt;&lt;/b&gt;&lt;p&gt;This is not a comment &lt;/p&gt;"</span>, <span class="string">"html.parser"</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>newsoup.b.string</span><br><span class="line"><span class="string">'This is a comment'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>type(newsoup.b.string)</span><br><span class="line">&lt;<span class="class"><span class="keyword">class</span> '<span class="title">bs4</span>.<span class="title">element</span>.<span class="title">Comment</span>'&gt;</span></span><br><span class="line"><span class="class">&gt;&gt;&gt; <span class="title">newsoup</span>.<span class="title">p</span>.<span class="title">string</span></span></span><br><span class="line"><span class="class">'<span class="title">This</span> <span class="title">is</span> <span class="title">not</span> <span class="title">a</span> <span class="title">comment</span> '</span></span><br><span class="line"><span class="class">&gt;&gt;&gt; <span class="title">type</span><span class="params">(newsoup.p.string)</span></span></span><br><span class="line"><span class="class">&lt;<span class="title">class</span> '<span class="title">bs4</span>.<span class="title">element</span>.<span class="title">NavigableString</span>'&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="12-7-元素、属性总结"><a href="#12-7-元素、属性总结" class="headerlink" title="12.7 元素、属性总结"></a>12.7 元素、属性总结</h5><p><img src="/python-spider/python-9.png" alt="image"></p>
<h4 id="13-基于bs4的HTML的遍历方法"><a href="#13-基于bs4的HTML的遍历方法" class="headerlink" title="13 基于bs4的HTML的遍历方法"></a>13 基于bs4的HTML的遍历方法</h4><p><img src="/python-spider/python-10.png" alt="image"></p>
<h5 id="13-1-标签树的下行遍历"><a href="#13-1-标签树的下行遍历" class="headerlink" title="13.1 标签树的下行遍历"></a>13.1 标签树的下行遍历</h5><p><img src="/python-spider/python-11.png" alt="image"></p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>soup.head</span><br><span class="line">&lt;head&gt;&lt;title&gt;This is a python demo page&lt;/title&gt;&lt;/head&gt;</span><br></pre></td></tr></table></figure>
<p>head的子节点列表,body的子节点列表</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line"><span class="comment"># head的子节点列表</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>soup.head.contents</span><br><span class="line">[&lt;title&gt;This is a python demo page&lt;/title&gt;]</span><br><span class="line"><span class="comment"># body的子节点列表</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>soup.body.contents</span><br><span class="line">['\n', &lt;p class="title"&gt;&lt;b&gt;The demo python introduces several python courses.&lt;/b&gt;&lt;/p&gt;, '\n', &lt;p class="course"&gt;Python is a wonderful general-purpose programming language. You can learn Python from novice to professional by tracking the following courses:</span><br><span class="line"></span><br><span class="line">&lt;a class="py1" href="http://www.icourse163.org/course/BIT-268001" id="link1"&gt;Basic Python&lt;/a&gt; and &lt;a class="py2" href="http://www.icourse163.org/course/BIT-1001870001" id="link2"&gt;Advanced Python&lt;/a&gt;.&lt;/p&gt;, '\n']</span><br></pre></td></tr></table></figure>
<p>查看body子节点的个数</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>len(soup.body.contents)</span><br><span class="line"><span class="number">5</span></span><br></pre></td></tr></table></figure>
<p>输出body子节点列表中第一个元素</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>soup.body.contents[<span class="number">1</span>]</span><br><span class="line">&lt;p class="title"&gt;&lt;b&gt;The demo python introduces several python courses.&lt;/b&gt;&lt;/p&gt;</span><br></pre></td></tr></table></figure>
<h5 id="遍历子节点、子孙节点"><a href="#遍历子节点、子孙节点" class="headerlink" title="遍历子节点、子孙节点"></a>遍历子节点、子孙节点</h5><p><strong>遍历子节点</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> child <span class="keyword">in</span> soup.body.children:</span><br><span class="line">	print(child)</span><br></pre></td></tr></table></figure>
<p>结果</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"title"</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>The demo python introduces several python courses.<span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"course"</span>&gt;</span>Python is a wonderful general-purpose programming language. You can learn Python from novice to professional by tracking the following courses:</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"py1"</span> <span class="attr">href</span>=<span class="string">"http://www.icourse163.org/course/BIT-268001"</span> <span class="attr">id</span>=<span class="string">"link1"</span>&gt;</span>Basic Python<span class="tag">&lt;/<span class="name">a</span>&gt;</span> and <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"py2"</span> <span class="attr">href</span>=<span class="string">"http://www.icourse163.org/course/BIT-1001870001"</span> <span class="attr">id</span>=<span class="string">"link2"</span>&gt;</span>Advanced Python<span class="tag">&lt;/<span class="name">a</span>&gt;</span>.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>遍历子孙节点</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> child <span class="keyword">in</span> soup.body.descendants:</span><br><span class="line">	print(child)</span><br></pre></td></tr></table></figure>
<p>结果</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"title"</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>The demo python introduces several python courses.<span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">b</span>&gt;</span>The demo python introduces several python courses.<span class="tag">&lt;/<span class="name">b</span>&gt;</span></span><br><span class="line">The demo python introduces several python courses.</span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"course"</span>&gt;</span>Python is a wonderful general-purpose programming language. You can learn Python from novice to professional by tracking the following courses:</span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"py1"</span> <span class="attr">href</span>=<span class="string">"http://www.icourse163.org/course/BIT-268001"</span> <span class="attr">id</span>=<span class="string">"link1"</span>&gt;</span>Basic Python<span class="tag">&lt;/<span class="name">a</span>&gt;</span> and <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"py2"</span> <span class="attr">href</span>=<span class="string">"http://www.icourse163.org/course/BIT-1001870001"</span> <span class="attr">id</span>=<span class="string">"link2"</span>&gt;</span>Advanced Python<span class="tag">&lt;/<span class="name">a</span>&gt;</span>.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">Python is a wonderful general-purpose programming language. You can learn Python from novice to professional by tracking the following courses:</span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"py1"</span> <span class="attr">href</span>=<span class="string">"http://www.icourse163.org/course/BIT-268001"</span> <span class="attr">id</span>=<span class="string">"link1"</span>&gt;</span>Basic Python<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">Basic Python</span><br><span class="line"> and </span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"py2"</span> <span class="attr">href</span>=<span class="string">"http://www.icourse163.org/course/BIT-1001870001"</span> <span class="attr">id</span>=<span class="string">"link2"</span>&gt;</span>Advanced Python<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">Advanced Python</span><br><span class="line">.</span><br></pre></td></tr></table></figure>
<h5 id="13-2-标签树的上行遍历"><a href="#13-2-标签树的上行遍历" class="headerlink" title="13.2 标签树的上行遍历"></a>13.2 标签树的上行遍历</h5><p><img src="/python-spider/python-12.png" alt="image"><br>与下行遍历类似</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">soup.body.parent</span><br><span class="line">soup.body.parents</span><br></pre></td></tr></table></figure>
<p>==soup本身的parent为空==</p>
<p>打印&lt;a&gt;标签的.parents.name</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>demo = r.text</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>soup = BeautifulSoup(demo , <span class="string">"html.parser"</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> parent <span class="keyword">in</span> soup.a.parents:</span><br><span class="line">	<span class="keyword">if</span> parent <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">		print(parent)</span><br><span class="line">	<span class="keyword">else</span>:</span><br><span class="line">		print(parent.name)</span><br><span class="line"></span><br><span class="line">		</span><br><span class="line">p</span><br><span class="line">body</span><br><span class="line">html</span><br><span class="line">[document]</span><br><span class="line">```python</span><br><span class="line"><span class="comment">##### 13.3 平行遍历</span></span><br><span class="line">![image](/python-spider/python<span class="number">-13.</span>png)</span><br><span class="line"></span><br><span class="line">==条件：平行遍历发生在同一个父子节点下的节点==</span><br><span class="line"></span><br><span class="line">遍历\&lt;a&gt;之后的平行节点</span><br><span class="line"></span><br><span class="line">==注意：节点有可能是string类型的<span class="keyword">and</span>，而不一定完全是标签类型==</span><br></pre></td></tr></table></figure>
<blockquote>
<blockquote>
<blockquote>
<p>for sibling in soup.a.next_siblings:<br>    if isinstance(sibling,str):<br>        print(sibling)<br>    else:<br>        print(sibling.name)</p>
</blockquote>
</blockquote>
</blockquote>
<p> and<br>a<br>.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">遍历\&lt;a&gt;之后的平行节点</span><br><span class="line">&#96;&#96;&#96;python</span><br><span class="line">&gt;&gt;&gt; for sibling in soup.a.next_siblings:</span><br><span class="line">	print(sibling)</span><br><span class="line"></span><br><span class="line">	</span><br><span class="line"> and </span><br><span class="line">&lt;a class&#x3D;&quot;py2&quot; href&#x3D;&quot;http:&#x2F;&#x2F;www.icourse163.org&#x2F;course&#x2F;BIT-1001870001&quot; id&#x3D;&quot;link2&quot;&gt;Advanced Python&lt;&#x2F;a&gt;</span><br><span class="line">.</span><br></pre></td></tr></table></figure>
<p>遍历&lt;a&gt;之前的平行节点</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> sibling <span class="keyword">in</span> soup.a.previous_siblings:</span><br><span class="line">	print(sibling)</span><br><span class="line"></span><br><span class="line">	</span><br><span class="line">Python <span class="keyword">is</span> a wonderful general-purpose programming language. You can learn Python <span class="keyword">from</span> novice to professional by tracking the following courses:</span><br></pre></td></tr></table></figure>
<h5 id="13-4-规整输出HTML的prettify-方法"><a href="#13-4-规整输出HTML的prettify-方法" class="headerlink" title="13.4 规整输出HTML的prettify()方法"></a>13.4 规整输出HTML的prettify()方法</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(soup.prettify())</span><br><span class="line">print(soup.a.prettify())</span><br></pre></td></tr></table></figure>
<h4 id="14-信息标记的三种形式"><a href="#14-信息标记的三种形式" class="headerlink" title="14 信息标记的三种形式"></a>14 信息标记的三种形式</h4><p>XML</p>
<p><img src="/python-spider/python-14.png" alt="image"><br>JSON : 有类型的键值对</p>
<p><img src="/python-spider/python-15.png" alt="image"><br>YAML ：无类型的键值对</p>
<p><img src="/python-spider/python-16.png" alt="image"></p>
<h4 id="15-信息的提取"><a href="#15-信息的提取" class="headerlink" title="15 信息的提取"></a>15 信息的提取</h4><p>实例<br><img src="/python-spider/python-17.png" alt="image"><br>使用了soup.find_all()方法</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">查找所有&lt;a&gt;</span><br><span class="line">soup.find_all(<span class="string">'a'</span>)</span><br></pre></td></tr></table></figure>
<p>完整代码</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line">url = <span class="string">"https://python123.io/ws/demo.html"</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">     r = requests.get(url)</span><br><span class="line">     r.raise_for_status()</span><br><span class="line">     demo = r.text</span><br><span class="line">     soup = BeautifulSoup(demo , <span class="string">"html.parser"</span> )</span><br><span class="line">     <span class="keyword">for</span> link <span class="keyword">in</span> soup.find_all(<span class="string">'a'</span>):</span><br><span class="line">          print(link.get(<span class="string">'href'</span>))</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">     print(<span class="string">"失败"</span>)</span><br></pre></td></tr></table></figure>
<h5 id="15-1-soup-find-all-方法的查询信息"><a href="#15-1-soup-find-all-方法的查询信息" class="headerlink" title="15.1 soup.find_all()方法的查询信息"></a>15.1 soup.find_all()方法的查询信息</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&lt;&gt;.find_all(name,attrs,recursive,string,**kwargs)</span><br></pre></td></tr></table></figure>
<h6 id="15-1-1-参数name，表示对标签名字的查找字符串"><a href="#15-1-1-参数name，表示对标签名字的查找字符串" class="headerlink" title="15.1.1 参数name，表示对标签名字的查找字符串"></a>15.1.1 参数name，表示对标签名字的查找字符串</h6><p>实例：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> requests</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>url = <span class="string">"https://python123.io/ws/demo.html"</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>r = requests.get(url)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>demo = r.text</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>soup = BeautifulSoup(demo , <span class="string">"html.parser"</span>)</span><br></pre></td></tr></table></figure>
<p>查找所有&lt;a&gt;标签，输出是个列表</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>soup.find_all(<span class="string">'a'</span>)</span><br><span class="line">[&lt;a class="py1" href="http://www.icourse163.org/course/BIT-268001" id="link1"&gt;Basic Python&lt;/a&gt;, &lt;a class="py2" href="http://www.icourse163.org/course/BIT-1001870001" id="link2"&gt;Advanced Python&lt;/a&gt;]</span><br></pre></td></tr></table></figure>
<p>查找所有的&lt;a&gt;&lt;b&gt;标签</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>soup.find_all([<span class="string">'a'</span> , <span class="string">'b'</span>])</span><br><span class="line">[&lt;b&gt;The demo python introduces several python courses.&lt;/b&gt;, &lt;a class="py1" href="http://www.icourse163.org/course/BIT-268001" id="link1"&gt;Basic Python&lt;/a&gt;, &lt;a class="py2" href="http://www.icourse163.org/course/BIT-1001870001" id="link2"&gt;Advanced Python&lt;/a&gt;]</span><br></pre></td></tr></table></figure>
<p>如果soup.find_all(True) , 则表示==查找出所有的标签==</p>
<p>打印页面所有标签名</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> tag <span class="keyword">in</span> soup.find_all(<span class="literal">True</span>):</span><br><span class="line">	print(tag.name)</span><br><span class="line"></span><br><span class="line">	</span><br><span class="line">html</span><br><span class="line">head</span><br><span class="line">title</span><br><span class="line">body</span><br><span class="line">p</span><br><span class="line">b</span><br><span class="line">p</span><br><span class="line">a</span><br><span class="line">a</span><br></pre></td></tr></table></figure>
<p>打印所有以b开头的标签</p>
<p>用到==正则表达式库==</p>
<p>使用方法:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 查找所有以b开头的标签</span></span><br><span class="line">soup.find_all(re.compile(<span class="string">'b'</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> re</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> tag <span class="keyword">in</span> soup.find_all(re.compile(<span class="string">'b'</span>)):</span><br><span class="line">	print(tag.name)</span><br><span class="line"></span><br><span class="line">	</span><br><span class="line">body</span><br><span class="line">b</span><br></pre></td></tr></table></figure>
<h6 id="15-1-2-参数attrs，对标签属性值的检索字符串，可标注属性检索"><a href="#15-1-2-参数attrs，对标签属性值的检索字符串，可标注属性检索" class="headerlink" title="15.1.2 参数attrs，对标签属性值的检索字符串，可标注属性检索"></a>15.1.2 参数attrs，对标签属性值的检索字符串，可标注属性检索</h6><p>实例:</p>
<p>检索带有course属性值的&lt;p&gt;标签</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>soup.find_all(<span class="string">'p'</span> , <span class="string">'course'</span>)</span><br><span class="line">[&lt;p class="course"&gt;Python is a wonderful general-purpose programming language. You can learn Python from novice to professional by tracking the following courses:</span><br><span class="line"></span><br><span class="line">&lt;a class="py1" href="http://www.icourse163.org/course/BIT-268001" id="link1"&gt;Basic Python&lt;/a&gt; and &lt;a class="py2" href="http://www.icourse163.org/course/BIT-1001870001" id="link2"&gt;Advanced Python&lt;/a&gt;.&lt;/p&gt;]</span><br></pre></td></tr></table></figure>
<p>查找属性id=’link1’的标签</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">soup.find_all(id=<span class="string">'link1'</span>)</span><br><span class="line">[&lt;a class="py1" href="http://www.icourse163.org/course/BIT-268001" id="link1"&gt;Basic Python&lt;/a&gt;]</span><br></pre></td></tr></table></figure>
<p>使用正则表达式检索所有id包含’link’的标签，link1,link2…</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> re</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>soup.find_all(id = re.compile(<span class="string">'link'</span>))</span><br><span class="line">[&lt;a class="py1" href="http://www.icourse163.org/course/BIT-268001" id="link1"&gt;Basic Python&lt;/a&gt;, &lt;a class="py2" href="http://www.icourse163.org/course/BIT-1001870001" id="link2"&gt;Advanced Python&lt;/a&gt;]</span><br></pre></td></tr></table></figure>
<h6 id="15-1-3-参数-recursive：是否对子孙全部检索，默认True-改为False时，表示只检索其子节点"><a href="#15-1-3-参数-recursive：是否对子孙全部检索，默认True-改为False时，表示只检索其子节点" class="headerlink" title="15.1.3 参数 recursive：是否对子孙全部检索，默认True,改为False时，表示只检索其子节点"></a>15.1.3 参数 recursive：是否对子孙全部检索，默认True,改为False时，表示只检索其子节点</h6><p>例：表示soup的子节点中没有&lt;a&gt;标签</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>soup.find_all(<span class="string">'a'</span> , recursive=<span class="literal">False</span>)</span><br><span class="line">[]</span><br></pre></td></tr></table></figure>
<h6 id="15-1-4-参数string-lt-gt-…-lt-gt-中字符串区域的检索字符串"><a href="#15-1-4-参数string-lt-gt-…-lt-gt-中字符串区域的检索字符串" class="headerlink" title="15.1.4 参数string : &lt;&gt;…&lt;/&gt;中字符串区域的检索字符串"></a>15.1.4 参数string : &lt;&gt;…&lt;/&gt;中字符串区域的检索字符串</h6><p>例:</p>
<p>检索标签内容中的 Basic Python</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>soup.find_all(string = <span class="string">"Basic Python"</span>)</span><br><span class="line">[<span class="string">'Basic Python'</span>]</span><br></pre></td></tr></table></figure>

<p>使用正则表达式检索标签内容==含有==Python的内容</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>soup.find_all(string = re.compile(<span class="string">"Python"</span>))</span><br><span class="line">[<span class="string">'Python is a wonderful general-purpose programming language. You can learn Python from novice to professional by tracking the following courses:\r\n'</span>, <span class="string">'Basic Python'</span>, <span class="string">'Advanced Python'</span>]</span><br></pre></td></tr></table></figure>
<h6 id="15-1-5-find的扩展方法"><a href="#15-1-5-find的扩展方法" class="headerlink" title="15.1.5 find的扩展方法"></a>15.1.5 find的扩展方法</h6><p><img src="/python-spider/python-18.png" alt="image"></p>
<p>由于find_all()十分常用，==soup.find_all()等价于soup()==</p>
<h4 id="16-实例，爬取中国大学排名信息"><a href="#16-实例，爬取中国大学排名信息" class="headerlink" title="16 实例，爬取中国大学排名信息"></a>16 实例，爬取中国大学排名信息</h4><p>完整代码:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">import</span> bs4</span><br><span class="line"></span><br><span class="line"><span class="comment"># 爬取大学排名网页</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getHTMLText</span><span class="params">(url)</span>:</span></span><br><span class="line">     <span class="keyword">try</span>:</span><br><span class="line">          r = requests.get(url , timeout = <span class="number">30</span>)</span><br><span class="line">          r.raise_for_status() <span class="comment"># 判断状态码</span></span><br><span class="line">          r.encoding = r.apparent_encoding</span><br><span class="line">          <span class="keyword">return</span> r.text</span><br><span class="line">     <span class="keyword">except</span>:</span><br><span class="line">          <span class="keyword">return</span> <span class="string">"爬取失败"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 提取网页中大学排名相关信息，并存到列表</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getUnivList</span><span class="params">(ulist , html)</span>:</span></span><br><span class="line">     soup = BeautifulSoup(html , <span class="string">"html.parser"</span>)</span><br><span class="line">     <span class="keyword">for</span> tr <span class="keyword">in</span> soup.find(<span class="string">'tbody'</span>).children:</span><br><span class="line">          <span class="keyword">if</span> isinstance(tr , bs4.element.Tag):</span><br><span class="line">               tds = tr.find_all(<span class="string">'td'</span>)</span><br><span class="line">               ulist.append( [tds[<span class="number">0</span>].string , tds[<span class="number">1</span>].string , tds[<span class="number">3</span>].string] )</span><br><span class="line">               </span><br><span class="line">     </span><br><span class="line"><span class="comment"># 输出大学排名列表</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">printUnivList</span><span class="params">(ulist , num)</span>:</span></span><br><span class="line">     tplt = <span class="string">"&#123;0:^6&#125;\t&#123;1:&#123;3&#125;^15&#125;\t&#123;2:^6&#125;"</span></span><br><span class="line">     print(tplt.format(<span class="string">"排名"</span> , <span class="string">"大学名称"</span> , <span class="string">"总分"</span> , chr(<span class="number">12288</span>)))</span><br><span class="line">     <span class="keyword">for</span> i <span class="keyword">in</span> range(num):</span><br><span class="line">          u = ulist[i]</span><br><span class="line">          print(tplt.format(u[<span class="number">0</span>] , u[<span class="number">1</span>] , u[<span class="number">2</span>] , chr(<span class="number">12288</span>)))</span><br><span class="line">     print(str(num) + <span class="string">"所大学"</span>)</span><br><span class="line">     </span><br><span class="line"></span><br><span class="line"><span class="comment"># 主函数</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">     uinfo = []</span><br><span class="line">     url = <span class="string">"http://www.zuihaodaxue.com/zuihaodaxuepaiming2019.html"</span></span><br><span class="line">     html = getHTMLText(url)</span><br><span class="line">     getUnivList(uinfo , html)</span><br><span class="line">     printUnivList(uinfo , <span class="number">30</span>)</span><br><span class="line">main()</span><br></pre></td></tr></table></figure>

<h5 id="16-1-代码分析"><a href="#16-1-代码分析" class="headerlink" title="16.1 代码分析"></a>16.1 代码分析</h5><hr>
<p>为什么导入 bs4库?</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># isinstance()用于判断tr类型时，bs4.element.Tag需要用到bs4库</span></span><br><span class="line"> isinstance(tr , bs4.element.Tag)</span><br></pre></td></tr></table></figure>
<hr>
<p> 主函数<br> <figure class="highlight python"><table><tr><td class="code"><pre><span class="line"> <span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    ...</span><br><span class="line">main()</span><br></pre></td></tr></table></figure></p>
<hr>
<p>==注意网页的编码方式==</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">r.encoding = r.apparent_encoding</span><br></pre></td></tr></table></figure>
<hr>
<p>网页表格的父子关系:  ==标签==</p>
<p>&lt;tbody&gt;–&gt;&lt;tr&gt;–&gt;&lt;td&gt;</p>
<p>&lt;tbody&gt;包含整个表的信息，这里包含全部大学排名及其相关的信息</p>
<p>&lt;tr&gt;包含一个大学的所有相关信息,表示表的==每一行==</p>
<p>&lt;td&gt;就是一个大学中的一个信息，如名称，排名；表格==一行中的一个信息==</p>
<hr>
<p>数据的存入：</p>
<p>使用二维列表;</p>
<p>一维列表中再存一维列表构成二维列表</p>
<hr>
<p>格式化输出 str.format()</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(<span class="string">"&#123;:^6&#125;\t&#123;:^15&#125;\t&#123;:^6&#125;"</span>.format(<span class="string">"排名"</span>，<span class="string">"大学名称"</span>,<span class="string">"分数"</span>))</span><br></pre></td></tr></table></figure>
<p>^ 表示右对齐</p>
<hr>
<p>格式化输出的优化（中西文输出的优化）</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 表示中文的空格</span></span><br><span class="line">chr(<span class="number">12288</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># &#123;1:&#123;3&#125;^15&#125; 含义:1代表format()中第二个参数来填充这个位置；</span></span><br><span class="line"><span class="comment"># &#123;3&#125;代表用format()中第四个参数来填充字符前的空白区域</span></span><br><span class="line"><span class="comment"># 15代表宽度</span></span><br><span class="line">string1 = <span class="string">"&#123;0:^6&#125;\t&#123;1:&#123;3&#125;^15&#125;\t&#123;2:^6&#125;"</span>.format(u[<span class="number">0</span>],u[<span class="number">1</span>],u[<span class="number">2</span>],chr(<span class="number">12288</span>))</span><br></pre></td></tr></table></figure>
<h4 id="17-正则表达式"><a href="#17-正则表达式" class="headerlink" title="17 正则表达式"></a>17 正则表达式</h4><p><img src="/python-spider/python-19.png" alt="image"></p>
<p><img src="/python-spider/python-20.png" alt="image"></p>
<p><img src="/python-spider/python-21.png" alt="image"></p>
<p><img src="/python-spider/python-22.png" alt="image"></p>
<p><img src="/python-spider/python-23.png" alt="image"></p>
<p>正则表达式的表示类型<br><img src="/python-spider/python-24.png" alt="image"></p>
<p><img src="/python-spider/python-25.png" alt="image"></p>
<h4 id="18-Re库主要功能函数-正则表达式库"><a href="#18-Re库主要功能函数-正则表达式库" class="headerlink" title="18 Re库主要功能函数(正则表达式库)"></a>18 Re库主要功能函数(正则表达式库)</h4><p><img src="/python-spider/python-26.png" alt="image"></p>
<h5 id="18-1-re-search"><a href="#18-1-re-search" class="headerlink" title="18.1 re.search()"></a>18.1 re.search()</h5><p><img src="/python-spider/python-27.png" alt="image"></p>
<p><img src="/python-spider/python-28.png" alt="image"></p>
<p>例:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> re</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>match = re.search(<span class="string">r'[1-9]\d&#123;5&#125;'</span> , <span class="string">'BIT 100081'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">if</span> match:</span><br><span class="line">	print(match.group(<span class="number">0</span>))</span><br><span class="line"></span><br><span class="line">	</span><br><span class="line"><span class="number">100081</span></span><br></pre></td></tr></table></figure>
<h5 id="18-2-re-match"><a href="#18-2-re-match" class="headerlink" title="18.2 re.match()"></a>18.2 re.match()</h5><p>它匹配字符串是在==头位置匹配==</p>
<p>例:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> re</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>match = re.match(<span class="string">r'[1-9]\d&#123;5&#125;'</span> , <span class="string">'100067 BIT'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">if</span> match:</span><br><span class="line">	print(match.group(<span class="number">0</span>))</span><br><span class="line"></span><br><span class="line">	</span><br><span class="line"><span class="number">100067</span></span><br></pre></td></tr></table></figure>
<h5 id="18-3-re-findall"><a href="#18-3-re-findall" class="headerlink" title="18.3 re.findall()"></a>18.3 re.findall()</h5><p>它返回的是个列表</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> re</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ls = re.findall(<span class="string">r'[1-9]\d&#123;5&#125;'</span> , <span class="string">'IJK100088 OKL156009 IOP188899'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(ls)</span><br><span class="line">[<span class="string">'100088'</span>, <span class="string">'156009'</span>, <span class="string">'188899'</span>]</span><br></pre></td></tr></table></figure>
<h5 id="18-4-re-split"><a href="#18-4-re-split" class="headerlink" title="18.4 re.split()"></a>18.4 re.split()</h5><p><img src="/python-spider/python-29.png" alt="image"></p>
<p>maxsplit=1 参数表示，只切割出第一个，剩下的原样输出</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>re.split(<span class="string">r'[1-9]\d&#123;5&#125;'</span> , <span class="string">'IJK100088 OKL156009 IOP188899'</span>)</span><br><span class="line">[<span class="string">'IJK'</span>, <span class="string">' OKL'</span>, <span class="string">' IOP'</span>, <span class="string">''</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>re.split(<span class="string">r'[1-9]\d&#123;5&#125;'</span> , <span class="string">'IJK100088 OKL156009 IOP188899'</span> , maxsplit=<span class="number">1</span>)</span><br><span class="line">[<span class="string">'IJK'</span>, <span class="string">' OKL156009 IOP188899'</span>]</span><br></pre></td></tr></table></figure>
<h5 id="18-5-re-finditer"><a href="#18-5-re-finditer" class="headerlink" title="18.5 re.finditer()"></a>18.5 re.finditer()</h5><p>finditer()遍历了整个字符串，每次返回一个match类型</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> m <span class="keyword">in</span> re.finditer(<span class="string">r'[1-9]\d&#123;5&#125;'</span> , <span class="string">'IJK100088 OKL156009 IOP188899'</span>):</span><br><span class="line">	<span class="keyword">if</span> m:</span><br><span class="line">		print(m.group(<span class="number">0</span>))</span><br><span class="line"></span><br><span class="line"><span class="number">100088</span></span><br><span class="line"><span class="number">156009</span></span><br><span class="line"><span class="number">188899</span></span><br></pre></td></tr></table></figure>
<h5 id="18-6-re-sub-pattern-repl-string-count-0-flags-0"><a href="#18-6-re-sub-pattern-repl-string-count-0-flags-0" class="headerlink" title="18.6 re.sub(pattern,repl,string,count=0,flags=0)"></a>18.6 re.sub(pattern,repl,string,count=0,flags=0)</h5><p><img src="/python-spider/python-30.png" alt="image"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>re.sub(<span class="string">r'[1-9]\d&#123;5&#125;'</span> , <span class="string">'zipcode'</span> , <span class="string">'IJK100088 OKL156009 IOP188899'</span>)</span><br><span class="line"><span class="string">'IJKzipcode OKLzipcode IOPzipcode'</span></span><br></pre></td></tr></table></figure>
<h5 id="18-7-正则表达式的面向对象的用法"><a href="#18-7-正则表达式的面向对象的用法" class="headerlink" title="18.7 正则表达式的面向对象的用法"></a>18.7 正则表达式的面向对象的用法</h5><p><img src="/python-spider/python-31.png" alt="image"></p>
<p>将正则表达式存储为==正则表达式对象==</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">pat = re.compile(<span class="string">r'[1-9]\d&#123;5&#125;'</span>)</span><br></pre></td></tr></table></figure>
<h5 id="18-8-regex-re-compile-pattern-flags-0"><a href="#18-8-regex-re-compile-pattern-flags-0" class="headerlink" title="18.8 regex = re.compile(pattern,flags=0)"></a>18.8 regex = re.compile(pattern,flags=0)</h5><p>regex:正则表达式</p>
<p>等价用法:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">regex.search()</span><br><span class="line">regex.match()</span><br><span class="line">regex.findall()</span><br><span class="line">regex.split()</span><br><span class="line">regex.finditer()</span><br><span class="line">regex.sub()</span><br></pre></td></tr></table></figure>
<h5 id="18-9-match对象"><a href="#18-9-match对象" class="headerlink" title="18.9 match对象"></a>18.9 match对象</h5><p>==match对象只有一个结果，字符串中有多个可用finditer()==</p>
<p><img src="/python-spider/python-32.png" alt="image"></p>
<p><img src="/python-spider/python-33.png" alt="image"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> re</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>m = re.search(<span class="string">r'[1-9]\d&#123;5&#125;'</span> , <span class="string">'KLO100089 JIO100056'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>m.string</span><br><span class="line"><span class="string">'KLO100089 JIO100056'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>m.re</span><br><span class="line">re.compile(<span class="string">'[1-9]\\d&#123;5&#125;'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>m.pos</span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>m.endpos</span><br><span class="line"><span class="number">19</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>m.group(<span class="number">0</span>)</span><br><span class="line"><span class="string">'100089'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>m</span><br><span class="line">&lt;re.Match object; span=(<span class="number">3</span>, <span class="number">9</span>), match=<span class="string">'100089'</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>m.start()</span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>m.end()</span><br><span class="line"><span class="number">9</span></span><br></pre></td></tr></table></figure>
<h4 id="19-实例：爬取京东鼠标"><a href="#19-实例：爬取京东鼠标" class="headerlink" title="19 实例：爬取京东鼠标"></a>19 实例：爬取京东鼠标</h4><h5 id="19-1-查看链接与接口"><a href="#19-1-查看链接与接口" class="headerlink" title="19.1 查看链接与接口"></a>19.1 查看链接与接口</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># https://search.jd.com/Search?keyword=%E9%BC%A0%E6%A0%87&amp;enc=utf-8&amp;wq=%E9%BC%A0%E6%A0%87&amp;pvid=ab1812a3adfc4abfa04fc59f52d3e6cb</span></span><br><span class="line"><span class="comment"># https://search.jd.com/Search?keyword=%E9%BC%A0%E6%A0%87&amp;enc=utf-8&amp;qrst=1&amp;rt=1&amp;stop=1&amp;vt=2&amp;wq=%E9%BC%A0%E6%A0%87&amp;page=3&amp;s=59&amp;click=0</span></span><br><span class="line"><span class="comment"># https://search.jd.com/Search?keyword=%E9%BC%A0%E6%A0%87&amp;enc=utf-8&amp;qrst=1&amp;rt=1&amp;stop=1&amp;vt=2&amp;wq=%E9%BC%A0%E6%A0%87&amp;page=5&amp;s=114&amp;click=0</span></span><br><span class="line"><span class="comment"># https://search.jd.com/Search?keyword=%E9%BC%A0%E6%A0%87&amp;enc=utf-8&amp;qrst=1&amp;rt=1&amp;stop=1&amp;vt=2&amp;wq=%E9%BC%A0%E6%A0%87&amp;page=7&amp;s=166&amp;click=0</span></span><br><span class="line"><span class="comment"># https://search.jd.com/Search?keyword=%E9%BC%A0%E6%A0%87&amp;enc=utf-8&amp;qrst=1&amp;rt=1&amp;stop=1&amp;vt=2&amp;wq=%E9%BC%A0%E6%A0%87&amp;page=9&amp;s=218&amp;click=0</span></span><br><span class="line"><span class="comment"># https://search.jd.com/Search?keyword=%E9%BC%A0%E6%A0%87&amp;enc=utf-8&amp;qrst=1&amp;rt=1&amp;stop=1&amp;vt=2&amp;wq=%E9%BC%A0%E6%A0%87&amp;page=11&amp;s=271&amp;click=0</span></span><br></pre></td></tr></table></figure>
<h5 id="19-2-使用的库"><a href="#19-2-使用的库" class="headerlink" title="19.2 使用的库"></a>19.2 使用的库</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import requests</span><br><span class="line">import re</span><br></pre></td></tr></table></figure>
<h5 id="19-3-查看网页源码提取信息"><a href="#19-3-查看网页源码提取信息" class="headerlink" title="19.3 查看网页源码提取信息"></a>19.3 查看网页源码提取信息</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">if len(name[i].split(&#39;&gt;&#39;)) &lt; 3 :</span><br><span class="line">                name1 &#x3D; name[i].split(&#39;&gt;&#39;)[1]</span><br><span class="line">            elif len(name[i].split(&#39;&gt;&#39;)) &gt;&#x3D; 3 and len(name[i].split(&#39;&gt;&#39;)) &lt; 6 :</span><br><span class="line">                name1 &#x3D; name[i].split(&#39;&gt;&#39;)[2]</span><br><span class="line">            else:</span><br><span class="line">                name1 &#x3D; name[i].split(&#39;&gt;&#39;)[7]</span><br><span class="line">            name2 &#x3D; name1.split(&#39;&lt;&#39;)[0]</span><br><span class="line">            price1 &#x3D; price[i].split(&#39;&gt;&#39;)[1]</span><br><span class="line">            price2 &#x3D; price1.split(&#39;&lt;&#39;)[0]</span><br><span class="line">            ulist.append([name2 , price2])</span><br></pre></td></tr></table></figure>

<h5 id="19-4-完整代码"><a href="#19-4-完整代码" class="headerlink" title="19.4 完整代码"></a>19.4 完整代码</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getHTMLText</span><span class="params">(url)</span>:</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        kv = &#123;<span class="string">'User-Agent'</span>:<span class="string">'Mozilla/5.0'</span>&#125;</span><br><span class="line">        r = requests.get(url , headers = kv)</span><br><span class="line">        r.raise_for_status()</span><br><span class="line">        r.encoding = r.apparent_encoding</span><br><span class="line">        <span class="keyword">return</span> r.text</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"爬取失败"</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getInfo</span><span class="params">(ulist , html)</span>:</span></span><br><span class="line">    name = re.findall(<span class="string">'\&lt;em\&gt;.*?\&lt;font'</span> , html)</span><br><span class="line">    price = re.findall(<span class="string">'\&lt;i\&gt;[\d]*\.[\d]*\&lt;\/i\&gt;'</span> , html)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(name)):</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="keyword">if</span> len(name[i].split(<span class="string">'&gt;'</span>)) &lt; <span class="number">3</span> :</span><br><span class="line">                name1 = name[i].split(<span class="string">'&gt;'</span>)[<span class="number">1</span>]</span><br><span class="line">            <span class="keyword">elif</span> len(name[i].split(<span class="string">'&gt;'</span>)) &gt;= <span class="number">3</span> <span class="keyword">and</span> len(name[i].split(<span class="string">'&gt;'</span>)) &lt; <span class="number">6</span> :</span><br><span class="line">                name1 = name[i].split(<span class="string">'&gt;'</span>)[<span class="number">2</span>]</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                name1 = name[i].split(<span class="string">'&gt;'</span>)[<span class="number">7</span>]</span><br><span class="line">            name2 = name1.split(<span class="string">'&lt;'</span>)[<span class="number">0</span>]</span><br><span class="line">            price1 = price[i].split(<span class="string">'&gt;'</span>)[<span class="number">1</span>]</span><br><span class="line">            price2 = price1.split(<span class="string">'&lt;'</span>)[<span class="number">0</span>]</span><br><span class="line">            ulist.append([name2 , price2])</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">printList</span><span class="params">(ulist)</span>:</span></span><br><span class="line">    string = <span class="string">'&#123;0:&lt;6&#125;\t&#123;1:&#123;3&#125;&lt;40&#125;\t&#123;2:&lt;6&#125;'</span></span><br><span class="line">    print(string.format(<span class="string">"商品序列"</span>,<span class="string">"商品名称"</span>,<span class="string">"商品价格"</span>,chr(<span class="number">12288</span>)))</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(ulist)):</span><br><span class="line">        info = ulist[i]</span><br><span class="line">        print(string.format(i+<span class="number">1</span>,info[<span class="number">0</span>],info[<span class="number">1</span>],chr(<span class="number">12288</span>)))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    infoList = []</span><br><span class="line">    pageNum = <span class="number">5</span></span><br><span class="line">    url = <span class="string">"https://search.jd.com/Search?keyword=%E9%BC%A0%E6%A0%87&amp;enc=utf-8"</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(pageNum):</span><br><span class="line">        html = getHTMLText(url)</span><br><span class="line">        url = <span class="string">"https://search.jd.com/Search?keyword=%E9%BC%A0%E6%A0%87&amp;enc=utf-8"</span> + <span class="string">"&amp;qrst=1&amp;rt=1&amp;stop=1&amp;vt=2&amp;wq=%E9%BC%A0%E6%A0%87&amp;page="</span> + str(<span class="number">3</span>+<span class="number">2</span>*i) + <span class="string">"&amp;s="</span> + str(<span class="number">59</span>*(i+<span class="number">1</span>)) + <span class="string">"&amp;click=0"</span></span><br><span class="line">        getInfo(infoList , html)</span><br><span class="line"></span><br><span class="line">    printList(infoList)</span><br><span class="line">    </span><br><span class="line">main()</span><br></pre></td></tr></table></figure>
<h4 id="20-scrapy框架"><a href="#20-scrapy框架" class="headerlink" title="20 scrapy框架"></a>20 scrapy框架</h4><p>安装scrapy</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># cmd 命令</span><br><span class="line">pip install scrapy</span><br></pre></td></tr></table></figure>

<h5 id="20-1-框架结构"><a href="#20-1-框架结构" class="headerlink" title="20.1 框架结构"></a>20.1 框架结构</h5><p><img src="/python-spider/python-34.png" alt="image"></p>
<h5 id="20-2-scrapy-常用命令"><a href="#20-2-scrapy-常用命令" class="headerlink" title="20.2  scrapy 常用命令"></a>20.2  scrapy 常用命令</h5><p>查看命令行</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">scrapy -h</span><br></pre></td></tr></table></figure>
<p><img src="/python-spider/python-35.png" alt="image"></p>
<h5 id="20-3-小实例"><a href="#20-3-小实例" class="headerlink" title="20.3 小实例"></a>20.3 小实例</h5><p>cmd下操作</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 某目录下创建项目</span></span><br><span class="line">scrapy startproject python123demo</span><br></pre></td></tr></table></figure>
<p><img src="/python-spider/python-36.png" alt="image"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">cd python123demo</span><br><span class="line"><span class="comment"># 生成爬虫</span></span><br><span class="line">scrapy genspider demo python.io</span><br></pre></td></tr></table></figure>
<p>编辑生成的demo.py</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DemoSpider</span><span class="params">(scrapy.Spider)</span>:</span></span><br><span class="line">    <span class="comment"># 爬虫名</span></span><br><span class="line">    name = <span class="string">'demo'</span></span><br><span class="line">    <span class="comment"># 爬取的链接</span></span><br><span class="line">    start_urls = [<span class="string">'http://python.io/ws/demo.html'</span>]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parse</span><span class="params">(self, response)</span>:</span></span><br><span class="line">        <span class="comment"># 爬取的页面保存为文件</span></span><br><span class="line">        fname = response.url.split(<span class="string">'/'</span>)[<span class="number">-1</span>]</span><br><span class="line">        <span class="keyword">with</span> open(fname , <span class="string">'wb'</span>) <span class="keyword">as</span> f:</span><br><span class="line">            f.write(response.body)</span><br><span class="line">            fname.close()</span><br><span class="line">        self.log(<span class="string">'saved file %s'</span> % fname)</span><br></pre></td></tr></table></figure>
<p>运行爬虫文件</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># cmd 运行爬虫文件</span></span><br><span class="line">scrapy crawl demo.py</span><br></pre></td></tr></table></figure>
<h5 id="20-4-yield-关键字"><a href="#20-4-yield-关键字" class="headerlink" title="20.4 yield 关键字"></a>20.4 yield 关键字</h5><p>yeild是一个生成器，当运行到它时，它会生成一个值，然后冻结，直到再次唤醒它，再生成一个值,一般与循环连用</p>
<p>例:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">gen</span><span class="params">(n)</span>:</span></span><br><span class="line">	<span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">		<span class="keyword">yield</span> i**<span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> gen(<span class="number">5</span>):</span><br><span class="line">    print(i,<span class="string">" "</span>,end=<span class="string">""</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 结果: 0  1  4  9  16</span></span><br></pre></td></tr></table></figure>
<h5 id="20-5-使用yield优化demo爬虫"><a href="#20-5-使用yield优化demo爬虫" class="headerlink" title="20.5 使用yield优化demo爬虫"></a>20.5 使用yield优化demo爬虫</h5><p>在链接非常多的情况下，能有效地节约资源</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DemoSpider</span><span class="params">(scrapy.Spider)</span>:</span></span><br><span class="line">    <span class="comment"># 爬虫名</span></span><br><span class="line">    name = <span class="string">'demo'</span></span><br><span class="line">    <span class="comment"># 爬取的链接</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">start_requests</span><span class="params">(self)</span>:</span></span><br><span class="line">        urls = [<span class="string">'http://python123.io/ws/demo.html'</span>]</span><br><span class="line">        <span class="comment"># 使用生成器去调用链接</span></span><br><span class="line">        <span class="keyword">for</span> url <span class="keyword">in</span> urls:</span><br><span class="line">            <span class="keyword">yield</span> scrapy.Request(url=url , callback=self.parse)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parse</span><span class="params">(self, response)</span>:</span></span><br><span class="line">        <span class="comment"># 爬取的页面保存为文件</span></span><br><span class="line">        fname = response.url.split(<span class="string">'/'</span>)[<span class="number">-1</span>]</span><br><span class="line">        <span class="keyword">with</span> open(fname , <span class="string">'wb'</span>) <span class="keyword">as</span> f:</span><br><span class="line">            f.write(response.body)</span><br><span class="line">            fname.close()</span><br><span class="line">        self.log(<span class="string">'saved file %s'</span> % fname)</span><br></pre></td></tr></table></figure>
<h4 id="21-scrapy爬虫的数据类型"><a href="#21-scrapy爬虫的数据类型" class="headerlink" title="21 scrapy爬虫的数据类型"></a>21 scrapy爬虫的数据类型</h4><h5 id="21-1-Request类"><a href="#21-1-Request类" class="headerlink" title="21.1 Request类"></a>21.1 Request类</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">scrapy</span>.<span class="title">http</span>.<span class="title">Request</span><span class="params">()</span></span></span><br></pre></td></tr></table></figure>
<p>表示一个http请求</p>
<p><img src="/python-spider/python-37.png" alt="image"></p>
<h5 id="21-2-Response类"><a href="#21-2-Response类" class="headerlink" title="21.2 Response类"></a>21.2 Response类</h5><p><img src="/python-spider/python-38.png" alt="image"></p>
<h5 id="21-3-Item类"><a href="#21-3-Item类" class="headerlink" title="21.3 Item类"></a>21.3 Item类</h5><h4 id="22-实例-爬取股票数据"><a href="#22-实例-爬取股票数据" class="headerlink" title="22 实例:爬取股票数据"></a>22 实例:爬取股票数据</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 新浪股票</span><br><span class="line">https:&#x2F;&#x2F;finance.sina.com.cn&#x2F;stock&#x2F;</span><br><span class="line"># 百度股票</span><br><span class="line">https:&#x2F;&#x2F;gupiao.baidu.com&#x2F;stock</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 股票代码一览表</span><br><span class="line">http:&#x2F;&#x2F;quote.eastmoney.com&#x2F;stocklist.html</span><br></pre></td></tr></table></figure>
<p>全部代码</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">import</span> traceback</span><br><span class="line"><span class="keyword">import</span> bs4</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SpiderStock</span>:</span></span><br><span class="line">    <span class="comment"># 初始化</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 获取页面</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getHTMLText</span><span class="params">(self,url)</span>:</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            kv = &#123;<span class="string">'User-Agent'</span>:<span class="string">'Mozilla/5.0'</span>&#125;</span><br><span class="line">            r = requests.get(url , headers = kv)</span><br><span class="line">            r.raise_for_status()</span><br><span class="line">            r.encoding = r.apparent_encoding</span><br><span class="line">            <span class="keyword">return</span> r.text</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            print(<span class="string">"\r爬取失败"</span>,end=<span class="string">''</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 提取信息</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getInfo</span><span class="params">(self,sCodeList,fname)</span>:</span></span><br><span class="line">        count = <span class="number">0</span></span><br><span class="line">        infoDict = &#123;&#125;</span><br><span class="line">        <span class="keyword">for</span> stock <span class="keyword">in</span> sCodeList:</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                    url = <span class="string">"https://gupiao.baidu.com/stock/"</span> + stock</span><br><span class="line">                    <span class="keyword">if</span> url == <span class="string">''</span>:</span><br><span class="line">                        <span class="keyword">continue</span></span><br><span class="line">                        </span><br><span class="line">                    html = self.getHTMLText(url)</span><br><span class="line">                        </span><br><span class="line">                    soup = BeautifulSoup(html,<span class="string">'html.parser'</span>)</span><br><span class="line">                    <span class="comment"># 查询股票信息的位置</span></span><br><span class="line">                    infoStock = soup.find(<span class="string">'div'</span>,attrs = &#123;<span class="string">'class'</span>:<span class="string">'stock-bets'</span>&#125;)</span><br><span class="line">                    <span class="comment"># 股票名称</span></span><br><span class="line">                    name = infoStock.find(<span class="string">'a'</span>,attrs = &#123;<span class="string">'class'</span>:<span class="string">'bets-name'</span>&#125;)</span><br><span class="line">                    <span class="comment"># 存放在字典中</span></span><br><span class="line">                    infoDict.update(&#123;<span class="string">'股票名称'</span>:name.text.split()[<span class="number">0</span>]&#125;)</span><br><span class="line">                    </span><br><span class="line">                    keyList = infoStock.find_all(<span class="string">'dt'</span>)</span><br><span class="line">                    valueList = infoStock.find_all(<span class="string">'dd'</span>)</span><br><span class="line">                </span><br><span class="line">                    </span><br><span class="line">                    <span class="keyword">for</span> j <span class="keyword">in</span> range(len(valueList)):</span><br><span class="line">                        key = keyList[j].text</span><br><span class="line">                        value = valueList[j].text</span><br><span class="line">                        <span class="comment"># 字典添加值</span></span><br><span class="line">                        infoDict[key] = value</span><br><span class="line"></span><br><span class="line">                    <span class="comment"># 将信息保存在文件</span></span><br><span class="line">                    <span class="keyword">with</span> open(fname,<span class="string">'a'</span>,encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f:</span><br><span class="line">                        f.write(str(infoDict) + <span class="string">'\n'</span>)</span><br><span class="line">                        count = count + <span class="number">1</span></span><br><span class="line">                        print(<span class="string">'\r当前进度: &#123;:.2f&#125;%'</span>.format(count*<span class="number">100</span>/len(sCodeList)),end=<span class="string">''</span>)</span><br><span class="line">            <span class="keyword">except</span>:</span><br><span class="line">                count = count + <span class="number">1</span></span><br><span class="line">                print(<span class="string">'\r当前进度: &#123;:.2f&#125;%'</span>.format(count*<span class="number">100</span>/len(sCodeList)),end=<span class="string">''</span>)</span><br><span class="line">                <span class="comment"># traceback.print_exc()  显示错误</span></span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">                </span><br><span class="line">    <span class="comment"># 获取股票代码</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getStockList</span><span class="params">(self,sUrl)</span>:</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            string = <span class="string">r'[s][hz][\d]&#123;6&#125;\.[h][t][m][l]'</span></span><br><span class="line">            html = self.getHTMLText(sUrl)</span><br><span class="line">            sCodeList = re.findall(string,html)</span><br><span class="line">            <span class="keyword">return</span> sCodeList</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            print(<span class="string">"\r获取股票代码失败"</span>,end=<span class="string">''</span>)</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 输出表</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">printList</span><span class="params">(self , slist)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 主函数</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">(self)</span>:</span></span><br><span class="line">        url = <span class="string">"https://gupiao.baidu.com/stock"</span></span><br><span class="line">        sCodeUrl = <span class="string">"http://quote.eastmoney.com/stocklist.html"</span></span><br><span class="line">        <span class="comment"># 存储文件路径</span></span><br><span class="line">        fname = <span class="string">"F:\\py\\py-spider\\spider-stock\\info_stock.txt"</span></span><br><span class="line">        slist = []</span><br><span class="line">        lack_slist = []</span><br><span class="line">        slist = self.getStockList(sCodeUrl)</span><br><span class="line">        <span class="comment"># 确定股票数</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">20</span>):</span><br><span class="line">            lack_slist.append(slist[i])</span><br><span class="line">        </span><br><span class="line">        self.getInfo(lack_slist , fname)</span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">spiderstock = SpiderStock()</span><br><span class="line">spiderstock.main()</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>python</tag>
        <tag>python爬虫</tag>
      </tags>
  </entry>
  <entry>
    <title>pygame飞机大战游戏打包为exe</title>
    <url>/2019-03-07-pygame-exe.html</url>
    <content><![CDATA[<p>环境: python 3.5<br>使用打包库：cx_Freeze<br><a href="http://sighingnow.github.io/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/cx_freeze.html" target="_blank" rel="noopener external nofollow noreferrer">可参考</a></p>
<a id="more"></a>

<h4 id="pygame飞机大战游戏打包为exe"><a href="#pygame飞机大战游戏打包为exe" class="headerlink" title="pygame飞机大战游戏打包为exe"></a>pygame飞机大战游戏打包为exe</h4><h5 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h5><p>cmd下</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">pip install cx_freeze</span><br></pre></td></tr></table></figure>
<h5 id="解包"><a href="#解包" class="headerlink" title="解包"></a>解包</h5><p>cmd到python安装目录scripts目录下</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">python cxfreeze-postinstall</span><br></pre></td></tr></table></figure>
<h5 id="检查是否安装好"><a href="#检查是否安装好" class="headerlink" title="检查是否安装好"></a>检查是否安装好</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cxfreeze -h</span><br></pre></td></tr></table></figure>
<h5 id="打包"><a href="#打包" class="headerlink" title="打包"></a>打包</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cxfreeze 文件名.py</span><br></pre></td></tr></table></figure>
<h5 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h5><p><strong>打包主文件，及执行文件，其他.py文件在同一目录，<br>有图片注意相对路径</strong></p>
<p><strong>打包完成会生成dist文件目录，图片文件应放在其中，与exe文件相对应的路径</strong></p>
<p>此时运行会弹出一闪而过的黑窗口</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cxfreeze .py(需打包文件路径） --target-dir D:\a（存放exe的目标文件夹路径）--base-name&#x3D;win32gui</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>pygame</tag>
      </tags>
  </entry>
  <entry>
    <title>python3 链表结构</title>
    <url>/2019-03-10-python3-lian-biao-jie-gou.html</url>
    <content><![CDATA[<p>环境: python3<br>工具: Spyder</p>
<a id="more"></a>

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">Created on Sun Mar 10 17:09:47 2019</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">@author: inno</span></span><br><span class="line"><span class="string">title； 单向链表，创建，删除某个节点</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"><span class="string">"""节点类"""</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, data)</span>:</span></span><br><span class="line">        self.data = data</span><br><span class="line">        self.pnext = <span class="literal">None</span></span><br><span class="line">        </span><br><span class="line"><span class="string">"""类：封装各种方法"""</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Function</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, head)</span>:</span></span><br><span class="line">        self.head = head</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 添加节点</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">appendNode</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="comment"># 令pr为第一个节点</span></span><br><span class="line">        self.pr = self.head</span><br><span class="line">        <span class="keyword">if</span> self.head.data == <span class="literal">None</span>: <span class="comment"># 若头部为空</span></span><br><span class="line">            self.head.data = input(<span class="string">"Input data:"</span>)</span><br><span class="line">            self.head.pnext = <span class="literal">None</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">while</span> self.pr.pnext != <span class="literal">None</span>:</span><br><span class="line">                self.pr = self.pr.pnext</span><br><span class="line">            </span><br><span class="line">            newNode = Node(<span class="literal">None</span>)</span><br><span class="line">            self.pr.pnext = newNode</span><br><span class="line">            newNode.data = input(<span class="string">"Input a data:"</span>)</span><br><span class="line">        <span class="keyword">return</span> self.head</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 传入data，删除这个节点</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">delNode</span><span class="params">(self, delData)</span>:</span></span><br><span class="line">        </span><br><span class="line">        pr = self.head</span><br><span class="line">        p = self.head</span><br><span class="line">        <span class="keyword">if</span> str(self.head.data) == str(delData):</span><br><span class="line">            <span class="keyword">return</span> self.head.pnext</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">while</span> str(pr.data) != str(delData):</span><br><span class="line">                p = pr</span><br><span class="line">                pr = pr.pnext</span><br><span class="line">            <span class="keyword">if</span> pr.pnext != <span class="literal">None</span>:</span><br><span class="line">                p.pnext = pr.pnext</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                p.pnext = <span class="literal">None</span></span><br><span class="line">        <span class="keyword">return</span> self.head</span><br><span class="line">        </span><br><span class="line">                    </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    <span class="comment"># 测试1</span></span><br><span class="line">    <span class="comment"># 手动创建3个节点</span></span><br><span class="line">    node1 = Node(<span class="number">1</span>)</span><br><span class="line">    node2 = Node(<span class="number">2</span>)</span><br><span class="line">    node3 = Node(<span class="number">3</span>)</span><br><span class="line">    node1.pnext = node2</span><br><span class="line">    node2.pnext = node3</span><br><span class="line">    <span class="comment"># 调用方法，添加第4点</span></span><br><span class="line">    fun = Function(node1)</span><br><span class="line">    node = fun.appendNode()</span><br><span class="line">    <span class="keyword">while</span> node != <span class="literal">None</span>:</span><br><span class="line">        print(node.data)</span><br><span class="line">        node = node.pnext</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">    <span class="comment"># 测试2</span></span><br><span class="line">    <span class="comment"># 利用循环创建5个节点的链表</span></span><br><span class="line">    link = Node(<span class="literal">None</span>)</span><br><span class="line">    fun1 = Function(link)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">5</span>):</span><br><span class="line">        link = fun1.appendNode()</span><br><span class="line">    p_link = link</span><br><span class="line">    <span class="keyword">while</span> p_link != <span class="literal">None</span>:</span><br><span class="line">        print(p_link.data)</span><br><span class="line">        p_link = p_link.pnext</span><br><span class="line">    print(<span class="string">''</span>)</span><br><span class="line">        </span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 测试3</span></span><br><span class="line">    <span class="comment"># 删除节点数据为555的节点</span></span><br><span class="line">    fun2 = Function(link)</span><br><span class="line">    link = fun2.delNode(<span class="number">555</span>)</span><br><span class="line">    p_link2 = link</span><br><span class="line">    <span class="keyword">while</span> p_link2 != <span class="literal">None</span>:</span><br><span class="line">        print(p_link2.data)</span><br><span class="line">        p_link2 = p_link2.pnext</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>python数据结构</tag>
      </tags>
  </entry>
  <entry>
    <title>C语言顺序栈</title>
    <url>/2019-03-19-c-yu-yan-shun-xu-zhan.html</url>
    <content><![CDATA[<p>环境：vscode C语言</p>
<a id="more"></a>

<h4 id="C语言顺序栈"><a href="#C语言顺序栈" class="headerlink" title="C语言顺序栈"></a>C语言顺序栈</h4><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 结构体存储栈节点数据</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">student</span>&#123;</span></span><br><span class="line">    <span class="keyword">char</span> *name;</span><br><span class="line">    <span class="comment">//int age;</span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;student;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 栈的结构体</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">stack</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    student *arr; <span class="comment">// 结构体数组存储节点数据</span></span><br><span class="line">    <span class="keyword">int</span> top;  <span class="comment">// 栈顶元素的下一位(栈顶游标)</span></span><br><span class="line">    <span class="keyword">int</span> <span class="built_in">size</span>;  <span class="comment">// 栈的大小</span></span><br><span class="line">    <span class="keyword">int</span> inc; <span class="comment">// 扩增栈大小的变量</span></span><br><span class="line">&#125;<span class="built_in">stack</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 栈的初始化</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">stackInit</span><span class="params">(<span class="built_in">stack</span> *s, <span class="keyword">int</span> <span class="built_in">size</span>, <span class="keyword">int</span> inc)</span></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"---初始化栈---\n"</span>);</span><br><span class="line">    s-&gt;arr = (student*)<span class="built_in">malloc</span>(<span class="built_in">size</span>*<span class="keyword">sizeof</span>(student)); <span class="comment">// 开辟内存空间</span></span><br><span class="line">    s-&gt;<span class="built_in">size</span> = <span class="built_in">size</span>;</span><br><span class="line">    s-&gt;inc = inc;</span><br><span class="line">    s-&gt;top = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 入栈操作</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">stackPush</span><span class="params">(<span class="built_in">stack</span> *s, student e)</span></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"入栈元素:%s\n"</span>, e.name);</span><br><span class="line">    <span class="keyword">if</span>(s-&gt;top &gt;= s-&gt;<span class="built_in">size</span>)&#123; <span class="comment">//扩增栈的大小</span></span><br><span class="line">        student *base = (student*)<span class="built_in">realloc</span>(s-&gt;arr, (s-&gt;<span class="built_in">size</span>+s-&gt;inc)*<span class="keyword">sizeof</span>(student));</span><br><span class="line">        s-&gt;arr = base;</span><br><span class="line">        s-&gt;<span class="built_in">size</span> = s-&gt;<span class="built_in">size</span> + s-&gt;inc;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"已扩增\n"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 入栈</span></span><br><span class="line">    s-&gt;arr[s-&gt;top] = e;</span><br><span class="line">    s-&gt;top = s-&gt;top + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 出栈操作</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">stackPull</span><span class="params">(<span class="built_in">stack</span> *s)</span></span>&#123; <span class="comment">// 栈顶元素出</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"出栈元素：%s\n"</span>, s-&gt;arr[s-&gt;top<span class="number">-1</span>].name);</span><br><span class="line">    student p;</span><br><span class="line">    s-&gt;arr[s-&gt;top<span class="number">-1</span>] = p;</span><br><span class="line">    s-&gt;top = s-&gt;top - <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 栈的打印</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">stackPrint</span><span class="params">(<span class="built_in">stack</span> *s)</span></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"打印栈-----------\n"</span>);</span><br><span class="line">    <span class="keyword">int</span> N = s-&gt;top;</span><br><span class="line">    <span class="keyword">int</span> i;</span><br><span class="line">    <span class="keyword">for</span>(i=N<span class="number">-1</span>; i&gt;=<span class="number">0</span>; i--)&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"栈元素:%s\n"</span>, s-&gt;arr[i].name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 入栈的元素</span></span><br><span class="line">    student e1 = &#123;<span class="string">"n1"</span>&#125;;</span><br><span class="line">    student e2 = &#123;<span class="string">"n2"</span>&#125;;</span><br><span class="line">    student e3 = &#123;<span class="string">"n3"</span>&#125;;</span><br><span class="line">    student e4 = &#123;<span class="string">"n4"</span>&#125;;</span><br><span class="line">    student e5 = &#123;<span class="string">"n5"</span>&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 栈</span></span><br><span class="line">    <span class="built_in">stack</span> *s = (<span class="built_in">stack</span>*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="built_in">stack</span>));</span><br><span class="line">    stackInit(s, <span class="number">3</span>, <span class="number">1</span>); <span class="comment">// 栈初始化</span></span><br><span class="line">    <span class="comment">// 入栈</span></span><br><span class="line">    stackPush(s, e1);</span><br><span class="line">    stackPush(s, e2);</span><br><span class="line">    stackPush(s, e3);</span><br><span class="line">    stackPush(s, e4);</span><br><span class="line">    stackPush(s, e5);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 打印</span></span><br><span class="line">    stackPrint(s);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 出栈</span></span><br><span class="line">    stackPull(s);</span><br><span class="line">    stackPull(s);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 再打印呢</span></span><br><span class="line">    stackPrint(s);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>C语言</tag>
      </tags>
  </entry>
  <entry>
    <title>C_ALG坐标变换公式</title>
    <url>/2019-06-12-c-alg-zuo-biao-bian-huan-gong-shi.html</url>
    <content><![CDATA[<p>C语言实现GIS算法中的坐标变换</p>
<p>平移变换、比例变换、旋转变换</p>
<a id="more"></a>

<h3 id="C-ALG坐标变换公式"><a href="#C-ALG坐标变换公式" class="headerlink" title="C_ALG坐标变换公式"></a>C_ALG坐标变换公式</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// X, Y    </span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 平移</span></span><br><span class="line">X += Xm;</span><br><span class="line">Y += Ym;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 比例</span></span><br><span class="line"><span class="comment">// 以坐标原点为参照点</span></span><br><span class="line">X *= Xs;</span><br><span class="line">Y *= Ys;</span><br><span class="line"><span class="comment">// 以x0y0为参照点的比例变换</span></span><br><span class="line">X = (X-x0)*Xs + x0;</span><br><span class="line">Y = (Y-y0)*Ys + y0;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 旋转</span></span><br><span class="line">X = X*cosA + Y*sinA</span><br><span class="line">Y = X*sinA - Y*cosA</span><br><span class="line"></span><br><span class="line">******如果是屏幕坐标，顺时针旋转，</span><br><span class="line"><span class="comment">// 以坐标原点</span></span><br><span class="line">X = X*cosA - Y*sinA;</span><br><span class="line">Y = X*sinA + Y*cosA;</span><br><span class="line"><span class="comment">// 以指定点旋转</span></span><br><span class="line">X = (X-x0)*<span class="built_in">cos</span>(A) - (Y-y0)*<span class="built_in">sin</span>(A);</span><br><span class="line">Y = (X-x0)*<span class="built_in">sin</span>(A) + (Y-y0)*<span class="built_in">cos</span>(A);</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>算法笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>C语言链表</title>
    <url>/2019-03-03-c-yu-yan-lian-biao.html</url>
    <content><![CDATA[<p>环境: VC++ 6.0</p>
<a id="more"></a>

<h4 id="C语言链表"><a href="#C语言链表" class="headerlink" title="C语言链表"></a>C语言链表</h4><h5 id="1-头文件"><a href="#1-头文件" class="headerlink" title="1.头文件"></a>1.头文件</h5><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"stdafx.h"</span>  <span class="comment">// 可略</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"stdio.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"stdlib.h"</span></span></span><br></pre></td></tr></table></figure>
<h5 id="2-函数名"><a href="#2-函数名" class="headerlink" title="2.函数名"></a>2.函数名</h5><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function">struct link *<span class="title">AppendNode</span><span class="params">(struct link *head)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DisplayNode</span><span class="params">(struct link *head)</span></span>;</span><br><span class="line"><span class="function">struct link *<span class="title">creat</span><span class="params">(struct link *head, <span class="keyword">int</span> n)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DeleteMemory</span><span class="params">(struct link *head)</span></span>;</span><br><span class="line"><span class="function">struct link *<span class="title">DeleteNode</span><span class="params">(struct link *head, <span class="keyword">int</span> nodedata)</span></span>;</span><br><span class="line"><span class="function">struct link *<span class="title">InsertNode</span><span class="params">(struct link *head, <span class="keyword">int</span> nodedata)</span></span>;</span><br></pre></td></tr></table></figure>
<h5 id="3-结构体"><a href="#3-结构体" class="headerlink" title="3. 结构体"></a>3. 结构体</h5><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 结构体</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">link</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> data;</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">link</span> *<span class="title">next</span>;</span></span><br><span class="line">&#125;Link;</span><br></pre></td></tr></table></figure>
<h5 id="4-主函数"><a href="#4-主函数" class="headerlink" title="4. 主函数"></a>4. 主函数</h5><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 主函数 */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	Link *head = <span class="literal">NULL</span>;</span><br><span class="line">	<span class="comment">//head = AppendNode(head);</span></span><br><span class="line">	head = creat(head, <span class="number">5</span>);</span><br><span class="line">	DisplayNode(head);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">	<span class="comment">//DeleteMemory(head);</span></span><br><span class="line">	Link *head1 = DeleteNode(head, <span class="number">555</span>);</span><br><span class="line">	DisplayNode(head1);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">	Link *head2 = InsertNode(head1, <span class="number">555</span>);</span><br><span class="line">	DisplayNode(head2);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="5-方法-新建一个节点并添加到链表末尾，返回添加节点后的链表的头指针"><a href="#5-方法-新建一个节点并添加到链表末尾，返回添加节点后的链表的头指针" class="headerlink" title="5. 方法:新建一个节点并添加到链表末尾，返回添加节点后的链表的头指针"></a>5. 方法:新建一个节点并添加到链表末尾，返回添加节点后的链表的头指针</h5><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 新建一个节点并添加到链表末尾，返回添加节点后的链表的头指针 */</span></span><br><span class="line"><span class="function">Link *<span class="title">AppendNode</span><span class="params">(Link *head)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">	Link *p = <span class="literal">NULL</span>, *pr = head;</span><br><span class="line">	<span class="keyword">int</span> data;</span><br><span class="line">	p = (Link*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Link));</span><br><span class="line">	<span class="keyword">if</span>(p == <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// 新建内存失败，退出程序</span></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"No enough memory\n"</span>);</span><br><span class="line">		<span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 若原链表为空</span></span><br><span class="line">	<span class="keyword">if</span>(head == <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		head = p;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">while</span>(pr-&gt;next != <span class="literal">NULL</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			pr = pr-&gt;next;</span><br><span class="line">		&#125;</span><br><span class="line">		pr-&gt;next = p;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"Input data:"</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;data);</span><br><span class="line">	p-&gt;data = data;</span><br><span class="line">	p-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">	<span class="keyword">return</span> head;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="6-方法-显示链表中的所有节点的节点号和数据"><a href="#6-方法-显示链表中的所有节点的节点号和数据" class="headerlink" title="6.方法: 显示链表中的所有节点的节点号和数据"></a>6.方法: 显示链表中的所有节点的节点号和数据</h5><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 显示链表中的所有节点的节点号和数据 */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DisplayNode</span><span class="params">(struct link *head)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	Link *p = head;</span><br><span class="line">	<span class="keyword">int</span> j = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">while</span>(p != <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%5d, %10d\n"</span>, j, p-&gt;data);</span><br><span class="line">		p = p-&gt;next;</span><br><span class="line">		j++;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="7-创建链表-存储n个数据"><a href="#7-创建链表-存储n个数据" class="headerlink" title="7. 创建链表,存储n个数据"></a>7. 创建链表,存储n个数据</h5><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 创建链表,存储n个数据 */</span></span><br><span class="line"><span class="function">struct link *<span class="title">creat</span><span class="params">(struct link *head, <span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="class"><span class="keyword">struct</span> <span class="title">link</span> *<span class="title">node</span> = <span class="title">NULL</span>, *<span class="title">end</span> = <span class="title">head</span>;</span></span><br><span class="line">		<span class="keyword">int</span> data;</span><br><span class="line">		node = (struct link*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(struct link));</span><br><span class="line">		<span class="keyword">if</span>(head == <span class="literal">NULL</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			head = node;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">while</span>(<span class="built_in">end</span>-&gt;next != <span class="literal">NULL</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="built_in">end</span> = <span class="built_in">end</span>-&gt;next;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="built_in">end</span>-&gt;next = node;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"Input data:"</span>);</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;data);</span><br><span class="line">		node-&gt;data = data;</span><br><span class="line">		node-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> head;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="8-释放链表节点的内存"><a href="#8-释放链表节点的内存" class="headerlink" title="8. 释放链表节点的内存"></a>8. 释放链表节点的内存</h5><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 释放链表节点的内存 */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DeleteMemory</span><span class="params">(struct link *head)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">link</span> *<span class="title">p</span> = <span class="title">head</span>, *<span class="title">pr</span> = <span class="title">NULL</span>;</span></span><br><span class="line">	<span class="keyword">while</span>(p != <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		pr = p;</span><br><span class="line">		p = p-&gt;next;</span><br><span class="line">		<span class="built_in">free</span>(pr);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="9-链表的删除某个节点的操作"><a href="#9-链表的删除某个节点的操作" class="headerlink" title="9. 链表的删除某个节点的操作"></a>9. 链表的删除某个节点的操作</h5><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 链表的删除某个节点的操作*/</span></span><br><span class="line"><span class="function">struct link *<span class="title">DeleteNode</span><span class="params">(struct link *head, <span class="keyword">int</span> nodedata)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">link</span> *<span class="title">p</span> = <span class="title">head</span>, *<span class="title">pr</span> = <span class="title">head</span>;</span></span><br><span class="line">	<span class="keyword">if</span>(head == <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"Linked Table is empty!\n"</span>);</span><br><span class="line">		<span class="keyword">return</span> head;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">while</span>(nodedata != p-&gt;data &amp;&amp; p-&gt;next != <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		pr = p;</span><br><span class="line">		p = p-&gt;next;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(nodedata == p-&gt;data)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span>(p == head)</span><br><span class="line">		&#123;</span><br><span class="line">			head = p-&gt;next;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			pr-&gt;next = p-&gt;next;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">free</span>(p);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"no the nodedata in the linked Table!\n"</span>);</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> head;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="10-有序链表插入某个节点"><a href="#10-有序链表插入某个节点" class="headerlink" title="10. 有序链表插入某个节点"></a>10. 有序链表插入某个节点</h5><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 有序链表插入某个节点 */</span></span><br><span class="line"><span class="function">struct link *<span class="title">InsertNode</span><span class="params">(struct link *head, <span class="keyword">int</span> nodedata)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">link</span> *<span class="title">pr</span> = <span class="title">head</span>, *<span class="title">p</span> = <span class="title">head</span>, *<span class="title">temp</span> = <span class="title">head</span>;</span></span><br><span class="line">	<span class="comment">// 为插入节点开辟内存</span></span><br><span class="line">	p = (struct link*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(struct link));</span><br><span class="line">	p-&gt;data = nodedata;</span><br><span class="line">	p-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">	<span class="comment">// 链表为空</span></span><br><span class="line">	<span class="keyword">if</span>(head == <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"Linked Table is empty!\n"</span>);</span><br><span class="line">		head = p;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> <span class="comment">// 链表非空</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">while</span>(nodedata &gt; pr-&gt;data &amp;&amp; pr-&gt;next != <span class="literal">NULL</span>) <span class="comment">// 循环到pr-&gt;data &gt;= nodedata 并且未到链表尾</span></span><br><span class="line">		&#123;</span><br><span class="line">			temp = pr;</span><br><span class="line">			pr = pr-&gt;next;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(nodedata &lt;= pr-&gt;data)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span>(pr == head) <span class="comment">// 头节点</span></span><br><span class="line">			&#123;</span><br><span class="line">				<span class="comment">// 在头节点之前插入p</span></span><br><span class="line">				p-&gt;next = pr;</span><br><span class="line">				head = p;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">			&#123;</span><br><span class="line">				pr = temp;</span><br><span class="line">				p-&gt;next = pr-&gt;next;</span><br><span class="line">				pr-&gt;next = p;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="comment">// 末尾</span></span><br><span class="line">		&#123;</span><br><span class="line">			</span><br><span class="line">			pr-&gt;next = p;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> head;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>C语言</tag>
      </tags>
  </entry>
  <entry>
    <title>Git指令</title>
    <url>/2019-06-12-git-shang-chuan-xiang-mu.html</url>
    <content><![CDATA[<h4 id="1-新建项目后"><a href="#1-新建项目后" class="headerlink" title="1.新建项目后"></a>1.新建项目后</h4><h4 id="…or-create-a-new-repository-on-the-command-line"><a href="#…or-create-a-new-repository-on-the-command-line" class="headerlink" title="…or create a new repository on the command line"></a>…or create a new repository on the command line</h4><a id="more"></a>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">echo &quot;# emmm&quot; &gt;&gt; README.md</span><br><span class="line">git init</span><br><span class="line">git add README.md</span><br><span class="line">git commit -m &quot;first commit&quot;</span><br><span class="line">git remote add origin https:&#x2F;&#x2F;github.com&#x2F;zuahua&#x2F;pythonGame.git</span><br><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure>

<h5 id="…or-push-an-existing-repository-from-the-command-line"><a href="#…or-push-an-existing-repository-from-the-command-line" class="headerlink" title="…or push an existing repository from the command line"></a>…or push an existing repository from the command line</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git remote add origin https:&#x2F;&#x2F;github.com&#x2F;zuahua&#x2F;pythonGame.git</span><br><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure>
<h4 id="2-流程"><a href="#2-流程" class="headerlink" title="2.流程"></a>2.流程</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; 添加此文件全部</span><br><span class="line">git add .</span><br><span class="line">git commit -m &quot;first commit&quot;</span><br><span class="line">git remote add origin https:&#x2F;&#x2F;github.com&#x2F;zuahua&#x2F;pythonGame.git</span><br><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title>HTML学习笔记</title>
    <url>/2019-06-12-html-note.html</url>
    <content><![CDATA[<p>由于自己学着ruby on rails网站的部署，现在也部署成功了；<br>因此开始学习前端的一些知识；<br>这里是我学习html的学习笔记。</p>
<p>我是在w3school学习的;<a href="www.w3school.com.cn/">w3school</a></p>
<a id="more"></a>

<hr>
<h4 id="1-html标签的学习"><a href="#1-html标签的学习" class="headerlink" title="1. html标签的学习"></a>1. html标签的学习</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">bgcolor</span>=<span class="string">"blue"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--标题--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">align</span>=<span class="string">"center"</span>&gt;</span>一级标题(heading1)<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>二级标题(heading2)<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--段落--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>这是段落内容(paragraph)<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--链接--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"https://inno-hua.xyz"</span>&gt;</span>这是一个链接(Link)(href=hypertext reference)<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--图片,name.jpg在同一文件夹下&gt;</span></span><br><span class="line"><span class="comment">&lt;img src="name.jpg" width="100" hight="100" /&gt;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">&lt;br /&gt;  &lt;!--换行--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span> /&gt;</span>  <span class="comment">&lt;!--水平线--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--使用style属性--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">style</span>=<span class="string">"background-color:red"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">style</span>=<span class="string">"background:blue"</span>&gt;</span>这是标题<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--元素中文本的字体系列、颜色和字体尺寸--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">style</span>=<span class="string">"font-family:arial;color:blue;font-size:20px"</span>&gt;</span>a heading2<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">"text-align:center;font-family:arial;font-size:30px"</span>&gt;</span>a paragraph<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">"background:green"</span>&gt;</span>这是段落<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--文本格式化标签--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>黑体<span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tt</span>&gt;</span>呈现类似打字机或者等宽的文本效果<span class="tag">&lt;/<span class="name">tt</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">i</span>&gt;</span>斜体字<span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">big</span>&gt;</span>大号字<span class="tag">&lt;/<span class="name">big</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">small</span>&gt;</span>小号字<span class="tag">&lt;/<span class="name">small</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">em</span>&gt;</span>定义着重文字。<span class="tag">&lt;/<span class="name">em</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">strong</span>&gt;</span>定义加重语气。<span class="tag">&lt;/<span class="name">strong</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">sub</span>&gt;</span>定义下标字。<span class="tag">&lt;/<span class="name">sub</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">sup</span>&gt;</span>定义上标字。<span class="tag">&lt;/<span class="name">sup</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">ins</span>&gt;</span>定义插入字。<span class="tag">&lt;/<span class="name">ins</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">del</span>&gt;</span>定义删除字。<span class="tag">&lt;/<span class="name">del</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!--“计算机输出”标签--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">code</span>&gt;</span>定义计算机代码。<span class="tag">&lt;/<span class="name">code</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">kbd</span>&gt;</span>定义键盘码。<span class="tag">&lt;/<span class="name">kbd</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">smap</span>&gt;</span>定义计算机代码样本。<span class="tag">&lt;/<span class="name">smap</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">tt</span>&gt;</span>定义打字机代码。<span class="tag">&lt;/<span class="name">tt</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">var</span>&gt;</span>定义变量。<span class="tag">&lt;/<span class="name">var</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">pre</span>&gt;</span>定义预格式文本。<span class="tag">&lt;/<span class="name">pre</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!--引用、引用和术语定义--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">abbr</span>&gt;</span>定义缩写。<span class="tag">&lt;/<span class="name">abbr</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">acronym</span>&gt;</span>定义首字母缩写。<span class="tag">&lt;/<span class="name">acronym</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">address</span>&gt;</span>定义地址。<span class="tag">&lt;/<span class="name">address</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">bdo</span>&gt;</span>定义文字方向。<span class="tag">&lt;/<span class="name">bdo</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">blockquote</span>&gt;</span>定义长的引用。<span class="tag">&lt;/<span class="name">blockquote</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">q</span>&gt;</span>定义短的引用语。<span class="tag">&lt;/<span class="name">q</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">cite</span>&gt;</span>定义引用、引证。<span class="tag">&lt;/<span class="name">cite</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">dfn</span>&gt;</span>定义一个定义项目。<span class="tag">&lt;/<span class="name">dfn</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!--实例--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">	my goals are <span class="tag">&lt;<span class="name">q</span>&gt;</span>can complete the learn.<span class="tag">&lt;/<span class="name">q</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">p</span>&gt;</span>以下内容引用自 WWF 的网站：<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">blockquote</span> <span class="attr">cite</span>=<span class="string">"http://www.worldwildlife.org/who/index.html"</span>&gt;</span></span><br><span class="line">		五十年来，WWF 一直致力于保护自然界的未来。</span><br><span class="line">世界领先的环保组织，WWF 工作于 100 个国家，</span><br><span class="line">并得到美国一百二十万会员及全球近五百万会员的支持。</span><br><span class="line">	<span class="tag">&lt;/<span class="name">blockquote</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">abbr</span> <span class="attr">title</span>=<span class="string">"World Health Organization"</span>&gt;</span>WHO<span class="tag">&lt;/<span class="name">abbr</span>&gt;</span></span><br><span class="line">	成立于 1948 年。</span><br><span class="line">	<span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">dfn</span>&gt;</span><span class="tag">&lt;<span class="name">abbr</span> <span class="attr">title</span>=<span class="string">"World Health Organization"</span>&gt;</span>WHO<span class="tag">&lt;/<span class="name">abbr</span>&gt;</span><span class="tag">&lt;/<span class="name">dfn</span>&gt;</span> 成立于 1948 年。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--HTML &lt;address&gt; 元素定义文档或文章的联系信息（作者/拥有者）。此元素通常以斜体显示--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">address</span>&gt;</span></span><br><span class="line">	written by inno.<span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">address</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--&lt;cite&gt; 元素定义著作的标题。--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">cite</span>&gt;</span>The Scream<span class="tag">&lt;/<span class="name">cite</span>&gt;</span>by Edward Munch. Painted in 1893.</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--HTML &lt;bdo&gt; 元素定义双流向覆盖（bi-directional override）。&lt;bdo&gt; 元素用于覆盖当前文本方向：--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">bdo</span> <span class="attr">dir</span>=<span class="string">"rtl"</span>&gt;</span>This text will be written from right to left<span class="tag">&lt;/<span class="name">bdo</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--HTML 键盘格式 HTML &lt;kbd&gt; 元素定义键盘输入：--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>To open a file, select:<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">kbd</span>&gt;</span>File | Open...<span class="tag">&lt;/<span class="name">kbd</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--code--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Coding Example:<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">code</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">pre</span>&gt;</span></span><br><span class="line">var person = &#123;</span><br><span class="line">    firstName:"Bill",</span><br><span class="line">    lastName:"Gates",</span><br><span class="line">    age:50,</span><br><span class="line">    eyeColor:"blue"</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">pre</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">code</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!--HTML &lt;var&gt; 元素定义数学变量：--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Einstein wrote:<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">var</span>&gt;</span>E = m c<span class="tag">&lt;<span class="name">sup</span>&gt;</span>2<span class="tag">&lt;/<span class="name">sup</span>&gt;</span><span class="tag">&lt;/<span class="name">var</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--样式css--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line"><span class="css"><span class="selector-tag">h1</span> &#123;<span class="attribute">color</span>: red&#125;</span></span><br><span class="line"><span class="css"><span class="selector-tag">p</span> &#123;<span class="attribute">color</span>: blue&#125;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>header 1<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>A paragraph.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--没有下滑线的链接--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-Type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=gb2312"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-Language"</span> <span class="attr">content</span>=<span class="string">"zh-cn"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/example/html/lastpage.html"</span> <span class="attr">style</span>=<span class="string">"text-decoration:none"</span>&gt;</span></span><br><span class="line">这是一个链接！</span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--外部样式表--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--当样式需要被应用到很多页面的时候，外部样式表将是理想的选择。使用外部样式表，你就可以通过更改一个文件来改变整个站点的外观。--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">href</span>=<span class="string">"/html/csstest1.css"</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>我通过外部样式表进行格式化。<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>我也一样！<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!--内部样式表--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--当单个文件需要特别样式时，就可以使用内部样式表。你可以在 head 部分通过 &lt;style&gt; 标签定义内部样式表。--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">&lt;head&gt;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">&lt;style type="text/css"&gt;</span></span><br><span class="line"><span class="comment">body &#123;background-color: red&#125;</span></span><br><span class="line"><span class="comment">p &#123;margin-left: 20px&#125;</span></span><br><span class="line"><span class="comment">&lt;/style&gt;</span></span><br><span class="line"><span class="comment">&lt;/head&gt;</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--内联样式--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--当特殊的样式需要应用到个别元素时，就可以使用内联样式。 使用内联样式的方法是在相关的标签中使用样式属性。样式属性可以包含任何 CSS 属性。以下实例显示出如何改变段落的颜色和左外边距。--&gt;</span>	</span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">"color: red; margin-left: 20px"</span>&gt;</span></span><br><span class="line">This is a paragraph</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--HTML 链接 - target 属性--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://www.w3school.com.cn/"</span> <span class="attr">target</span>=<span class="string">"_blank"</span>&gt;</span>Visit W3School!<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>如果把链接的 target 属性设置为 "_blank"，该链接会在新窗口中打开。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--链接到同一页面的某一位置--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#top"</span>&gt;</span>到达顶端<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--邮件链接--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">这是邮件链接：</span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"mailto:someone@microsoft.com?subject=Hello%20again"</span>&gt;</span>发送邮件<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">b</span>&gt;</span>注意：<span class="tag">&lt;/<span class="name">b</span>&gt;</span>应该使用 %20 来替换单词之间的空格，这样浏览器就可以正确地显示文本了。</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>HTML</tag>
      </tags>
  </entry>
  <entry>
    <title>校园网ip重置</title>
    <url>/2019-06-12-about-ipconfig.html</url>
    <content><![CDATA[<p>中文名：显示IP配置值   是一种DOS命令  可显示IP地址信息</p>
<p>更多关于ipconfig信息(百科):<a href="https://baike.baidu.com/item/ipconfig/2496619?fr=aladdin" target="_blank" rel="noopener external nofollow noreferrer">ipconfig</a></p>
<a id="more"></a>

<h2 id="常用DOS指令"><a href="#常用DOS指令" class="headerlink" title="常用DOS指令"></a>常用DOS指令</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ipconfig/release</span><br><span class="line">ipconfig/reenew</span><br></pre></td></tr></table></figure>

<h3 id="可用于解决局域网中电脑无法获取ip问题"><a href="#可用于解决局域网中电脑无法获取ip问题" class="headerlink" title="可用于解决局域网中电脑无法获取ip问题"></a>可用于解决局域网中电脑无法获取ip问题</h3><p>指令描述</p>
<p>ipconfig/release 释放ip地址</p>
<p>ipconfig/renew 重新获取ip地址</p>
<h2 id="其他关于ipconfig的DOS指令"><a href="#其他关于ipconfig的DOS指令" class="headerlink" title="其他关于ipconfig的DOS指令"></a>其他关于ipconfig的DOS指令</h2><p>ipconfig /all：显示本机TCP/IP配置的详细信息</p>
<p>ipconfig /flushdns：清除本地DNS缓存内容</p>
<p>ipconfig /displaydns：显示本地DNS内容</p>
<p>ipconfig /registerdns：DNS客户端手工向服务器进行注册</p>
<p>ipconfig /showclassid：显示网络适配器的DHCP类别信息</p>
<p>ipconfig /setclassid：设置网络适配器的DHCP类别</p>
<p>ipconfig /renew “Local Area Connection”：更新“本地连接”适配器的由 DHCP 分配 IP 地址的配置</p>
<p>ipconfig /showclassid Local*：显示名称以 Local 开头的所有适配器的 DHCP 类别 ID</p>
<p>ipconfig /setclassid “Local Area Connection” TEST：将“本地连接”适配器的 DHCP 类别 ID 设置为 TEST</p>
<h3 id="可在windows下cmd命令打开DOS面板进行"><a href="#可在windows下cmd命令打开DOS面板进行" class="headerlink" title="可在windows下cmd命令打开DOS面板进行"></a>可在windows下cmd命令打开DOS面板进行</h3>]]></content>
      <tags>
        <tag>IPconfig</tag>
      </tags>
  </entry>
  <entry>
    <title>记录使用这个 blog theme</title>
    <url>/2019-06-12-essay1.html</url>
    <content><![CDATA[<blockquote>
<ul>
<li>使用github page 来作为blog已经快有一年时间了;</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>最开始使用hexo+github来搭建blog环境，也比较好用，但弄得最后”花里胡哨”，有违blog的本质;</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>之后尝试wordpress(懒，发现需要部署到服务器上，直接放弃);</li>
</ul>
</blockquote>
<a id="more"></a>

<blockquote>
<ul>
<li>一个契机(浏览我为数不多的Line好友动态)，让我发现的这个sites theme;</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>给我最大的感觉是”简洁”吧(最初想着theme花里胡哨的好看，最后还是想着单一的简洁，人生啊).</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>最后还是花里胡哨啦 2020</li>
</ul>
</blockquote>
]]></content>
      <tags>
        <tag>随笔</tag>
      </tags>
  </entry>
  <entry>
    <title>给service添加ssh port</title>
    <url>/2019-06-12-service-add-ssh-port.html</url>
    <content><![CDATA[<p>给service添加ssh port</p>
<a id="more"></a>

<h5 id="1-远程登录服务器后"><a href="#1-远程登录服务器后" class="headerlink" title="1.远程登录服务器后"></a>1.远程登录服务器后</h5><p>输入指令:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">vim &#x2F;etc&#x2F;ssh&#x2F;sshd_config</span><br></pre></td></tr></table></figure>
<p>在末尾添加</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Port 22</span><br></pre></td></tr></table></figure>
<p>重启ssh</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">service ssh restart</span><br></pre></td></tr></table></figure>
<h5 id="2-vim未安装"><a href="#2-vim未安装" class="headerlink" title="2.vim未安装"></a>2.vim未安装</h5><p>安装：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo apt install vim</span><br></pre></td></tr></table></figure>
<h5 id="3-若再次登录时出现WARNING-REMOTE-HOST-IDENTIFICATION-HAS-CHANGED"><a href="#3-若再次登录时出现WARNING-REMOTE-HOST-IDENTIFICATION-HAS-CHANGED" class="headerlink" title="3.若再次登录时出现WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!"></a>3.若再次登录时出现WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!</h5><p>解决见<a href="https://zuahua.github.io/2018/12/08/ss-issue1/" target="_blank" rel="noopener external nofollow noreferrer">这篇文章</a></p>
]]></content>
      <tags>
        <tag>ss</tag>
      </tags>
  </entry>
  <entry>
    <title>ubuntu16.04安装vsftpd</title>
    <url>/2019-06-12-ubuntu16.04-vsftpd.html</url>
    <content><![CDATA[<p><a href="https://cnaning.iteye.com/blog/335797" target="_blank" rel="noopener external nofollow noreferrer">配置文件中详细配置说明</a></p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">service vsftpd restart //重启ftp服务</span><br><span class="line"></span><br><span class="line">netstat -natp | <span class="keyword">grep</span> <span class="number">21</span> //查看端口监听状态</span><br><span class="line"></span><br><span class="line">apt-<span class="built_in">get</span> <span class="built_in">remove</span> vsftpd //卸载软件</span><br><span class="line"></span><br><span class="line">service vsftpd status //查看vsftpd的状态，可以输入命令</span><br></pre></td></tr></table></figure>

<a id="more"></a>

<h4 id="安装配置"><a href="#安装配置" class="headerlink" title="安装配置"></a>安装配置</h4><p><a href="https://blog.csdn.net/qq_36095713/article/details/78024781" target="_blank" rel="noopener external nofollow noreferrer">教程1</a></p>
<p>本地连接 503错误</p>
<p><a href="https://blog.csdn.net/zhezhebie/article/details/78775323" target="_blank" rel="noopener external nofollow noreferrer">教程二</a></p>
<p>远程连接超时</p>
<p>在阿里云服务器里设置防火墙规则<br>FTP就能连接了</p>
<h4 id="发现连上很慢，也出现连接超时"><a href="#发现连上很慢，也出现连接超时" class="headerlink" title="发现连上很慢，也出现连接超时"></a>发现连上很慢，也出现连接超时</h4><p>在阿里云上防火墙规则添加 全部TCP</p>
<p>配置文件</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">listen_ipv6=YES</span><br><span class="line">local_enable=YES</span><br><span class="line"></span><br><span class="line">write_enable=YES</span><br><span class="line"></span><br><span class="line">local_umask=<span class="number">022</span></span><br><span class="line"></span><br><span class="line">dirmessage_enable=YES</span><br><span class="line"></span><br><span class="line">use_localtime=YES</span><br><span class="line"></span><br><span class="line">xferlog_enable=YES</span><br><span class="line"></span><br><span class="line">connect_from_port_20=YES</span><br><span class="line"></span><br><span class="line">xferlog_file=/var/<span class="built_in">log</span>/vsftpd.<span class="built_in">log</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ascii_upload_enable=YES</span><br><span class="line">ascii_download_enable=YES</span><br><span class="line"></span><br><span class="line">chroot_local_user=NO</span><br><span class="line"></span><br><span class="line">chroot_list_enable=YES</span><br><span class="line"></span><br><span class="line">listen_ipv6=YES</span><br><span class="line"></span><br><span class="line">anonymous_enable=NO</span><br><span class="line"></span><br><span class="line">local_enable=YES</span><br><span class="line"></span><br><span class="line">write_enable=YES</span><br><span class="line"></span><br><span class="line">dirmessage_enable=YES</span><br><span class="line">use_localtime=YES</span><br><span class="line">xferlog_enable=YES</span><br><span class="line">connect_from_port_20=YES</span><br><span class="line"></span><br><span class="line">xferlog_file=/var/<span class="built_in">log</span>/vsftpd.<span class="built_in">log</span></span><br><span class="line">ascii_upload_enable=YES</span><br><span class="line">ascii_download_enable=YES</span><br><span class="line">chroot_local_user=NO</span><br><span class="line">chroot_list_enable=YES</span><br><span class="line">secure_chroot_dir=/var/run/vsftpd/<span class="built_in">empty</span></span><br><span class="line"></span><br><span class="line">pam_service_name=vsftpd</span><br><span class="line"></span><br><span class="line">rsa_cert_file=/etc/ssl/certs/ssl-cert-snakeoil.pem</span><br><span class="line">rsa_private_key_file=/etc/ssl/private/ssl-cert-snakeoil.key</span><br><span class="line">ssl_enable=NO</span><br><span class="line">pasv_enable=YES</span><br><span class="line">pasv_min_port=<span class="number">20000</span></span><br><span class="line">pasv_max_port=<span class="number">20500</span></span><br><span class="line"></span><br><span class="line">max_clients=<span class="number">5</span></span><br><span class="line">utf8_filesystem=YES</span><br><span class="line"></span><br><span class="line">local_umask=<span class="number">022</span></span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>vsftpd</tag>
      </tags>
  </entry>
  <entry>
    <title>minecraft服务器搭建</title>
    <url>/2019-06-12-ubuntu-minecraft-server.html</url>
    <content><![CDATA[<p>暑假玩网易代理我的世界；</p>
<p>玩得不爽，模组太少；</p>
<p>想着自己用服务器搭一个玩玩</p>
<p>参考：<br><a href="https://linux.cn/article-9480-1.html" target="_blank" rel="noopener external nofollow noreferrer">在ubuntu搭建minecraft服务器</a></p>
<a id="more"></a>

<h4 id="安装java1-8"><a href="#安装java1-8" class="headerlink" title="安装java1.8"></a>安装java1.8</h4><figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">sudo apt-<span class="built_in">get</span> install openjdk-<span class="number">8</span>-jdk</span><br></pre></td></tr></table></figure>
<h4 id="卸载java"><a href="#卸载java" class="headerlink" title="卸载java"></a>卸载java</h4><figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">sudo apt-<span class="built_in">get</span> <span class="built_in">remove</span> openjdk*</span><br></pre></td></tr></table></figure>
<h4 id="1-screen进入screen"><a href="#1-screen进入screen" class="headerlink" title="1.screen进入screen"></a>1.screen进入screen</h4><h5 id="1-1-新建screen"><a href="#1-1-新建screen" class="headerlink" title="1.1 新建screen"></a>1.1 新建screen</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">screen -S newscreen</span><br></pre></td></tr></table></figure>
<h5 id="1-2-打开screen进程"><a href="#1-2-打开screen进程" class="headerlink" title="1.2 打开screen进程"></a>1.2 打开screen进程</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">screen -r</span><br></pre></td></tr></table></figure>
<h4 id="2-kill-pid退出screen某个进程"><a href="#2-kill-pid退出screen某个进程" class="headerlink" title="2.kill pid退出screen某个进程"></a>2.kill pid退出screen某个进程</h4><h4 id="3-运行minecraft"><a href="#3-运行minecraft" class="headerlink" title="3.运行minecraft"></a>3.运行minecraft</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">java -Xms500M -Xmx1300M -jar minecraft_server.1.12.2.jar nogui</span><br></pre></td></tr></table></figure>
<h4 id="4-执行-sh脚本"><a href="#4-执行-sh脚本" class="headerlink" title="4.执行.sh脚本"></a>4.执行.sh脚本</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">.&#x2F;minecraft&#x2F;start.sh</span><br></pre></td></tr></table></figure>
<h4 id="5-进入服务器控制台"><a href="#5-进入服务器控制台" class="headerlink" title="5.进入服务器控制台"></a>5.进入服务器控制台</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">screen -r minecraft</span><br></pre></td></tr></table></figure>
<h4 id="6-下载新版本minecraft"><a href="#6-下载新版本minecraft" class="headerlink" title="6.下载新版本minecraft"></a>6.下载新版本minecraft</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">wget https:&#x2F;&#x2F;s3.amazonaws.com&#x2F;Minecraft.Download&#x2F;versions&#x2F;1.12.2&#x2F;minecraft_server.1.12.2.jar</span><br></pre></td></tr></table></figure>
<h5 id="6-1接下来，运行并构建新服务端："><a href="#6-1接下来，运行并构建新服务端：" class="headerlink" title="6.1接下来，运行并构建新服务端："></a>6.1接下来，运行并构建新服务端：</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">java -Xms500M -Xmx1300M -jar minecraft_server.1.12.2.jar nogui</span><br></pre></td></tr></table></figure>
<h5 id="6-2最后，更新你的启动脚本："><a href="#6-2最后，更新你的启动脚本：" class="headerlink" title="6.2最后，更新你的启动脚本："></a>6.2最后，更新你的启动脚本：</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">vim minecraft&#x2F;start.sh</span><br></pre></td></tr></table></figure>
<h5 id="6-3更新版本号数字："><a href="#6-3更新版本号数字：" class="headerlink" title="6.3更新版本号数字："></a>6.3更新版本号数字：</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#!&#x2F;bin&#x2F;bash</span><br><span class="line">cd &#x2F;minecraft&#x2F; &amp;&amp; java -Xms500M -Xmx1300M -jar minecraft_server.1.12.2.jar nogui</span><br></pre></td></tr></table></figure>
<h4 id="7-server-properties参数"><a href="#7-server-properties参数" class="headerlink" title="7.server.properties参数"></a>7.server.properties参数</h4><p><a href="https://minecraft-zh.gamepedia.com/index.php?title=Server.properties&variant=zh" target="_blank" rel="noopener external nofollow noreferrer">server.properties参数</a></p>
<h4 id="8"><a href="#8" class="headerlink" title="8."></a>8.</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">screen -S yourname -&gt; 新建一个叫yourname的session</span><br><span class="line">screen -ls -&gt; 列出当前所有的session</span><br><span class="line">screen -r yourname -&gt; 回到yourname这个session</span><br><span class="line">screen -d yourname -&gt; 远程detach某个session</span><br><span class="line">screen -d -r yourname -&gt; 结束当前session并回到yourname这个session</span><br></pre></td></tr></table></figure>
<h4 id="9-minecraft服务端指令"><a href="#9-minecraft服务端指令" class="headerlink" title="9.minecraft服务端指令"></a>9.minecraft服务端指令</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;op 玩家名    &#x2F;&#x2F; 给权限</span><br><span class="line">&#x2F;gamemode 模式 玩家名</span><br></pre></td></tr></table></figure>
<h4 id="10-forge安装"><a href="#10-forge安装" class="headerlink" title="10.forge安装"></a>10.forge安装</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">wget https:&#x2F;&#x2F;files.minecraftforge.net&#x2F;maven&#x2F;net&#x2F;minecraftforge&#x2F;forge&#x2F;1.12.2-14.23.5.2808&#x2F;forge-1.12.2-14.23.5.2808-installer.jar</span><br><span class="line">java -jar forge文件.jar --insatll</span><br></pre></td></tr></table></figure>
<h5 id="10-1运行forge"><a href="#10-1运行forge" class="headerlink" title="10.1运行forge"></a>10.1运行forge</h5><h5 id="运行forge需要java1-8"><a href="#运行forge需要java1-8" class="headerlink" title="运行forge需要java1.8"></a>运行forge需要java1.8</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">java -Xms500M -Xmx1300M -server -jar forge-1.12.2-14.23.5.2808-universal.jar -nogui</span><br></pre></td></tr></table></figure>
<h4 id="11赋予-sh文件权限"><a href="#11赋予-sh文件权限" class="headerlink" title="11赋予.sh文件权限"></a>11赋予.sh文件权限</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">chmod +x start.sh</span><br></pre></td></tr></table></figure>
<h4 id="12MC服务器崩溃自启脚本"><a href="#12MC服务器崩溃自启脚本" class="headerlink" title="12MC服务器崩溃自启脚本"></a>12MC服务器崩溃自启脚本</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#!&#x2F;bin&#x2F;bash</span><br><span class="line">while true</span><br><span class="line">do</span><br><span class="line">cd &#x2F;minecraft&#x2F; &amp;&amp; java -Xms500M -Xmx1300M -jar minecraft_server.1.12.2.jar nogui</span><br><span class="line">done</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>Minecraft</tag>
      </tags>
  </entry>
  <entry>
    <title>求三角形外接圆的圆心</title>
    <url>/2019-06-12-qiu-san-jiao-xing-wai-jie-yuan-de-yuan-xin.html</url>
    <content><![CDATA[<p>已知三点坐标<br>求三角形外接圆的圆心</p>
<a id="more"></a>

<hr>
<h4 id="求三角形外接圆的圆心"><a href="#求三角形外接圆的圆心" class="headerlink" title="求三角形外接圆的圆心"></a>求三角形外接圆的圆心</h4><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 外接圆圆心、半径</span></span><br><span class="line"><span class="keyword">double</span> x,y,r;</span><br><span class="line"><span class="keyword">double</span> A1,B1,C1,A2,B2,C2;</span><br><span class="line"><span class="comment">// 三点</span></span><br><span class="line"><span class="keyword">double</span> x1,x2,x3,y1,y2,y3;</span><br><span class="line"><span class="comment">// 给点赋值</span></span><br><span class="line">x1 = p[<span class="number">0</span>].x;</span><br><span class="line">x2 = p[<span class="number">1</span>].x;</span><br><span class="line">x3 = p[<span class="number">2</span>].x;</span><br><span class="line">y1 = p[<span class="number">0</span>].y;</span><br><span class="line">y2 = p[<span class="number">1</span>].y;</span><br><span class="line">y3 = p[<span class="number">2</span>].y;</span><br><span class="line">A1 = <span class="number">2</span>*(x2-x1);</span><br><span class="line">B1 = <span class="number">2</span>*(y2-y1);</span><br><span class="line">C1 = x2*x2+y2*y2-x1*x1-y1*y1;</span><br><span class="line">A2 = <span class="number">2</span>*(x3-x2);</span><br><span class="line">B2 = <span class="number">2</span>*(y3-y2);</span><br><span class="line">C2 = x3*x3+y3*y3-x2*x2-y2*y2;</span><br><span class="line">	</span><br><span class="line">x = ((C1*B2)-(C2*B1))/((A1*B2)-(A2*B1));</span><br><span class="line">y = ((A1*C2)-(A2*C1))/((A1*B2)-(A2*B1));</span><br><span class="line">r = <span class="built_in">sqrt</span>((x-p[<span class="number">0</span>].x)*(x-p[<span class="number">0</span>].x)+(y-p[<span class="number">0</span>].y)*(y-p[<span class="number">0</span>].y));</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>算法笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>求垂点与平行线的算法</title>
    <url>/2019-06-12-qiu-chui-dian-yu-ping-xing-xian-de-suan-fa.html</url>
    <content><![CDATA[<p>已知两点构成的线段</p>
<p>求第三点到已知线段的垂点</p>
<p>求过第四点与已知线段平行的直线</p>
<a id="more"></a>

<hr>
<h4 id="1-以下给出算法"><a href="#1-以下给出算法" class="headerlink" title="1.以下给出算法"></a>1.以下给出算法</h4><h5 id="1-1求垂点坐标"><a href="#1-1求垂点坐标" class="headerlink" title="1.1求垂点坐标"></a>1.1求垂点坐标</h5><p>问题：已知两点: (x0,y0) (x1,y1)构成线段；</p>
<p>求第三点(x2,y2)到这条线段的垂线段。</p>
<p>求解：</p>
<p>线段L函数：(y1-y0)/(x1-x0)=(y-y0)(x-x0)</p>
<p>垂线段函数：y-y2=(x0-x1)(x-x2)/(y1-y2) +y2</p>
<p>联立解得：</p>
<p>x = [ x2(x0-x1)^2 + x0(y1-y2)^2 + (y0-y2)(y1-y0)(x0-x1) ] / [ (x0-x1)^2 + (y1-y0)^2]</p>
<p>将x代入函数求y</p>
<h5 id="1-2求平行线"><a href="#1-2求平行线" class="headerlink" title="1.2求平行线"></a>1.2求平行线</h5><p>已知第四点(x3,y3)，求过这点与线段平行的直线</p>
<p>线段斜率：</p>
<p>k = (y1-y0)/(x1-x0)</p>
<p>平行线的函数表达式：</p>
<p>y = k*(x - x3)+y3</p>
<p>x=999时，y=k*(999 - x3)+y3</p>
<p>x=-999时，y=k*(-999 - x3)+y3</p>
<p>得到较远处平行线上两点，连接可看成直线</p>
<h5 id="1-3缺陷："><a href="#1-3缺陷：" class="headerlink" title="1.3缺陷："></a>1.3缺陷：</h5><p>未考虑线段斜率为0的情况，简单，懒得写了</p>
]]></content>
      <tags>
        <tag>算法笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>Arcgis中的python编程(1)</title>
    <url>/2019-06-13-arcgis-python-1.html</url>
    <content><![CDATA[<h3 id="学习日志-1"><a href="#学习日志-1" class="headerlink" title="学习日志 1:"></a>学习日志 1:</h3><p>书籍：基于ArcGIS的Python编程秘笈(第2版);   </p>
<ul>
<li>arcpy库  </li>
<li>引用mxd文档、数据框、图层  </li>
<li>改变地图范围  </li>
<li>添加图层文件到数据框  </li>
<li>插入一个图层到某个位置  </li>
</ul>
<a id="more"></a>

<h3 id="1-arcpy库"><a href="#1-arcpy库" class="headerlink" title="1. arcpy库"></a>1. arcpy库</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> arcpy.mapping <span class="keyword">as</span> mapping</span><br></pre></td></tr></table></figure>
<h3 id="2-引用mxd文档、数据框、图层"><a href="#2-引用mxd文档、数据框、图层" class="headerlink" title="2. 引用mxd文档、数据框、图层"></a>2. 引用mxd文档、数据框、图层</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">mxd = mapping.MapDocument(<span class="string">"H:\\upUpStudy\\pythonGis\\text\\text.mxd"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#或</span></span><br><span class="line"></span><br><span class="line">mxd = mapping.MapDocument(<span class="string">"current"</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">df = mapping.ListDataFrames(mxd)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">layers = mapping.ListLayers(mxd, <span class="string">"p"</span>, df)</span><br></pre></td></tr></table></figure>

<h3 id="3-改变地图范围"><a href="#3-改变地图范围" class="headerlink" title="3. 改变地图范围"></a>3. 改变地图范围</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> arcpy.mapping <span class="keyword">as</span> mapping</span><br><span class="line"><span class="meta">... </span>mxd = mapping.MapDocument(<span class="string">"current"</span>)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> df <span class="keyword">in</span> mapping.ListDataFrames(mxd):</span><br><span class="line"><span class="meta">... </span>    <span class="keyword">if</span> df == <span class="string">"df1"</span>:</span><br><span class="line"><span class="meta">... </span>        layers = mapping.ListLayers(mxd, <span class="string">'counties'</span>, df)</span><br><span class="line"><span class="meta">... </span>        <span class="keyword">for</span> layer <span class="keyword">in</span> layers:</span><br><span class="line"><span class="meta">... </span>            query = <span class="string">'"county" = "HAYS"'</span></span><br><span class="line"><span class="meta">... </span>            layer.definitionQuery = query</span><br><span class="line"><span class="meta">... </span>            df.extent = layer.getExtent()</span><br></pre></td></tr></table></figure>

<h3 id="4-添加图层文件到数据框"><a href="#4-添加图层文件到数据框" class="headerlink" title="4. 添加图层文件到数据框"></a>4. 添加图层文件到数据框</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> arcpy.mapping <span class="keyword">as</span> mapping</span><br><span class="line"><span class="meta">... </span>mxd = mapping.MapDocument(<span class="string">"current"</span>)</span><br><span class="line"><span class="meta">... </span>df = mapping.ListDataFrames(mxd)[<span class="number">0</span>]</span><br><span class="line"><span class="comment">#########</span></span><br><span class="line"><span class="meta">... </span>layer = mapping.Layer(<span class="string">r'H:\upUpStudy\pythonGis\data\counties.lyr'</span>)</span><br><span class="line"><span class="meta">... </span>mapping.AddLayer(df, layer, <span class="string">"AUTO_ARRANGE"</span>)</span><br><span class="line"><span class="comment">##########</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<h4 id="4-1-添加到图层组、移除图层"><a href="#4-1-添加到图层组、移除图层" class="headerlink" title="4.1 添加到图层组、移除图层"></a>4.1 添加到图层组、移除图层</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">mapping.AddLayerToGroup()</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">mapping.RemoveLayer()</span><br></pre></td></tr></table></figure>
<h3 id="5-插入一个图层到某个位置"><a href="#5-插入一个图层到某个位置" class="headerlink" title="5. 插入一个图层到某个位置"></a>5. 插入一个图层到某个位置</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">mapping.InsertLayer()</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> arcpy.mapping <span class="keyword">as</span> mapping</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>mxd = mapping.MapDocument(<span class="string">"current"</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>df = mapping.ListDataFrames(mxd)[<span class="number">0</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 参考图层</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>reflayer = mapping.ListLayers(mxd, <span class="string">'boun*'</span>, df)[<span class="number">0</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 插入的图层</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>insertLayer = mapping.Layer(<span class="string">r'H:\upUpStudy\pythonGis\data\streets.shp'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 插入</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>mapping.InsertLayer(df, reflayer, insertLayer, <span class="string">"BEFORE"</span>)</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>pythonGIS</tag>
      </tags>
  </entry>
  <entry>
    <title>Arcgis中的python编程(2)</title>
    <url>/2019-06-13-arcgis-python-2.html</url>
    <content><![CDATA[<p>学习日志 2:   </p>
<p>书籍：基于ArcGIS的Python编程秘笈(第2版);       </p>
<ul>
<li>利用图层更新其他图层属性  </li>
<li>操作数据框中启用时间属性的图层  </li>
<li>查找地图文档和图层文件中丢失的数据源  </li>
<li>使用MapDocument.findAndReplaceWorkplacePaths()修复丢失的数据源  </li>
<li>使用MapDocument.replaceWorkspaces()方法修复丢失的数据源</li>
</ul>
<a id="more"></a>

<h3 id="1-利用图层更新其他图层属性"><a href="#1-利用图层更新其他图层属性" class="headerlink" title="1. 利用图层更新其他图层属性"></a>1. 利用图层更新其他图层属性</h3><p>结果使将要更新的图层的属性变成与原图层一样</p>
<p>更新图层与源图层拥有相同的属性</p>
<p>更改的属性：例如 图层名、字段别名、定义查询等</p>
<p>对于在多个数据框的相同的图层，需要对其进行属性更改设置，可通过这样的方法进行</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> arcpy.mapping <span class="keyword">as</span> mapping</span><br><span class="line">mxd = mapping.MapDocument(<span class="string">"current"</span>)</span><br><span class="line">df = mapping.ListDataFrames(mxd, <span class="string">"Crime"</span>)[<span class="number">0</span>]</span><br><span class="line"><span class="comment"># 将要更新的图层</span></span><br><span class="line">updateLayer = mapping.ListLayers(mxd, <span class="string">"Crimes2009"</span>, df)[<span class="number">0</span>]</span><br><span class="line"><span class="comment"># 用于更新图层的源图层</span></span><br><span class="line">sourceLayer = mapping.Layer(<span class="string">r"H:\upUpStudy\pythonGis\data\BurglariesNoForcedEntry.lyr"</span>)</span><br><span class="line"><span class="comment"># 更新符号系统</span></span><br><span class="line">mapping.UpdateLayer(df, updateLayer, sourceLayer, <span class="literal">False</span>)</span><br></pre></td></tr></table></figure>
<h3 id="2-操作数据框中启用时间属性的图层"><a href="#2-操作数据框中启用时间属性的图层" class="headerlink" title="2. 操作数据框中启用时间属性的图层"></a>2. 操作数据框中启用时间属性的图层</h3><ul>
<li>DataFrameTime对象(DataFrame.time属性返回的结果)</li>
</ul>
<p>可检索</p>
<ul>
<li>currentTime (当前时间)</li>
<li>endTime (结束时间)</li>
<li>startTime (开始时间)</li>
<li>timeStepInterval (时间步长间隔)</li>
</ul>
<p>数据框中的图层必须 ==启用时间属性== 才能进行这些操作 </p>
<h4 id="以7天为间隔导出犯罪点的位置PDF"><a href="#以7天为间隔导出犯罪点的位置PDF" class="headerlink" title="以7天为间隔导出犯罪点的位置PDF"></a>以7天为间隔导出犯罪点的位置PDF</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> arcpy.mapping <span class="keyword">as</span> mapping</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">mxd = mapping.MapDocument(<span class="string">"current"</span>)</span><br><span class="line">df = mapping.ListDataFrames(mxd, <span class="string">"Crime"</span>)[<span class="number">0</span>]</span><br><span class="line">dft = df.time</span><br><span class="line"><span class="comment"># dft 为DataFrameTime对象 </span></span><br><span class="line"><span class="comment"># 设置当前时间为开始时间</span></span><br><span class="line">dft.currentTime = dft.startTime</span><br><span class="line"><span class="comment"># 使用循环导出以7天为间隔的犯罪数据的PDF文件</span></span><br><span class="line"><span class="keyword">while</span> dft.currentTime &lt;= dft.endTime:</span><br><span class="line">    fileName = str(dft.currentTime).split(<span class="string">" "</span>)[<span class="number">0</span>] + <span class="string">".pdf"</span></span><br><span class="line">    <span class="comment"># 导出地图</span></span><br><span class="line">    mapping.ExportToPDF(mxd, os.path.join(<span class="string">r"H:\upUpStudy\pythonGis\data\Ch2"</span>, fileName), df)</span><br><span class="line">    print(<span class="string">"Export"</span> + fileName)</span><br><span class="line">    <span class="comment"># 循环控制</span></span><br><span class="line">    dft.currentTime = dft.currentTime + dft.timeStepInterval</span><br></pre></td></tr></table></figure>

<h3 id="3-查找地图文档和图层文件中丢失的数据源"><a href="#3-查找地图文档和图层文件中丢失的数据源" class="headerlink" title="3. 查找地图文档和图层文件中丢失的数据源"></a>3. 查找地图文档和图层文件中丢失的数据源</h3><p> 图层文件前有感叹号表示已丢失数据链接</p>
<ul>
<li>arcpy.mapping.ListBrokenDataSources() 返回已丢失数据源图层列表</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> arcpy.mapping <span class="keyword">as</span> mapping</span><br><span class="line">mxd = mapping.MapDocument(<span class="string">"current"</span>)</span><br><span class="line"><span class="comment"># 获取文档中丢失数据源图层列表</span></span><br><span class="line">listBrokenDS = mapping.ListBrokenDataSources(mxd)</span><br><span class="line"><span class="keyword">for</span> layer <span class="keyword">in</span> listBrokenDS:</span><br><span class="line">    print(layer.name)</span><br></pre></td></tr></table></figure>

<h3 id="4-使用MapDocument-findAndReplaceWorkplacePaths-修复丢失的数据源"><a href="#4-使用MapDocument-findAndReplaceWorkplacePaths-修复丢失的数据源" class="headerlink" title="4. 使用MapDocument.findAndReplaceWorkplacePaths()修复丢失的数据源"></a>4. 使用MapDocument.findAndReplaceWorkplacePaths()修复丢失的数据源</h3><ul>
<li>MapDocument.findAndReplaceWorkspacePaths()</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> arcpy.mapping <span class="keyword">as</span> mapping</span><br><span class="line">mxd = mapping.MapDocument(<span class="string">"current"</span>)</span><br><span class="line"><span class="comment"># 获取文档中丢失数据源图层列表</span></span><br><span class="line">listBrokenDS = mapping.ListBrokenDataSources(mxd)</span><br><span class="line"><span class="keyword">for</span> layer <span class="keyword">in</span> listBrokenDS:</span><br><span class="line">    print(layer.name)</span><br><span class="line">    </span><br><span class="line"><span class="keyword">import</span> arcpy.mapping <span class="keyword">as</span> mapping</span><br><span class="line">mxd = mapping.MapDocument(<span class="string">"current"</span>)</span><br><span class="line"><span class="comment"># 修复文档中图层数据源</span></span><br><span class="line">mxd.findAndReplaceWorkspacePaths(<span class="string">r"H:\upUpStudy\pythonGis\基于arcgis的python编程秘籍第二版数据文件\ArcpyBook\Ch3\Data\OldData\CityOfSanAntonio.gdb"</span>, <span class="string">r"H:\upUpStudy\pythonGis\基于arcgis的python编程秘籍第二版数据文件\ArcpyBook\data\CityOfSanAntonio.gdb"</span>)</span><br><span class="line"><span class="comment"># 结果保存到mxd</span></span><br><span class="line">mxd.saveACopy(<span class="string">r"H:\upUpStudy\pythonGis\基于arcgis的python编程秘籍第二版数据文件\ArcpyBook\Ch3\Crime_DataLinksFixed.mxd"</span>)</span><br></pre></td></tr></table></figure>

<h4 id="Layer和TableView对象的-findAndReplaceWokespacePaths"><a href="#Layer和TableView对象的-findAndReplaceWokespacePaths" class="headerlink" title="Layer和TableView对象的 findAndReplaceWokespacePaths()"></a>Layer和TableView对象的 findAndReplaceWokespacePaths()</h4><ul>
<li>Layer.findAndReplaceWokespacePaths()</li>
<li>TableView.findAndReplaceWokespacePaths()</li>
</ul>
<p>只能用来修复单个丢失的数据源，不能进行全局查找并替换地图文档中所有丢失的数据源</p>
<h4 id="缺点：-替换的数据源必须类型相同"><a href="#缺点：-替换的数据源必须类型相同" class="headerlink" title="缺点： 替换的数据源必须类型相同"></a>缺点： 替换的数据源必须类型相同</h4><p>如原来的数据源是个人地理数据库，那么替换的数据源也必须是个人地理数据库，只是数据库路径改变了</p>
<h3 id="5-使用MapDocument-replaceWorkspaces-方法修复丢失的数据源"><a href="#5-使用MapDocument-replaceWorkspaces-方法修复丢失的数据源" class="headerlink" title="5. 使用MapDocument.replaceWorkspaces()方法修复丢失的数据源"></a>5. 使用MapDocument.replaceWorkspaces()方法修复丢失的数据源</h3><ul>
<li>MapDocument.replaceWorkspaces()</li>
</ul>
<p>允许从一种工作空间类型转换到另一种工作空间类型；</p>
<p>如从个人地理数据库到文件地理数据库；</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> arcpy.mapping <span class="keyword">as</span> mapping</span><br><span class="line">mxd = mapping.MapDocument(<span class="string">"current"</span>)</span><br><span class="line"><span class="comment"># 替换数据源为.mdb个人地理数据库的源</span></span><br><span class="line">mxd.replaceWorkspaces(<span class="string">r"H:\upUpStudy\pythonGis\基于arcgis的python编程秘籍第二版数据文件\ArcpyBook\data\CityOfSanAntonio.gdb"</span>, <span class="string">"FILEGDB_WORKSPACE"</span>, <span class="string">r"H:\upUpStudy\pythonGis\基于arcgis的python编程秘籍第二版数据文件\ArcpyBook\New_Data\CityOfSanAntonio_Personal.mdb"</span>, <span class="string">"ACCESS_WORKSPACE"</span>)</span><br><span class="line">mxd.saveACopy(<span class="string">r"H:\upUpStudy\pythonGis\基于arcgis的python编程秘籍第二版数据文件\ArcpyBook\Ch3\Crime_DataLinksUpdate.mxd"</span>)</span><br></pre></td></tr></table></figure>

]]></content>
      <tags>
        <tag>pythonGIS</tag>
      </tags>
  </entry>
  <entry>
    <title>Arcgis中的python编程(3)</title>
    <url>/2019-06-16-arcgis-python-3.html</url>
    <content><![CDATA[<p>学习日志 3    </p>
<p>书籍：基于ArcGIS的Python编程秘笈(第2版);  </p>
<ul>
<li>使用replaceDataSource()修复单个图层和表对象  </li>
<li>查找文件夹中所有地图文档内丢失数据源的图层  </li>
</ul>
<a id="more"></a>

<h3 id="1-使用replaceDataSource-修复单个图层和表对象"><a href="#1-使用replaceDataSource-修复单个图层和表对象" class="headerlink" title="1. 使用replaceDataSource()修复单个图层和表对象"></a>1. 使用replaceDataSource()修复单个图层和表对象</h3><ul>
<li>layer.replaceDataSource()  </li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 替换一个图层</span></span><br><span class="line"><span class="keyword">import</span> arcpy.mapping <span class="keyword">as</span> mapping</span><br><span class="line">mxd = mapping.MapDocument(<span class="string">"current"</span>)</span><br><span class="line">df = mapping.ListDataFrames(mxd, <span class="string">"Crime"</span>)[<span class="number">0</span>]</span><br><span class="line">lyr = mapping.ListLayers(mxd, <span class="string">"Burglary"</span>, df)[<span class="number">0</span>]</span><br><span class="line"><span class="comment"># layer.replaceDataSource()方法替换</span></span><br><span class="line">lyr.replaceDataSource(<span class="string">r"H:\upUpStudy\pythonGis\基于arcgis的python编程秘籍第二版数据文件\ArcpyBook\data"</span>, <span class="string">"SHAPEFILE_WORKSPACE"</span>, <span class="string">"Burglaries_2009"</span>)</span><br></pre></td></tr></table></figure>

<h3 id="2-查找文件夹中所有地图文档内丢失数据源的图层"><a href="#2-查找文件夹中所有地图文档内丢失数据源的图层" class="headerlink" title="2. 查找文件夹中所有地图文档内丢失数据源的图层"></a>2. 查找文件夹中所有地图文档内丢失数据源的图层</h3><p>内容：使用循环搜索文件夹中的地图文档文件，查找这些地图文档中丢失的数据源，并将丢失的数据链接的图层名称写入一个文本文件中</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> arcpy.mapping <span class="keyword">as</span> mapping</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="comment">## 写文件操作 循环目录内容,找到mxd文档判断内部是否有丢失源</span></span><br><span class="line"><span class="comment">## 并把丢失源的图层保存在文件中 ##</span></span><br><span class="line"><span class="comment">## 注意：os.walk('路径') 路径过深导致失败，或有中文字符</span></span><br><span class="line">f = open(<span class="string">"BrokenDataList.txt"</span>, <span class="string">"w"</span>)</span><br><span class="line"><span class="comment"># os.walk()遍历目录树</span></span><br><span class="line"><span class="keyword">for</span> root, dirs, files <span class="keyword">in</span> os.walk(<span class="string">'H:\ArcpyBook'</span>):</span><br><span class="line">    <span class="keyword">for</span> name <span class="keyword">in</span> files:</span><br><span class="line">        filename = os.path.join(root, name)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> <span class="string">".mxd"</span> <span class="keyword">in</span> filename:</span><br><span class="line">            mxd = mapping.MapDocument(filename)</span><br><span class="line">            f.write(<span class="string">"MXD: "</span> + filename + <span class="string">"\n"</span>)</span><br><span class="line">            brknList = mapping.ListBrokenDataSources(mxd)</span><br><span class="line">            <span class="keyword">for</span> brknItem <span class="keyword">in</span> brknList:</span><br><span class="line">                print(<span class="string">"Broken data item: "</span> + brknItem.name + <span class="string">" in "</span> + filename)</span><br><span class="line">                f.write(<span class="string">"\t"</span> + brknItem.name + <span class="string">"\n"</span>)</span><br><span class="line">print(<span class="string">"All done\n"</span>)</span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>pythonGIS</tag>
      </tags>
  </entry>
  <entry>
    <title>lemon</title>
    <url>/2019-06-20-music-lemon.html</url>
    <content><![CDATA[<ul>
<li><p>热爱之所爱</p>
</li>
<li><p>学思之所学</p>
</li>
<li><p>lemon</p>
</li>
<li><p>米津玄師</p>
</li>
</ul>
<a id="more"></a>

<h2 id="lemon"><a href="#lemon" class="headerlink" title="lemon"></a>lemon</h2><ul>
<li><p>lemon</p>
</li>
<li><p>米津玄師</p>
</li>
<li><p><a href="https://www.youtube.com/watch?v=SX_ViT4Ra7k" target="_blank" rel="noopener external nofollow noreferrer">MV(youtube)</a></p>
</li>
<li><p>梦（ゆめ）ならばどれほどよかったでしょう</p>
<blockquote>
<p>yume naraba dore hodo yokatta deshou</p>
<p>如果这一切都是梦境该有多好</p>
</blockquote>
</li>
<li><p>未（いま）だにあなたのことを梦（ゆめ）にみる</p>
<blockquote>
<p>imada ni anata no koto wo yume ni miru</p>
<p>至今仍能与你在梦中相遇</p>
</blockquote>
</li>
<li><p>忘（わす）れた物（もの）を取（と）りに帰（かえ）るように</p>
<blockquote>
<p>wasureta mono wo tori ni kaeru youni</p>
<p>如同取回遗忘之物一般</p>
</blockquote>
</li>
<li><p>古（ふる）びた思（おも）い出（で）の埃（ほこり）を払（はら）う</p>
<blockquote>
<p>furubita omoide no hokori wo harau</p>
<p>细细拂去将回忆覆盖的尘埃</p>
</blockquote>
</li>
<li><p>戻（もど）らない幸（しあわ）せがあることを</p>
<blockquote>
<p>modora nai shiawase ga aru koto wo</p>
<p>这世间亦有无法挽回的幸福</p>
</blockquote>
</li>
<li><p>最後（さいご）にあなたが教（おし）えてくれた</p>
<blockquote>
<p>saigo ni anata ga oshiete kureta</p>
<p>最终是你让我懂得这一点</p>
</blockquote>
</li>
<li><p>言（い）えずに隠（かくし）してた昏（くら）い过去（かこ）も</p>
<blockquote>
<p>iezu ni kakushiteta kurai kako mo</p>
<p>那些未对他人提及过的黑暗往事</p>
</blockquote>
</li>
<li><p>あなたがいなきゃ永远（えいえん）に昏（くら）いまま</p>
<blockquote>
<p>anata ga inakya eien ni kurai mama</p>
<p>如果不曾有你的话 它们将永远沉睡在黑暗中</p>
</blockquote>
</li>
<li><p>きっともうこれ以上 伤（きず）つくことなど</p>
<blockquote>
<p>kitto mou kore ijou kizu tsuku koto nado</p>
<p>比这更令人难过的事情</p>
</blockquote>
</li>
<li><p>ありはしないとわかっている</p>
<blockquote>
<p>ari wa shinai to wakatte iru</p>
<p>我知道不可能存在</p>
</blockquote>
</li>
<li><p>あの日（ひ）の悲（かな）しみさえ</p>
<blockquote>
<p>ano hi no kanashimi sae</p>
<p>那日的悲伤</p>
</blockquote>
</li>
<li><p>あの日（ひ）の苦（くる）しみさえ</p>
<blockquote>
<p>ano hi no kurushimi sae</p>
<p>与那日的痛苦</p>
</blockquote>
</li>
<li><p>そのすべてを爱（あい）してた あなたとともに</p>
<blockquote>
<p>sono subete wo aishiteta anata to tomoni</p>
<p>连同深爱着这一切的你</p>
</blockquote>
</li>
<li><p>胸（むね）に残（のこ）り离（はな）れない</p>
<blockquote>
<p>mune ni nokori hanare nai</p>
<p>化作了深深烙印在我心中的</p>
</blockquote>
</li>
<li><p>苦（にが）いレモンの匂（にお）い</p>
<blockquote>
<p>nigai remon no nioi</p>
<p>苦涩柠檬的香气</p>
</blockquote>
</li>
<li><p>雨（あめ）が降（ふ）り止（や）むまでは帰（かえ）れない</p>
<blockquote>
<p>ame ga furiyamu made wa kaere nai</p>
<p>在雨过天晴前都无法归去</p>
</blockquote>
</li>
<li><p>今（いま）でもあなたはわたしの光（ひかり）</p>
<blockquote>
<p>ima demo anata wa watashi no hikari</p>
<p>时至今日 你仍是我的光芒</p>
</blockquote>
</li>
<li><p>暗闇（くらやみ）であなたの背（せ）をなぞった</p>
<blockquote>
<p>kurayami de anata no se wo nazotta</p>
<p>在黑暗中追寻着你的身影</p>
</blockquote>
</li>
<li><p>その轮郭（りんかく）を鲜明（せんめい）に覚（おぼ）えている</p>
<blockquote>
<p>sono rinkaku wo senmei ni oboete iru</p>
<p>那轮廓至今仍鲜明地刻印于心</p>
</blockquote>
</li>
<li><p>受（う）け止（と）めきれないものと出会（であ）うたび</p>
<blockquote>
<p>uketome kire nai mono to deau tabi</p>
<p>每当遇到无法承受的苦痛时</p>
</blockquote>
</li>
<li><p>溢（あふ）れてやまないのは涙だけ</p>
<blockquote>
<p>afurete yama nai no wa namida dake</p>
<p>总不禁泪如泉涌</p>
</blockquote>
</li>
<li><p>何（なに）をしていたの</p>
<blockquote>
<p>nani wo shite ita no</p>
<p>你都经历过什么</p>
</blockquote>
</li>
<li><p>何（なに）を见（み）ていたの</p>
<blockquote>
<p>nani wo mite ita no</p>
<p>又目睹过什么呢</p>
</blockquote>
</li>
<li><p>わたしの知（し）らない横颜（よこがお）で</p>
<blockquote>
<p>watashi no shira nai yokogao de</p>
<p>脸上浮现着我不曾见过的神情</p>
</blockquote>
</li>
<li><p>どこかであなたが今（いま）</p>
<blockquote>
<p>dokoka de anata ga ima</p>
<p>如果你正在什么地方</p>
</blockquote>
</li>
<li><p>わたしと同（おな）じ様（よう）な</p>
<blockquote>
<p>watashi to onaji youna</p>
<p>与我一样</p>
</blockquote>
</li>
<li><p>涙（なみだ）にくれ 淋（さび）しさの中（なか）にいるなら</p>
<blockquote>
<p>namida ni kure samishisa no naka ni iru nara</p>
<p>终日过着以泪洗面的寂寞生活的话</p>
</blockquote>
</li>
<li><p>わたしのことなどどうか 忘（わす）れてください</p>
<blockquote>
<p>watashi no koto nado douka wasurete kudasai</p>
<p>就请你将我的一切全部遗忘吧</p>
</blockquote>
</li>
<li><p>そんなことを心（こころ）から愿（ねが）うほどに</p>
<blockquote>
<p>sonna koto wo kokoro kara negau hodo ni</p>
<p>这是我发自内深处唯一的祈愿</p>
</blockquote>
</li>
<li><p>今（いま）でもあなたはわたしの光（ひかり）</p>
<blockquote>
<p>ima demo anata wa watashi no hikari</p>
<p>时至今日 你仍是我的光芒</p>
</blockquote>
</li>
<li><p>自分（じぶん）が思（おも）うより 恋（こい）をしていたあなたに</p>
<blockquote>
<p>jibun ga omou yori koi wo shite ita anata ni</p>
<p>我深深地恋慕着你 甚至超出了我自己的想象</p>
</blockquote>
</li>
<li><p>あれから思（おも）うように 息（いき）ができない</p>
<blockquote>
<p>are kara omou youni iki ga deki nai</p>
<p>自此每当想起你 都如同窒息般痛苦</p>
</blockquote>
</li>
<li><p>あんなに侧（そば）にいたのにまるで嘘（うそ）みたい</p>
<blockquote>
<p>annani soba ni ita noni marude uso mitai</p>
<p>你曾亲密伴我身旁 如今却如烟云般消散</p>
</blockquote>
</li>
<li><p>とても忘（わす）れられないそれだけが确（たし）か</p>
<blockquote>
<p>totemo wasurerare nai sore dake ga tashika</p>
<p>唯一能确定的是 我永远都不会将你遗忘</p>
</blockquote>
</li>
<li><p>あの日（ひ）の悲（かな）しみさえ</p>
<blockquote>
<p>ano hi no kanashimi sae</p>
<p>那日的悲伤</p>
</blockquote>
</li>
<li><p>あの日（ひ）の苦（くる）しみさえ</p>
<blockquote>
<p>ano hi no kurushimi sae</p>
<p>与那日的痛苦</p>
</blockquote>
</li>
<li><p>その全（すべ）てを爱（あい）してたあなたと共（とも）に</p>
<blockquote>
<p>sono subete wo aishiteta anata to tomoni</p>
<p>连同深爱着这一切的你</p>
</blockquote>
</li>
<li><p>胸（むね）に残（のこ）り离（はな）れない</p>
<blockquote>
<p>mune ni nokori hanare nai</p>
<p>化作了深深烙印在我心中的</p>
</blockquote>
</li>
<li><p>苦（にが）いレモンの匂（にお）い</p>
<blockquote>
<p>nigai remon no nioi</p>
<p>苦涩柠檬的香气</p>
</blockquote>
</li>
<li><p>雨（あめ）が降（ふ）り止（や）むまでは帰（かえ）れない</p>
<blockquote>
<p>ame ga furiyamu made wa kaere nai</p>
<p>在雨过天晴前都无法归去</p>
</blockquote>
</li>
<li><p>切（き）り分（わ）けた果実（かじつ）の片方（かたほう）の様（よう）に</p>
<blockquote>
<p>kiriwaketa kajitsu no katahou no youni</p>
<p>如同被切开的半个柠檬一般</p>
</blockquote>
</li>
<li><p>今（いま）でもあなたはわたしの光（ひかり）</p>
<blockquote>
<p>ima demo anata wa watashi no hikari</p>
<p>时至今日你仍是我的光芒</p>
</blockquote>
</li>
</ul>
]]></content>
      <tags>
        <tag>歌</tag>
      </tags>
  </entry>
  <entry>
    <title>今日から思い出</title>
    <url>/2019-06-20-jin-ri-karasi-ichu.html</url>
    <content><![CDATA[<ul>
<li>热爱之所爱</li>
<li>学思之所学</li>
</ul>
<ul>
<li>今日から思い出</li>
<li>Aimer</li>
</ul>
<a id="more"></a>


<ul>
<li>今日から思い出<blockquote>
<p>kyou kara omoide</p>
<p>从今天开始的回忆</p>
</blockquote>
</li>
<li>素敌な思い出<blockquote>
<p>suteki na omoide</p>
<p>美好的回忆</p>
</blockquote>
</li>
<li>明日はもう一人だ<blockquote>
<p>ashita wa mou hitori da</p>
<p>明天开始就孤单一人了</p>
</blockquote>
</li>
<li>これから　一人だ<blockquote>
<p>kore kara hitori da</p>
<p>从今往后 独自一人</p>
</blockquote>
</li>
<li>すべては思い出<blockquote>
<p>subete wa omoide</p>
<p>一切都是回忆</p>
</blockquote>
</li>
<li>悲しい思い出<blockquote>
<p>kanashii omoide</p>
<p>伤感的回忆</p>
</blockquote>
</li>
<li>明日は そう どこかへ<blockquote>
<p>ashita wa sou dokokahe</p>
<p>明天也不知该去哪里</p>
</blockquote>
</li>
<li>どこかへ 远くへ<blockquote>
<p>dokokahe toukuhe</p>
<p>肯定是遥远的某个地方</p>
</blockquote>
</li>
<li>电话のむこう<blockquote>
<p>denwa no mukou</p>
<p>在电话的另一头</p>
</blockquote>
</li>
<li>ママが泣いてた<blockquote>
<p>mama ga naiteta</p>
<p>妈妈哭了起来</p>
</blockquote>
</li>
<li>「大丈夫？」って いった<blockquote>
<p>daijoubu tte itta</p>
<p>我问了一声「没事吧?」</p>
</blockquote>
</li>
<li>ズルイな 先に泣くから<blockquote>
<p>zuruina saki ni naku kara</p>
<p>好狡猾啊 因为你先哭了起来</p>
</blockquote>
</li>
<li>私はもう 泣けなくなるよ<blockquote>
<p>watashi wa mou nake naku naru yo</p>
<p>我就已经无法哭泣</p>
</blockquote>
</li>
<li>今 あなたの声を 闻くことできるなら<blockquote>
<p>ima anata no koe wo kiku koto dekiru nara</p>
<p>如果现在 能听到你的声音的话</p>
</blockquote>
</li>
<li>「爱してる」の一言を<blockquote>
<p>aishiteru no hitokoto wo</p>
<p>「我爱你」这一句话</p>
</blockquote>
</li>
<li>言ってほしい<blockquote>
<p>itte hoshii</p>
<p>希望你能说出来</p>
</blockquote>
</li>
<li>言ってほしい<blockquote>
<p>itte hoshii</p>
<p>希望你能说出来</p>
</blockquote>
</li>
<li>今 あなたに言叶 送ることできるなら<blockquote>
<p>ima anata ni kotoba okuru koto dekiru nara</p>
<p>如果现在 我说的话语还能传达给你</p>
</blockquote>
</li>
<li>「生まれ変わっても<blockquote>
<p>umare kawatte mo</p>
<p>「就算转世以后</p>
</blockquote>
</li>
<li>また一绪にいたい」<blockquote>
<p>mata isshyoni itai</p>
<p>我还是想和你在一起」</p>
</blockquote>
</li>
<li>もう会えないなんて…<blockquote>
<p>mou aenai nante …</p>
<p>不想相信再也无法见面什么的…</p>
</blockquote>
</li>
<li>今日から思い出<blockquote>
<p>kyou kara omoide</p>
<p>从今天起一切都是回忆</p>
</blockquote>
</li>
<li>それでも思い出<blockquote>
<p>sore demo omoide</p>
<p>尽管如此 也是回忆</p>
</blockquote>
</li>
<li>いつかは そう 一人だ<blockquote>
<p>itsuka wa sou hitori da</p>
<p>不知何时 只剩下我一个人</p>
</blockquote>
</li>
<li>それなら どうして<blockquote>
<p>sore nara doushite</p>
<p>如果是这样 那为什么</p>
</blockquote>
</li>
<li>窓のむこう  あなたが见えた<blockquote>
<p>mado no mukou anata ga mieta</p>
<p>在窗户的另一边 我看到了你</p>
</blockquote>
</li>
<li>「大丈夫？」って いうの？<blockquote>
<p>daijoubu tte iuno</p>
<p>是否在问我 「没事吧?」</p>
</blockquote>
</li>
<li>ヒドイな そう闻かれたら<blockquote>
<p>hidoi na sou kikare tara</p>
<p>好过分啊 如果被这样问的话</p>
</blockquote>
</li>
<li>私はもう 泣けなくなるよ<blockquote>
<p>watashi wa mou nake naku naru yo</p>
<p>我就无法哭泣了</p>
</blockquote>
</li>
<li>今 あなたの声を 闻くことできるなら<blockquote>
<p>ima anata no koe wo kiku koto dekiru nara</p>
<p>如果现在 能听到你的声音的话</p>
</blockquote>
</li>
<li>「爱してる」の一言を<blockquote>
<p>aishiteru no hitokoto wo</p>
<p>「我爱你」这一句话</p>
</blockquote>
</li>
<li>言ってほしい<blockquote>
<p>itte hoshii</p>
<p>希望你能说出来</p>
</blockquote>
</li>
<li>言ってほしい<blockquote>
<p>itte hoshii</p>
<p>希望你能说出来</p>
</blockquote>
</li>
<li>今 あなたに言叶 送ることできるなら<blockquote>
<p>ima anatani kotoba okuru koto dekiru nara</p>
<p>如果现在 我说的话语还能传达给你</p>
</blockquote>
</li>
<li>「生まれ変わっても<blockquote>
<p>umare kawatte mo</p>
<p>「就算转世以后</p>
</blockquote>
</li>
<li>また一绪にいたい」<blockquote>
<p>mata isshyoni itai</p>
<p>我还是想和你在一起」</p>
</blockquote>
</li>
<li>もう会えないなんて…<blockquote>
<p>mou aenai nante …</p>
<p>不想相信再也无法见面什么的…</p>
</blockquote>
</li>
<li>もう会えないなんて…<blockquote>
<p>mou aenai nante …</p>
<p>不想相信再也无法见面什么的 …</p>
</blockquote>
</li>
</ul>
]]></content>
      <tags>
        <tag>歌</tag>
      </tags>
  </entry>
  <entry>
    <title>Arcgis中的python编程(4)</title>
    <url>/2019-06-21-arcgis-python-4.html</url>
    <content><![CDATA[<p>学习日志 4    </p>
<p>书籍：基于ArcGIS的Python编程秘笈(第2版); </p>
<p>学习==第四章==   </p>
<ul>
<li>打印文档中的所有布局元素</li>
<li>打印布局元素，限制为图例元素</li>
<li>更新布局元素属性</li>
<li>获取可用的打印机列表</li>
<li>使用PrintMap()打印地图</li>
<li>导出地图为PDF文件</li>
<li>导出地图为图像文件</li>
<li>导出图层报表</li>
<li>使用数据驱动页面和arcpy.mapping模块构建地图册</li>
<li>将地图文档发布为ArcGIS Server服务</li>
</ul>
<a id="more"></a>

<h3 id="1-打印文档中的所有布局元素"><a href="#1-打印文档中的所有布局元素" class="headerlink" title="1. 打印文档中的所有布局元素"></a>1. 打印文档中的所有布局元素</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">## 打印文档中的所有布局元素</span></span><br><span class="line"><span class="keyword">import</span> arcpy.mapping <span class="keyword">as</span> mapping</span><br><span class="line">mxd = mapping.MapDocument(<span class="string">'current'</span>)</span><br><span class="line"><span class="comment"># 打印</span></span><br><span class="line"><span class="keyword">for</span> el <span class="keyword">in</span> mapping.ListLayoutElements(mxd):</span><br><span class="line">    <span class="keyword">if</span> el != <span class="string">''</span>:</span><br><span class="line">        print(el.name)</span><br></pre></td></tr></table></figure>

<h3 id="2-打印布局元素，限制为图例元素"><a href="#2-打印布局元素，限制为图例元素" class="headerlink" title="2. 打印布局元素，限制为图例元素"></a>2. 打印布局元素，限制为图例元素</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> arcpy.mapping <span class="keyword">as</span> mapping</span><br><span class="line">mxd = mapping.MapDocument(<span class="string">"current"</span>)</span><br><span class="line"><span class="comment">## 打印布局元素，限制为图例</span></span><br><span class="line"><span class="keyword">for</span> el <span class="keyword">in</span> mapping.ListLayoutElements(mxd, <span class="string">"LEGEND_ELEMENT"</span>, <span class="string">"*Crime*"</span>):</span><br><span class="line">    print(el.name)</span><br></pre></td></tr></table></figure>

<h3 id="3-更新布局元素属性"><a href="#3-更新布局元素属性" class="headerlink" title="3. 更新布局元素属性"></a>3. 更新布局元素属性</h3><blockquote>
<ul>
<li>使用Legend对象的 title 属性程序化地更改Crime图例的标题</li>
<li>并获取部分图例的图层列表</li>
</ul>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> arcpy.mapping <span class="keyword">as</span> mapping</span><br><span class="line">mxd = mapping.MapDocument(<span class="string">'current'</span>)</span><br><span class="line"><span class="comment"># 获取文档中包含Crime的图例元素</span></span><br><span class="line">elLeg = mapping.ListLayoutElements(mxd, <span class="string">"LEGEND_ELEMENT"</span>, <span class="string">"*Crime*"</span>)[<span class="number">0</span>]</span><br><span class="line"><span class="comment"># 更改图例标题名</span></span><br><span class="line">elLeg.title = <span class="string">"Crime by School District"</span></span><br><span class="line"><span class="comment"># 打印图例图层列表名</span></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> elLeg.listLegendItemLayers():</span><br><span class="line">    print(item.name)</span><br></pre></td></tr></table></figure>
<h3 id="4-获取可用的打印机列表"><a href="#4-获取可用的打印机列表" class="headerlink" title="4. 获取可用的打印机列表"></a>4. 获取可用的打印机列表</h3><ul>
<li>arcpy.mapping.ListPrinterNames() 获取打印机列表</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> arcpy.mapping <span class="keyword">as</span> mapping</span><br><span class="line">mxd = mapping.MapDocument(<span class="string">'current'</span>)</span><br><span class="line"><span class="comment"># 打印获取的打印机列表</span></span><br><span class="line"><span class="keyword">for</span> printName <span class="keyword">in</span> mapping.ListPrinterNames():</span><br><span class="line">    print(printName)</span><br></pre></td></tr></table></figure>

<h3 id="5-使用PrintMap-打印地图"><a href="#5-使用PrintMap-打印地图" class="headerlink" title="5. 使用PrintMap()打印地图"></a>5. 使用PrintMap()打印地图</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> arcpy.mapping <span class="keyword">as</span> mapping</span><br><span class="line">mxd = mapping.MapDocument(<span class="string">'current'</span>)</span><br><span class="line"><span class="comment"># 遍历数据框，打印指定数据框的图片(打印机打印)</span></span><br><span class="line"><span class="keyword">for</span> df <span class="keyword">in</span> mapping.ListDataFrames(mxd):</span><br><span class="line">    <span class="keyword">if</span> df.name == <span class="string">"Test_Performance"</span>:</span><br><span class="line">        print(<span class="string">"ok!!"</span>)</span><br><span class="line">        mapping.PrintMap(mxd, <span class="string">""</span>, df)</span><br></pre></td></tr></table></figure>
<h3 id="6-导出地图为PDF文件"><a href="#6-导出地图为PDF文件" class="headerlink" title="6. 导出地图为PDF文件"></a>6. 导出地图为PDF文件</h3><ul>
<li>arcpy.mapping.ExportToPDF()</li>
</ul>
<p>默认导出页面布局；可传入参数导出指定数据框</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> arcpy.mapping <span class="keyword">as</span> mapping</span><br><span class="line">mxd = mapping.MapDocument(<span class="string">'current'</span>)</span><br><span class="line"><span class="comment"># 导出布局视图为PDF</span></span><br><span class="line">mapping.ExportToPDF(mxd, <span class="string">r"H:\upUpStudy\pythonGis\text\CrimeLayout_PDF.pdf"</span>)</span><br></pre></td></tr></table></figure>

<h4 id="6-1-导出地图为PDF文件-导出指定数据框"><a href="#6-1-导出地图为PDF文件-导出指定数据框" class="headerlink" title="6.1 导出地图为PDF文件,导出指定数据框"></a>6.1 导出地图为PDF文件,导出指定数据框</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> arcpy.mapping <span class="keyword">as</span> mapping</span><br><span class="line">mxd = mapping.MapDocument(<span class="string">'current'</span>)</span><br><span class="line"><span class="comment"># 导出指定数据框的PDF</span></span><br><span class="line"><span class="keyword">for</span> df <span class="keyword">in</span> mapping.ListDataFrames(mxd):</span><br><span class="line">    <span class="keyword">if</span> df.name == <span class="string">"Crime"</span>:</span><br><span class="line">        df.referenceScale = df.scale</span><br><span class="line">        mapping.ExportToPDF(mxd, <span class="string">r"H:\upUpStudy\pythonGis\text\CrimeDataFrame.pdf"</span>, df)</span><br></pre></td></tr></table></figure>
<h3 id="7-导出地图为图像文件"><a href="#7-导出地图为图像文件" class="headerlink" title="7. 导出地图为图像文件"></a>7. 导出地图为图像文件</h3><ul>
<li>mapping.ExportToAI(mxd, pathfile, df)</li>
<li>mapping.ExportToBMP(mxd, pathfile, df)</li>
<li>mapping.ExportToEMF(mxd, pathfile, df)</li>
<li>mapping.ExportToEPS(mxd, pathfile, df)</li>
<li>mapping.ExportToGIF(mxd, pathfile, df)</li>
<li>mapping.ExportToJPEG(mxd, pathfile, df)</li>
<li>mapping.ExportToSVG(mxd, pathfile, df)</li>
<li>mapping.ExportToTIFF(mxd, pathfile, df)</li>
<li>…</li>
</ul>
<h3 id="8-导出图层报表"><a href="#8-导出图层报表" class="headerlink" title="8. 导出图层报表"></a>8. 导出图层报表</h3><p>一些新的方法</p>
<ul>
<li>os.getcwd() 获取当前路径</li>
<li>os.remove(pdfPath) 移除pdfpath文件</li>
<li>arcpy.mapping.PDFDocumentCreate(pdfPath) 创建这个PDF文档</li>
<li>lyr.definitionQuery(whereClause) 图层根据属性查询</li>
<li>arcpy.SelectLayerByAttribute_management(lyr, “NEW_SELECTION”, whereClause) 根据属性查询语句选择</li>
<li>导出报表为PDF</li>
<li>arcpy.mapping.ExportReport(report_source=lyr, report_layout_file=path + r”\CrimeReport.rlf”, output_file=path + r”\temp” + str(pageCount) + “.pdf”, starting_page_number=pageCount)</li>
<li>PDFDocment.appendPages(path + r”\temp” + str(pageCount) + “.pdf”) 将报表pdf追加到创建的PDF文档中</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> arcpy</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="comment"># 获取当前路径</span></span><br><span class="line">path = os.getcwd()</span><br><span class="line"><span class="comment"># 创建输出的PDF文件</span></span><br><span class="line">pdfPath = path + <span class="string">r"\CrimeReport.pdf"</span></span><br><span class="line">print(pdfPath)<span class="comment">#######测试</span></span><br><span class="line"><span class="comment"># 如果存在此文件就移除</span></span><br><span class="line"><span class="keyword">if</span> os.path.exists(pdfPath):</span><br><span class="line">    os.remove(pdfPath)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 利用.PDFDocumentCreate()创建此文件</span></span><br><span class="line">pdfDoc = arcpy.mapping.PDFDocumentCreate(pdfPath)</span><br><span class="line"><span class="comment"># 创建学区列表，通过遍历列表为每个地区创建报表</span></span><br><span class="line">districtList = [<span class="string">"Harlandale"</span>, <span class="string">"East Central"</span>, <span class="string">"Edgewood"</span>,</span><br><span class="line">                <span class="string">"Alamo Heights"</span>, <span class="string">"South San Antonio"</span>, <span class="string">"Southside"</span>,</span><br><span class="line">                <span class="string">"Ft Sam Houston"</span>, <span class="string">"North East"</span>, <span class="string">"Northside"</span>, <span class="string">"Lackland"</span>,</span><br><span class="line">                <span class="string">"Southwest"</span>, <span class="string">"Judson"</span>, <span class="string">"San Antonio"</span>]</span><br><span class="line"><span class="comment"># 引用地图文档及其相应数据框与图层</span></span><br><span class="line">mxd = arcpy.mapping.MapDocument(<span class="string">r"H:\ArcpyBook\Ch4\Crime_Ch4.mxd"</span>)</span><br><span class="line">df = arcpy.mapping.ListDataFrames(mxd)[<span class="number">0</span>]</span><br><span class="line">lyr = arcpy.mapping.ListLayers(mxd, <span class="string">"Crime Density by School District"</span>, df)[<span class="number">0</span>]</span><br><span class="line"><span class="comment"># 使用循环遍历学区，并在内部使用whereClause变量定义表达式来显示单个学区</span></span><br><span class="line">pageCount = <span class="number">1</span></span><br><span class="line"><span class="keyword">for</span> district <span class="keyword">in</span> districtList:</span><br><span class="line">    <span class="comment"># 查询表达式</span></span><br><span class="line">    whereClause = <span class="string">"\"NAME\" = '"</span> + district + <span class="string">" ISD'"</span></span><br><span class="line">    lyr.definitionQuery = whereClause</span><br><span class="line">    <span class="comment"># 选择显示的单个学区,将数据框的范围设置为学区范围，并清除选择集</span></span><br><span class="line">    arcpy.SelectLayerByAttribute_management(lyr, <span class="string">"NEW_SELECTION"</span>, whereClause)</span><br><span class="line">    df.extent = lyr.getSelectedExtent()</span><br><span class="line">    arcpy.SelectLayerByAttribute_management(lyr, <span class="string">"CLEAR_SELECTION"</span>)</span><br><span class="line">    <span class="comment"># 导出数据框为BMP文件</span></span><br><span class="line">    arcpy.mapping.ExportToBMP(mxd, path + <span class="string">r"\DistrictPicture.bmp"</span>, df)</span><br><span class="line">    <span class="comment"># 调用ExportReport()函数生成报表</span></span><br><span class="line">    print(<span class="string">"Generate report for: "</span> + district + <span class="string">" ISD"</span>)</span><br><span class="line">    arcpy.mapping.ExportReport(report_source=lyr, report_layout_file=path + <span class="string">r"\CrimeReport.rlf"</span>, output_file=path + <span class="string">r"\temp"</span> + str(pageCount) + <span class="string">".pdf"</span>, starting_page_number=pageCount)</span><br><span class="line">    <span class="comment">#追加报表为PDF文件</span></span><br><span class="line">    print(<span class="string">"Append page: "</span> + str(pageCount))</span><br><span class="line">    pdfDoc.appendPages(path + <span class="string">r"\temp"</span> + str(pageCount) + <span class="string">".pdf"</span>)</span><br><span class="line">    <span class="comment"># 删除临时的pdf报表</span></span><br><span class="line">    os.remove(path + <span class="string">r"\temp"</span> + str(pageCount) + <span class="string">".pdf"</span>)</span><br><span class="line">    pageCount = pageCount + <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 保存pdf文档</span></span><br><span class="line">pdfDoc.saveAndClose()</span><br><span class="line"><span class="keyword">del</span> mxd</span><br></pre></td></tr></table></figure>
<h3 id="9-使用数据驱动页面和arcpy-mapping模块构建地图册"><a href="#9-使用数据驱动页面和arcpy-mapping模块构建地图册" class="headerlink" title="9. 使用数据驱动页面和arcpy.mapping模块构建地图册"></a>9. 使用数据驱动页面和arcpy.mapping模块构建地图册</h3><blockquote>
<p>待解决，未测试成功,可能由于mxd文档丢失数据源的问题</p>
<p>程序思路如下</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> arcpy</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="comment"># 创建一个输出目录变量</span></span><br><span class="line">outDir = <span class="string">r"H:\ArcpyBook\Ch4"</span></span><br><span class="line">finalpdf_filename = outDir + <span class="string">r"\MapBook.pdf"</span></span><br><span class="line"><span class="keyword">if</span> os.path.exists(finalpdf_filename):</span><br><span class="line">    os.remove(finalpdf_filename)</span><br><span class="line">    </span><br><span class="line">finalPdf = arcpy.mapping.PDFDocumentCreate(finalpdf_filename) <span class="comment"># 创建PDF文档</span></span><br><span class="line">print(<span class="string">"Append Title Page \n"</span>)</span><br><span class="line">finalPdf.appendPages(outDir + <span class="string">r"\TitlePage.pdf"</span>)</span><br><span class="line"><span class="comment"># 添加索引图到PDF</span></span><br><span class="line">print(<span class="string">"Append Index Page \n"</span>)</span><br><span class="line">finalPdf.appendPages(outDir + <span class="string">r"\MapIndex.pdf"</span>)</span><br><span class="line"><span class="comment"># 先将数据驱动页面导出到临时的PDF中，然后将其添加到最终的PDF中</span></span><br><span class="line">mxdPath = outDir + <span class="string">r"\Topographic.mxd"</span></span><br><span class="line">mxd = arcpy.mapping.MapDocument(mxdPath)</span><br><span class="line">print(<span class="string">"Create Data Driven Page \n"</span>)</span><br><span class="line">ddp = mxd.dataDrivenPages</span><br><span class="line">temp_filename = outDir + <span class="string">r"\tempDDP.pdf"</span></span><br><span class="line"><span class="keyword">if</span> os.path.exists(temp_filename):</span><br><span class="line">    os.remove(temp_filename)</span><br><span class="line">    </span><br><span class="line">ddp.exportToPDF(temp_filename, <span class="string">"ALL"</span>)</span><br><span class="line">print(<span class="string">"Append the map series \n"</span>)</span><br><span class="line">finalPdf.appendPages(temp_filename)</span><br><span class="line"><span class="comment"># 更新最终的PDF属性</span></span><br><span class="line">finalPdf.updateDocProperties(pdf_open_view=<span class="string">"USE_THUMBS"</span>, pdf_layout=<span class="string">"SINGLE_PAGE"</span>)</span><br><span class="line"><span class="comment"># 保存PDF</span></span><br><span class="line">finalPdf.saveAndClose()</span><br><span class="line"><span class="comment"># 删除临时的数据驱动页面文件</span></span><br><span class="line"><span class="keyword">if</span> os.path.exists(temp_filename):</span><br><span class="line">    os.remove()</span><br></pre></td></tr></table></figure>

<h3 id="10-将地图文档发布为ArcGIS-Server服务"><a href="#10-将地图文档发布为ArcGIS-Server服务" class="headerlink" title="10. 将地图文档发布为ArcGIS Server服务"></a>10. 将地图文档发布为ArcGIS Server服务</h3><p>在Python中将地图文档发布到ArcGIS Server需要三步:</p>
<blockquote>
<ol>
<li>调用arcpy.mapping中的CreateMapSDDraft()函数，将地图文档文件mxd转换为服务定义草稿文件(.sddraft)</li>
<li>调用StageService Tool(.sd，过渡服务工具，编译能成功发布GIS资源的所必要的信息)</li>
<li>使用Upload Service Definition Tool(上传服务定义工具)上传服务定义文件</li>
</ol>
</blockquote>
<blockquote>
<ul>
<li>待解决的问题：未上传</li>
</ul>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> arcpy.mapping <span class="keyword">as</span> mapping</span><br><span class="line">wrkspc = <span class="string">r"H:\ArcpyBook\Ch4"</span></span><br><span class="line">mxd = mapping.MapDocument(wrkspc + <span class="string">r"\Crime.mxd"</span>)</span><br><span class="line"><span class="comment"># 定义服务名称和服务定义草稿文件</span></span><br><span class="line">service = <span class="string">'Crime'</span></span><br><span class="line">sddraft = wrkspc + service + <span class="string">".sddraft"</span></span><br><span class="line"><span class="comment"># 创建服务定义草稿文件</span></span><br><span class="line">mapping.CreateMapSDDraft(mxd, sddraft, service)</span><br><span class="line"><span class="comment"># 分析草稿文件</span></span><br><span class="line">analysis = mapping.AnalyzeForSD(wrkspc + <span class="string">"Crime.sddraft"</span>)</span><br><span class="line"><span class="comment"># 创建循环结构，遍历所有潜在的一般信息类的消息、警告和错误，并输出所有信息</span></span><br><span class="line"><span class="keyword">for</span> key <span class="keyword">in</span> (<span class="string">'messages'</span>, <span class="string">'warnings'</span>, <span class="string">'errors'</span>):</span><br><span class="line">    print(<span class="string">"----"</span> + key.upper() + <span class="string">"----"</span>)</span><br><span class="line">    vars = analysis[key]</span><br><span class="line">    <span class="keyword">for</span> ((message, code), layerlist) <span class="keyword">in</span> vars.iteritems():</span><br><span class="line">        print(<span class="string">"    "</span>, message, <span class="string">"(CODE %i)"</span> % code)</span><br><span class="line">        print(<span class="string">"    applies to:"</span>,)</span><br><span class="line">        <span class="keyword">for</span> layer <span class="keyword">in</span> layerlist:</span><br><span class="line">            print(layer.name)</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>pythonGIS</tag>
      </tags>
  </entry>
  <entry>
    <title>Arcgis中的python编程(6)</title>
    <url>/2019-06-30-arcgis-python-6.html</url>
    <content><![CDATA[<p>学习日志 6    </p>
<p>书籍：基于ArcGIS的Python编程秘笈(第2版); </p>
<p>学习==第六章==</p>
<ul>
<li>创建自定义地理处理工具</li>
<li>创建Python工具箱</li>
</ul>
<p><strong>此章内容我未测试通过，发现就算使用书中所提供的代码也出现问题，有待解决</strong></p>
<a id="more"></a>

<h3 id="1-创建自定义地理处理工具"><a href="#1-创建自定义地理处理工具" class="headerlink" title="1. 创建自定义地理处理工具"></a>1. 创建自定义地理处理工具</h3><p>描述：从文本文件读取数据，包括经度、纬度、属性值，文本文件以逗号分隔,如下</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Latitude,Longitude,Confidence</span><br><span class="line"><span class="number">18.102</span>,<span class="number">-94.353</span>,<span class="number">72</span></span><br><span class="line"><span class="number">19.3</span>,<span class="number">-89.925</span>,<span class="number">82</span></span><br><span class="line"><span class="number">19.31</span>,<span class="number">-89.927</span>,<span class="number">68</span></span><br></pre></td></tr></table></figure>
<p>将其读取出来保存为点要素类</p>
<p>新建工具箱步骤省略</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#Script to Import data to a feature class within a geodatabase</span></span><br><span class="line"><span class="keyword">import</span> arcpy, os</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    outputFC = arcpy.GetParameterAsText(<span class="number">0</span>)</span><br><span class="line">    fClassTemplate = arcpy.GetParameterAsText(<span class="number">1</span>)</span><br><span class="line">    f = open(arcpy.GetParameterAsText(<span class="number">2</span>),<span class="string">'r'</span>)</span><br><span class="line">    arcpy.CreateFeatureclass_management(os.path.dirname(outputFC), os.path.basename(outputFC),<span class="string">"point"</span>,fClassTemplate)   </span><br><span class="line">    lstFires = f.readlines()</span><br><span class="line">    <span class="keyword">with</span> arcpy.da.InsertCursor(outputFC) <span class="keyword">as</span> cur:</span><br><span class="line">        cntr = <span class="number">1</span></span><br><span class="line">        <span class="keyword">for</span> fire <span class="keyword">in</span> lstFires:</span><br><span class="line">            <span class="keyword">if</span> <span class="string">'Latitude'</span> <span class="keyword">in</span> fire:</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            vals = fire.split(<span class="string">","</span>)</span><br><span class="line">            latitude = float(vals[<span class="number">0</span>])</span><br><span class="line">            longitude = float(vals[<span class="number">1</span>])</span><br><span class="line">            confid = int(vals[<span class="number">2</span>])</span><br><span class="line">            pnt = arcpy.Point(longitude, latitude)</span><br><span class="line">            feat = cur.newRow()</span><br><span class="line">            feat.shape = pnt</span><br><span class="line">            feat.setValue(<span class="string">"CONFIDENCEVALUE"</span>, confid)</span><br><span class="line">            cur.insertRow(feat)</span><br><span class="line">            arcpy.AddMessage(<span class="string">"Record number"</span> + str(cntr) + <span class="string">"written to feature class"</span>)</span><br><span class="line">            cntr = cntr + <span class="number">1</span></span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    <span class="keyword">print</span> arcpy.GetMessages()</span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    f.close()</span><br></pre></td></tr></table></figure>

<h3 id="2-创建Python工具箱"><a href="#2-创建Python工具箱" class="headerlink" title="2. 创建Python工具箱"></a>2. 创建Python工具箱</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> arcpy</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Toolbox</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""Define the toolbox (the name of the toolbox is the name of the</span></span><br><span class="line"><span class="string">        .pyt file)."""</span></span><br><span class="line">        self.label = <span class="string">"Toolbox"</span></span><br><span class="line">        self.alias = <span class="string">""</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># List of tool classes associated with this toolbox</span></span><br><span class="line">        self.tools = [USGSDownload]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">USGSDownload</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""Define the tool (tool name is the name of the class)."""</span></span><br><span class="line">        self.label = <span class="string">"USGS Download"</span></span><br><span class="line">        self.description = <span class="string">"Download from USGS ArcGIS Server instance"</span></span><br><span class="line">        self.canRunInBackground = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getParameterInfo</span><span class="params">(self)</span>:</span></span><br><span class="line"></span><br><span class="line">        <span class="string">"""Define parameter definitions"""</span></span><br><span class="line">        <span class="comment"># First parameter</span></span><br><span class="line">        param0 = arcpy.Parameter(</span><br><span class="line">            displayName=<span class="string">"ArcGIS Server Wildfire URL"</span>,</span><br><span class="line">            name=<span class="string">"url"</span>,</span><br><span class="line">            datatype=<span class="string">"GPString"</span>,</span><br><span class="line">            parameterType=<span class="string">"Required"</span>,</span><br><span class="line">            direction=<span class="string">"Input"</span>)</span><br><span class="line">        param0.value = <span class="string">"http://wildfire.cr.usgs.gov/arcgis/rest/services/geomac_dyn/MapServer/0/query"</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># Second parameter</span></span><br><span class="line">        param1 = arcpy.Parameter(</span><br><span class="line">            displayName=<span class="string">"Output Feature Class"</span>,</span><br><span class="line">            name=<span class="string">"out_fc"</span>,</span><br><span class="line">            datatype=<span class="string">"DEFeatureClass"</span>,</span><br><span class="line">            parameterType=<span class="string">"Required"</span>,</span><br><span class="line">            direction=<span class="string">"Input"</span>)</span><br><span class="line"></span><br><span class="line">        params = [param0, param1]</span><br><span class="line">        <span class="keyword">return</span> params</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">isLicensed</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""Set whether tool is licensed to execute."""</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">updateParameters</span><span class="params">(self, parameters)</span>:</span></span><br><span class="line">        <span class="string">"""Modify the values and properties of parameters before internal</span></span><br><span class="line"><span class="string">        validation is performed.  This method is called whenever a parameter</span></span><br><span class="line"><span class="string">        has been changed."""</span></span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">updateMessages</span><span class="params">(self, parameters)</span>:</span></span><br><span class="line">        <span class="string">"""Modify the messages created by internal validation for each tool</span></span><br><span class="line"><span class="string">        parameter.  This method is called after internal validation."""</span></span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">execute</span><span class="params">(self, parameters, messages)</span>:</span></span><br><span class="line">        inFeatures = parameters[<span class="number">0</span>].valueAsText</span><br><span class="line">        outFeatureClass = parameters[<span class="number">1</span>].valueAsText</span><br><span class="line"></span><br><span class="line">        agisurl = inFeatures</span><br><span class="line"></span><br><span class="line">        payload = &#123; <span class="string">'where'</span>: <span class="string">'acres &gt; 5'</span>,<span class="string">'f'</span>: <span class="string">'pjson'</span>, <span class="string">'outFields'</span>: <span class="string">'latitude,longitude,fire_name,acres'</span>&#125;</span><br><span class="line"></span><br><span class="line">        r = requests.get(inFeatures, params=payload)</span><br><span class="line">        decoded = json.loads(r.text)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">with</span> arcpy.da.InsertCursor(outFeatureClass, (<span class="string">"SHAPE@XY"</span>, <span class="string">"NAME"</span>, <span class="string">"ACRES"</span>)) <span class="keyword">as</span> cur:</span><br><span class="line">            cntr = <span class="number">1</span></span><br><span class="line">            <span class="keyword">for</span> rslt <span class="keyword">in</span> decoded[<span class="string">'features'</span>]:</span><br><span class="line">                fireName = rslt[<span class="string">'attributes'</span>][<span class="string">'fire_name'</span>]</span><br><span class="line">                latitude = rslt[<span class="string">'attributes'</span>][<span class="string">'latitude'</span>]</span><br><span class="line">                longitude = rslt[<span class="string">'attributes'</span>][<span class="string">'longitude'</span>]</span><br><span class="line">                acres = rslt[<span class="string">'attributes'</span>][<span class="string">'acres'</span>]</span><br><span class="line">                cur.insertRow([(longitude,latitude),fireName, acres])</span><br><span class="line">                arcpy.AddMessage(<span class="string">"Record number: "</span> + str(cntr) + <span class="string">" written to feature class"</span>)</span><br><span class="line">                cntr = cntr + <span class="number">1</span></span><br></pre></td></tr></table></figure>

]]></content>
      <tags>
        <tag>pythonGIS</tag>
      </tags>
  </entry>
  <entry>
    <title>初恋-玉置浩二</title>
    <url>/2019-06-22-chu-lian-yu-zhi-hao-er.html</url>
    <content><![CDATA[<ul>
<li>歌名: 初恋</li>
<li>唱: 玉置浩二</li>
<li><a href="https://www.xiami.com/song/1773641047" target="_blank" rel="noopener external nofollow noreferrer">词源</a></li>
</ul>
<a id="more"></a>


<ul>
<li>五月雨は緑色 <blockquote>
<p>Sa mi da re wa mi do ri i ro</p>
<p>梅雨染上了绿色</p>
</blockquote>
</li>
<li>悲しくされたよ<blockquote>
<p>Ka na shi ku sa re ta yo</p>
<p>更平添了一份感伤</p>
</blockquote>
</li>
<li>一人の午後は <blockquote>
<p>hi to ri no go go wa</p>
<p>一个人的午后</p>
</blockquote>
</li>
<li>恋をして寂しくて <blockquote>
<p>Ko i wo shi te sa bi shi ku te</p>
<p>恋爱着 而寂寞着</p>
</blockquote>
</li>
<li>届かぬ想いを暖めていた <blockquote>
<p>To do ka nu o mo i wo a ta ta me te i ta</p>
<p>无法传达的思念被阳光暖化</p>
</blockquote>
</li>
<li>好きだよと言えずに　初恋は <blockquote>
<p>su ki da yo to i e zu ni ha tsu ko i wa</p>
<p>爱在心头口难开的初恋啊</p>
</blockquote>
</li>
<li>ふりこ細工の心 <blockquote>
<p>fu ri ko sai ku no ko ko ro</p>
<p>那是纤细而摇摆不定的心</p>
</blockquote>
</li>
<li>放課後の校庭を　走る君がいた <blockquote>
<p>hou ka go no kou tei wo ha shi ru ki mi ga i ta</p>
<p>放学后的操场上 是奔跑着的你</p>
</blockquote>
</li>
<li>遠くで僕はいつでも君を探してた <blockquote>
<p>too ku de boku wa itsu demo kimi wo saga shi teta</p>
<p>我总是远远地 寻觅着你的身影</p>
</blockquote>
</li>
<li>浅い夢だから　胸をはなれない <blockquote>
<p>a sai yume da kara mune wo hana re nai</p>
<p>只缘梦太浅 故而情难禁</p>
</blockquote>
</li>
<li>夕映えはあんず色 <blockquote>
<p>yuu bae wa an zu iro</p>
<p>夕阳映照下杏色的天空</p>
</blockquote>
</li>
<li>帰り道一人 口笛吹いて <blockquote>
<p>kae ri michi hi tori kuchi bue fu ite</p>
<p>回家的路上 是独自吹着口哨的你</p>
</blockquote>
</li>
<li>名前さえ呼べなくて <blockquote>
<p>na mae sae yobe naku te</p>
<p>连你的名字都叫不出口</p>
</blockquote>
</li>
<li>とらわれた心見つめていたよ <blockquote>
<p>tora ware ta kokoro mitsu mete ita yo </p>
<p>我远远地凝视着 那被你夺去的心</p>
</blockquote>
</li>
<li>好きだよと言えずに　初恋は <blockquote>
<p>su ki da yo to i e zu ni ha tsu ko i wa</p>
<p>爱在心头口难开的初恋啊</p>
</blockquote>
</li>
<li>ふりこ細工の心 <blockquote>
<p>fu ri ko sai ku no ko ko ro</p>
<p>那是纤细而摇摆不定的心</p>
</blockquote>
</li>
<li>風に舞った花びらが　水面を乱すように <blockquote>
<p>kaze ni matta hana bira ga mina mo wo mida su you ni</p>
<p>如随风舞落的花瓣 扰乱了水面般</p>
</blockquote>
</li>
<li>愛という字書いてみては <blockquote>
<p>ai to iu ji ka ite mite wa</p>
<p>就连试着在纸上写爱这个字</p>
</blockquote>
</li>
<li>ふるえてたあの頃 <blockquote>
<p>furu ete ta ano goro</p>
<p>都会不由颤抖的那个年纪</p>
</blockquote>
</li>
<li>浅い夢だから　胸をはなれない <blockquote>
<p>a sai yume da kara mune wo hana re nai</p>
<p>只缘梦太浅 故而情难禁</p>
</blockquote>
</li>
<li>放課後の校庭を　走る君がいた <blockquote>
<p>hou ka go no kou tei wo ha shi ru ki mi ga i ta</p>
<p>放学后的操场上 是奔跑着的你</p>
</blockquote>
</li>
<li>遠くで僕はいつでも君を探してた <blockquote>
<p>too ku de boku wa itsu demo kimi wo saga shi teta</p>
<p>我总是远远地 寻觅着你的身影</p>
</blockquote>
</li>
<li>浅い夢だから　胸をはなれない <blockquote>
<p>a sai yume da kara mune wo hana re nai</p>
<p>只缘梦太浅 故而情难禁</p>
</blockquote>
</li>
</ul>
]]></content>
      <tags>
        <tag>歌</tag>
      </tags>
  </entry>
  <entry>
    <title>Arcgis中的python编程(7)</title>
    <url>/2019-07-16-arcgis-python-7.html</url>
    <content><![CDATA[<p>学习日志7     查询和选择数据</p>
<p>书籍：基于ArcGIS的Python编程秘笈(第2版); </p>
<p>学习<b>第七章</b></p>
<ul>
<li>查询前，创建要素类或表视图的内存副本</li>
<li>测试 按属性查询</li>
<li>按位置选择图层</li>
<li>结合 按属性选择与按位置选择</li>
</ul>
<a id="more"></a>

<h3 id="1-查询前，创建要素类或表视图的内存副本"><a href="#1-查询前，创建要素类或表视图的内存副本" class="headerlink" title="1. 查询前，创建要素类或表视图的内存副本"></a>1. 查询前，创建要素类或表视图的内存副本</h3><ul>
<li>arcpy.MakeFeatureLayer()</li>
<li>arcpy.MakeTableView()</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> arcpy</span><br><span class="line"><span class="comment"># 设置工作空间</span></span><br><span class="line">arcpy.env.workspace = <span class="string">"H:/ArcpyBook/data/CityOfSanAntonio.gdb"</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="comment"># 调用创建要素图层工具</span></span><br><span class="line">    <span class="comment">#flayer = arcpy.MakeFeatureLayer_management("Burglary", "Burglary_layer")</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 创建表视图</span></span><br><span class="line">    fview = arcpy.MakeTableView_management(<span class="string">"Crime2009Table"</span>, <span class="string">"Crime2009_Table"</span>)</span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    print(e.message)</span><br></pre></td></tr></table></figure>
<h3 id="2-测试-按属性查询"><a href="#2-测试-按属性查询" class="headerlink" title="2.测试 按属性查询"></a>2.测试 按属性查询</h3><ul>
<li>arcpy.SelectLayerByAttribute_management()</li>
<li>arcpy.GetCount_management()  获取计数</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">测试 按属性查询</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="keyword">import</span> arcpy</span><br><span class="line">arcpy.env.workspace = <span class="string">"H:/ArcpyBook/data/CityOfSanAntonio.gdb"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="comment"># 查询语句</span></span><br><span class="line">    qry = <span class="string">'"SVCAREA" = \'North\''</span></span><br><span class="line">    <span class="comment"># 创建要素类的内存副本</span></span><br><span class="line">    flayer = arcpy.MakeFeatureLayer_management(<span class="string">"Burglary"</span>, <span class="string">"Burglary_layer"</span>)</span><br><span class="line">    <span class="comment"># 按属性查询</span></span><br><span class="line">    arcpy.SelectLayerByAttribute_management(flayer,<span class="string">"NEW_SELECTION"</span>, qry)</span><br><span class="line">    <span class="comment"># 获取结果数量</span></span><br><span class="line">    cnt = arcpy.GetCount_management(flayer)</span><br><span class="line">    print(<span class="string">"查询了"</span> + str(cnt) + <span class="string">"条记录"</span>)</span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    print(e.message)</span><br></pre></td></tr></table></figure>
<h3 id="3-按位置选择图层"><a href="#3-按位置选择图层" class="headerlink" title="3.按位置选择图层"></a>3.按位置选择图层</h3><ul>
<li>arcpy.SeletLayerByLocation()</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">按位置选择图层</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="keyword">import</span> arcpy</span><br><span class="line">arcpy.env.workspace = <span class="string">"H:\\ArcpyBook\\data\\CityOfSanAntonio.gdb"</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="comment"># 创建Burglary的内存副本</span></span><br><span class="line">    flayer = arcpy.MakeFeatureLayer_management(<span class="string">"Burglary"</span>, <span class="string">"Burglary_layer"</span>)</span><br><span class="line">    <span class="comment"># 选择完全位于输入图层的Burglary元素</span></span><br><span class="line">    <span class="comment"># arcpy.SelectLayerByLocation_management(flayer,"COMPLETELY_WITHIN",</span></span><br><span class="line">    <span class="comment">#     "H:\\ArcpyBook\\Ch7\\EdgewoodSD.shp")</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 按距离选择</span></span><br><span class="line">    arcpy.SelectLayerByLocation_management(flayer, <span class="string">"WITHIN_A_DISTANCE"</span>,</span><br><span class="line">        <span class="string">"H:\\ArcpyBook\\Ch7\\EdgewoodSD.shp"</span>, <span class="string">"1 MILES"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 打印出选择的数量</span></span><br><span class="line">    cnt = arcpy.GetCount_management(flayer) <span class="comment"># 获取计数</span></span><br><span class="line">    print(<span class="string">"选择了"</span> + str(cnt) + <span class="string">"个元素"</span>)</span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    print(e.message)</span><br></pre></td></tr></table></figure>
<h3 id="4-结合-按属性选择与按位置选择"><a href="#4-结合-按属性选择与按位置选择" class="headerlink" title="4. 结合 按属性选择与按位置选择"></a>4. 结合 按属性选择与按位置选择</h3><p>结合 按属性选择与按位置选择</p>
<p><b>选出在Edgewood范围内的星期一的犯罪记录</b></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> arcpy</span><br><span class="line"><span class="comment"># 设置工作空间</span></span><br><span class="line">arcpy.env.workspace = <span class="string">"H:\\ArcpyBook\\data\\CityOfSanAntonio.gdb"</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="comment"># 创建犯罪记录图层副本</span></span><br><span class="line">    flayer = arcpy.MakeFeatureLayer_management(<span class="string">"Burglary"</span>,<span class="string">"Burglary_layer"</span>)</span><br><span class="line">    <span class="comment"># 按位置选择</span></span><br><span class="line">    arcpy.SelectLayerByLocation_management(flayer, <span class="string">"COMPLETELY_WITHIN"</span>, </span><br><span class="line">        <span class="string">r"H:\ArcpyBook\Ch7\EdgewoodSD.shp"</span>)</span><br><span class="line">    <span class="comment"># 按属性选择</span></span><br><span class="line">    qry = <span class="string">'"DOW" = \'Mon\''</span></span><br><span class="line">    arcpy.SelectLayerByAttribute_management(flayer, <span class="string">"SUBSET_SELECTION"</span>, qry)</span><br><span class="line">    <span class="comment"># 打印出选择出的数量</span></span><br><span class="line">    cnt = arcpy.GetCount_management(flayer)</span><br><span class="line">    print(<span class="string">"选择出了"</span> + str(cnt) + <span class="string">"条记录"</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    print(e.message)</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>pythonGIS</tag>
      </tags>
  </entry>
  <entry>
    <title>Arcgis中的python编程(5)</title>
    <url>/2019-06-23-arcgis-python-5.html</url>
    <content><![CDATA[<p>学习日志 5    </p>
<p>书籍：基于ArcGIS的Python编程秘笈(第2版); </p>
<p>学习==第五章==   </p>
<ul>
<li>使用脚本执行地理处理工具-Clip_analysis为例</li>
<li>将一个工具的输出作为一个工具的输入</li>
</ul>
<a id="more"></a>

<h3 id="1-使用脚本执行地理处理工具-Clip-analysis为例"><a href="#1-使用脚本执行地理处理工具-Clip-analysis为例" class="headerlink" title="1. 使用脚本执行地理处理工具-Clip_analysis为例"></a>1. 使用脚本执行地理处理工具-Clip_analysis为例</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 使用工具箱工具</span></span><br><span class="line"><span class="keyword">import</span> arcpy</span><br><span class="line"><span class="comment"># 裁剪学区</span></span><br><span class="line"><span class="comment"># 输入要素</span></span><br><span class="line">in_features = <span class="string">r"H:\ArcpyBook\data\CityOfSanAntonio.gdb\Burglary"</span></span><br><span class="line"><span class="comment"># 裁剪要素</span></span><br><span class="line">clip_features = <span class="string">r"H:\ArcpyBook\Ch5\EdgewoodSD.shp"</span></span><br><span class="line"><span class="comment"># 输出要素</span></span><br><span class="line">out_featuresClass = <span class="string">r"H:\ArcpyBook\Ch5\ClpBurglary"</span></span><br><span class="line">arcpy.Clip_analysis(in_features, clip_features, out_featuresClass)</span><br></pre></td></tr></table></figure>
<h3 id="2-将一个工具的输出作为一个工具的输入"><a href="#2-将一个工具的输出作为一个工具的输入" class="headerlink" title="2. 将一个工具的输出作为一个工具的输入"></a>2. 将一个工具的输出作为一个工具的输入</h3><p>思路: 通过buffer工具输出距溪流半英里的缓冲区</p>
<p>再使用SelectLayerByLocation_management()工具选出在缓冲区中的学校点</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> arcpy</span><br><span class="line"><span class="comment"># 设置工作空间</span></span><br><span class="line">arcpy.env.workspace = <span class="string">r"H:\ArcpyBook\data\TravisCounty"</span></span><br><span class="line"><span class="comment"># 使用try语句添加溪流、溪流缓冲区、距离、学校等变量</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    streams = <span class="string">"Streams.shp"</span> <span class="comment"># 溪流</span></span><br><span class="line">    streamsBuffer = <span class="string">"StreamsBuffer.shp"</span> <span class="comment"># 溪流缓冲区变量</span></span><br><span class="line">    distance = <span class="string">"2640 feet"</span> <span class="comment"># 距离</span></span><br><span class="line">    schools = <span class="string">"Schools.shp"</span> <span class="comment"># 学校</span></span><br><span class="line">    schoolsLyrFile = <span class="string">"SchoolsLyr"</span> <span class="comment"># 用来存放临时学校图层</span></span><br><span class="line">    arcpy.Buffer_analysis(streams, streamsBuffer, distance, <span class="string">"FULL"</span>, <span class="string">"ROUND"</span>, <span class="string">"ALL"</span>)</span><br><span class="line">    <span class="comment"># 创建一个临时图层</span></span><br><span class="line">    arcpy.MakeFeatureLayer_management(schools, schoolsLyrFile)</span><br><span class="line">    <span class="comment"># 按位置选择图层</span></span><br><span class="line">    arcpy.SelectLayerByLocation_management(schoolsLyrFile, <span class="string">"INTERSECT"</span>, streamsBuffer)</span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    print(e.message)</span><br></pre></td></tr></table></figure>

]]></content>
      <tags>
        <tag>pythonGIS</tag>
      </tags>
  </entry>
  <entry>
    <title>Arcgis中的python编程(8)</title>
    <url>/2019-07-18-arcgis-python-8.html</url>
    <content><![CDATA[<p>学习日志8     查询和选择数据</p>
<p>书籍：基于ArcGIS的Python编程秘笈(第2版); </p>
<p>学习<b>第八章</b></p>
<ul>
<li>使用SearchCursor检索要素类中的要素</li>
<li>使用几何令牌参数的SearchCursor()</li>
<li>使用InsertCursor(),从文本文件读取数据给要素添加记录</li>
<li>UpdateCursor()创建对象,updateRow()方法更新表中每一行</li>
<li>UpdateCursor()对象的deleteRow(),删除特定记录</li>
<li>在编辑会话中插入和更新行</li>
<li>读取要素类中的几何信息</li>
<li>使用Walk()遍历目录</li>
</ul>
<a id="more"></a>

<h3 id="1-使用SearchCursor检索要素类中的要素"><a href="#1-使用SearchCursor检索要素类中的要素" class="headerlink" title="1. 使用SearchCursor检索要素类中的要素"></a>1. 使用SearchCursor检索要素类中的要素</h3><ul>
<li>arcpy.da.SearchCursor(“Schools.shp”, (“FACILITY”, “NAME”), ‘“FACILITY” = &#39;HIGH SCHOOL&#39;‘)</li>
</ul>
<p>参数1: 要素,表 </p>
<p>参数2: 返回哪些值字段</p>
<p>参数3: where子句,即限制条件</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line">arcpy.da.SearchCursor()</span><br><span class="line">查询要素类中的要素</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">import arcpy.da</span></span><br><span class="line"><span class="string">arcpy.env.workspace = r"H:\ArcpyBook\Ch8"</span></span><br><span class="line"><span class="string"># 创建SearchCursor()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># with arcpy.da.SearchCursor("Schools.shp", ("FACILITY", "NAME")) as cursor:</span></span><br><span class="line"><span class="string">#     for row in sorted(cursor):</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#         print("School facility and name:" + row[0] + " " + row[1])</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 创建SearchCursor() 并添加where子句</span></span><br><span class="line"><span class="string">with arcpy.da.SearchCursor("Schools.shp", ("FACILITY", "NAME"), </span></span><br><span class="line"><span class="string">        '"FACILITY" = \'HIGH SCHOOL\'') as cursor:</span></span><br><span class="line"><span class="string">     for row in sorted(cursor):</span></span><br><span class="line"><span class="string">         print("name:&#123;0&#125;, facility:&#123;1&#125;".format(row[1], row[0]))</span></span><br></pre></td></tr></table></figure>
<h3 id="2-使用几何令牌参数的SearchCursor"><a href="#2-使用几何令牌参数的SearchCursor" class="headerlink" title="2. 使用几何令牌参数的SearchCursor()"></a>2. 使用几何令牌参数的SearchCursor()</h3><ul>
<li>arcpy.da.SearchCursor(“coa_parcels.shp”, (“PY_FULL_OW”, “SHAPE@XY”))</li>
</ul>
<p>SHAPE@XY 返回 一组要素的质心 x,y 坐标。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">使用几何令牌</span></span><br><span class="line"><span class="string">SearchCursor()</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="keyword">import</span> arcpy.da</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">arcpy.env.workspace = <span class="string">r"H:\ArcpyBook\Ch8"</span></span><br><span class="line">start = time.clock() <span class="comment">#　记录时间</span></span><br><span class="line"><span class="comment"># 使用几何令牌进行游标搜索操作</span></span><br><span class="line"><span class="comment"># SHAPE@XY 返回 一组要素的质心 x,y 坐标。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> arcpy.da.SearchCursor(<span class="string">"coa_parcels.shp"</span>, (<span class="string">"PY_FULL_OW"</span>, <span class="string">"SHAPE@XY"</span>)) <span class="keyword">as</span> cursor:</span><br><span class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> cursor:</span><br><span class="line">        print(<span class="string">"PY_FULL_OW: &#123;0&#125;, Location: &#123;1&#125;"</span>.format(row[<span class="number">0</span>], row[<span class="number">1</span>]))</span><br><span class="line"></span><br><span class="line">elasped = time.clock() - start</span><br><span class="line">print(<span class="string">"\n用时: "</span> + str(elasped))</span><br></pre></td></tr></table></figure>
<h3 id="3-使用InsertCursor-从文本文件读取数据给要素添加记录"><a href="#3-使用InsertCursor-从文本文件读取数据给要素添加记录" class="headerlink" title="3.使用InsertCursor(),从文本文件读取数据给要素添加记录"></a>3.使用InsertCursor(),从文本文件读取数据给要素添加记录</h3><ul>
<li>arcpy.da.InsertCursor(“FireIncidents”, (“SHAPE@XY”, “CONFIDENCEVALUE”))</li>
<li>参数1：要素,表</li>
<li>参数2：Field字段, SHAPE@XY几何x,y坐标，”CONFIDENCEVALUE”字段名</li>
<li>cursor.insertRow([(latitude, longitude), confid]) 给InsertCursor对象插入行 </li>
<li>[(latitude, longitude), confid]对应(“SHAPE@XY”, “CONFIDENCEVALUE”)</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">使用InsertCursor()</span></span><br><span class="line"><span class="string">从文本文件读取数据给要素添加记录</span></span><br><span class="line"><span class="string">文本文件为北美某地区荒地大火事件</span></span><br><span class="line"><span class="string">每行为纬度,经度,置信度</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="keyword">import</span> arcpy</span><br><span class="line"><span class="keyword">import</span> arcpy.da</span><br><span class="line">arcpy.env.workspace = <span class="string">r"H:\ArcpyBook\Ch8\WildfireData\WildlandFires.mdb"</span></span><br><span class="line"><span class="comment"># 读取txt文件</span></span><br><span class="line">f = open(<span class="string">r"H:\ArcpyBook\Ch8\WildfireData\NorthAmericaWildfires_2007275.txt"</span>, <span class="string">"r"</span>)</span><br><span class="line">lstfires = f.readlines()</span><br><span class="line"><span class="comment"># 创建InsertCursor()变量</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">with</span> arcpy.da.InsertCursor(<span class="string">"FireIncidents"</span>, (<span class="string">"SHAPE@XY"</span>, <span class="string">"CONFIDENCEVALUE"</span>)) <span class="keyword">as</span> cursor:</span><br><span class="line">        cnt = <span class="number">1</span> <span class="comment"># 计数</span></span><br><span class="line">        <span class="keyword">for</span> lstRow <span class="keyword">in</span> lstfires: <span class="comment"># 遍历文件每一行</span></span><br><span class="line">            <span class="keyword">if</span> <span class="string">'Latitude'</span> <span class="keyword">in</span> lstRow:</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            vals = lstRow.split(<span class="string">','</span>) <span class="comment"># 以 , 分割</span></span><br><span class="line">            latitude = float(vals[<span class="number">0</span>]) <span class="comment"># 纬度</span></span><br><span class="line">            longitude = float(vals[<span class="number">1</span>]) <span class="comment"># 经度</span></span><br><span class="line">            confid = int(vals[<span class="number">2</span>]) <span class="comment"># 置信度</span></span><br><span class="line">            <span class="comment"># 将要素每一行的插入数据保存</span></span><br><span class="line">            rowFire = [(latitude, longitude), confid]</span><br><span class="line">            <span class="comment"># 插入要素</span></span><br><span class="line">            cursor.insertRow(rowFire)</span><br><span class="line">            print(<span class="string">"插入&#123;0&#125; 条记录"</span>.format(str(cnt)))</span><br><span class="line">            cnt = cnt + <span class="number">1</span></span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    print(e.message)</span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    f.close() <span class="comment"># 关闭文件</span></span><br></pre></td></tr></table></figure>
<h3 id="4-UpdateCursor-创建对象-updateRow-方法更新表中每一行"><a href="#4-UpdateCursor-创建对象-updateRow-方法更新表中每一行" class="headerlink" title="4.UpdateCursor()创建对象,updateRow()方法更新表中每一行"></a>4.UpdateCursor()创建对象,updateRow()方法更新表中每一行</h3><ul>
<li>arcpy.da.UpdateCursor(“FireIncidents”, (“CONFIDENCEVALUE”, “CONFID_RATING”))</li>
<li>参数1：要素,表</li>
<li>参数2：Field</li>
<li>AddField_management()  给表中添加字段:</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">使用UpdateCursor()创建对象</span></span><br><span class="line"><span class="string">updateRow()方法更新表中每一行</span></span><br><span class="line"><span class="string">给表中添加字段: AddField_management()</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="keyword">import</span> arcpy</span><br><span class="line">arcpy.env.workspace = <span class="string">r"H:\ArcpyBook\Ch8\WildfireData\WildlandFires.mdb"</span></span><br><span class="line"><span class="comment"># 添加字段</span></span><br><span class="line">arcpy.AddField_management(<span class="string">"FireIncidents"</span>, <span class="string">"CONFID_RATING"</span>, <span class="string">"TEXT"</span>, <span class="string">"10"</span>)</span><br><span class="line">print(<span class="string">"添加字段CONFID_RATING成功"</span>)</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="comment"># 创建UpdateCurSor()对象</span></span><br><span class="line">    <span class="keyword">with</span> arcpy.da.UpdateCursor(<span class="string">"FireIncidents"</span>, </span><br><span class="line">            (<span class="string">"CONFIDENCEVALUE"</span>, <span class="string">"CONFID_RATING"</span>)) <span class="keyword">as</span> cursor:</span><br><span class="line">        cnt = <span class="number">1</span> <span class="comment"># 计数</span></span><br><span class="line">        <span class="keyword">for</span> row <span class="keyword">in</span> cursor: <span class="comment"># 遍历每一行</span></span><br><span class="line">            <span class="comment"># 给新建字段CONFID_RATING赋值</span></span><br><span class="line">            <span class="keyword">if</span> row[<span class="number">0</span>] &lt;= <span class="number">40</span>:</span><br><span class="line">                row[<span class="number">1</span>] = <span class="string">'Poor'</span></span><br><span class="line">            <span class="keyword">elif</span> row[<span class="number">0</span>] &gt; <span class="number">40</span> <span class="keyword">and</span> row[<span class="number">0</span>] &lt;= <span class="number">60</span>:</span><br><span class="line">                row[<span class="number">1</span>] = <span class="string">'Fair'</span></span><br><span class="line">            <span class="keyword">elif</span> row[<span class="number">0</span>] &gt; <span class="number">60</span> <span class="keyword">and</span> row[<span class="number">0</span>] &lt;= <span class="number">85</span>:</span><br><span class="line">                row[<span class="number">1</span>] = <span class="string">'Good'</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                row[<span class="number">1</span>] = <span class="string">'Excellent'</span></span><br><span class="line">            <span class="comment"># 调用updateRow()方法更新每一行</span></span><br><span class="line">            cursor.updateRow(row)</span><br><span class="line">            print(<span class="string">"更新了&#123;0&#125;条记录"</span>.format(str(cnt)))</span><br><span class="line">            cnt = cnt + <span class="number">1</span></span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    print(e.message)</span><br></pre></td></tr></table></figure>
<h3 id="5-UpdateCursor-对象的deleteRow-删除特定记录"><a href="#5-UpdateCursor-对象的deleteRow-删除特定记录" class="headerlink" title="5. UpdateCursor()对象的deleteRow(),删除特定记录"></a>5. UpdateCursor()对象的deleteRow(),删除特定记录</h3><ul>
<li>rcpy.da.UpdateCursor(“FireIncidents”, (“CONFID_RATING”), “[CONFID_RATING] = &#39;Poor&#39;“)</li>
<li>注意：个人地理数据库构建查询语句字段名使用[]括起来而不是””<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">UpdateCursor()对象的deleteRow()</span></span><br><span class="line"><span class="string">删除特定记录</span></span><br><span class="line"><span class="string">注意：个人地理数据库构建查询语句字段名使用[]括起来而不是""</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="keyword">import</span> arcpy</span><br><span class="line"></span><br><span class="line">arcpy.env.workspace = <span class="string">r"H:\ArcpyBook\Ch8\WildfireData\WildlandFires.mdb"</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    cnt = <span class="number">1</span> <span class="comment"># 计数</span></span><br><span class="line">    <span class="comment"># 构建UpdateCursor()对象</span></span><br><span class="line">    <span class="keyword">with</span> arcpy.da.UpdateCursor(<span class="string">"FireIncidents"</span>, (<span class="string">"CONFID_RATING"</span>), </span><br><span class="line">            <span class="string">"[CONFID_RATING] = \'Poor\'"</span>) <span class="keyword">as</span> cursor:</span><br><span class="line">        <span class="comment"># 遍历返回的对象</span></span><br><span class="line">        <span class="keyword">for</span> row <span class="keyword">in</span> cursor:</span><br><span class="line">            cursor.deleteRow() <span class="comment"># 删除当前行</span></span><br><span class="line">            print(<span class="string">"删除&#123;0&#125;条记录"</span>.format(str(cnt)))</span><br><span class="line">            cnt = cnt + <span class="number">1</span></span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    print(e.message)</span><br></pre></td></tr></table></figure>
<h3 id="6-在编辑会话中插入和更新行"><a href="#6-在编辑会话中插入和更新行" class="headerlink" title="6.在编辑会话中插入和更新行"></a>6.在编辑会话中插入和更新行</h3></li>
<li>在编辑会话外的插入更新操作是不可更改的</li>
<li>在编辑会话中的操作是可以撤销的</li>
<li>edit = arcpy.da.Editor(r”H:\ArcpyBook\Ch8\WildfireData\WildlandFires.mdb”)</li>
<li>edit.startEditing(True)</li>
<li>edit.stopEditing(True) 停止编辑,True表示保存操作</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">在编辑会话中使用插入和更新操作</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="keyword">import</span> arcpy</span><br><span class="line"></span><br><span class="line">arcpy.env.workspace = <span class="string">r"H:\ArcpyBook\Ch8\WildfireData\WildlandFires.mdb"</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    cnt = <span class="number">1</span> <span class="comment"># 计数</span></span><br><span class="line">    <span class="comment"># 构建编辑会话对象</span></span><br><span class="line">    edit = arcpy.da.Editor(<span class="string">r"H:\ArcpyBook\Ch8\WildfireData\WildlandFires.mdb"</span>)</span><br><span class="line">    edit.startEditing(<span class="literal">True</span>) <span class="comment"># 开始编辑</span></span><br><span class="line">    <span class="keyword">with</span> arcpy.da.UpdateCursor(<span class="string">"FireIncidents"</span>, </span><br><span class="line">            (<span class="string">"CONFIDENCEVALUE"</span>, <span class="string">"CONFID_RATING"</span>)) <span class="keyword">as</span> cursor:</span><br><span class="line">        <span class="keyword">for</span> row <span class="keyword">in</span> cursor: <span class="comment"># 遍历</span></span><br><span class="line">            <span class="keyword">if</span> row[<span class="number">0</span>] &gt; <span class="number">40</span> <span class="keyword">and</span> row[<span class="number">0</span>] &lt;= <span class="number">60</span>:</span><br><span class="line">                row[<span class="number">1</span>] = <span class="string">"GOOD"</span></span><br><span class="line">            <span class="keyword">elif</span> row[<span class="number">0</span>] &gt; <span class="number">60</span> <span class="keyword">and</span> row[<span class="number">0</span>] &lt;= <span class="number">80</span>:</span><br><span class="line">                row[<span class="number">1</span>] = <span class="string">"BETTER"</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                row[<span class="number">1</span>] = <span class="string">"BEST"</span></span><br><span class="line">            cursor.updateRow(row) <span class="comment"># 更新操作</span></span><br><span class="line">            print(<span class="string">"更新了&#123;0&#125;条记录"</span>.format(str(cnt)))</span><br><span class="line">            cnt = cnt + <span class="number">1</span></span><br><span class="line">    edit.stopEditing(<span class="literal">True</span>) <span class="comment"># 停止编辑,True表示保存操作</span></span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    print(e.message)</span><br></pre></td></tr></table></figure>
<h3 id="7-读取要素类中的几何信息"><a href="#7-读取要素类中的几何信息" class="headerlink" title="7.读取要素类中的几何信息"></a>7.读取要素类中的几何信息</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">读取要素类的几何信息</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="keyword">import</span> arcpy</span><br><span class="line"><span class="comment"># 输入面要素</span></span><br><span class="line">infc = <span class="string">r"H:\ArcpyBook\data\CityOfSanAntonio.gdb\SchoolDistricts"</span></span><br><span class="line"><span class="comment"># 遍历要素的SearchCursor对象</span></span><br><span class="line"><span class="keyword">for</span> row <span class="keyword">in</span> arcpy.da.SearchCursor(infc, [<span class="string">"OID@"</span>, <span class="string">"SHAPE@"</span>]):</span><br><span class="line">    print(<span class="string">"Object ID:&#123;0&#125;"</span>.format(row[<span class="number">0</span>])) <span class="comment"># 打印OID</span></span><br><span class="line">    partnum = <span class="number">0</span> <span class="comment"># 计数</span></span><br><span class="line">    <span class="keyword">for</span> part <span class="keyword">in</span> row[<span class="number">1</span>]: <span class="comment"># 遍历几何信息的每一部分</span></span><br><span class="line">        print(<span class="string">"partnum:&#123;0&#125;"</span>.format(partnum))</span><br><span class="line">        <span class="keyword">for</span> pnt <span class="keyword">in</span> part: <span class="comment"># 遍历点</span></span><br><span class="line">            <span class="keyword">if</span> pnt:</span><br><span class="line">                print(<span class="string">"&#123;0&#125;,&#123;1&#125;"</span>.format(pnt.X, pnt.Y))</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                print(<span class="string">"Interior Ring"</span>)</span><br><span class="line">        partnum = partnum + <span class="number">1</span></span><br></pre></td></tr></table></figure>
<h3 id="8-使用Walk-遍历目录"><a href="#8-使用Walk-遍历目录" class="headerlink" title="8.使用Walk()遍历目录"></a>8.使用Walk()遍历目录</h3><ul>
<li>os.walk()返回文件目录树</li>
<li>arcpy.da.Walk()可以限制返回地理数据文件类型</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">arcpy.da.Walk()遍历目录树</span></span><br><span class="line"><span class="string">os.walk()返回一个三元组</span></span><br><span class="line"><span class="string">使用da.Walk()遍历目录树，限制输出要素类名</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="keyword">import</span> arcpy.da <span class="keyword">as</span> da</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">f = <span class="string">r"H:\ArcpyBook\data"</span> </span><br><span class="line">print(<span class="string">"os walk"</span>)</span><br><span class="line"><span class="comment"># 使用os.walk()遍历目录树</span></span><br><span class="line"><span class="keyword">for</span> root, dirs, names <span class="keyword">in</span> os.walk(f):</span><br><span class="line">    <span class="keyword">for</span> fname <span class="keyword">in</span> names:</span><br><span class="line">        print(fname)</span><br><span class="line"></span><br><span class="line">print(<span class="string">""</span>)</span><br><span class="line">print(<span class="string">"arcpy.da.Walk()"</span>)</span><br><span class="line"><span class="comment"># 使用da.Walk()遍历目录树，限制输出要素类名</span></span><br><span class="line"><span class="keyword">for</span> root, dirs, names <span class="keyword">in</span> da.Walk(f, datatype=<span class="string">"FeatureClass"</span>):</span><br><span class="line">    <span class="keyword">for</span> name <span class="keyword">in</span> names:</span><br><span class="line">        fname = os.path.join(root, name)</span><br><span class="line">        print(fname)</span><br></pre></td></tr></table></figure>

]]></content>
      <tags>
        <tag>pythonGIS</tag>
      </tags>
  </entry>
  <entry>
    <title>Arcgis中的python编程(9)</title>
    <url>/2019-07-19-arcgis-python-9.html</url>
    <content><![CDATA[<p>学习日志9 获取GIS数据列表和描述</p>
<p>书籍：基于ArcGIS的Python编程秘笈(第2版); </p>
<p>学习<b>第九章</b></p>
<ul>
<li>获取工作空间要素类列表</li>
<li>获取要素中的字段列表</li>
<li>使用Describe()函数返回要素类的描述性信息</li>
<li>实用Describe()函数返回栅格图像的描述性信息</li>
</ul>
<a id="more"></a>

<h3 id="1-获取工作空间要素类列表"><a href="#1-获取工作空间要素类列表" class="headerlink" title="1. 获取工作空间要素类列表"></a>1. 获取工作空间要素类列表</h3><ul>
<li>arcpy.ListFeatureClasses({wild_card}, {feature_type}, {feature_dataset})</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">获取工作空间要素类列表</span></span><br><span class="line"><span class="string">arcpy.ListFeatureClasses(&#123;wild_card&#125;, &#123;feature_type&#125;, &#123;feature_dataset&#125;)</span></span><br><span class="line"><span class="string">三个可选参数,1:通配符,2:要素类型(点线面),3:数据集</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="keyword">import</span> arcpy</span><br><span class="line"></span><br><span class="line">arcpy.env.workspace = <span class="string">r"H:\ArcpyBook\data\CityOfSanAntonio.gdb"</span></span><br><span class="line"><span class="comment">#　获取文件地理数据库中的要素类列表，限制以＂C＂开头</span></span><br><span class="line">fclist = arcpy.ListFeatureClasses(<span class="string">"C*"</span>)</span><br><span class="line"><span class="comment"># 遍历输出</span></span><br><span class="line"><span class="keyword">for</span> fc <span class="keyword">in</span> fclist:</span><br><span class="line">    print(<span class="string">"feature name:&#123;0&#125;"</span>.format(fc))</span><br></pre></td></tr></table></figure>
<h3 id="2-获取要素中的字段列表"><a href="#2-获取要素中的字段列表" class="headerlink" title="2. 获取要素中的字段列表"></a>2. 获取要素中的字段列表</h3><ul>
<li>arcpy.ListFields(dataset, {wild_card}, {field_type})</li>
<li>必选参数: 输入要素</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">获取要素中的字段列表</span></span><br><span class="line"><span class="string">arcpy.ListFields(dataset, &#123;wild_card&#125;, &#123;field_type&#125;)</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> arcpy</span><br><span class="line">arcpy.env.workspace = <span class="string">r"H:\ArcpyBook\data\CityOfSanAntonio.gdb"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="comment"># 获取要素的字段列表</span></span><br><span class="line">    fdlist = arcpy.ListFields(<span class="string">"BexarCountyBoundaries"</span>)</span><br><span class="line">    <span class="keyword">for</span> fd <span class="keyword">in</span> fdlist:</span><br><span class="line">        print(<span class="string">"%s data type %s, data length: %i"</span> % (fd.name,</span><br><span class="line">                fd.type, fd.length))</span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    print(e.message)</span><br></pre></td></tr></table></figure>
<h3 id="3-使用Describe-函数返回要素类的描述性信息"><a href="#3-使用Describe-函数返回要素类的描述性信息" class="headerlink" title="3. 使用Describe()函数返回要素类的描述性信息"></a>3. 使用Describe()函数返回要素类的描述性信息</h3><ul>
<li>descFC = arcpy.Describe(“Burglary”)</li>
<li>Describe对象的属性很多，例:descFC.ShapeType, descFC.fields</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">使用Describe()函数返回要素类的描述性信息</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="keyword">import</span> arcpy</span><br><span class="line"></span><br><span class="line">arcpy.env.workspace = <span class="string">r"H:\ArcpyBook\data\CityOfSanAntonio.gdb"</span></span><br><span class="line"><span class="comment"># 创建Describe()要素描述对象</span></span><br><span class="line">descFC = arcpy.Describe(<span class="string">"Burglary"</span>)</span><br><span class="line"><span class="comment"># 打印对象信息</span></span><br><span class="line">print(<span class="string">"the feature's shape type is "</span> + descFC.ShapeType)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取要素对象字段</span></span><br><span class="line">fcFields = descFC.fields</span><br><span class="line"><span class="keyword">for</span> field <span class="keyword">in</span> fcFields:</span><br><span class="line">    print(<span class="string">"name:&#123;0&#125;,datatype:&#123;1&#125;,length:&#123;2&#125;"</span>.format(field.name, field.type, str(field.length)))</span><br><span class="line"><span class="comment"># 获取要素范围</span></span><br><span class="line">ext = descFC.extent</span><br><span class="line">print(<span class="string">"xmin:%s"</span> % ext.XMin)</span><br><span class="line">print(<span class="string">"ymin:%s"</span> % ext.YMin)</span><br><span class="line">print(<span class="string">"xmax:%s"</span> % ext.XMax)</span><br><span class="line">print(<span class="string">"ymax:%s"</span> % ext.YMax)</span><br></pre></td></tr></table></figure>
<h3 id="4-实用Describe-函数返回栅格图像的描述性信息"><a href="#4-实用Describe-函数返回栅格图像的描述性信息" class="headerlink" title="4. 实用Describe()函数返回栅格图像的描述性信息"></a>4. 实用Describe()函数返回栅格图像的描述性信息</h3><ul>
<li>descRaster = arcpy.Describe(“AUSTIN_EAST_NW.sid”)</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- conding:uft-8 -*-</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">实用Describe()函数返回栅格图像的描述性信息</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="keyword">import</span> arcpy</span><br><span class="line"></span><br><span class="line">arcpy.env.workspace = <span class="string">r"H:\ArcpyBook\data"</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="comment"># 创建描述性对象</span></span><br><span class="line">    descRaster = arcpy.Describe(<span class="string">"AUSTIN_EAST_NW.sid"</span>)</span><br><span class="line">    <span class="comment"># 获取栅格对象的范围</span></span><br><span class="line">    ext = descRaster.extent</span><br><span class="line">    print(<span class="string">"xmin %f"</span> % ext.XMin)</span><br><span class="line">    print(<span class="string">"ymin %f"</span> % ext.YMin)</span><br><span class="line">    print(<span class="string">"xmax %f"</span> % ext.XMax)</span><br><span class="line">    print(<span class="string">"ymax %f"</span> % ext.YMax)</span><br><span class="line">    <span class="comment"># 获取栅格对象空间参考</span></span><br><span class="line">    sr = descRaster.SpatialReference</span><br><span class="line">    print(sr.name) <span class="comment"># 打印空间参考名</span></span><br><span class="line">    print(sr.type) <span class="comment"># 打印空间类型名</span></span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    print(e.message)</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>pythonGIS</tag>
      </tags>
  </entry>
  <entry>
    <title>Arcgis中的python编程(10)</title>
    <url>/2019-07-21-arcgis-python-10.html</url>
    <content><![CDATA[<p>学习日志10 使用add-in定制Arcgis界面</p>
<p>书籍：基于ArcGIS的Python编程秘笈(第2版); </p>
<p>学习<b>第十章</b></p>
<blockquote>
<p>Python Add-in Wizard 下载,解压运行/bin/..exe</p>
</blockquote>
<blockquote>
<p><a href="http://www.arcgis.com/home/item.html?id=5f3aefe77f6b4f61ad3e4c62f30bff3b" target="_blank" rel="noopener external nofollow noreferrer">http://www.arcgis.com/home/item.html?id=5f3aefe77f6b4f61ad3e4c62f30bff3b</a></p>
</blockquote>
<blockquote>
<p>Python Add-in Wizard是一个可视化界面工具,用于创建桌面Arcgis加载项</p>
</blockquote>
<ul>
<li>创建按钮加载项和使用Python加载项</li>
<li>安装测试加载项</li>
<li>创建工具加载项</li>
</ul>
<a id="more"></a>

<h3 id="1-创建按钮加载项和使用Python加载项"><a href="#1-创建按钮加载项和使用Python加载项" class="headerlink" title="1.创建按钮加载项和使用Python加载项"></a>1.创建按钮加载项和使用Python加载项</h3><p>本例创建一个按钮加载项,添加一些数据到数据框</p>
<ul>
<li>运行addin_assistant.exe</li>
</ul>
<p><img src="/assets/images/blog/pythonAddin1.png" alt="image"></p>
<p><img src="/assets/images/blog/pythonAddin2.png" alt="image"></p>
<p>添加按钮<br><img src="/assets/images/blog/pythonAddin3.png" alt="image"></p>
<p>保存文件/install中编辑addin-rootfile_addin.py</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> arcpy</span><br><span class="line"><span class="keyword">import</span> pythonaddins</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ButtonClassImportWildfires</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="string">"""Implementation for addin-rootfile_addin.button (Button)"""</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.enabled = <span class="literal">True</span></span><br><span class="line">        self.checked = <span class="literal">False</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">onClick</span><span class="params">(self)</span>:</span></span><br><span class="line">        layer_files = pythonaddins.OpenDialog(<span class="string">"Select layer to add"</span>, <span class="literal">True</span>, </span><br><span class="line">                <span class="string">r"H:\ArcpyBook\data\Wildfires"</span>, <span class="string">"Add"</span>)</span><br><span class="line">        mxd = arcpy.mapping.MapDocument(<span class="string">"current"</span>) <span class="comment"># 获取mxd文档</span></span><br><span class="line">        df = pythonaddins.GetSelectedTOCLayerOrDataFrame() <span class="comment"># 获取数据框</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> isinstance(df, layer_files): <span class="comment"># 判断类型是否相同</span></span><br><span class="line">            <span class="keyword">for</span> layer_file <span class="keyword">in</span> layer_files:</span><br><span class="line">                layer = arcpy.mapping.Layer(layer_file)</span><br><span class="line">                <span class="comment"># 往数据框添加layer</span></span><br><span class="line">                arcpy.mapping.AddLayer(df, layer)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                pythonaddins.MessageBox(<span class="string">'Select a dataframe'</span>, <span class="string">'info'</span>, <span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<h3 id="2-安装测试加载项"><a href="#2-安装测试加载项" class="headerlink" title="2. 安装测试加载项"></a>2. 安装测试加载项</h3><ol>
<li>打开加载项工作目录</li>
</ol>
<p><img src="/assets/images/blog/pythonAddin4.png" alt="image"></p>
<ol start="2">
<li>双击makeaddin.py以创建addin-rootfile.esriaddin</li>
<li>双击addin-rootfile.esriaddin</li>
</ol>
<p><img src="/assets/images/blog/pythonAddin5.png" alt="image"></p>
<p><img src="/assets/images/blog/pythonAddin6.png" alt="image"></p>
<p><img src="/assets/images/blog/pythonAddin7.png" alt="image"></p>
<ol start="4">
<li><b>注意</b><br>工具条出现<b>缺失</b>问题</li>
</ol>
<p><b>解决:将生成的xxxx.esriaddin文件放到C:\Users\username\Documents\ArcGIS\AddIns\Desktop10.6(对应版本下)</b></p>
<h3 id="3-创建工具加载项"><a href="#3-创建工具加载项" class="headerlink" title="3. 创建工具加载项"></a>3. 创建工具加载项</h3><ul>
<li>功能: 在一个面要素内部创建随机点</li>
</ul>
<ol>
<li>同样使用Python Add-in工具</li>
<li>右击添加工具</li>
</ol>
<p><img src="/assets/images/blog/pythonAddin8.png" alt="image"></p>
<ol start="3">
<li>/install/下编辑Generate Random Point_addin.py文件，更改以下部分</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> arcpy</span><br><span class="line"><span class="keyword">import</span> pythonaddins</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">  self.enabled = <span class="literal">True</span></span><br><span class="line">  self.cursor = <span class="number">3</span></span><br><span class="line">  self.shape = <span class="string">'Rectangle'</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">onRectangle</span><span class="params">(self, rectangle_geometry)</span>:</span></span><br><span class="line">    extent = rectangle_geometry</span><br><span class="line">    arcpy.env.workspace = <span class="string">r'c:\ArcpyBook\Ch10'</span></span><br><span class="line">    <span class="keyword">if</span> arcpy.Exists(<span class="string">'randompts.shp'</span>):</span><br><span class="line">        arcpy.Delete_management(<span class="string">'randompts.shp'</span>)</span><br><span class="line">        randompts = arcpy.CreateRandomPoints_management(arcpy.env.workspace,<span class="string">'randompts.shp'</span>,<span class="string">""</span>,rectangle_geometry)</span><br><span class="line">        arcpy.RefreshActiveView()</span><br><span class="line">    <span class="keyword">return</span> randompts</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>运行makeaddin.py生成Generate Random Point.esriaddin</li>
<li>将Generate Random Point.esriaddin复制到C:\Users\username\Documents\ArcGIS\AddIns\Desktop10.6(对应版本下)</li>
<li>打开ArcMap10.6测试</li>
</ol>
]]></content>
      <tags>
        <tag>pythonGIS</tag>
      </tags>
  </entry>
  <entry>
    <title>Arcgis中的python编程(11)</title>
    <url>/2019-07-21-arcgis-python-11.html</url>
    <content><![CDATA[<p>学习日志11 异常识别和错误处理</p>
<p>书籍：基于ArcGIS的Python编程秘笈(第2版); </p>
<p>学习<b>第十一章</b></p>
<ul>
<li>Python异常处理结构(try/except/else/finally)</li>
<li>使用arcpy.GetMessages()捕获详细的消息信息</li>
<li>根据严重性级别筛选消息</li>
<li>测试和响应特定错误消息</li>
</ul>
<a id="more"></a>

<h3 id="1-Python异常处理结构-try-except-else-finally"><a href="#1-Python异常处理结构-try-except-else-finally" class="headerlink" title="1. Python异常处理结构(try/except/else/finally)"></a>1. Python异常处理结构(try/except/else/finally)</h3><ul>
<li>try语句中有错误时可在except语句中捕获具体的错误信息</li>
<li>else语句是在try语句没有错误时执行</li>
<li>finally语句无论try语句是否有错都会执行</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">try/except捕获错误信息</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="keyword">import</span> arcpy</span><br><span class="line">arcpy.env.workspace = <span class="string">r"H:\ArcpyBook\data"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="comment"># 构建一个错误,缺少距离参数</span></span><br><span class="line">    arcpy.Buffer_analysis(<span class="string">'Streams.shp'</span>, <span class="string">'Streams_bf.shp'</span>)</span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    print(e.message)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 返回: ERROR 000735: 距离 [值或字段]: 值是必需的</span></span><br></pre></td></tr></table></figure>
<h3 id="2-使用arcpy-GetMessages-捕获详细的消息信息"><a href="#2-使用arcpy-GetMessages-捕获详细的消息信息" class="headerlink" title="2. 使用arcpy.GetMessages()捕获详细的消息信息"></a>2. 使用arcpy.GetMessages()捕获详细的消息信息</h3><ul>
<li>the function can’t really run in my PC.</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">try/except捕获错误信息</span></span><br><span class="line"><span class="string">使用arcpy.GetMessages()捕获详细的消息信息</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="keyword">import</span> arcpy</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    arcpy.env.workspace = <span class="string">r"H:\ArcpyBook\data"</span></span><br><span class="line">    arcpy.Buffer_analysis(<span class="string">"Streams.shp"</span>, <span class="string">"streams_buffer.shp"</span>)</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    </span><br><span class="line">    print(arcpy.GetMessages())</span><br></pre></td></tr></table></figure>
<h3 id="3-根据严重性级别筛选消息"><a href="#3-根据严重性级别筛选消息" class="headerlink" title="3. 根据严重性级别筛选消息"></a>3. 根据严重性级别筛选消息</h3><ul>
<li>arcpy.GetMessages(0/1/2)</li>
<li>0 :一般的消息</li>
<li>1 :警告</li>
<li>2 :错误</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> arcpy</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    arcpy.env.workspace = <span class="string">"c:/ArcpyBook/data"</span></span><br><span class="line">    arcpy.Buffer_analysis(<span class="string">"Streams.shp"</span>,<span class="string">"Streams_Buff.shp"</span>)</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    print(arcpy.GetMessages(<span class="number">2</span>))</span><br></pre></td></tr></table></figure>
<h3 id="4-测试和响应特定错误消息"><a href="#4-测试和响应特定错误消息" class="headerlink" title="4. 测试和响应特定错误消息"></a>4. 测试和响应特定错误消息</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> arcpy</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    arcpy.env.workspace = <span class="string">"c:/ArcpyBook/data"</span></span><br><span class="line">    arcpy.Buffer_analysis(<span class="string">"Streams.shp"</span>, <span class="string">"Streams_Buff.shp"</span>)</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    print(<span class="string">"Error found in Buffer tool \n"</span>)</span><br><span class="line">    errCode = arcpy.GetReturnCode(<span class="number">3</span>)</span><br><span class="line">    <span class="keyword">if</span> str(errCode) == <span class="string">"735"</span>:</span><br><span class="line">        print(<span class="string">"Distance value not provided \n"</span>)</span><br><span class="line">        print(<span class="string">"Running the buffer again with a default value \n"</span>)</span><br><span class="line">        defaultDistance = <span class="string">"100 Feet"</span></span><br><span class="line">        arcpy.Buffer_analysis(<span class="string">"Streams.shp"</span>, <span class="string">"Streams_Buff"</span>, defaultDistance)</span><br><span class="line">        print(<span class="string">"Buffer complete"</span>)</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>pythonGIS</tag>
      </tags>
  </entry>
  <entry>
    <title>Arcgis中的python编程(12)</title>
    <url>/2019-07-24-arcgis-python-12.html</url>
    <content><![CDATA[<p>学习日志12 使用Python实现ArcGis的高级功能</p>
<p>书籍：基于ArcGIS的Python编程秘笈(第2版); </p>
<p>学习<b>第十二章</b></p>
<ul>
<li>使用Python构建HTTP响应请求并解析响应</li>
<li>使用ArcGis REST API和Python获取图层信息</li>
<li>使用ArcGis REST API和Python导出地图</li>
<li>使用ArcGis REST API和Python查询地图服务</li>
<li>使用Esri World Geocoding Service进行地理编码</li>
<li>使用FieldMappings和FieldMap,实现几个要素类的合并(Merge)</li>
<li>使用ValueTable讲多值输入到工具中作为参数</li>
</ul>
<a id="more"></a>

<h3 id="1-使用Python构建HTTP响应请求并解析响应"><a href="#1-使用Python构建HTTP响应请求并解析响应" class="headerlink" title="1. 使用Python构建HTTP响应请求并解析响应"></a>1. 使用Python构建HTTP响应请求并解析响应</h3><ul>
<li>requests库</li>
<li>json库</li>
<li>requests.get(url)</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- conding:utf-8 -*-</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">requests</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line">gisurl = <span class="string">"http://server.arcgisonline.com/arcgis/rest/services?f=pjson"</span></span><br><span class="line"><span class="comment">#gisurl = "http://sampleserver1.arcgisonline.com/ArcGIS/rest/services/Demographics/ESRI_Census_USA/MapServer/3/query?text=&amp;geometry=&amp;geometryType=esriGeometryPoint&amp;inSR=&amp;spatialRel=esriSpatialRelIntersects&amp;relationParam=&amp;objectIds=&amp;where=STATE_FIPS%3D%2748%27+AND+CNTY_FIPS%3D%27021%27&amp;time=&amp;returnCountOnly=false&amp;returnIdsOnly=false&amp;returnGeometry=false&amp;maxAllowableOffset=&amp;outSR=&amp;outFields=POP2000%2CPOP2007%2CBLKGRP&amp;f=pjson"</span></span><br><span class="line">r = requests.get(gisurl)</span><br><span class="line"><span class="comment">#print(r.text)</span></span><br><span class="line">decoded = json.loads(r.text)</span><br><span class="line">print(decoded)</span><br></pre></td></tr></table></figure>
<h3 id="2-使用ArcGis-REST-API和Python获取图层信息"><a href="#2-使用ArcGis-REST-API和Python获取图层信息" class="headerlink" title="2. 使用ArcGis REST API和Python获取图层信息"></a>2. 使用ArcGis REST API和Python获取图层信息</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">使用ArcGis REST API和Python获取图层信息</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line">agisurl = <span class="string">"http://sampleserver1.arcgisonline.com/ArcGIS/rest/services/Demographics/ESRI_Census_USA/MapServer/1"</span></span><br><span class="line"><span class="comment"># 参数</span></span><br><span class="line">payload = &#123;<span class="string">'where'</span>: <span class="string">'STATE_FIPS = \'48\' and CNTY_FIPS = \'021\''</span>, </span><br><span class="line">        <span class="string">'returnCountyOnly'</span>: <span class="string">'false'</span>, <span class="string">'returnIdsOnly'</span>: <span class="string">'false'</span>, <span class="string">'returnGeometry'</span>: <span class="string">'false'</span>, <span class="string">'f'</span>: <span class="string">'pjson'</span>&#125;</span><br><span class="line">r = requests.get(agisurl, params=payload)</span><br><span class="line"><span class="comment"># r.text转为字典</span></span><br><span class="line">decoded = json.loads(r.text)</span><br><span class="line"><span class="comment"># 打印图层信息</span></span><br><span class="line">print(<span class="string">"layer name is: "</span> + decoded[<span class="string">'name'</span>])</span><br><span class="line">print(<span class="string">"extent xmin: "</span> + str(decoded[<span class="string">'extent'</span>][<span class="string">'xmin'</span>]))</span><br><span class="line">print(<span class="string">"extent ymin: "</span> + str(decoded[<span class="string">'extent'</span>][<span class="string">'ymin'</span>]))</span><br><span class="line">print(<span class="string">"extent xmax: "</span> + str(decoded[<span class="string">'extent'</span>][<span class="string">'xmax'</span>]))</span><br><span class="line">print(<span class="string">"extent ymax: "</span> + str(decoded[<span class="string">'extent'</span>][<span class="string">'ymax'</span>]))</span><br><span class="line">print(<span class="string">"layer fields: "</span>)</span><br><span class="line"><span class="keyword">for</span> field <span class="keyword">in</span> decoded[<span class="string">'fields'</span>]:</span><br><span class="line">    print(field[<span class="string">'name'</span>])</span><br></pre></td></tr></table></figure>
<h3 id="3-使用ArcGis-REST-API和Python导出地图"><a href="#3-使用ArcGis-REST-API和Python导出地图" class="headerlink" title="3.使用ArcGis REST API和Python导出地图"></a>3.使用ArcGis REST API和Python导出地图</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">使用ArcGis REST API和Python导出地图</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line">gisurl = <span class="string">"http://sampleserver1.arcgisonline.com/ArcGIS/rest/services/Demographics/ESRI_Census_USA/MapServer/export"</span></span><br><span class="line"><span class="comment"># 参数</span></span><br><span class="line">payload = &#123;<span class="string">'bbox'</span>: <span class="string">'-115.8,30.4, 85.5,50.5'</span>,</span><br><span class="line">            <span class="string">'size'</span>: <span class="string">'800, 600'</span>,</span><br><span class="line">            <span class="string">'imageSR'</span>: <span class="string">'102004'</span>,</span><br><span class="line">            <span class="string">'format'</span>: <span class="string">'gif'</span>,</span><br><span class="line">            <span class="string">'transparent'</span>: <span class="string">'false'</span>,</span><br><span class="line">                <span class="string">'f'</span>: <span class="string">'pjson'</span>&#125;</span><br><span class="line">r = requests.get(gisurl, params=payload)</span><br><span class="line">print(r.text)</span><br><span class="line">print(json.loads(r.text))</span><br></pre></td></tr></table></figure>
<p>根据打印出的结果链接到浏览器中查看:</p>
<p><a href="http://sampleserver1b.arcgisonline.com/arcgisoutput/_ags_map0c93dc4727ad40e7b384668fd8a6c1bd.gif" target="_blank" rel="noopener external nofollow noreferrer">http://sampleserver1b.arcgisonline.com/arcgisoutput/_ags_map0c93dc4727ad40e7b384668fd8a6c1bd.gif</a></p>
<p><img src="/assets/images/blog/requests1.png" alt="image"></p>
<h3 id="4-使用ArcGis-REST-API和Python查询地图服务"><a href="#4-使用ArcGis-REST-API和Python查询地图服务" class="headerlink" title="4. 使用ArcGis REST API和Python查询地图服务"></a>4. 使用ArcGis REST API和Python查询地图服务</h3><ul>
<li><a href="http://sampleserver1.arcgisonline.com/ArcGIS/rest/services/Demographics/ESRI_Census_USA/MapServer/1/query" target="_blank" rel="noopener external nofollow noreferrer">http://sampleserver1.arcgisonline.com/ArcGIS/rest/services/Demographics/ESRI_Census_USA/MapServer/1/query</a></li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- codng:utf-8 -*-</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">使用ArcGis REST API和Python查询地图服务</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line">gisurl = <span class="string">"http://sampleserver1.arcgisonline.com/ArcGIS/rest/services/Demographics/ESRI_Census_USA/MapServer/1/query"</span></span><br><span class="line"><span class="comment"># 参数</span></span><br><span class="line">payload = &#123;<span class="string">'where'</span> : <span class="string">'STATE_FIPS = \'48\' and CNTY_FIPS = \'021\''</span>,</span><br><span class="line">            <span class="string">'returnCountOnly'</span> : <span class="string">'false'</span>,</span><br><span class="line">            <span class="string">'returnIdsOnly'</span> : <span class="string">'false'</span>,</span><br><span class="line">            <span class="string">'returnGeometry'</span> : <span class="string">'false'</span>,</span><br><span class="line">            <span class="string">'outFields'</span> : <span class="string">'POP2000, POP2007, BLKGRP'</span>,</span><br><span class="line">            <span class="string">'f'</span> : <span class="string">'pjson'</span>&#125;</span><br><span class="line">r = requests.get(gisurl, params=payload)</span><br><span class="line">print(r.text)</span><br><span class="line"><span class="comment"># json转Python字典</span></span><br><span class="line">decoded = json.loads(r.text)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 打印部分信息</span></span><br><span class="line"><span class="keyword">for</span> rlst <span class="keyword">in</span> decoded[<span class="string">'features'</span>]:</span><br><span class="line">    print(<span class="string">"Block Group: "</span> + str(rlst[<span class="string">'attributes'</span>][<span class="string">'BLKGRP'</span>]))</span><br><span class="line">    print(<span class="string">"pop2000: "</span> + str(rlst[<span class="string">'attributes'</span>][<span class="string">'POP2000'</span>]))</span><br><span class="line">    print(<span class="string">"pop2007: "</span> + str(rlst[<span class="string">'attributes'</span>][<span class="string">'POP2007'</span>]))</span><br></pre></td></tr></table></figure>
<h3 id="5-使用Esri-World-Geocoding-Service进行地理编码"><a href="#5-使用Esri-World-Geocoding-Service进行地理编码" class="headerlink" title="5. 使用Esri World Geocoding Service进行地理编码"></a>5. 使用Esri World Geocoding Service进行地理编码</h3><ul>
<li><a href="http://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer/find" target="_blank" rel="noopener external nofollow noreferrer">http://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer/find</a></li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">使用Esri World Geocoding Service进行地理编码</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line">gisurl = <span class="string">"http://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer/find"</span></span><br><span class="line">payload = &#123;<span class="string">'text'</span>: <span class="string">'1202 Sand Wedge, San Antonio, TX, 78258'</span>,</span><br><span class="line">            <span class="string">'f'</span>: <span class="string">'pjson'</span>&#125;</span><br><span class="line">r = requests.get(gisurl, params=payload)</span><br><span class="line">print(r.text)</span><br><span class="line">decoded = json.loads(r.text)</span><br><span class="line">print(<span class="string">"the geocoded address: "</span> + decoded[<span class="string">'locations'</span>][<span class="number">0</span>][<span class="string">'name'</span>])</span><br><span class="line">print(<span class="string">"the longtitude: "</span> + str(decoded[<span class="string">'locations'</span>][<span class="number">0</span>][<span class="string">'feature'</span>][<span class="string">'geometry'</span>][<span class="string">'x'</span>]))</span><br><span class="line">print(<span class="string">"the longtitude: "</span> + str(decoded[<span class="string">'locations'</span>][<span class="number">0</span>][<span class="string">'feature'</span>][<span class="string">'geometry'</span>][<span class="string">'y'</span>]))</span><br></pre></td></tr></table></figure>
<h3 id="6-使用FieldMappings和FieldMap-实现几个要素类的合并-Merge"><a href="#6-使用FieldMappings和FieldMap-实现几个要素类的合并-Merge" class="headerlink" title="6. 使用FieldMappings和FieldMap,实现几个要素类的合并(Merge)"></a>6. 使用FieldMappings和FieldMap,实现几个要素类的合并(Merge)</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">使用FieldMappings和FieldMap</span></span><br><span class="line"><span class="string">实现几个要素类的合并(Merge)</span></span><br><span class="line"><span class="string">并将其中一个字段中的字符分割成三部分分别再创建字段存储保存</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> arcpy</span><br><span class="line">arcpy.env.workspace = <span class="string">r"H:\ArcpyBook\data"</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="comment"># 输出要素类</span></span><br><span class="line">    outFeatureClass = <span class="string">r"H:\ArcpyBook\data\allTracts.shp"</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 创建FieldMappings和FieldMap对象,FieldMap对象将用于存储州FIPS编码、县FIPS编码、人口普查区域字段的引用</span></span><br><span class="line">    fieldmappings = arcpy.FieldMappings()</span><br><span class="line">    fldmap_STFIPS = arcpy.FieldMap()</span><br><span class="line">    fldmap_CONFIPS = arcpy.FieldMap()</span><br><span class="line">    fldmap_TRACT = arcpy.FieldMap()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 获取工作空间中县多边形要素列表</span></span><br><span class="line">    fclss = arcpy.ListFeatureClasses(<span class="string">"County*"</span>, <span class="string">"Polygon"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 创建ValueTable对象来存储需要合并的要素类,创建FieldMap输入字段，"STFID"包含州、县、人口普查</span></span><br><span class="line">    vTab = arcpy.ValueTable()</span><br><span class="line">    <span class="keyword">for</span> fc <span class="keyword">in</span> fclss:</span><br><span class="line">        fieldmappings.addTable(fc) <span class="comment"># 添加每个县的表</span></span><br><span class="line">        fldmap_STFIPS.addInputField(fc, <span class="string">"STFID"</span>)</span><br><span class="line">        fldmap_CONFIPS.addInputField(fc, <span class="string">"STFID"</span>)</span><br><span class="line">        fldmap_TRACT.addInputField(fc, <span class="string">"STFID"</span>)</span><br><span class="line">        vTab.addRow(fc) <span class="comment"># 添加行</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 处理输入的"STFID"字段，数字前两位是州FIPS编码，3-5个字符是县FIPS编码，6-13个字符是人口普查</span></span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">0</span>, fldmap_STFIPS.inputFieldCount):</span><br><span class="line">        fldmap_STFIPS.setStartTextPosition(x, <span class="number">0</span>)</span><br><span class="line">        fldmap_STFIPS.setEndTextPosition(x, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 输出字段，并为name字段赋值</span></span><br><span class="line">    fld_STFIDS = fldmap_STFIPS.outputField</span><br><span class="line">    fld_STFIDS.name = <span class="string">"STFIDS"</span></span><br><span class="line">    fldmap_STFIPS.outputField = fld_STFIDS</span><br><span class="line"></span><br><span class="line">    <span class="comment"># COFIPS字段</span></span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">0</span>, fldmap_CONFIPS.inputFieldCount):</span><br><span class="line">        fldmap_CONFIPS.setStartTextPosition(x, <span class="number">2</span>)</span><br><span class="line">        fldmap_CONFIPS.setEndTextPosition(x, <span class="number">4</span>)</span><br><span class="line">    fld_COFIDS = fldmap_CONFIPS.outputField</span><br><span class="line">    fld_COFIDS.name = <span class="string">"COFIDS"</span></span><br><span class="line">    fldmap_CONFIPS.outputField = fld_COFIDS</span><br><span class="line"></span><br><span class="line">    <span class="comment"># TRACT字段</span></span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">0</span>, fldmap_TRACT.inputFieldCount):</span><br><span class="line">        fldmap_TRACT.setStartTextPosition(x, <span class="number">5</span>)</span><br><span class="line">        fldmap_TRACT.setEndTextPosition(x, <span class="number">12</span>)</span><br><span class="line">    fld_TRACT = fldmap_TRACT.outputField</span><br><span class="line">    fld_TRACT.name = <span class="string">"TRACT"</span></span><br><span class="line">    fldmap_TRACT.outputField = fld_TRACT</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 将FieldMap对象添加到FieldMapping对象中</span></span><br><span class="line">    fieldmappings.addFieldMap(fldmap_STFIPS)</span><br><span class="line">    fieldmappings.addFieldMap(fldmap_CONFIPS)</span><br><span class="line">    fieldmappings.addFieldMap(fldmap_TRACT)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 运行Merge工具，传入vTab、输出要素类和FieldMappings参数</span></span><br><span class="line">    arcpy.Merge_management(vTab, outFeatureClass, fieldmappings)</span><br><span class="line">    print(<span class="string">"Merge completed"</span>)</span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    print(e.message)</span><br></pre></td></tr></table></figure>
<h3 id="7-使用ValueTable讲多值输入到工具中作为参数"><a href="#7-使用ValueTable讲多值输入到工具中作为参数" class="headerlink" title="7. 使用ValueTable讲多值输入到工具中作为参数"></a>7. 使用ValueTable讲多值输入到工具中作为参数</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*-coding:utf-8-*-</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">使用ValueTable讲多值输入到工具中</span></span><br><span class="line"><span class="string">这里以多环缓冲区工具为例</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> arcpy</span><br><span class="line"></span><br><span class="line">arcpy.env.workspace = <span class="string">r"H:\ArcpyBook\data"</span></span><br><span class="line"><span class="comment"># 创建ValueTable对象</span></span><br><span class="line">vTab = arcpy.ValueTable()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置三行，参数10,20,30</span></span><br><span class="line">vTab.setRow(<span class="number">0</span>, <span class="string">"10"</span>)</span><br><span class="line">vTab.setRow(<span class="number">1</span>, <span class="string">"20"</span>)</span><br><span class="line">vTab.setRow(<span class="number">2</span>, <span class="string">"30"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 单位</span></span><br><span class="line">bufferUnit = <span class="string">"meters"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 输入要素与输出要素</span></span><br><span class="line">inFeature = <span class="string">"Hospitals.shp"</span></span><br><span class="line">outFeature = <span class="string">"Hospitals_mulBuffer.shp"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 距离参数ValueTable</span></span><br><span class="line">dist = vTab</span><br><span class="line"></span><br><span class="line"><span class="comment"># 调用多环缓冲区工具</span></span><br><span class="line">arcpy.MultipleRingBuffer_analysis(inFeature, outFeature, dist, bufferUnit, <span class="string">''</span>, <span class="string">'ALL'</span>)</span><br><span class="line">print(<span class="string">"multiple buffer completed"</span>)</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>pythonGIS</tag>
      </tags>
  </entry>
  <entry>
    <title>Arcgis中的python编程(附录)</title>
    <url>/2019-07-26-arcgis-python-13.html</url>
    <content><![CDATA[<p>学习日志(附录) GIS程序员不可不知的Python功能</p>
<p>书籍：基于ArcGIS的Python编程秘笈(第2版); </p>
<p>学习<b>附录</b></p>
<ul>
<li>发送带附件电子邮件</li>
<li>连接FTP服务并操作文件</li>
<li>使用zipfile模块压缩文件</li>
<li>读取xml文档</li>
</ul>
<a id="more"></a>

<h3 id="1-发送带附件电子邮件"><a href="#1-发送带附件电子邮件" class="headerlink" title="1.发送带附件电子邮件"></a>1.发送带附件电子邮件</h3><ul>
<li>smtplib</li>
<li>MIMEMultipart</li>
<li>MIMEText</li>
<li>MIMEApplication</li>
<li>qq邮箱需要设置打开SMTP，创建授权码</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">使用qqmail发送带附件邮件</span></span><br><span class="line"><span class="string">定义函数实现</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> smtplib <span class="keyword">import</span> SMTP_SSL</span><br><span class="line"><span class="keyword">from</span> email.mime.multipart <span class="keyword">import</span> MIMEMultipart</span><br><span class="line"><span class="keyword">from</span> email.mime.text <span class="keyword">import</span> MIMEText</span><br><span class="line"><span class="keyword">from</span> email.mime.application <span class="keyword">import</span> MIMEApplication</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="comment"># 发送邮件的函数</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mail</span><span class="params">(host_server, frm, pwd, to, subject, text, attach)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    host_server: 邮箱主机</span></span><br><span class="line"><span class="string">    Frm: 发送者邮箱</span></span><br><span class="line"><span class="string">    pwd: 密码</span></span><br><span class="line"><span class="string">    To: 接收邮箱</span></span><br><span class="line"><span class="string">    subject: 邮件主题</span></span><br><span class="line"><span class="string">    text: 邮件内容</span></span><br><span class="line"><span class="string">    attach: 附件</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="comment"># multipart多个部分的邮件</span></span><br><span class="line">    msg = MIMEMultipart()</span><br><span class="line">    msg[<span class="string">'Subject'</span>] = subject</span><br><span class="line">    msg[<span class="string">'From'</span>] = frm</span><br><span class="line">    msg[<span class="string">'To'</span>] = to</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 文本部分</span></span><br><span class="line">    part = MIMEText(text)</span><br><span class="line">    msg.attach(part)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 附件部分</span></span><br><span class="line">    part = MIMEApplication(open(attach, <span class="string">'rb'</span>).read())</span><br><span class="line">    part.add_header(<span class="string">'Content-Disposition'</span>, <span class="string">'attachment'</span>, filename=os.path.basename(attach))</span><br><span class="line">    msg.attach(part)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 使用ssl连接邮箱服务器</span></span><br><span class="line">    print(<span class="string">"连接服务器..."</span>)</span><br><span class="line">    smtp = SMTP_SSL(host_server)</span><br><span class="line">    <span class="comment">#set_debuglevel()是用来调试的。参数值为1表示开启调试模式，参数值为0关闭调试模式</span></span><br><span class="line">    <span class="comment">#smtp.set_debuglevel(1)</span></span><br><span class="line">    smtp.ehlo(host_server)</span><br><span class="line">    <span class="comment"># 登陆</span></span><br><span class="line">    <span class="comment">#print("登陆...")</span></span><br><span class="line">    smtp.login(frm, pwd)</span><br><span class="line">    <span class="comment"># 发送</span></span><br><span class="line">    smtp.sendmail(frm, to, msg.as_string())</span><br><span class="line">    print(<span class="string">"发送成功"</span>)</span><br><span class="line">    smtp.close()</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"><span class="comment"># -----------参数-------------</span></span><br><span class="line"><span class="comment"># 发送者邮箱、授权码</span></span><br><span class="line">user_send = <span class="string">'xxxxx@qq.com'</span></span><br><span class="line">user_pwd = <span class="string">'xxxxxg'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 接收邮箱</span></span><br><span class="line">receive = <span class="string">'1xxxxxx12@qq.com'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 邮箱主机</span></span><br><span class="line">HOST = <span class="string">'smtp.qq.com'</span></span><br><span class="line"><span class="comment"># 主题</span></span><br><span class="line">sub = <span class="string">"Just a text"</span></span><br><span class="line"><span class="comment"># 内容</span></span><br><span class="line">txt = <span class="string">"Hello, This just a text with python SMTP"</span></span><br><span class="line"><span class="comment"># 附件</span></span><br><span class="line">_attach = <span class="string">"H:/upUpStudy/pythonGis/text/BrokenDataList.txt"</span></span><br><span class="line"></span><br><span class="line">mail(HOST, user_send, user_pwd, receive, sub, txt, _attach)</span><br></pre></td></tr></table></figure>
<h3 id="2-连接FTP服务并操作文件"><a href="#2-连接FTP服务并操作文件" class="headerlink" title="2. 连接FTP服务并操作文件"></a>2. 连接FTP服务并操作文件</h3><ul>
<li>ftplib模块</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">连接FTP服务并下载文件</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> ftplib</span><br><span class="line"><span class="keyword">from</span> ftplib <span class="keyword">import</span> FTP</span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">ftp = FTP()</span><br><span class="line">buffer_size = <span class="number">10000</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 连接函数</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">connect_ftp</span><span class="params">(host, port, username, password)</span>:</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        ftp.connect(host=host, port=port)</span><br><span class="line">        <span class="comment">#ftp.set_pasv(False)</span></span><br><span class="line">        print((<span class="string">"已连接到%s FTP服务"</span>).decode(<span class="string">'utf-8'</span>) % host)</span><br><span class="line">        print(ftp.welcome)</span><br><span class="line">    <span class="keyword">except</span> (socket.error, socket.gaierror), e:</span><br><span class="line">        print((<span class="string">"无法访问%s FTP服务器"</span>).decode(<span class="string">'utf-8'</span>) % host)</span><br><span class="line">        print(e)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="comment"># 登陆</span></span><br><span class="line">        ftp.login(user=username, passwd=password)</span><br><span class="line">        print((<span class="string">"登陆成功"</span>).decode(<span class="string">'utf-8'</span>))</span><br><span class="line">    <span class="keyword">except</span> (ftplib.error_perm), e:</span><br><span class="line">        print((<span class="string">"登陆失败,%s"</span>).decode(<span class="string">'utf-8'</span>) % e)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 中断连接</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">disconnect</span><span class="params">(ftp)</span>:</span></span><br><span class="line">    ftp.quit()</span><br><span class="line">    print(<span class="string">"中断连接"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取目录</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">dir</span><span class="params">(ftp)</span>:</span></span><br><span class="line">    print((<span class="string">"获取目录:"</span>).decode(<span class="string">'utf-8'</span>))</span><br><span class="line">    ftp.dir()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查找是否存在指定文件</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">find</span><span class="params">(ftp, filename)</span>:</span></span><br><span class="line">    print(<span class="string">"查找..."</span>)</span><br><span class="line">    flist = ftp.nlst()</span><br><span class="line">    <span class="keyword">if</span> filename <span class="keyword">in</span> flist:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"无此文件"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#上传文件</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">upload</span><span class="params">(ftp, filepath)</span>:</span></span><br><span class="line">    f = open(filepath, <span class="string">"rb"</span>)</span><br><span class="line">    file_name = os.path.basename(filepath)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        ftp.storbinary(<span class="string">'upload %s'</span> % file_name, f, buffer_size)</span><br><span class="line">        print(<span class="string">'成功上传文件： "%s"'</span> % file_name)</span><br><span class="line">    <span class="keyword">except</span> ftplib.error_perm:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 下载文件</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">download</span><span class="params">(ftp, filepath)</span>:</span></span><br><span class="line">    f = open(filepath, <span class="string">'wb'</span>).write</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        ftp.retrbinary(<span class="string">"RETR %s"</span> % filepath, f, buffer_size)</span><br><span class="line">        print(<span class="string">"成功下载%s"</span> % filepath)</span><br><span class="line">    <span class="keyword">except</span> ftp.error_perm:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    host = <span class="string">'xxx.xxx.xxx.239'</span></span><br><span class="line">    port = <span class="string">'21'</span></span><br><span class="line">    username = <span class="string">'xxxr'</span></span><br><span class="line">    ftp_pwd = <span class="string">'xxxxx'</span></span><br><span class="line">    filepath = <span class="string">"www/htmx/"</span></span><br><span class="line">    <span class="comment"># 连接登陆</span></span><br><span class="line">    connect_ftp(host, port, username, ftp_pwd)</span><br><span class="line"></span><br><span class="line">    <span class="comment">#dir(ftp)</span></span><br><span class="line">    <span class="comment">#find(ftp, "www/html/zuahua/index.html")</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 中断</span></span><br><span class="line">    disconnect(ftp)</span><br></pre></td></tr></table></figure>
<h3 id="3-使用zipfile模块压缩文件"><a href="#3-使用zipfile模块压缩文件" class="headerlink" title="3.使用zipfile模块压缩文件"></a>3.使用zipfile模块压缩文件</h3><ul>
<li>zipfile模块</li>
<li>zipfile.ZIPFile()类</li>
<li>zipfile.ZIPFile().namelist()获取添加的文件</li>
<li>lst = os.listdir(path)获取路径下所有文件</li>
<li>string.endswith(‘xxx’) 以xxx结尾的string</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">使用zipfile模块压缩文件</span></span><br><span class="line"><span class="string">将路径下的以shp、dbf、shx结尾的文件添加到压缩文件</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> zipfile</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="comment"># 压缩文件所在路径</span></span><br><span class="line">path = <span class="string">"H:/ArcpyBook/data"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建压缩文件</span></span><br><span class="line">zfile = zipfile.ZipFile(<span class="string">r"H:\ArcpyBook\data\yasuo.zip"</span>, </span><br><span class="line">            <span class="string">"w"</span>, zipfile.ZIP_DEFLATED)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取路径下所有文件</span></span><br><span class="line">files = os.listdir(path)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将以shp、dbf、shx结尾的文件写入压缩文件</span></span><br><span class="line"><span class="keyword">for</span> f <span class="keyword">in</span> files:</span><br><span class="line">    <span class="keyword">if</span> f.endswith(<span class="string">'shp'</span>) <span class="keyword">or</span> f.endswith(<span class="string">'dbf'</span>) <span class="keyword">or</span> f.endswith(<span class="string">'shx'</span>):</span><br><span class="line">        zfile.write(path + <span class="string">"/"</span> + f)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 打印写入的文件</span></span><br><span class="line"><span class="keyword">for</span> f <span class="keyword">in</span> zfile.namelist():</span><br><span class="line">    print(<span class="string">"added "</span> + f)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭</span></span><br><span class="line">zfile.close()</span><br></pre></td></tr></table></figure>
<h3 id="4-读取xml文档"><a href="#4-读取xml文档" class="headerlink" title="4.读取xml文档"></a>4.读取xml文档</h3><ul>
<li>from xml.dom import minidom</li>
<li>minidom.parse() 读取解析mxl文档</li>
<li>xmldoc.childNodes 获取所有子节点</li>
<li>getElementsByTagName()</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">读取xml文档</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> xml.dom <span class="keyword">import</span> minidom</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取解析mxl文档</span></span><br><span class="line">xmldoc = minidom.parse(<span class="string">r"H:\ArcpyBook\Appendix2\WitchFireResidenceDestroyed.xml"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取所有子节点</span></span><br><span class="line">childNodes = xmldoc.childNodes</span><br><span class="line"></span><br><span class="line"><span class="comment"># fire节点列表</span></span><br><span class="line">eList = childNodes[<span class="number">0</span>].getElementsByTagName(<span class="string">"fire"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 遍历，判断&lt;fire&gt;节点中是否有address属性，输出</span></span><br><span class="line"><span class="keyword">for</span> e <span class="keyword">in</span> eList:</span><br><span class="line">    <span class="keyword">if</span> e.hasAttribute(<span class="string">"address"</span>):</span><br><span class="line">        print(e.getAttribute(<span class="string">"address"</span>))</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>python</tag>
        <tag>pythonGIS</tag>
      </tags>
  </entry>
  <entry>
    <title>ruby on Rails建站思路</title>
    <url>/2018-12-07-ruby-on-rails-jian-zhan-si-lu.html</url>
    <content><![CDATA[<p>建网站需要我会ruby,ruby on rails,nodejs,git，gem…….</p>
<p>然而我只会“教程”</p>
<p>很菜很佛</p>
<p>所以理理思路</p>
<p>了解一下我不了解的东西</p>
<a id="more"></a>

<h4 id="1-nodejs是js的服务器运行环境"><a href="#1-nodejs是js的服务器运行环境" class="headerlink" title="1.nodejs是js的服务器运行环境"></a>1.nodejs是js的服务器运行环境</h4><h4 id="2-rbenv-是ruby的版本管理器"><a href="#2-rbenv-是ruby的版本管理器" class="headerlink" title="2.rbenv 是ruby的版本管理器"></a>2.rbenv 是ruby的版本管理器</h4><h4 id="3-Gem和bundle"><a href="#3-Gem和bundle" class="headerlink" title="3.Gem和bundle"></a>3.Gem和bundle</h4><p>gem与bundler是关于一个ruby项目的软件包依赖的, 它们是以一个ruby项目为中心的</p>
<p>项目的根目录会有一个Gemfile, 里面定义了该项目的软件包依赖的相关事项. 发现它默认是从rubygems.org这个网站获取内容的. 我想把源换成taobao.org. 可以修改Gemfile文件. 把source那一行改成: source ‘<a href="http://ruby.taobao.org/&#39;" target="_blank" rel="noopener external nofollow noreferrer">http://ruby.taobao.org/&#39;</a></p>
<p> bundle是用来管理维护项目的软件包的;</p>
<p> gem则是用来管理具体的每一个软件包的. </p>
<h6 id="bundler配置文件"><a href="#bundler配置文件" class="headerlink" title="bundler配置文件"></a>bundler配置文件</h6><p>项目特定配置文件, 放在项目根目录下的.bundle/config文件中.</p>
<p>全局的配置文件, 放在 ~/.bundle/config文件中.</p>
<p>我参考了这儿<a href="https://blog.csdn.net/zdq0394123/article/details/8075493" target="_blank" rel="noopener external nofollow noreferrer">他也不知道参考的谁</a></p>
<h4 id="4-Nginx和Passanger"><a href="#4-Nginx和Passanger" class="headerlink" title="4. Nginx和Passanger"></a>4. Nginx和Passanger</h4><h5 id="4-1-Nginx这个软件用来处理HTTP请求"><a href="#4-1-Nginx这个软件用来处理HTTP请求" class="headerlink" title="4.1 Nginx这个软件用来处理HTTP请求"></a>4.1 Nginx这个软件用来处理HTTP请求</h5><h5 id="4-2-Nginx接收到请求转手给Phusion-Passenger，用于部署"><a href="#4-2-Nginx接收到请求转手给Phusion-Passenger，用于部署" class="headerlink" title="4.2 Nginx接收到请求转手给Phusion Passenger，用于部署"></a>4.2 Nginx接收到请求转手给Phusion Passenger，用于部署</h5><h5 id="4-3-Passenger是Nginx集成的软件"><a href="#4-3-Passenger是Nginx集成的软件" class="headerlink" title="4.3 Passenger是Nginx集成的软件"></a>4.3 Passenger是Nginx集成的软件</h5><h5 id="4-4-修改配置文件告诉Nginx使用的是哪个版本的ruby"><a href="#4-4-修改配置文件告诉Nginx使用的是哪个版本的ruby" class="headerlink" title="4.4 修改配置文件告诉Nginx使用的是哪个版本的ruby"></a>4.4 修改配置文件告诉Nginx使用的是哪个版本的ruby</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo vim &#x2F;etc&#x2F;nginx&#x2F;conf.d&#x2F;mod-http-passenger.conf</span><br></pre></td></tr></table></figure>
<p>添加</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">passenger_ruby &#x2F;home&#x2F;my&#x2F;.rbenv&#x2F;shims&#x2F;ruby;</span><br></pre></td></tr></table></figure>
<p>注释掉这行</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">### passenger_ruby &#x2F;usr&#x2F;bin&#x2F;passenger_free_ruby; ###</span><br></pre></td></tr></table></figure>
<h4 id="5-Capistrano是一个用Ruby写的可以自动布署的软件"><a href="#5-Capistrano是一个用Ruby写的可以自动布署的软件" class="headerlink" title="5.Capistrano是一个用Ruby写的可以自动布署的软件"></a>5.Capistrano是一个用Ruby写的可以自动布署的软件</h4><p><a href="https://capistranorb.com/" target="_blank" rel="noopener external nofollow noreferrer">Capistrano</a></p>
<h4 id="6-Capistrano自动部署"><a href="#6-Capistrano自动部署" class="headerlink" title="6.Capistrano自动部署"></a>6.Capistrano自动部署</h4><h5 id="6-1新建rails项目"><a href="#6-1新建rails项目" class="headerlink" title="6.1新建rails项目"></a>6.1新建rails项目</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">rails new project-ruby -d mysql</span><br></pre></td></tr></table></figure>
<h5 id="6-2将项目加入版本管理系统"><a href="#6-2将项目加入版本管理系统" class="headerlink" title="6.2将项目加入版本管理系统"></a>6.2将项目加入版本管理系统</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cd project-ruby</span><br><span class="line">git init</span><br><span class="line">git add .</span><br><span class="line">git status</span><br><span class="line">git commit -m &quot;First Commit&quot;</span><br></pre></td></tr></table></figure>
<hr>
<h5 id="出现问题"><a href="#出现问题" class="headerlink" title="==出现问题=="></a>==出现问题==</h5><p>*** 请告诉我你是谁。</p>
<p>运行</p>
<p>  git config –global user.email “<a href="mailto:you@example.com" rel="external nofollow noreferrer">you@example.com</a>“<br>  git config –global user.name “Your Name”</p>
<p>来设置您账号的缺省身份标识。<br>如果仅在本仓库设置身份标识，则省略 –global 参数。</p>
<p>==解决：==</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git config --global user.email &quot;you@example.com&quot;</span><br></pre></td></tr></table></figure>
<p>==然后再==</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git commit -m &quot;First Commit&quot;</span><br></pre></td></tr></table></figure>
<hr>
<p>使用github存放代码，新建github仓库</p>
<p>新建仓库名：myWebSight</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git remote add origin git@github.com:zuahua&#x2F;myWebSite.git</span><br></pre></td></tr></table></figure>
<p>push 上去</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure>
<hr>
<p>==出现问题==<br>Warning: Permanently added ‘github.com,—‘ (RSA) to the list of known hosts.<br><a href="mailto:git@github.com" rel="external nofollow noreferrer">git@github.com</a>: Permission denied (publickey).<br>fatal: 无法读取远程仓库。</p>
<p>请确认您有正确的访问权限并且仓库存在。</p>
<p>==原因:本地机未与github建立ssh key==</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ssh-keygen -t rsa -C &quot;youremail@example.com&quot;</span><br></pre></td></tr></table></figure>
<p>将生成的id_rsa.pub中的内容复制到github的ssh中</p>
<p>这样github才能识别出你</p>
<hr>
<p>==再==<br>push 上去</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure>
<hr>
<p>没几天又重push时</p>
<p>error: 无法推送一些引用到 ‘git@github.com:zuahua/myWebSite.git’<br>提示：更新被拒绝，因为远程仓库包含您本地尚不存在的提交。这通常是因为另外<br>提示：一个仓库已向该引用进行了推送。再次推送前，您可能需要先整合远程变更</p>
<p>==强行push==</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git push -u origin +master</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="7-配置Gemfile"><a href="#7-配置Gemfile" class="headerlink" title="7.配置Gemfile"></a>7.配置Gemfile</h4><p>在rails项目文件夹内</p>
<p>打开Gemfile文件配置</p>
<p>在末尾加入</p>
<p>主要目的是安装这些Gem</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">vim Gemfile</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">  # Windows does not include zoneinfo files, so bundle the tzinfo-data gem</span><br><span class="line">  </span><br><span class="line">gem &#39;tzinfo&#39;,platforms: [:mingw, :mswin, :x64_mingw, :jruby]</span><br><span class="line">group :development do</span><br><span class="line">  gem &#39;capistrano&#39;, &#39;~&gt; 3.11&#39;</span><br><span class="line">  gem &#39;capistrano-rails&#39;, &#39;~&gt; 1.4&#39;</span><br><span class="line">  gem &#39;capistrano-passenger&#39;, &#39;~&gt; 0.2.0&#39;</span><br><span class="line">  gem &#39;capistrano-rbenv&#39;, &#39;~&gt; 2.1&#39;, &#39;&gt;&#x3D; 2.1.3&#39;</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<p>保存，退出后</p>
<p>bundle命令安装上面的gem</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">bundle</span><br><span class="line">bundle --binstubs</span><br></pre></td></tr></table></figure>
<p>然后再生成capistrano的配置文件</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cap install STAGES&#x3D;production</span><br></pre></td></tr></table></figure>
<p>结果与生成的文件如下</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mkdir -p config&#x2F;deploy</span><br><span class="line">create config&#x2F;deploy.rb</span><br><span class="line">create config&#x2F;deploy&#x2F;production.rb</span><br><span class="line">mkdir -p lib&#x2F;capistrano&#x2F;tasks</span><br><span class="line">create Capfile</span><br><span class="line">Capified</span><br></pre></td></tr></table></figure>
<h5 id="7-1生成了Capistrano这些配置文件以后，再对这些配置文件进行配置"><a href="#7-1生成了Capistrano这些配置文件以后，再对这些配置文件进行配置" class="headerlink" title="7.1生成了Capistrano这些配置文件以后，再对这些配置文件进行配置"></a>7.1生成了Capistrano这些配置文件以后，再对这些配置文件进行配置</h5><h6 id="7-1-1-deploy-rb"><a href="#7-1-1-deploy-rb" class="headerlink" title="7.1.1 deploy.rb"></a>7.1.1 deploy.rb</h6><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">vim config&#x2F;deploy.rb</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">######################################################这儿</span><br><span class="line">set :application, &quot;myWebSite&quot;</span><br><span class="line"></span><br><span class="line">set :repo_url, &quot;git@github.com:zuahua&#x2F;myWebSite.git&quot;</span><br><span class="line">########################################################</span><br><span class="line"></span><br><span class="line"># Default branch is :master</span><br><span class="line"># ask :branch, &#96;git rev-parse --abbrev-ref HEAD&#96;.chomp</span><br><span class="line">######################################################这儿</span><br><span class="line"># Default deploy_to directory is &#x2F;var&#x2F;www&#x2F;my_app_name</span><br><span class="line"># set :deploy_to, &quot;&#x2F;var&#x2F;www&#x2F;my_app_name&quot;</span><br><span class="line">set :deploy_to, &quot;&#x2F;home&#x2F;my&#x2F;myWebSite&quot;</span><br><span class="line">######################################################</span><br><span class="line"># Default value for :format is :airbrussh.</span><br><span class="line"># set :format, :airbrussh</span><br><span class="line"></span><br><span class="line"># You can configure the Airbrussh format using :format_options.</span><br><span class="line"># These are the defaults.</span><br><span class="line"># set :format_options, command_output: true, log_file: &quot;log&#x2F;capistrano.log&quot;, color: :auto, truncate: :auto</span><br><span class="line"></span><br><span class="line"># Default value for :pty is false</span><br><span class="line"># set :pty, true</span><br><span class="line">######################################################这儿</span><br><span class="line"># Default value for :linked_files is []</span><br><span class="line"># append :linked_files, &quot;config&#x2F;database.yml&quot;</span><br><span class="line">append :linked_files, &quot;config&#x2F;database.yml&quot;, &quot;config&#x2F;master.key&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># Default value for linked_dirs is []</span><br><span class="line"># append :linked_dirs, &quot;log&quot;, &quot;tmp&#x2F;pids&quot;, &quot;tmp&#x2F;cache&quot;, &quot;tmp&#x2F;sockets&quot;, &quot;public&#x2F;system&quot;</span><br><span class="line">append :linked_dirs, &quot;log&quot;, &quot;tmp&#x2F;pids&quot;, &quot;tmp&#x2F;cache&quot;, &quot;tmp&#x2F;sockets&quot;, &quot;vendor&#x2F;bundle&quot;, &quot;public&#x2F;system&quot;, &quot;public&#x2F;uploads&quot;</span><br><span class="line">######################################################</span><br></pre></td></tr></table></figure>
<h6 id="7-1-2-production-rb"><a href="#7-1-2-production-rb" class="headerlink" title="7.1.2 production.rb"></a>7.1.2 production.rb</h6><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">vim config&#x2F;deploy&#x2F;production.rb</span><br></pre></td></tr></table></figure>

<p>确定部署在哪儿</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">################################## 这儿</span><br><span class="line">server &#39;104.225.237.232&#39;, user: &#39;my&#39;, roles: %w&#123;app db web&#125;</span><br><span class="line">#################################</span><br><span class="line"># server-based syntax</span><br><span class="line"># &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</span><br><span class="line"># Defines a single server with a list of roles and multiple properties.</span><br><span class="line"># You can define all roles on a single server, or split them:</span><br><span class="line"></span><br><span class="line"># server &quot;example.com&quot;, user: &quot;deploy&quot;, roles: %w&#123;app db web&#125;, my_property: :my_value</span><br><span class="line"># server &quot;example.com&quot;, user: &quot;deploy&quot;, roles: %w&#123;app web&#125;, other_property: :other_value</span><br><span class="line"># server &quot;db.example.com&quot;, user: &quot;deploy&quot;, roles: %w&#123;db&#125;</span><br></pre></td></tr></table></figure>
<h6 id="7-2-3-Capfile"><a href="#7-2-3-Capfile" class="headerlink" title="7.2.3 Capfile"></a>7.2.3 Capfile</h6><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">vim Capfile</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># require &quot;capistrano&#x2F;rvm&quot;</span><br><span class="line"># require &quot;capistrano&#x2F;rbenv&quot;</span><br><span class="line"># require &quot;capistrano&#x2F;chruby&quot;</span><br><span class="line"># require &quot;capistrano&#x2F;bundler&quot;</span><br><span class="line"># require &quot;capistrano&#x2F;rails&#x2F;assets&quot;</span><br><span class="line"># require &quot;capistrano&#x2F;rails&#x2F;migrations&quot;</span><br><span class="line"># require &quot;capistrano&#x2F;passenger&quot;</span><br><span class="line">#########################################  这儿</span><br><span class="line">require &#39;capistrano&#x2F;rails&#39;</span><br><span class="line">require &#39;capistrano&#x2F;passenger&#39;</span><br><span class="line">require &#39;capistrano&#x2F;rbenv&#39;</span><br><span class="line">set :rbenv_type, :user</span><br><span class="line">set :rbenv_ruby, &#39;2.5.1&#39;</span><br><span class="line">#######################################</span><br><span class="line"># Load custom tasks from &#96;lib&#x2F;capistrano&#x2F;tasks&#96; if you have any defined</span><br><span class="line">Dir.glob(&quot;lib&#x2F;capistrano&#x2F;tasks&#x2F;*.rake&quot;).each &#123; |r| import r &#125;</span><br></pre></td></tr></table></figure>
<h4 id="8-在本地开发机上隐藏一些敏感信息"><a href="#8-在本地开发机上隐藏一些敏感信息" class="headerlink" title="8.在本地开发机上隐藏一些敏感信息"></a>8.在本地开发机上隐藏一些敏感信息</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">echo &quot;config&#x2F;database.yml&quot; &gt;&gt; .gitignore</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">vim .gitignore</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># Ignore bundler config.</span><br><span class="line">&#x2F;.bundle</span><br><span class="line">#####################################这儿</span><br><span class="line"># Ignore all logfiles and tempfiles.</span><br><span class="line">&#x2F;log&#x2F;*</span><br><span class="line">!&#x2F;log&#x2F;.keep</span><br><span class="line">&#x2F;tmp&#x2F;.keep</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># Ignore uploaded files in development.</span><br><span class="line">&#x2F;storage&#x2F;*</span><br><span class="line">!&#x2F;storage&#x2F;.keep</span><br><span class="line"></span><br><span class="line">&#x2F;node_modeles</span><br><span class="line">&#x2F;yarn-error.log</span><br><span class="line"></span><br><span class="line">&#x2F;public&#x2F;assets</span><br><span class="line">.byebug_history</span><br><span class="line"></span><br><span class="line"># Igore master key for decrypting credentials and more.</span><br><span class="line">config&#x2F;master.key</span><br><span class="line">config&#x2F;database.yml</span><br><span class="line">################################</span><br></pre></td></tr></table></figure>
<p>添加</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git add .gitignore</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git mv config&#x2F;database.yml config&#x2F;database.yml.sample</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git status</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git commit -m &quot;Only store sample database config&quot;</span><br><span class="line">cp config&#x2F;database.yml.sample config&#x2F;database.yml</span><br><span class="line">git add .</span><br><span class="line">git commit -m &quot;configure Capistrano&quot;</span><br><span class="line">git push</span><br></pre></td></tr></table></figure>
<p>push 上去</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git push</span><br></pre></td></tr></table></figure>
<h4 id="9-在本地机器上执行命令布署"><a href="#9-在本地机器上执行命令布署" class="headerlink" title="9.在本地机器上执行命令布署"></a>9.在本地机器上执行命令布署</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cap production deploy</span><br></pre></td></tr></table></figure>

<h5 id="9-1-问题"><a href="#9-1-问题" class="headerlink" title="9.1==问题=="></a>9.1==问题==</h5><p>服务器上找不到database.yml</p>
<p>/home/…/shared/config这个目录下，在建立的database.yml中输入如下内容</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">production:</span><br><span class="line">  adapter: mysql2</span><br><span class="line">  database: myWebSite</span><br><span class="line">  username: root</span><br><span class="line">  password: .......</span><br></pre></td></tr></table></figure>
<h6 id="9-2-服务器上找不到master-key文件"><a href="#9-2-服务器上找不到master-key文件" class="headerlink" title="9.2==服务器上找不到master.key文件=="></a>9.2==服务器上找不到master.key文件==</h6> <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">scp config&#x2F;master.key my@104.225.237.232:&#x2F;home&#x2F;my&#x2F;myWebSite&#x2F;shared&#x2F;config</span><br></pre></td></tr></table></figure>
<hr>
<p>==由于未知原因，本地config目录下也未自动生成master.key，因此出现问题==</p>
<p>之后将secrets.yml上传到服务器，修改deploy.rb配置文件中的Link:mater.key也替换成secrets.yml</p>
<p>并在.gitignore中添加了secrets.yml</p>
<hr>
<h5 id="9-3找不到JavaScript库"><a href="#9-3找不到JavaScript库" class="headerlink" title="9.3找不到JavaScript库"></a>9.3找不到JavaScript库</h5><p>服务器上安装</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo apt install nodejs</span><br></pre></td></tr></table></figure>
<h4 id="10配置Nginx"><a href="#10配置Nginx" class="headerlink" title="10配置Nginx"></a>10配置Nginx</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo vim &#x2F;etc&#x2F;nginx&#x2F;sites-enabled&#x2F;default ~&#x2F;default20181215</span><br><span class="line"># ~&#x2F;default20181215备份</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">        listen 80 default_server;</span><br><span class="line">        listen [::]:80 default_server;</span><br><span class="line"></span><br><span class="line">        server_name innohua.com;</span><br><span class="line">        passenger_enabled on;</span><br><span class="line">        rails_env    production;</span><br><span class="line">        root         &#x2F;home&#x2F;my&#x2F;myWebSite&#x2F;current&#x2F;public;</span><br><span class="line"></span><br><span class="line">        # redirect server error pages to the static page &#x2F;50x.html</span><br><span class="line">        error_page   500 502 503 504  &#x2F;50x.html;</span><br><span class="line">        location &#x3D; &#x2F;50x.html &#123;</span><br><span class="line">            root   html;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>重启</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo service nginx restart</span><br></pre></td></tr></table></figure>
<h4 id="11-部署测试"><a href="#11-部署测试" class="headerlink" title="11.部署测试"></a>11.部署测试</h4><p>本地机</p>
<p>建立数据库</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo mysql -u root -p</span><br><span class="line">create database myWebSite_development;</span><br><span class="line">exit</span><br></pre></td></tr></table></figure>
<hr>
<p>之后出现本地无法部署的情况<br>并且root@localhost被拒</p>
<p>可能是mysql未使用某个database和database.yml没配置好</p>
<p>之后在mysql新建了一个用户，并创建使用某个database,修改了database.yml配置文件，成功</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CREATE USER &#39;inno&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;password&#39;;</span><br><span class="line"># 所有权限都给inno</span><br><span class="line">GRANT ALL PRIVILEGES ON * . * TO &#39;inno&#39;@&#39;localhost&#39;;</span><br><span class="line">exit;</span><br><span class="line"></span><br><span class="line">mysql -u inno -p</span><br><span class="line">create database myWebSite_development4;</span><br><span class="line">use myWebSite_development4;</span><br><span class="line">exit</span><br></pre></td></tr></table></figure>

<hr>
<p>查看并修改database.yml</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">vim config&#x2F;database.yml</span><br></pre></td></tr></table></figure>
<hr>
<p>修改:主要修改了用户、密码、数据库名</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">default: &amp;default</span><br><span class="line">  adapter: mysql2</span><br><span class="line">  encoding: utf8</span><br><span class="line">  pool: 5</span><br><span class="line">  username: inno</span><br><span class="line">  password: mypassword</span><br><span class="line">  socket: &#x2F;var&#x2F;run&#x2F;mysqld&#x2F;mysqld.sock</span><br><span class="line"></span><br><span class="line">development:</span><br><span class="line">  &lt;&lt;: *default</span><br><span class="line">  # database: projectruby4_development</span><br><span class="line">  database: myWebSite_development4</span><br></pre></td></tr></table></figure>
<hr>
<p>建立小测试</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">rails g scaffold phone name</span><br></pre></td></tr></table></figure>
<p>查看路由</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">vim config&#x2F;routes.rb</span><br></pre></td></tr></table></figure>
<hr>
<p>==问题==<br>如果没有指向路由，添加</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">root to:&quot;phones#index&quot;</span><br></pre></td></tr></table></figure>
<hr>
<p>操作数据库</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># rails db:migrate是ruby5.0版本之后的</span><br><span class="line">rails db:migrate</span><br><span class="line"># 低版本 rake db:migrate</span><br></pre></td></tr></table></figure>



<p>查看</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">rails s</span><br></pre></td></tr></table></figure>
<p>可本地查看了</p>
<p>部署到网页</p>
<p>先推送到github</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git add .</span><br><span class="line">git status</span><br><span class="line">git commit -m &quot;text deploy&quot;</span><br><span class="line">git push</span><br></pre></td></tr></table></figure>
<p>部署</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cap production deploy</span><br></pre></td></tr></table></figure>
<hr>
<p>==错误==</p>
<p>出现phones表已存在</p>
<p>服务器端登录mysql;删掉自己创建的数据库中的phones表</p>
<p>再本地</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cap production deploy</span><br></pre></td></tr></table></figure>

<hr>
<hr>
<p>==问题==</p>
<p>部署后网页出现</p>
<p>==Incomplete response received from application==</p>
<p>运行</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">rake secret</span><br></pre></td></tr></table></figure>
<p>复制结果到</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">vim config&#x2F;secrets.yml</span><br></pre></td></tr></table></figure>
<p>production后的环境变量</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">secret_key_base: &lt;%&#x3D; ENV[&quot;SECRET_KEY_BASE&quot;] %&gt;</span><br></pre></td></tr></table></figure>
<p>替换冒号后的</p>
<p>将这个文件copy到服务器</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">scp config&#x2F;secrets.yml my@104.225.237.232:&#x2F;home&#x2F;my&#x2F;myWebSite&#x2F;shared&#x2F;config</span><br></pre></td></tr></table></figure>
<p>服务器端重启app</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">passenger-config restart-app</span><br></pre></td></tr></table></figure>

<hr>
<p>继续测试</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">vim app&#x2F;views&#x2F;phones&#x2F;index.html.erb</span><br></pre></td></tr></table></figure>
<p>更改标题为…后</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git status</span><br><span class="line">git add .</span><br><span class="line">git commit -m &quot;change of index.html.erb&quot;</span><br><span class="line">git push</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cap production deploy</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>RubyWeb建站</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP新建用户数据库和表</title>
    <url>/2019-07-31-php-mysql-create.html</url>
    <content><![CDATA[<p>环境说明: </p>
<ul>
<li>php7.0</li>
<li>apache2</li>
<li>以下代码均在<?php ?>标签中</li>
</ul>
<p>建库注意事项:</p>
<ul>
<li>数据库编码的设置</li>
<li>建表时引擎的设置</li>
</ul>
<a id="more"></a>

<h2 id="1-连接数据库"><a href="#1-连接数据库" class="headerlink" title="1.连接数据库"></a>1.连接数据库</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">$server = <span class="string">"xxx.xx.xxx.xxx"</span>;</span><br><span class="line">	$user = <span class="string">"xx"</span>;</span><br><span class="line">	$password = <span class="string">"xxxxxxx"</span>;</span><br><span class="line">	<span class="comment">// 连接数据库服务</span></span><br><span class="line">	$con = <span class="keyword">new</span> mysqli($server, $user, $password);</span><br><span class="line">	<span class="comment">// 判断连接状态</span></span><br><span class="line">	<span class="keyword">if</span>($con-&gt;connect_error)&#123;</span><br><span class="line">		<span class="keyword">die</span>(<span class="string">"数据库连接服务失败"</span> . $con-&gt;connect_error);</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		<span class="keyword">echo</span> <span class="string">"数据库连接服务成功"</span>;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-PHP新建数据库与表时设置编码"><a href="#2-PHP新建数据库与表时设置编码" class="headerlink" title="2.PHP新建数据库与表时设置编码"></a>2.PHP新建数据库与表时设置编码</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">   <span class="comment">// 创建数据库</span></span><br><span class="line">$sqlCdb = <span class="string">"CREATE DATABASE users CHARACTER SET 'utf8' COLLATE 'utf8_general_ci'"</span>;</span><br><span class="line"><span class="comment">// 判断创建结果</span></span><br><span class="line">$resultCdb =  $con-&gt;query($sqlCdb);</span><br><span class="line"><span class="keyword">if</span>($resultCdb === <span class="keyword">TRUE</span>)&#123;</span><br><span class="line">	<span class="keyword">echo</span> <span class="string">"数据库创建成功"</span>;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">	<span class="keyword">echo</span> <span class="string">"数据库创建失败"</span> . $con-&gt;error;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 连接新建数据库</span></span><br><span class="line">$con-&gt;select_db(<span class="string">'users'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建表</span></span><br><span class="line">$sqlCt = <span class="string">"CREATE TABLE user(</span></span><br><span class="line"><span class="string">	id INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY,</span></span><br><span class="line"><span class="string">	username VARCHAR(30) NOT NULL,</span></span><br><span class="line"><span class="string">	password VARCHAR(60) NOT NULL) ENGINE=InnoDB DEFAULT CHARSET=utf8"</span>;</span><br><span class="line"><span class="comment">// 判断建表结果</span></span><br><span class="line">$resultCt = $con-&gt;query($sqlCt);</span><br><span class="line"><span class="keyword">if</span>($resultCt === <span class="keyword">TRUE</span>)&#123;</span><br><span class="line">	<span class="keyword">echo</span> <span class="string">"&lt;br&gt;"</span> . <span class="string">"建表成功"</span>;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">	<span class="keyword">echo</span> <span class="string">"建表失败"</span> . $con-&gt;error;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>php连接mysql</tag>
        <tag>php</tag>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP中password_hash()密码加密</title>
    <url>/2019-07-31-php-password-hash.html</url>
    <content><![CDATA[<h2 id="PHP对登陆密码加密的方法"><a href="#PHP对登陆密码加密的方法" class="headerlink" title="PHP对登陆密码加密的方法"></a>PHP对登陆密码加密的方法</h2><p>环境说明：</p>
<ul>
<li>php7.0</li>
<li>apache2</li>
<li><?php 代码 ?>

</li>
</ul>
<p>加密方法:</p>
<blockquote>
<ul>
<li>password_hash ($password, PASSWORD_BCRYPT, $options)</li>
<li>$password 需要加密的密码</li>
<li>PASSWORD_BCRYPT 加密方式</li>
<li>$options 可用于设置cost值和 salt值</li>
</ul>
</blockquote>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">//例:</span></span><br><span class="line">$options = [</span><br><span class="line">        <span class="string">'cost'</span> =&gt; <span class="number">11</span>,</span><br><span class="line">    ];</span><br></pre></td></tr></table></figure>

<p>验证哈希值与密码是否匹配</p>
<ul>
<li>password_verify($password, $hash)</li>
<li>参数为密码和加密后的哈希值</li>
</ul>
<a id="more"></a>

<h3 id="1-查看服务器在不拖慢速度的最高cost值"><a href="#1-查看服务器在不拖慢速度的最高cost值" class="headerlink" title="1. 查看服务器在不拖慢速度的最高cost值"></a>1. 查看服务器在不拖慢速度的最高cost值</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">//测试机器能够达到的最高cost</span></span><br><span class="line">	$time = <span class="number">0.1</span>; <span class="comment">// 100毫秒</span></span><br><span class="line">	$cost = <span class="number">8</span>;</span><br><span class="line">	<span class="keyword">do</span>&#123;</span><br><span class="line">		$cost++;</span><br><span class="line">		$start = microtime(<span class="keyword">true</span>);</span><br><span class="line">		password_hash($password, PASSWORD_BCRYPT, [<span class="string">'cost'</span> =&gt; $cost]);</span><br><span class="line">		$end = microtime(<span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line">	&#125;<span class="keyword">while</span>(($end - $start) &lt; $time);</span><br></pre></td></tr></table></figure>
<h3 id="2-加密与验证加密后的哈希值与密码是否匹配"><a href="#2-加密与验证加密后的哈希值与密码是否匹配" class="headerlink" title="2. 加密与验证加密后的哈希值与密码是否匹配"></a>2. 加密与验证加密后的哈希值与密码是否匹配</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">   <span class="comment">// 加密</span></span><br><span class="line">$hash = password_hash($password, PASSWORD_BCRYPT, [<span class="string">"cost"</span> =&gt; <span class="number">11</span>]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">"$hash"</span> . <span class="string">"&lt;br/&gt;"</span>;</span><br><span class="line"><span class="comment">// 验证</span></span><br><span class="line"><span class="keyword">if</span>(password_verify($password, $hash))&#123;</span><br><span class="line">	<span class="keyword">echo</span> <span class="string">"匹配"</span>;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">	<span class="keyword">echo</span> <span class="string">"不匹配"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <tags>
        <tag>php</tag>
        <tag>php密码加密</tag>
      </tags>
  </entry>
  <entry>
    <title>php+Apache+mysql用户登录系统(1)</title>
    <url>/2019-08-01-php-apache-mysql-uls-1-yong-hu-deng-lu-xi-tong.html</url>
    <content><![CDATA[<p>php+Apache+mysql用户登录系统</p>
<p>说明:</p>
<ul>
<li>php7.0</li>
<li>apache2</li>
<li>数据库设计主键id为自动递增，插入数据时才能不手动插入id主键</li>
</ul>
<p>文件树:</p>
<ul>
<li>register.html注册</li>
<li>register.php</li>
<li>login.html登陆</li>
<li>login.php</li>
</ul>
<p>下篇文章:</p>
<p><a href="https://inno-hua.xyz/2019/07/31/php-password_hash().html" target="_blank" rel="noopener external nofollow noreferrer">PHP中password_hash()密码加密</a></p>
<a id="more"></a>

<h3 id="简单版用户登陆系统"><a href="#简单版用户登陆系统" class="headerlink" title="简单版用户登陆系统"></a>简单版用户登陆系统</h3><p>实现:</p>
<ul>
<li>简单注册登陆</li>
</ul>
<p>未考虑:</p>
<ul>
<li>验证方式</li>
<li>安全性等等</li>
</ul>
<h3 id="1-创建数据库及添加表"><a href="#1-创建数据库及添加表" class="headerlink" title="1.创建数据库及添加表"></a>1.创建数据库及添加表</h3><p>以前文章：</p>
<p><a href="https://inno-hua.xyz/2019-07-31-ubuntu-php-mysql.html" target="_blank" rel="noopener external nofollow noreferrer">PHP新建用户数据库和表</a></p>
<h3 id="2-注册页面register-html"><a href="#2-注册页面register-html" class="headerlink" title="2.注册页面register.html"></a>2.注册页面register.html</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!doctype <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>用户注册页面<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>---------^-^注册啦^_^----------<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"register.php"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>用户名:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"name"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>密  码: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"password"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">name</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"注册"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-注册register-php"><a href="#3-注册register-php" class="headerlink" title="3.注册register.php"></a>3.注册register.php</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">	header(<span class="string">"Content-Type: text/html; charset=utf8"</span>);</span><br><span class="line">	<span class="comment">// 判断是否有submit操作</span></span><br><span class="line">	<span class="keyword">if</span>(!<span class="keyword">isset</span>($_POST[<span class="string">'submit'</span>]))&#123;</span><br><span class="line">		<span class="keyword">exit</span>(<span class="string">"错误"</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	$servername = <span class="string">"localhost"</span>;</span><br><span class="line">	$user = <span class="string">"root"</span>;</span><br><span class="line">	$password = <span class="string">""</span>;</span><br><span class="line">	$dbname = <span class="string">"users"</span>;</span><br><span class="line">	<span class="comment">// 连接</span></span><br><span class="line">	$conn = <span class="keyword">new</span> mysqli($servername, $user, $password, $dbname);</span><br><span class="line">	<span class="keyword">if</span>($conn-&gt;connect_error)&#123;</span><br><span class="line">		<span class="keyword">die</span>(<span class="string">"连接失败"</span> . $conn-&gt;connect_error);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 注意varchar型变量加引号</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 获取注册的name和password</span></span><br><span class="line">	$name = $_POST[<span class="string">'name'</span>];</span><br><span class="line">	$pwd = $_POST[<span class="string">'password'</span>];</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span>($name &amp;&amp; $pwd)&#123;<span class="comment">// 如果用户名和密码都不为空</span></span><br><span class="line">		$sql = <span class="string">"INSERT INTO user(username, password) VALUES('$name', $pwd)"</span>;</span><br><span class="line">		$result = $conn-&gt;query($sql);</span><br><span class="line">		<span class="keyword">if</span>($result === <span class="keyword">TRUE</span>)&#123;</span><br><span class="line">			<span class="comment">//echo "新纪录插入成功";</span></span><br><span class="line">			<span class="keyword">echo</span> <span class="string">"注册成功"</span>;</span><br><span class="line">			<span class="comment">// 跳去登录页面</span></span><br><span class="line">			<span class="comment">// 使用的是url</span></span><br><span class="line">			header(<span class="string">"refresh:0;url='login.html'"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="keyword">echo</span> <span class="string">"注册失败"</span> . <span class="string">"&lt;br&gt;"</span> . $conn-&gt;error;</span><br><span class="line">			<span class="comment">// 注册失败回到注册页面</span></span><br><span class="line">			<span class="keyword">echo</span> <span class="string">"&lt;script&gt;</span></span><br><span class="line"><span class="string">				window.location.href='register.html'</span></span><br><span class="line"><span class="string">			&lt;/script&gt;"</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	$conn-&gt;close();</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;<span class="comment">// 用户名或密码有空</span></span><br><span class="line">		<span class="keyword">echo</span> <span class="string">"&lt;script&gt;</span></span><br><span class="line"><span class="string">			alert('用户名或密码不能为空')</span></span><br><span class="line"><span class="string">			window.location.href='register.html'</span></span><br><span class="line"><span class="string">		&lt;/script&gt;"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="4-登陆页面login"><a href="#4-登陆页面login" class="headerlink" title="4.登陆页面login"></a>4.登陆页面login</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!doctype <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>用户登录页面<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>-------:)登录吧(:-------<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"login.php"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>用户名:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"name"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>密  码: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"password"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">name</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"登录"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="5-登陆login-php"><a href="#5-登陆login-php" class="headerlink" title="5.登陆login.php"></a>5.登陆login.php</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 判断是否提交submit</span></span><br><span class="line">	<span class="keyword">if</span>(!<span class="keyword">isset</span>($_POST[<span class="string">'submit'</span>]))&#123;</span><br><span class="line">		<span class="keyword">exit</span>(<span class="string">"错误，未提交登录信息"</span>);</span><br><span class="line">	&#125; </span><br><span class="line">	$server = <span class="string">"localhost"</span>;</span><br><span class="line">	$user = <span class="string">"root"</span>;</span><br><span class="line">	$password = <span class="string">""</span>;</span><br><span class="line">	$dbname = <span class="string">"users"</span>;</span><br><span class="line">	<span class="comment">// 连接数据库</span></span><br><span class="line">	$con = <span class="keyword">new</span> mysqli($server, $user, $password, $dbname);</span><br><span class="line">	<span class="keyword">if</span>($con-&gt;connect_error)&#123;</span><br><span class="line">		<span class="keyword">die</span>(<span class="string">"连接数据库失败"</span> . $con-&gt;connect_error);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 判断数据库中是否存在用户信息</span></span><br><span class="line">	$username = $_POST[<span class="string">'name'</span>];</span><br><span class="line">	$pwd = $_POST[<span class="string">'password'</span>];</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 判断提交数据书否为空</span></span><br><span class="line">	<span class="keyword">if</span>($username &amp;&amp; $pwd)&#123; <span class="comment">//如果用户名和密码都不为空</span></span><br><span class="line">		<span class="comment">// 查询语句</span></span><br><span class="line">		$sql = <span class="string">"SELECT * FROM user where username='$username' and password='$pwd'"</span>;</span><br><span class="line">		<span class="comment">// 执行语句</span></span><br><span class="line">		$result = $con-&gt;query($sql);</span><br><span class="line">		<span class="comment">// 获取返回的行数</span></span><br><span class="line">		$num_row = $result-&gt;num_rows;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">if</span>($num_row == <span class="number">1</span>)&#123;<span class="comment">// 如果返回了一条数据</span></span><br><span class="line">			<span class="keyword">echo</span> <span class="string">"登录成功"</span>;</span><br><span class="line">			<span class="comment">// 跳转页面到wekcome.html</span></span><br><span class="line">			header(<span class="string">"refresh:0; url=welcome.html"</span>);</span><br><span class="line">		&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">			</span><br><span class="line">			<span class="keyword">echo</span> <span class="string">"&lt;script&gt;</span></span><br><span class="line"><span class="string">				alert('用户名或密码错误')</span></span><br><span class="line"><span class="string">				window.location.href = 'login.html'</span></span><br><span class="line"><span class="string">			&lt;/script&gt;"</span>;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;<span class="comment">// 用户名或密码有空</span></span><br><span class="line">		<span class="keyword">echo</span> <span class="string">"&lt;script&gt;</span></span><br><span class="line"><span class="string">			alert('用户名或密码不能为空')</span></span><br><span class="line"><span class="string">			window.location.href='login.html'</span></span><br><span class="line"><span class="string">		&lt;/script&gt;"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>php</tag>
        <tag>mysql</tag>
        <tag>apache</tag>
        <tag>用户登陆系统</tag>
      </tags>
  </entry>
  <entry>
    <title>ubuntu16.04, Apache+PHP+Mysql安装与卸载</title>
    <url>/2019-07-31-ubuntu-php-mysql.html</url>
    <content><![CDATA[<p>ubuntu16.04, Apache+PHP+Mysql的安装与卸载</p>
<p>说明:</p>
<ul>
<li>Apache2</li>
<li>php7.0</li>
<li>参考<a href="https://blog.csdn.net/wy_97/article/details/78045541" target="_blank" rel="noopener external nofollow noreferrer">阿里云ubuntu16.04实测配置【php+mysql+apache】</a></li>
<li>参考<a href="https://blog.csdn.net/heijinkuiba/article/details/78212728" target="_blank" rel="noopener external nofollow noreferrer">Ubuntu 16.04 下卸载 lnmp/lamp 方法</a></li>
</ul>
<p>注意事项:</p>
<ul>
<li>避免出现phpinfo();没有mysqli扩展</li>
</ul>
<a id="more"></a>

<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><ol>
<li>更新apt</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">apt-get update</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>安装apache</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">apt install apache2</span><br></pre></td></tr></table></figure>
<p>浏览器上输入localhost或服务器ip</p>
<p>出现apache首页</p>
<ol start="3">
<li>安装php7</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">apt install php7.0</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>整合一下php和apache，安装插件</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">apt install libapache2-mod-php7.0</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>安装MySQL</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">apt-get install mysql-server</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 检查端口是否为监听状态</span><br><span class="line">&#x2F;&#x2F; mysql 的socket处于 listen 状态则表示安装成功</span><br><span class="line">etstat -tap | grep mysql</span><br></pre></td></tr></table></figure>


<ol start="6">
<li><b>整合一下php和mysql</b></li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">apt-get install php7.0-mysql</span><br></pre></td></tr></table></figure>

<h3 id="卸载"><a href="#卸载" class="headerlink" title="卸载"></a>卸载</h3><ol>
<li>卸载apache2<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo apt-get --purge remove apache2*</span><br><span class="line">sudo apt-get autoremove apache2</span><br><span class="line">(--purge 是完全删除并且不保留配置文件）</span><br></pre></td></tr></table></figure></li>
<li>卸载php7.0</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">apt-get --purge remove php7.0*</span><br><span class="line">sudo apt-get autoremove php7.0*</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>卸载mysql</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo apt-get --purge remove mysql*</span><br><span class="line">sudo apt-get autoremove mysql*</span><br><span class="line"> </span><br><span class="line">## 最后清理残留文件：</span><br><span class="line">dpkg -l |grep ^rc|awk ’&#123;print $2&#125;’ |sudo xargs dpkg -P</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>php</tag>
        <tag>mysql</tag>
        <tag>ubuntu-php-mysql</tag>
        <tag>ubuntu</tag>
      </tags>
  </entry>
  <entry>
    <title>浏览器中session的使用，保存登陆状态与注销登陆</title>
    <url>/2019-08-02-session-brower.html</url>
    <content><![CDATA[<h2 id="浏览器中session的使用，保存登陆状态与注销登陆"><a href="#浏览器中session的使用，保存登陆状态与注销登陆" class="headerlink" title="浏览器中session的使用，保存登陆状态与注销登陆"></a>浏览器中session的使用，保存登陆状态与注销登陆</h2><p>说明:</p>
<ul>
<li>apache2</li>
<li>php7</li>
<li>代码在<?php ?>标签内</li>
</ul>
<p>上篇文章:</p>
<p><a href="https://inno-hua.xyz/2019/07/31/php-password_hash().html" target="_blank" rel="noopener external nofollow noreferrer">PHP中password_hash()密码加密</a></p>
<a id="more"></a>

<h3 id="1-保存登陆状态"><a href="#1-保存登陆状态" class="headerlink" title="1. 保存登陆状态"></a>1. 保存登陆状态</h3><ul>
<li>网页提交表单包含name=’username’</li>
</ul>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// post获取用户名</span></span><br><span class="line">$username = $_POST[<span class="string">'username'</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用session保存密码</span></span><br><span class="line">session_start();</span><br><span class="line">$_SESSION[<span class="string">'username'</span>] = $username;</span><br></pre></td></tr></table></figure>

<h3 id="2-用户登出后销毁状态"><a href="#2-用户登出后销毁状态" class="headerlink" title="2.用户登出后销毁状态"></a>2.用户登出后销毁状态</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">session_start();</span><br><span class="line"><span class="keyword">unset</span>($_SESSION[<span class="string">'username'</span>]);</span><br></pre></td></tr></table></figure>

<h3 id="3-在用户登陆后指向另一页面判断是否为登陆状态"><a href="#3-在用户登陆后指向另一页面判断是否为登陆状态" class="headerlink" title="3.在用户登陆后指向另一页面判断是否为登陆状态"></a>3.在用户登陆后指向另一页面判断是否为登陆状态</h3><ul>
<li>只有在登录状态才能打开此页面welcome.php</li>
</ul>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 判断是否为登陆状态</span></span><br><span class="line">session_start();</span><br><span class="line"><span class="keyword">if</span>(!$_SESSION[<span class="string">'username'</span>])&#123;<span class="comment">//未登陆</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"你没登陆"</span>;</span><br><span class="line">    <span class="keyword">exit</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 可以把保存的session值赋值给变量</span></span><br><span class="line">$username = $_SESSION[<span class="string">'username'</span>];</span><br></pre></td></tr></table></figure>
<h3 id="4-使用session判断登录状态与登出状态"><a href="#4-使用session判断登录状态与登出状态" class="headerlink" title="4.使用session判断登录状态与登出状态"></a>4.使用session判断登录状态与登出状态</h3><ul>
<li>welcome.php</li>
<li>通过链接welcome.php?action=logout来注销</li>
</ul>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line">	session_start();</span><br><span class="line">	<span class="keyword">if</span>(!<span class="keyword">isset</span>($_SESSION[<span class="string">'username'</span>]))&#123;<span class="comment">//判断登录状态</span></span><br><span class="line">		<span class="keyword">echo</span> <span class="string">"你还未登陆"</span>;</span><br><span class="line">		<span class="keyword">echo</span> <span class="string">"&lt;br/&gt;"</span> . <span class="string">"&lt;a href='login.html'&gt;登陆&lt;/a&gt;"</span>;</span><br><span class="line">		<span class="keyword">exit</span>();</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;<span class="comment">// 已登录状态</span></span><br><span class="line">		$username = $_SESSION[<span class="string">'username'</span>];</span><br><span class="line">		<span class="keyword">echo</span> <span class="string">"&lt;title&gt;登陆成功&lt;/title&gt;"</span>;</span><br><span class="line">		<span class="keyword">echo</span> <span class="string">"&lt;h3&gt;登陆成功&lt;/h3&gt;"</span> . <span class="string">"$username"</span> . <span class="string">" 欢迎你！"</span>;</span><br><span class="line">		<span class="keyword">echo</span> <span class="string">'点击此处 &lt;a href="welcome.php?action=logout"&gt;注销&lt;/a&gt;&lt;br /&gt;'</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>($_GET[<span class="string">'action'</span>] == <span class="string">"logout"</span>)&#123;<span class="comment">// 判断注销状态</span></span><br><span class="line">		session_start();</span><br><span class="line">		<span class="keyword">unset</span>($_SESSION[<span class="string">'username'</span>]);</span><br><span class="line">		<span class="keyword">echo</span> <span class="string">'注销登录成功！'</span>;</span><br><span class="line">		<span class="keyword">echo</span> <span class="string">"&lt;script&gt;</span></span><br><span class="line"><span class="string">		window.location.href = 'login.html';</span></span><br><span class="line"><span class="string">	&lt;/script&gt;"</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">exit</span>();</span><br><span class="line">	&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>php</tag>
        <tag>浏览器session</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaScript学习实例(2)</title>
    <url>/2019-08-04-javascript-xue-xi-shi-li-2.html</url>
    <content><![CDATA[<h2 id="JavaScript学习实例-2"><a href="#JavaScript学习实例-2" class="headerlink" title="JavaScript学习实例(2)"></a>JavaScript学习实例(2)</h2><p>参考：<a href="http://www.runoob.com/" target="_blank" rel="noopener external nofollow noreferrer">菜鸟教程</a></p>
<p>环境:</p>
<ul>
<li>html</li>
<li>代码为主要部分</li>
</ul>
<p>内容包括:</p>
<ul>
<li>JS函数、闭包,计数器</li>
<li>for (… in …){}遍历</li>
<li>onmouse事件</li>
<li>try{}catch(err){}捕获异常</li>
</ul>
<a id="more"></a>

<h3 id="1-JS函数、闭包"><a href="#1-JS函数、闭包" class="headerlink" title="1. JS函数、闭包"></a>1. JS函数、闭包</h3><ul>
<li>点击按钮，调用计数器</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">onclick</span>=<span class="string">"fun()"</span>&gt;</span>点击计数<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"text"</span>&gt;</span>0<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">var</span> add = (<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">var</span> counter = <span class="number">0</span>;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;<span class="keyword">return</span> counter += <span class="number">1</span>;&#125;</span></span><br><span class="line">        &#125;)();</span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="function"><span class="keyword">function</span> <span class="title">fun</span><span class="params">()</span></span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">document</span>.getElementById(<span class="string">"text"</span>).innerHTML=add();</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-for-…-in-…-遍历"><a href="#2-for-…-in-…-遍历" class="headerlink" title="2. for (… in …){}遍历"></a>2. for (… in …){}遍历</h3><ul>
<li>遍历一个对象</li>
<li>输出属性</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">onclick</span>=<span class="string">"fun()"</span>&gt;</span>点击运行<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"text"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">var</span> txt = <span class="string">""</span>;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">var</span> person = &#123;</span></span><br><span class="line"><span class="actionscript">            fname:<span class="string">"C"</span>,</span></span><br><span class="line"><span class="actionscript">            lname:<span class="string">"xk"</span>,</span></span><br><span class="line"><span class="actionscript">            like:<span class="string">"sing, jump, rap and basketaball"</span>,</span></span><br><span class="line">        &#125;;</span><br><span class="line"><span class="actionscript">        <span class="comment">// for (... in ...)遍历</span></span></span><br><span class="line"><span class="actionscript">        <span class="function"><span class="keyword">function</span> <span class="title">fun</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line">            for (x in person) &#123;</span><br><span class="line">                txt = txt + person[x];</span><br><span class="line">            &#125;</span><br><span class="line"><span class="javascript">            <span class="built_in">document</span>.getElementById(<span class="string">"text"</span>).innerHTML=txt;</span></span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-onmouse事件"><a href="#3-onmouse事件" class="headerlink" title="3. onmouse事件"></a>3. onmouse事件</h3><ul>
<li>onmouseover()</li>
<li>onmouseout()</li>
<li>…</li>
<li>鼠标移动到此区域和移出此区域的不同显示</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>JavaScript测试<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">    <span class="selector-id">#block1</span>&#123;</span></span><br><span class="line">        width: 50px;</span><br><span class="line">        height: 50px;</span><br><span class="line">        background-color: green;</span><br><span class="line">        color: aliceblue;</span><br><span class="line">        text-align: center;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-id">#block2</span>&#123;</span></span><br><span class="line">        </span><br><span class="line">        width: 50px;</span><br><span class="line">        height: 50px;</span><br><span class="line">        background-color: aqua;</span><br><span class="line">        color: black;</span><br><span class="line">        text-align: center;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"block1"</span> <span class="attr">onmouseover</span>=<span class="string">"Mover(this)"</span> <span class="attr">onmouseout</span>=<span class="string">"Mout(this)"</span>&gt;</span>区域1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">            <span class="function"><span class="keyword">function</span> <span class="title">Mover</span> <span class="params">(Obj)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">                Obj.innerHTML=<span class="string">"鼠标在上"</span>;</span></span><br><span class="line">            &#125;</span><br><span class="line"><span class="actionscript">            <span class="function"><span class="keyword">function</span> <span class="title">Mout</span> <span class="params">(Obj)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">                Obj.innerHTML=<span class="string">"鼠标不在上"</span>;</span></span><br><span class="line">            &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="4-try-catch-err-捕获异常"><a href="#4-try-catch-err-捕获异常" class="headerlink" title="4. try{}catch(err){}捕获异常"></a>4. try{}catch(err){}捕获异常</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"text"</span> <span class="attr">onclick</span>=<span class="string">"fun()"</span>&gt;</span>点击显示错误信息<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">            <span class="function"><span class="keyword">function</span> <span class="title">fun</span><span class="params">()</span></span>&#123;</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">try</span>&#123;</span></span><br><span class="line"><span class="actionscript">                    allert(<span class="string">"错误语句"</span>);</span></span><br><span class="line"><span class="actionscript">                &#125;<span class="keyword">catch</span>(err)&#123;</span></span><br><span class="line">                    alert(err.message);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaScript学习实例(1)</title>
    <url>/2019-08-03-javascript-xue-xi-shi-li-1.html</url>
    <content><![CDATA[<h2 id="JavaScript学习实例-1"><a href="#JavaScript学习实例-1" class="headerlink" title="JavaScript学习实例(1)"></a>JavaScript学习实例(1)</h2><p>环境:</p>
<ul>
<li>html</li>
<li>代码为主要部分</li>
</ul>
<p>内容包括:</p>
<ul>
<li>基础JavaScript实例</li>
</ul>
<ol>
<li>文本输出</li>
<li>用JavaScript改变HTML元素</li>
<li>html引用外部JavaScript</li>
<li>实例: 点击按钮改变html</li>
</ol>
<ul>
<li>JavaScript变量 与 if…else</li>
</ul>
<ol start="5">
<li>实例: 为html创建一个随机的链接</li>
</ol>
<ul>
<li>JavaScript 弹出框</li>
</ul>
<ol start="6">
<li>警告框</li>
<li>确认框</li>
<li>提示框</li>
</ol>
<a id="more"></a>

<h3 id="基础JavaScript实例"><a href="#基础JavaScript实例" class="headerlink" title="基础JavaScript实例"></a>基础JavaScript实例</h3><h4 id="1-文本输出"><a href="#1-文本输出" class="headerlink" title="1. 文本输出"></a>1. 文本输出</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">        <span class="built_in">document</span>.write(<span class="built_in">Date</span>());</span><br><span class="line">        <span class="built_in">document</span>.write(<span class="string">"测试"</span>)    </span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="2-用JavaScript改变HTML元素"><a href="#2-用JavaScript改变HTML元素" class="headerlink" title="2. 用JavaScript改变HTML元素"></a>2. 用JavaScript改变HTML元素</h4><ul>
<li>获取 id 的标签</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;h3 id&#x3D;&quot;text&quot;&gt;h3&lt;&#x2F;h3&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">        document.getElementById(&quot;text&quot;).innerHTML&#x3D;&quot;CCC&quot;;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="3-html引用外部JavaScript"><a href="#3-html引用外部JavaScript" class="headerlink" title="3. html引用外部JavaScript"></a>3. html引用外部JavaScript</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;script src=<span class="string">"file.js"</span>&gt;&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="4-实例-点击按钮改变html"><a href="#4-实例-点击按钮改变html" class="headerlink" title="4. 实例: 点击按钮改变html"></a>4. 实例: 点击按钮改变html</h4><ul>
<li>构造js函数</li>
<li>button中onclick=”fun()”调用</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>JavaScript<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">        <span class="function"><span class="keyword">function</span> <span class="title">fun</span><span class="params">()</span></span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">document</span>.getElementById(<span class="string">"text"</span>).innerHTML=<span class="string">"改变"</span>;</span></span><br><span class="line"><span class="handlebars"><span class="xml">            document.write("<span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>加粗<span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span>")</span></span></span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span> <span class="attr">id</span>=<span class="string">"text"</span>&gt;</span>标题:h3<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">onclick</span>=<span class="string">"fun()"</span>&gt;</span>点击改变<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="JavaScript变量-与-if…else"><a href="#JavaScript变量-与-if…else" class="headerlink" title="JavaScript变量 与 if…else"></a>JavaScript变量 与 if…else</h3><h4 id="5-实例-为html创建一个随机的链接"><a href="#5-实例-为html创建一个随机的链接" class="headerlink" title="5. 实例: 为html创建一个随机的链接"></a>5. 实例: 为html创建一个随机的链接</h4><ul>
<li>var x = Math.random();定义随机数变量 </li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>JavaScript<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"text"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> x = <span class="built_in">Math</span>.random();</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> r = <span class="built_in">document</span>.getElementById(<span class="string">"text"</span>);</span></span><br><span class="line">        if (x &gt; 0.5) &#123;</span><br><span class="line"><span class="handlebars"><span class="xml">            r.innerHTML="<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">'http://www.baidu.com'</span>&gt;</span>百度<span class="tag">&lt;/<span class="name">a</span>&gt;</span>";</span></span></span><br><span class="line"><span class="actionscript">        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="handlebars"><span class="xml">            r.innerHTML="<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">'http://www.google.com'</span>&gt;</span>谷歌<span class="tag">&lt;/<span class="name">a</span>&gt;</span>";</span></span></span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="JavaScript-弹出框"><a href="#JavaScript-弹出框" class="headerlink" title="JavaScript 弹出框"></a>JavaScript 弹出框</h3><h4 id="6-警告框"><a href="#6-警告框" class="headerlink" title="6. 警告框"></a>6. 警告框</h4><ul>
<li>alert()</li>
<li>\n 换行</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">"fun()"</span>&gt;</span>点击<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">        <span class="function"><span class="keyword">function</span> <span class="title">fun</span><span class="params">()</span></span>&#123;</span></span><br><span class="line"><span class="actionscript">            alert(<span class="string">"警告框\n换行"</span>);</span></span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="7-确认框"><a href="#7-确认框" class="headerlink" title="7. 确认框"></a>7. 确认框</h4><ul>
<li>confirm()</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">"fun()"</span>&gt;</span>点击<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"text"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">        <span class="function"><span class="keyword">function</span> <span class="title">fun</span><span class="params">()</span></span>&#123;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">var</span> x = confirm(<span class="string">"点击确认"</span>);</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">if</span> (x==<span class="literal">true</span>) &#123;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">document</span>.getElementById(<span class="string">"text"</span>).innerHTML=<span class="string">"点击了确认"</span>;</span></span><br><span class="line"><span class="actionscript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">document</span>.getElementById(<span class="string">"text"</span>).innerHTML=<span class="string">"点击了取消"</span>;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="8-提示框"><a href="#8-提示框" class="headerlink" title="8. 提示框"></a>8. 提示框</h4><ul>
<li>prompt()</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">"fun()"</span>&gt;</span>点击<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"text"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">var</span> t;</span></span><br><span class="line"><span class="actionscript">        <span class="function"><span class="keyword">function</span> <span class="title">fun</span><span class="params">()</span></span>&#123;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">var</span> x = prompt(<span class="string">"输入名字"</span>, <span class="string">"inno"</span>);</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">if</span> (x != <span class="literal">null</span> &amp;&amp; x != <span class="string">""</span>) &#123;</span></span><br><span class="line"><span class="actionscript">                t = <span class="string">"你好"</span> + x;</span></span><br><span class="line">            &#125;</span><br><span class="line"><span class="javascript">            <span class="built_in">document</span>.getElementById(<span class="string">"text"</span>).innerHTML=t;</span></span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaScript学习实例(3)</title>
    <url>/2019-08-05-javascript-xue-xi-shi-li-3.html</url>
    <content><![CDATA[<h2 id="高级JavaScript实例"><a href="#高级JavaScript实例" class="headerlink" title="高级JavaScript实例"></a>高级JavaScript实例</h2><p>参考：<a href="http://www.runoob.com/js/js-examples.html" target="_blank" rel="noopener external nofollow noreferrer">菜鸟教程</a></p>
<p>环境:</p>
<ul>
<li>html</li>
<li>代码为主要部分</li>
</ul>
<p>内容包括:</p>
<ul>
<li>Cookie保存用户信息</li>
<li>简单的计时</li>
<li>无限循环的计时</li>
<li>创建用于对象的模版</li>
</ul>
<a id="more"></a>

<h3 id="1-Cookie保存用户信息"><a href="#1-Cookie保存用户信息" class="headerlink" title="1.  Cookie保存用户信息"></a>1.  Cookie保存用户信息</h3><ul>
<li>首次刷新网页时,prompt()提示框输入名字</li>
<li>之后刷新网页, alert()弹出欢迎字样</li>
<li>apache本地环境</li>
<li><a href="http://www.runoob.com/js/js-cookies.html" target="_blank" rel="noopener external nofollow noreferrer">参考</a></li>
<li>Cookie格式: document.cookie=”username=John Doe; expires=Thu, 18 Dec 2043 12:00:00 GMT”;</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>JavaScript测试<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">                <span class="comment">// Cookie保存用户信息</span></span></span><br><span class="line"><span class="actionscript">                <span class="comment">// 设置Cookie</span></span></span><br><span class="line"><span class="actionscript">                <span class="function"><span class="keyword">function</span> <span class="title">setcookie</span><span class="params">(cname, cvalue, exdays)</span></span>&#123;</span></span><br><span class="line"><span class="javascript">                   <span class="keyword">var</span> d = <span class="keyword">new</span> <span class="built_in">Date</span>(); <span class="comment">// 定义时间变量</span></span></span><br><span class="line">                    d.setTime(d.getTime() + (exdays*24*60*60*1000));</span><br><span class="line"><span class="actionscript">                    <span class="keyword">var</span> expires = <span class="string">"expires="</span> + d.toGMTString();</span></span><br><span class="line"><span class="javascript">                    <span class="built_in">document</span>.cookie = cname + <span class="string">"="</span> + cvalue + <span class="string">"; "</span> + expires;</span></span><br><span class="line">    </span><br><span class="line">                &#125;</span><br><span class="line"><span class="actionscript">                <span class="comment">// 获取Cookie</span></span></span><br><span class="line"><span class="actionscript">                <span class="function"><span class="keyword">function</span> <span class="title">getcookie</span><span class="params">(cname)</span></span>&#123;</span></span><br><span class="line"><span class="actionscript">                    <span class="keyword">var</span> name = cname + <span class="string">"="</span>; <span class="comment">// name = "username="</span></span></span><br><span class="line"><span class="javascript">                    <span class="keyword">var</span> ca = <span class="built_in">document</span>.cookie.split(<span class="string">";"</span>) <span class="comment">// 分割cookie</span></span></span><br><span class="line"><span class="actionscript">                    <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;ca.length; i++)&#123; <span class="comment">// 遍历分割的数组</span></span></span><br><span class="line"><span class="actionscript">                        <span class="keyword">var</span> c = ca[i].trim(); <span class="comment">// 去除前后空格</span></span></span><br><span class="line"><span class="actionscript">                        <span class="keyword">if</span>(c.indexOf(name)==<span class="number">0</span>)&#123; <span class="comment">// 如果字串name索引位置为0</span></span></span><br><span class="line"><span class="actionscript">                            <span class="keyword">return</span> c.substring(name.length, c.length); <span class="comment">// 返回Cookie的username的值</span></span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line"><span class="actionscript">                    <span class="keyword">return</span> <span class="string">""</span>; <span class="comment">// 没有Cookie返回空</span></span></span><br><span class="line">                &#125;</span><br><span class="line"><span class="actionscript">                <span class="comment">// 检查Cookie</span></span></span><br><span class="line"><span class="actionscript">                <span class="function"><span class="keyword">function</span> <span class="title">checkcookie</span><span class="params">()</span></span>&#123;</span></span><br><span class="line"><span class="actionscript">                    <span class="keyword">var</span> user = getcookie(<span class="string">"username"</span>); <span class="comment">// user存储Cookie的username值</span></span></span><br><span class="line"><span class="actionscript">                    <span class="keyword">if</span>(user != <span class="string">""</span>)&#123; <span class="comment">// 存在Cookie</span></span></span><br><span class="line"><span class="actionscript">                        alert(<span class="string">"欢迎"</span> + user + <span class="string">"再次访问"</span>);</span></span><br><span class="line"><span class="actionscript">                    &#125;<span class="keyword">else</span>&#123; <span class="comment">// 不存在cookie</span></span></span><br><span class="line"><span class="actionscript">                        user = prompt(<span class="string">"你的名字:"</span>, <span class="string">""</span>); <span class="comment">// 提示框输入名字</span></span></span><br><span class="line"><span class="actionscript">                        <span class="keyword">if</span>(user != <span class="string">""</span> &amp;&amp; user != <span class="literal">null</span>)&#123;</span></span><br><span class="line"><span class="actionscript">                            setcookie(<span class="string">"username"</span>, user, <span class="number">30</span>); <span class="comment">// 设置保存30天的cookie</span></span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">onload</span>=<span class="string">"checkcookie()"</span>&gt;</span>    </span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-简单的计时"><a href="#2-简单的计时" class="headerlink" title="2. 简单的计时"></a>2. 简单的计时</h3><ul>
<li>setTimeout(para , time)</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">onclick</span>=<span class="string">"fun()"</span>&gt;</span>点击2秒后显示<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">        <span class="function"><span class="keyword">function</span> <span class="title">fun</span><span class="params">()</span></span>&#123;</span></span><br><span class="line"><span class="actionscript">            setTimeout(<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;alert(<span class="string">"2秒过去了"</span>)&#125;, <span class="number">2000</span>);</span></span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-无限循环的计时"><a href="#3-无限循环的计时" class="headerlink" title="3. 无限循环的计时"></a>3. 无限循环的计时</h3><ul>
<li>setTimeout(“timer()”, 1000)</li>
<li>clearTimeout(t)清除计时</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span>    </span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">var</span> timer_on = <span class="number">0</span>; <span class="comment">// 计时器状态</span></span></span><br><span class="line"><span class="actionscript">        <span class="keyword">var</span> t = <span class="number">0</span>; <span class="comment">// 初始值</span></span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="comment">// 计时器函数</span></span></span><br><span class="line"><span class="actionscript">        <span class="function"><span class="keyword">function</span> <span class="title">timer</span><span class="params">()</span></span>&#123;</span></span><br><span class="line">            t = t + 1;</span><br><span class="line"><span class="javascript">            <span class="built_in">document</span>.getElementById(<span class="string">"time_text"</span>).value=t;</span></span><br><span class="line"><span class="actionscript">            setTimeout(<span class="string">"timer()"</span>, <span class="number">1000</span>);</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="comment">// 判断计时器状态函数</span></span></span><br><span class="line"><span class="actionscript">        <span class="function"><span class="keyword">function</span> <span class="title">timer_status</span><span class="params">()</span></span>&#123;</span></span><br><span class="line">            if(!timer_on)&#123;</span><br><span class="line">                timer_on = 1;</span><br><span class="line">                timer();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"点击计时开始"</span> <span class="attr">onclick</span>=<span class="string">"timer_status()"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"time_text"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="4-创建用于对象的模版"><a href="#4-创建用于对象的模版" class="headerlink" title="4. 创建用于对象的模版"></a>4. 创建用于对象的模版</h3><ul>
<li>对象:</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">person &#123;</span><br><span class="line">    firstname:&quot;xx&quot;,</span><br><span class="line">    lastname:&quot;yy&quot;,</span><br><span class="line">    age:16,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span>    </span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">        <span class="function"><span class="keyword">function</span> <span class="title">person</span><span class="params">(firstname, lastname, age)</span></span>&#123;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">this</span>.firstname = firstname;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">this</span>.lastname = lastname;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">this</span>.age = age;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">        the_person = <span class="keyword">new</span> person(<span class="string">"Aye"</span>, <span class="string">"T_T"</span>, <span class="string">"17"</span>);</span></span><br><span class="line"><span class="javascript">        <span class="built_in">document</span>.write(the_person.firstname + <span class="string">" is"</span> + the_person.age)</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaScript应用实例-下拉框</title>
    <url>/2019-08-05-xia-la-kuang-javascript.html</url>
    <content><![CDATA[<h2 id="JavaScript应用实例-2-下拉菜单"><a href="#JavaScript应用实例-2-下拉菜单" class="headerlink" title="JavaScript应用实例(2)-下拉菜单"></a>JavaScript应用实例(2)-下拉菜单</h2><p>参考：<a href="https://blog.csdn.net/u014175572/article/details/50325929" target="_blank" rel="noopener external nofollow noreferrer">js实现简单的下拉菜单</a></p>
<ul>
<li>html</li>
<li>css</li>
<li>javascript</li>
</ul>
<p>效果:</p>
<p><img src="/assets/images/blog/subMenu.png" alt="image"></p>
<a id="more"></a>

<h3 id="html"><a href="#html" class="headerlink" title="html"></a>html</h3><ul>
<li>使用结构</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>


<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> /&gt;</span></span><br><span class="line">  	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1"</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  	<span class="tag">&lt;<span class="name">link</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"xiala.css"</span>&gt;</span> </span><br><span class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"xiala.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"nav"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>一部分<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"></span><br><span class="line">			<span class="tag">&lt;<span class="name">li</span> <span class="attr">onmouseover</span>=<span class="string">"displaySubMenu(this)"</span> <span class="attr">onmouseout</span>=<span class="string">"hideSubMenu(this)"</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>二部分<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>2.1部分<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>2.2部分<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"></span><br><span class="line">			<span class="tag">&lt;<span class="name">li</span> <span class="attr">onmouseover</span>=<span class="string">"displaySubMenu(this)"</span> <span class="attr">onmouseout</span>=<span class="string">"hideSubMenu(this)"</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>三部分<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>3.1部分<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>3.2部分<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="css"><a href="#css" class="headerlink" title="css"></a>css</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">*&#123; <span class="attribute">margin</span>:<span class="number">0px</span>; <span class="attribute">padding</span>:<span class="number">0px</span>;&#125;</span><br><span class="line"><span class="selector-tag">body</span>&#123;</span><br><span class="line">    <span class="attribute">font-family</span>: <span class="string">'Gill Sans'</span>, <span class="string">'Gill Sans MT'</span>, Calibri, <span class="string">'Trebuchet MS'</span>, sans-serif;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">1em</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#nav</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">600px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">40px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: blanchedalmond;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 列表前的点消失 */</span></span><br><span class="line"><span class="selector-tag">ul</span>&#123;</span><br><span class="line">    <span class="attribute">list-style</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">ul</span> <span class="selector-tag">li</span>&#123;</span><br><span class="line">    <span class="attribute">float</span>: left;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">40px</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* a去下划线 */</span></span><br><span class="line"><span class="selector-tag">a</span>&#123;</span><br><span class="line">    <span class="attribute">text-decoration</span>: none;</span><br><span class="line">    <span class="attribute">color</span>: black;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:hover</span>&#123;</span><br><span class="line">    <span class="attribute">color</span>: aqua;</span><br><span class="line">    <span class="attribute">background-color</span>: azure;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">ul</span> <span class="selector-tag">li</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span>&#123;</span><br><span class="line">    <span class="attribute">float</span>: none;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">background-color</span>: bisque;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">2px</span> <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">ul</span> <span class="selector-tag">li</span> <span class="selector-tag">ul</span>&#123;</span><br><span class="line">    <span class="comment">/* 下拉部分消失 */</span></span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-js"><a href="#3-js" class="headerlink" title="3. js"></a>3. js</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">displaySubMenu</span>(<span class="params">li</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> subMenu = li.getElementsByTagName(<span class="string">"ul"</span>)[<span class="number">0</span>];</span><br><span class="line">    subMenu.style.display = <span class="string">"block"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">hideSubMenu</span>(<span class="params">li</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> subMenu = li.getElementsByTagName(<span class="string">"ul"</span>)[<span class="number">0</span>];</span><br><span class="line">    subMenu.style.display = <span class="string">"none"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>CSS图片居中</title>
    <url>/2019-08-05-tu-pian-ju-zhong-css.html</url>
    <content><![CDATA[<h2 id="CSS-图片居中方式"><a href="#CSS-图片居中方式" class="headerlink" title="CSS-图片居中方式"></a>CSS-图片居中方式</h2><h3 id="html"><a href="#html" class="headerlink" title="html"></a>html</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;div id&#x3D;&quot;pic&quot;&gt;</span><br><span class="line">    &lt;img src&#x3D;&quot;&#x2F;php&#x2F;images&#x2F;1.png&quot;&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>控制父级元素高、宽;</li>
<li>设置img占满父级元素</li>
</ul>
<a id="more"></a>

<h3 id="css"><a href="#css" class="headerlink" title="css"></a>css</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#pic</span>&#123;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">800px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">img</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>CSS</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaScript应用实例-自动、手动播放图片</title>
    <url>/2019-08-05-zi-dong-shou-dong-bo-fang-tu-pian-javascript.html</url>
    <content><![CDATA[<h2 id="JavaScript应用实例-1"><a href="#JavaScript应用实例-1" class="headerlink" title="JavaScript应用实例(1)"></a>JavaScript应用实例(1)</h2><p>参考：<a href="http://www.runoob.com/js/js-examples.html" target="_blank" rel="noopener external nofollow noreferrer">菜鸟教程</a></p>
<p>环境:</p>
<ul>
<li>html</li>
<li>代码为主要部分</li>
</ul>
<p>内容包括:</p>
<ul>
<li>自动、手动播放图片</li>
</ul>
<a id="more"></a>

<h3 id="1-自动、手动播放图片"><a href="#1-自动、手动播放图片" class="headerlink" title="1. 自动、手动播放图片"></a>1. 自动、手动播放图片</h3><ul>
<li>html</li>
<li>CSS</li>
<li>javascript</li>
<li>存放三张图片</li>
<li>初始状态图片不显示</li>
<li>调用JS显示图片</li>
<li>每隔4s图片自动滑动</li>
<li>可手动点击切换图片</li>
</ul>
<h4 id="1-html页面"><a href="#1-html页面" class="headerlink" title="1. html页面"></a>1. html页面</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>JavaScript测试<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"slidePic.css"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"slidePic.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"slideshow-container"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 三个&lt;div&gt;&lt;/div&gt;存放三张图片 --&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"pic"</span> <span class="attr">class</span>=<span class="string">"mySlides fade"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"numbertext"</span>&gt;</span>1 / 3<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"/php/images/1.png"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"text"</span>&gt;</span>手 机 端 app<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      </span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"pic"</span> <span class="attr">class</span>=<span class="string">"mySlides fade"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"numbertext"</span>&gt;</span>2 / 3<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"/php/images/2.png"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"text"</span>&gt;</span>航 拍 系 统<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      </span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"pic"</span> <span class="attr">class</span>=<span class="string">"mySlides fade"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"numbertext"</span>&gt;</span>3 / 3<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"/php/images/3.png"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"text"</span>&gt;</span>航 线 设 置<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      </span><br><span class="line">        <span class="comment">&lt;!-- 图片左右滑动链接 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"prev"</span> <span class="attr">onclick</span>=<span class="string">"plusSlides(-1)"</span>&gt;</span>❮<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"next"</span> <span class="attr">onclick</span>=<span class="string">"plusSlides(1)"</span>&gt;</span>❯<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">      </span><br><span class="line">      <span class="comment">&lt;!-- 底部符号 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"text-align:center"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"dot"</span> <span class="attr">onclick</span>=<span class="string">"currentSlide(1)"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"dot"</span> <span class="attr">onclick</span>=<span class="string">"currentSlide(2)"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"dot"</span> <span class="attr">onclick</span>=<span class="string">"currentSlide(3)"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span> </span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">script</span>&gt;</span>auto_showSlides();<span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="2-CSS页面；slidePic-css"><a href="#2-CSS页面；slidePic-css" class="headerlink" title="2. CSS页面；slidePic.css"></a>2. CSS页面；slidePic.css</h4><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">* &#123;<span class="attribute">box-sizing</span>:border-box&#125;</span><br><span class="line"><span class="selector-tag">body</span> &#123;<span class="attribute">font-family</span>: Verdana,sans-serif;&#125;</span><br><span class="line"><span class="selector-class">.mySlides</span> &#123;<span class="attribute">display</span>:none&#125;</span><br><span class="line"><span class="comment">/* 幻灯片容器 */</span></span><br><span class="line"><span class="selector-class">.slideshow-container</span> &#123;</span><br><span class="line">  <span class="attribute">max-width</span>: <span class="number">800px</span>;</span><br><span class="line">  <span class="attribute">max-height</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">margin</span>: auto;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 图片大小 */</span></span><br><span class="line"><span class="selector-id">#pic</span>&#123;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">800px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">img</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 下一张 &amp; 上一张 按钮 */</span></span><br><span class="line"><span class="selector-class">.prev</span>, <span class="selector-class">.next</span> &#123;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">width</span>: auto;</span><br><span class="line">  <span class="attribute">margin-top</span>: -<span class="number">22px</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">16px</span>;</span><br><span class="line">  <span class="attribute">color</span>: black;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">18px</span>;</span><br><span class="line">  <span class="attribute">transition</span>: <span class="number">0.6s</span> ease;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">0</span> <span class="number">3px</span> <span class="number">3px</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 定位 "下一张" 按钮靠右 */</span></span><br><span class="line"><span class="selector-class">.next</span> &#123;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">3px</span> <span class="number">0</span> <span class="number">0</span> <span class="number">3px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* On hover, add a black background color with a little bit see-through */</span></span><br><span class="line"><span class="selector-class">.prev</span><span class="selector-pseudo">:hover</span>, <span class="selector-class">.next</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.8</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 标题文本 */</span></span><br><span class="line"><span class="selector-class">.text</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: blue;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">1.25em</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">8px</span> <span class="number">12px</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 数字文本 (1/3 等) */</span></span><br><span class="line"><span class="selector-class">.numbertext</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#302c2c</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">1em</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">8px</span> <span class="number">12px</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 标记符号 */</span></span><br><span class="line"><span class="selector-class">.dot</span> &#123;</span><br><span class="line">  <span class="attribute">cursor</span>:pointer;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">13px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">13px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">2px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#bbb</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">transition</span>: background-color <span class="number">0.6s</span> ease;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.active</span>, <span class="selector-class">.dot</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#717171</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 淡出动画 */</span></span><br><span class="line"><span class="selector-class">.fade</span> &#123;</span><br><span class="line">  <span class="attribute">-webkit-animation-name</span>: fade;</span><br><span class="line">  <span class="attribute">-webkit-animation-duration</span>: <span class="number">1.5s</span>;</span><br><span class="line">  <span class="attribute">animation-name</span>: fade;</span><br><span class="line">  <span class="attribute">animation-duration</span>: <span class="number">1.5s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@-webkit-keyframes</span> fade &#123;</span><br><span class="line">  <span class="selector-tag">from</span> &#123;<span class="attribute">opacity</span>: .<span class="number">4</span>&#125; </span><br><span class="line">  <span class="selector-tag">to</span> &#123;<span class="attribute">opacity</span>: <span class="number">1</span>&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> fade &#123;</span><br><span class="line">  <span class="selector-tag">from</span> &#123;<span class="attribute">opacity</span>: .<span class="number">4</span>&#125; </span><br><span class="line">  <span class="selector-tag">to</span> &#123;<span class="attribute">opacity</span>: <span class="number">1</span>&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-JS-slidePic-js"><a href="#3-JS-slidePic-js" class="headerlink" title="3. JS; slidePic.js"></a>3. JS; slidePic.js</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> slideIndex = <span class="number">1</span>; <span class="comment">// 索引页码</span></span><br><span class="line">showSlides(slideIndex);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 控制左右翻页</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">plusSlides</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">  showSlides(slideIndex += n);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 控制点翻页</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">currentSlide</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">  showSlides(slideIndex = n);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 手动翻页函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">showSlides</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> i;</span><br><span class="line">  <span class="keyword">var</span> slides = <span class="built_in">document</span>.getElementsByClassName(<span class="string">"mySlides"</span>);</span><br><span class="line">  <span class="keyword">var</span> dots = <span class="built_in">document</span>.getElementsByClassName(<span class="string">"dot"</span>);</span><br><span class="line">  <span class="keyword">if</span> (n &gt; slides.length) &#123;slideIndex = <span class="number">1</span>&#125; </span><br><span class="line">  <span class="keyword">if</span> (n &lt; <span class="number">1</span>) &#123;slideIndex = slides.length&#125;</span><br><span class="line">  <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; slides.length; i++) &#123;</span><br><span class="line">      slides[i].style.display = <span class="string">"none"</span>; </span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; dots.length; i++) &#123;</span><br><span class="line">      dots[i].className = dots[i].className.replace(<span class="string">" active"</span>, <span class="string">""</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  slides[slideIndex<span class="number">-1</span>].style.display = <span class="string">"block"</span>; </span><br><span class="line">  dots[slideIndex<span class="number">-1</span>].className += <span class="string">" active"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 自动翻页函数, 在html页面调用了</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">auto_showSlides</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> i;</span><br><span class="line">  <span class="keyword">var</span> slides = <span class="built_in">document</span>.getElementsByClassName(<span class="string">"mySlides"</span>);</span><br><span class="line">  <span class="keyword">var</span> dots = <span class="built_in">document</span>.getElementsByClassName(<span class="string">"dot"</span>);</span><br><span class="line">  <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; slides.length; i++) &#123;</span><br><span class="line">     slides[i].style.display = <span class="string">"none"</span>;  </span><br><span class="line">  &#125;</span><br><span class="line">  slideIndex++;</span><br><span class="line">  <span class="keyword">if</span> (slideIndex &gt; slides.length) &#123;slideIndex = <span class="number">1</span>&#125;    </span><br><span class="line">  <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; dots.length; i++) &#123;</span><br><span class="line">      dots[i].className = dots[i].className.replace(<span class="string">" active"</span>, <span class="string">""</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  slides[slideIndex<span class="number">-1</span>].style.display = <span class="string">"block"</span>;  </span><br><span class="line">  dots[slideIndex<span class="number">-1</span>].className += <span class="string">" active"</span>;</span><br><span class="line">  setTimeout(auto_showSlides, <span class="number">4000</span>); <span class="comment">// 切换时间为 4 秒</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaScript应用实例-下拉框</title>
    <url>/2019-08-06-javascript-ying-yong-shi-li-3-shou-feng-qin-xia-la-kuang.html</url>
    <content><![CDATA[<h2 id="JavaScript应用实例-3-手风琴下拉框"><a href="#JavaScript应用实例-3-手风琴下拉框" class="headerlink" title="JavaScript应用实例(3)-手风琴下拉框"></a>JavaScript应用实例(3)-手风琴下拉框</h2><p>参考：<a href="https://c.runoob.com/codedemo/3158" target="_blank" rel="noopener external nofollow noreferrer"> JS/CSS 带图标手风琴动画效果</a></p>
<ul>
<li>html</li>
<li>css</li>
<li>javascript</li>
</ul>
<a id="more"></a>

<h3 id="1-html-javascript"><a href="#1-html-javascript" class="headerlink" title="1. html javascript"></a>1. html javascript</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">link</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"accordion.css"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 带图标手风琴动画效果 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"accordion"</span>&gt;</span>选项 1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"panel"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"accordion"</span>&gt;</span>选项 2<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"panel"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	</span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> acc = <span class="built_in">document</span>.getElementsByClassName(<span class="string">"accordion"</span>);</span></span><br><span class="line"><span class="actionscript"><span class="keyword">var</span> i;</span></span><br><span class="line"></span><br><span class="line">for (i = 0; i &lt; acc.length; i++) &#123;</span><br><span class="line"><span class="actionscript">  acc[i].onclick = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">this</span>.classList.toggle(<span class="string">"active"</span>);</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">var</span> panel = <span class="keyword">this</span>.nextElementSibling;</span></span><br><span class="line">    if (panel.style.maxHeight)&#123;</span><br><span class="line"><span class="actionscript">      panel.style.maxHeight = <span class="literal">null</span>;</span></span><br><span class="line"><span class="actionscript">    &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="actionscript">      panel.style.maxHeight = panel.scrollHeight + <span class="string">"px"</span>;</span></span><br><span class="line">    &#125; </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-css"><a href="#2-css" class="headerlink" title="2. css"></a>2. css</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">button</span><span class="selector-class">.accordion</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: aqua;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">8</span>, <span class="number">8</span>, <span class="number">8</span>);</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">18px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">20%</span>;</span><br><span class="line">    <span class="attribute">border</span>: none;</span><br><span class="line">    <span class="attribute">text-align</span>: left;</span><br><span class="line">    <span class="attribute">outline</span>: none;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">transition</span>: <span class="number">0.4s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">button</span><span class="selector-class">.accordion</span><span class="selector-class">.active</span>, <span class="selector-tag">button</span><span class="selector-class">.accordion</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">rgb</span>(<span class="number">191</span>, <span class="number">197</span>, <span class="number">204</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">button</span><span class="selector-class">.accordion</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">'\002B'</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">29</span>, <span class="number">27</span>, <span class="number">27</span>);</span><br><span class="line">    <span class="attribute">font-weight</span>: bold;</span><br><span class="line">    <span class="attribute">float</span>: right;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">5px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">button</span><span class="selector-class">.accordion</span><span class="selector-class">.active</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">"\2212"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-class">.panel</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">20%</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">18px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: aquamarine;</span><br><span class="line">    <span class="attribute">max-height</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    <span class="attribute">transition</span>: max-height <span class="number">0.2s</span> ease-out;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>Python-ArcGIS学习功能索引</title>
    <url>/2019-08-06-python-arcgis-xue-xi-gong-neng-suo-yin.html</url>
    <content><![CDATA[<h2 id="Python-ArcGIS学习功能索引"><a href="#Python-ArcGIS学习功能索引" class="headerlink" title="Python-ArcGIS学习功能索引"></a>Python-ArcGIS学习功能索引</h2><p>书籍：基于ArcGIS的Python编程秘笈(第2版); </p>
<p><b>功能索引</b></p>
<h3 id="学习日志-1"><a href="#学习日志-1" class="headerlink" title="学习日志 1:"></a>学习日志 1:</h3><ul>
<li>arcpy库  </li>
<li>引用mxd文档、数据框、图层  </li>
<li>改变地图范围  </li>
<li>添加图层文件到数据框  </li>
<li>插入一个图层到某个位置</li>
</ul>
<a id="more"></a>

<h3 id="学习日志-2"><a href="#学习日志-2" class="headerlink" title="学习日志 2:"></a>学习日志 2:</h3><ul>
<li>利用图层更新其他图层属性  </li>
<li>操作数据框中启用时间属性的图层  </li>
<li>查找地图文档和图层文件中丢失的数据源  </li>
<li>使用MapDocument.findAndReplaceWorkplacePaths()修复丢失的数据源  </li>
<li>使用MapDocument.replaceWorkspaces()方法修复丢失的数据源</li>
</ul>
<h3 id="学习日志-3"><a href="#学习日志-3" class="headerlink" title="学习日志 3"></a>学习日志 3</h3><ul>
<li>使用replaceDataSource()修复单个图层和表对象  </li>
<li>查找文件夹中所有地图文档内丢失数据源的图层 </li>
</ul>
<h3 id="学习日志-4"><a href="#学习日志-4" class="headerlink" title="学习日志 4"></a>学习日志 4</h3><ul>
<li>打印文档中的所有布局元素</li>
<li>打印布局元素，限制为图例元素</li>
<li>更新布局元素属性</li>
<li>获取可用的打印机列表</li>
<li>使用PrintMap()打印地图</li>
<li>导出地图为PDF文件</li>
<li>导出地图为图像文件</li>
<li>导出图层报表</li>
<li>使用数据驱动页面和arcpy.mapping模块构建地图册</li>
<li>将地图文档发布为ArcGIS Server服务</li>
</ul>
<h3 id="学习日志-5"><a href="#学习日志-5" class="headerlink" title="学习日志 5"></a>学习日志 5</h3><ul>
<li>使用脚本执行地理处理工具-Clip_analysis为例</li>
<li>将一个工具的输出作为一个工具的输入</li>
</ul>
<h3 id="学习日志-6"><a href="#学习日志-6" class="headerlink" title="学习日志 6"></a>学习日志 6</h3><ul>
<li>创建自定义地理处理工具</li>
<li>创建Python工具箱</li>
</ul>
<h3 id="学习日志7-查询和选择数据"><a href="#学习日志7-查询和选择数据" class="headerlink" title="学习日志7     查询和选择数据"></a>学习日志7     查询和选择数据</h3><ul>
<li>查询前，创建要素类或表视图的内存副本</li>
<li>测试 按属性查询</li>
<li>按位置选择图层</li>
<li>结合 按属性选择与按位置选择</li>
</ul>
<h3 id="学习日志8-在要素类和表中使用Arcpy"><a href="#学习日志8-在要素类和表中使用Arcpy" class="headerlink" title="学习日志8 在要素类和表中使用Arcpy"></a>学习日志8 在要素类和表中使用Arcpy</h3><ul>
<li>使用SearchCursor检索要素类中的要素</li>
<li>使用几何令牌参数的SearchCursor()</li>
<li>使用InsertCursor(),从文本文件读取数据给要素添加记录</li>
<li>UpdateCursor()创建对象,updateRow()方法更新表中每一行</li>
<li>UpdateCursor()对象的deleteRow(),删除特定记录</li>
<li>在编辑会话中插入和更新行</li>
<li>读取要素类中的几何信息</li>
<li>使用Walk()遍历目录</li>
</ul>
<h3 id="学习日志9-获取GIS数据列表和描述"><a href="#学习日志9-获取GIS数据列表和描述" class="headerlink" title="学习日志9 获取GIS数据列表和描述"></a>学习日志9 获取GIS数据列表和描述</h3><ul>
<li>获取工作空间要素类列表</li>
<li>获取要素中的字段列表</li>
<li>使用Describe()函数返回要素类的描述性信息</li>
<li>实用Describe()函数返回栅格图像的描述性信息</li>
</ul>
<h3 id="学习日志10-使用add-in定制Arcgis界面"><a href="#学习日志10-使用add-in定制Arcgis界面" class="headerlink" title="学习日志10 使用add-in定制Arcgis界面"></a>学习日志10 使用add-in定制Arcgis界面</h3><blockquote>
<p>Python Add-in Wizard 下载,解压运行/bin/..exe</p>
</blockquote>
<blockquote>
<p><a href="http://www.arcgis.com/home/item.html?id=5f3aefe77f6b4f61ad3e4c62f30bff3b" target="_blank" rel="noopener external nofollow noreferrer">http://www.arcgis.com/home/item.html?id=5f3aefe77f6b4f61ad3e4c62f30bff3b</a></p>
</blockquote>
<blockquote>
<p>Python Add-in Wizard是一个可视化界面工具,用于创建桌面Arcgis加载项</p>
</blockquote>
<ul>
<li>创建按钮加载项和使用Python加载项</li>
<li>安装测试加载项</li>
<li>创建工具加载项</li>
</ul>
<h3 id="学习日志11-异常识别和错误处理"><a href="#学习日志11-异常识别和错误处理" class="headerlink" title="学习日志11 异常识别和错误处理"></a>学习日志11 异常识别和错误处理</h3><ul>
<li>Python异常处理结构(try/except/else/finally)</li>
<li>使用arcpy.GetMessages()捕获详细的消息信息</li>
<li>根据严重性级别筛选消息</li>
<li>测试和响应特定错误消息</li>
</ul>
<h3 id="学习日志12-使用Python实现ArcGis的高级功能"><a href="#学习日志12-使用Python实现ArcGis的高级功能" class="headerlink" title="学习日志12 使用Python实现ArcGis的高级功能"></a>学习日志12 使用Python实现ArcGis的高级功能</h3><ul>
<li>使用Python构建HTTP响应请求并解析响应</li>
<li>使用ArcGis REST API和Python获取图层信息</li>
<li>使用ArcGis REST API和Python导出地图</li>
<li>使用ArcGis REST API和Python查询地图服务</li>
<li>使用Esri World Geocoding Service进行地理编码</li>
<li>使用FieldMappings和FieldMap,实现几个要素类的合并(Merge)</li>
<li>使用ValueTable讲多值输入到工具中作为参数</li>
</ul>
<h3 id="学习日志-附录-GIS程序员不可不知的Python功能"><a href="#学习日志-附录-GIS程序员不可不知的Python功能" class="headerlink" title="学习日志(附录) GIS程序员不可不知的Python功能"></a>学习日志(附录) GIS程序员不可不知的Python功能</h3><ul>
<li>发送带附件电子邮件</li>
<li>连接FTP服务并操作文件</li>
<li>使用zipfile模块压缩文件</li>
<li>读取xml文档</li>
</ul>
]]></content>
      <tags>
        <tag>pythonGIS</tag>
      </tags>
  </entry>
  <entry>
    <title>vba ArcMap UI控件  计算要素图层面积</title>
    <url>/2019-09-16-vba-arcmap-ui-kong-jian-ji-suan-yao-su-tu-ceng-mian-ji.html</url>
    <content><![CDATA[<p>计算面图层</p>
<ul>
<li>添加字段</li>
<li>计算面积</li>
</ul>
<a id="more"></a>

<h3 id="vba代码"><a href="#vba代码" class="headerlink" title="vba代码"></a>vba代码</h3><h4 id="版本一"><a href="#版本一" class="headerlink" title="版本一"></a>版本一</h4><figure class="highlight vb"><table><tr><td class="code"><pre><span class="line"><span class="keyword">Private</span> <span class="keyword">Sub</span> UIButtonControl1_Click()</span><br><span class="line"><span class="comment">' 功能：计算图层面积</span></span><br><span class="line"><span class="comment">' 作者：inno</span></span><br><span class="line"><span class="comment">' 说明：代码实现了：对矢量面图层，新建一个字段，并计算面积赋值给此字段</span></span><br><span class="line"><span class="comment">' 日期：2019/9/16</span></span><br><span class="line"></span><br><span class="line"><span class="comment">'IApplication开始</span></span><br><span class="line"><span class="keyword">Dim</span> pApp <span class="keyword">As</span> IApplication</span><br><span class="line"><span class="keyword">Set</span> pApp = Application</span><br><span class="line"></span><br><span class="line"><span class="comment">'MxDocument 获取文档</span></span><br><span class="line"><span class="keyword">Dim</span> pMxDoc <span class="keyword">As</span> IMxDocument</span><br><span class="line"><span class="keyword">Set</span> pMxDoc = pApp.Document</span><br><span class="line"></span><br><span class="line"><span class="comment">'IMap 获取地图</span></span><br><span class="line"><span class="keyword">Dim</span> pMap <span class="keyword">As</span> IMap</span><br><span class="line"><span class="keyword">Set</span> pMap = pMxDoc.FocusMap <span class="comment">'获取当前地图</span></span><br><span class="line"></span><br><span class="line"><span class="comment">'ILayer 获取图层</span></span><br><span class="line"><span class="keyword">Dim</span> pLayer <span class="keyword">As</span> ILayer</span><br><span class="line"><span class="keyword">Set</span> pLayer = pMap.Layer(<span class="number">0</span>) <span class="comment">'第一个图层</span></span><br><span class="line"></span><br><span class="line"><span class="comment">'判断图层是否为矢量图层</span></span><br><span class="line"><span class="keyword">If</span> <span class="keyword">Not</span> <span class="built_in">TypeOf</span> pLayer <span class="keyword">Is</span> IFeatureLayer <span class="keyword">Then</span></span><br><span class="line">    MsgBox <span class="string">"不是矢量图层"</span></span><br><span class="line">    <span class="keyword">Exit</span> <span class="keyword">Sub</span></span><br><span class="line"><span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line"></span><br><span class="line"><span class="comment">'IFeatureLayer 获取矢量图层</span></span><br><span class="line"><span class="keyword">Dim</span> pFeatLyr <span class="keyword">As</span> IFeatureLayer</span><br><span class="line"><span class="keyword">Set</span> pFeatLyr = pLayer</span><br><span class="line"></span><br><span class="line"><span class="comment">'IFeatureClass 获取表</span></span><br><span class="line"><span class="keyword">Dim</span> pFeatCls <span class="keyword">As</span> IFeatureClass</span><br><span class="line"><span class="keyword">Set</span> pFeatCls = pFeatLyr.FeatureClass</span><br><span class="line"></span><br><span class="line"><span class="comment">'判断是否为面</span></span><br><span class="line"><span class="keyword">If</span> pFeatCls.ShapeType &lt;&gt; esriGeometryPolygon <span class="keyword">Then</span></span><br><span class="line">    MsgBox <span class="string">"不是面元素，不能计算面积"</span></span><br><span class="line">    <span class="keyword">Exit</span> <span class="keyword">Sub</span></span><br><span class="line"><span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line"></span><br><span class="line"><span class="comment">'添加一个面积字段</span></span><br><span class="line"><span class="keyword">Dim</span> id_area2 <span class="keyword">As</span> <span class="built_in">Integer</span></span><br><span class="line"><span class="keyword">Dim</span> area2 <span class="keyword">As</span> <span class="built_in">String</span></span><br><span class="line">area2 = <span class="string">"AREA2"</span></span><br><span class="line">id_area2 = pFeatCls.FindField(area2) <span class="comment">'字段索引</span></span><br><span class="line"><span class="comment">'判断面积字段是否存在,若不存在，area2=-1</span></span><br><span class="line"><span class="keyword">If</span> id_area2 &lt;&gt; <span class="number">-1</span> <span class="keyword">Then</span></span><br><span class="line">   MsgBox <span class="string">"字段已存在，请重新添加字段"</span></span><br><span class="line">   <span class="keyword">Exit</span> <span class="keyword">Sub</span></span><br><span class="line"><span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line"><span class="comment">'声明可编辑字段类型</span></span><br><span class="line"><span class="keyword">Dim</span> areaField <span class="keyword">As</span> IFieldEdit</span><br><span class="line"><span class="keyword">Set</span> areaField = <span class="keyword">New</span> Field</span><br><span class="line"><span class="comment">'字段名与类型</span></span><br><span class="line">areaField.Name = area2</span><br><span class="line">areaField.Type = esriFieldTypeDouble</span><br><span class="line"></span><br><span class="line">pFeatCls.AddField areaField <span class="comment">'添加面积字段</span></span><br><span class="line"></span><br><span class="line"><span class="comment">'FeatureCursor 获取指针</span></span><br><span class="line"><span class="keyword">Dim</span> pFeatCur <span class="keyword">As</span> IFeatureCursor</span><br><span class="line"><span class="keyword">Set</span> pFeatCur = pFeatCls.Update(<span class="literal">Nothing</span>, <span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">Dim</span> pFeat <span class="keyword">As</span> IFeature</span><br><span class="line"><span class="keyword">Set</span> pFeat = pFeatCur.NextFeature</span><br><span class="line"></span><br><span class="line"><span class="keyword">Dim</span> plg <span class="keyword">As</span> IPolygon <span class="comment">'面</span></span><br><span class="line"><span class="keyword">Dim</span> pArea <span class="keyword">As</span> IArea <span class="comment">'面积</span></span><br><span class="line"><span class="keyword">Dim</span> s <span class="keyword">As</span> <span class="built_in">String</span> <span class="comment">'字符串存表中name字符</span></span><br><span class="line"><span class="keyword">Dim</span> s_id <span class="keyword">As</span> <span class="built_in">Integer</span> <span class="comment">'整型id</span></span><br><span class="line"><span class="keyword">Dim</span> s_area <span class="keyword">As</span> <span class="built_in">Integer</span> <span class="comment">'面积字段的索引</span></span><br><span class="line"></span><br><span class="line">s_id = pFeatCls.FindField(<span class="string">"NAME"</span>)  <span class="comment">'NAME字段所在的索引号</span></span><br><span class="line">s_area = pFeatCls.FindField(area2) <span class="comment">'面积字段的索引</span></span><br><span class="line"><span class="comment">'MsgBox s_area</span></span><br><span class="line"></span><br><span class="line"><span class="comment">'循环 计算面积 存放在特定字段</span></span><br><span class="line"><span class="keyword">Do</span> <span class="keyword">While</span> <span class="keyword">Not</span> pFeat <span class="keyword">Is</span> <span class="literal">Nothing</span></span><br><span class="line">    <span class="keyword">Set</span> plg = pFeat.Shape</span><br><span class="line">    <span class="comment">'计算面积</span></span><br><span class="line">    <span class="keyword">Set</span> pArea = plg</span><br><span class="line">    pFeat.Value(s_area) = pArea.Area</span><br><span class="line">    pFeatCur.UpdateFeature pFeat <span class="comment">'将面积添加到字段中后，更新要素</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">'字符串</span></span><br><span class="line">    s = s + pFeat.Value(s_id) + Str(pArea.Area) + vbNewLine</span><br><span class="line">    <span class="keyword">Set</span> pFeat = pFeatCur.NextFeature <span class="comment">' 循环，不加就死循环</span></span><br><span class="line">    </span><br><span class="line"><span class="keyword">Loop</span></span><br><span class="line"></span><br><span class="line">MsgBox s</span><br><span class="line"></span><br><span class="line"><span class="keyword">End</span> <span class="keyword">Sub</span></span><br></pre></td></tr></table></figure>

<h4 id="版本二"><a href="#版本二" class="headerlink" title="版本二"></a>版本二</h4><ul>
<li>添加字段时，判断字段是否存在</li>
<li>不存在则添加</li>
<li>存在则不添加，后续计算结果赋值给存在字段</li>
</ul>
<figure class="highlight vb"><table><tr><td class="code"><pre><span class="line"><span class="keyword">Private</span> <span class="keyword">Sub</span> UIButtonControl1_Click()</span><br><span class="line"><span class="comment">' 功能：计算家乡图层面积</span></span><br><span class="line"><span class="comment">' 作者：1985857412@qq.com</span></span><br><span class="line"><span class="comment">' 说明：代码实现了：对矢量面图层，新建一个字段，并计算面积赋值给此字段</span></span><br><span class="line"><span class="comment">' 日期：2019/9/16</span></span><br><span class="line"></span><br><span class="line"><span class="comment">'IApplication开始</span></span><br><span class="line"><span class="keyword">Dim</span> pApp <span class="keyword">As</span> IApplication</span><br><span class="line"><span class="keyword">Set</span> pApp = Application</span><br><span class="line"></span><br><span class="line"><span class="comment">'MxDocument 获取文档</span></span><br><span class="line"><span class="keyword">Dim</span> pMxDoc <span class="keyword">As</span> IMxDocument</span><br><span class="line"><span class="keyword">Set</span> pMxDoc = pApp.Document</span><br><span class="line"></span><br><span class="line"><span class="comment">'IMap 获取地图</span></span><br><span class="line"><span class="keyword">Dim</span> pMap <span class="keyword">As</span> IMap</span><br><span class="line"><span class="keyword">Set</span> pMap = pMxDoc.FocusMap <span class="comment">'获取当前地图</span></span><br><span class="line"></span><br><span class="line"><span class="comment">'ILayer 获取图层</span></span><br><span class="line"><span class="keyword">Dim</span> pLayer <span class="keyword">As</span> ILayer</span><br><span class="line"><span class="keyword">Set</span> pLayer = pMap.Layer(<span class="number">0</span>) <span class="comment">'第一个图层</span></span><br><span class="line"></span><br><span class="line"><span class="comment">'判断图层是否为矢量图层</span></span><br><span class="line"><span class="keyword">If</span> <span class="keyword">Not</span> <span class="built_in">TypeOf</span> pLayer <span class="keyword">Is</span> IFeatureLayer <span class="keyword">Then</span></span><br><span class="line">    MsgBox <span class="string">"不是矢量图层"</span></span><br><span class="line">    <span class="keyword">Exit</span> <span class="keyword">Sub</span></span><br><span class="line"><span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line"></span><br><span class="line"><span class="comment">'IFeatureLayer 获取矢量图层</span></span><br><span class="line"><span class="keyword">Dim</span> pFeatLyr <span class="keyword">As</span> IFeatureLayer</span><br><span class="line"><span class="keyword">Set</span> pFeatLyr = pLayer</span><br><span class="line"></span><br><span class="line"><span class="comment">'IFeatureClass 获取表</span></span><br><span class="line"><span class="keyword">Dim</span> pFeatCls <span class="keyword">As</span> IFeatureClass</span><br><span class="line"><span class="keyword">Set</span> pFeatCls = pFeatLyr.FeatureClass</span><br><span class="line"></span><br><span class="line"><span class="comment">'判断是否为面</span></span><br><span class="line"><span class="keyword">If</span> pFeatCls.ShapeType &lt;&gt; esriGeometryPolygon <span class="keyword">Then</span></span><br><span class="line">    MsgBox <span class="string">"不是面元素，不能计算面积"</span></span><br><span class="line">    <span class="keyword">Exit</span> <span class="keyword">Sub</span></span><br><span class="line"><span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line"></span><br><span class="line"><span class="comment">'添加一个面积字段</span></span><br><span class="line"><span class="keyword">Dim</span> id_area2 <span class="keyword">As</span> <span class="built_in">Integer</span></span><br><span class="line"><span class="keyword">Dim</span> area2 <span class="keyword">As</span> <span class="built_in">String</span></span><br><span class="line">area2 = <span class="string">"AREA2"</span></span><br><span class="line">id_area2 = pFeatCls.FindField(area2) <span class="comment">'字段索引</span></span><br><span class="line"><span class="comment">'判断面积字段是否存在,不存在时，area2=-1</span></span><br><span class="line"><span class="keyword">If</span> id_area2 &lt;&gt; <span class="number">-1</span> <span class="keyword">Then</span></span><br><span class="line">   MsgBox <span class="string">"字段AREA2已存在，将使用存在字段进行计算"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">Else</span> <span class="comment">'字段不存在时，新建</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">'声明可编辑字段类型</span></span><br><span class="line">    <span class="keyword">Dim</span> areaField <span class="keyword">As</span> IFieldEdit</span><br><span class="line">    <span class="keyword">Set</span> areaField = <span class="keyword">New</span> Field</span><br><span class="line">    <span class="comment">'字段名与类型</span></span><br><span class="line">    areaField.Name = area2</span><br><span class="line">    areaField.Type = esriFieldTypeDouble</span><br><span class="line"></span><br><span class="line">    pFeatCls.AddField areaField <span class="comment">'添加面积字段</span></span><br><span class="line"><span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">'FeatureCursor 获取指针</span></span><br><span class="line"><span class="keyword">Dim</span> pFeatCur <span class="keyword">As</span> IFeatureCursor</span><br><span class="line"><span class="keyword">Set</span> pFeatCur = pFeatCls.Update(<span class="literal">Nothing</span>, <span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">Dim</span> pFeat <span class="keyword">As</span> IFeature</span><br><span class="line"><span class="keyword">Set</span> pFeat = pFeatCur.NextFeature</span><br><span class="line"></span><br><span class="line"><span class="keyword">Dim</span> plg <span class="keyword">As</span> IPolygon <span class="comment">'面</span></span><br><span class="line"><span class="keyword">Dim</span> pArea <span class="keyword">As</span> IArea <span class="comment">'面积</span></span><br><span class="line"><span class="keyword">Dim</span> s <span class="keyword">As</span> <span class="built_in">String</span> <span class="comment">'字符串存表中name字符</span></span><br><span class="line"><span class="keyword">Dim</span> s_id <span class="keyword">As</span> <span class="built_in">Integer</span> <span class="comment">'整型id</span></span><br><span class="line"><span class="keyword">Dim</span> s_area <span class="keyword">As</span> <span class="built_in">Integer</span> <span class="comment">'面积字段的索引</span></span><br><span class="line"></span><br><span class="line">s_id = pFeatCls.FindField(<span class="string">"NAME"</span>)  <span class="comment">'NAME字段所在的索引号</span></span><br><span class="line">s_area = pFeatCls.FindField(area2) <span class="comment">'面积字段的索引</span></span><br><span class="line"><span class="comment">'MsgBox s_area</span></span><br><span class="line"></span><br><span class="line"><span class="comment">'循环 计算面积 存放在特定字段</span></span><br><span class="line"><span class="keyword">Do</span> <span class="keyword">While</span> <span class="keyword">Not</span> pFeat <span class="keyword">Is</span> <span class="literal">Nothing</span></span><br><span class="line">    <span class="keyword">Set</span> plg = pFeat.Shape</span><br><span class="line">    <span class="comment">'计算面积</span></span><br><span class="line">    <span class="keyword">Set</span> pArea = plg</span><br><span class="line">    pFeat.Value(s_area) = pArea.Area</span><br><span class="line">    pFeatCur.UpdateFeature pFeat <span class="comment">'将面积添加到字段中后，更新要素</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">'字符串</span></span><br><span class="line">    s = s + pFeat.Value(s_id) + Str(pArea.Area) + vbNewLine</span><br><span class="line">    <span class="keyword">Set</span> pFeat = pFeatCur.NextFeature <span class="comment">' 循环，不加就死循环</span></span><br><span class="line">    </span><br><span class="line"><span class="keyword">Loop</span></span><br><span class="line"></span><br><span class="line">MsgBox s</span><br><span class="line"></span><br><span class="line"><span class="keyword">End</span> <span class="keyword">Sub</span></span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ArcMapEngine</tag>
        <tag>vba</tag>
      </tags>
  </entry>
  <entry>
    <title>jQuery实现带下拉框导航栏</title>
    <url>/2019-08-15-jquery-shi-xian-dai-xia-la-kuang-dao-hang-lan.html</url>
    <content><![CDATA[<h2 id="jQuery实例-1-带下拉框导航栏"><a href="#jQuery实例-1-带下拉框导航栏" class="headerlink" title="jQuery实例(1)-带下拉框导航栏"></a>jQuery实例(1)-带下拉框导航栏</h2><p>实现功能:</p>
<ul>
<li>当鼠标悬停时自动出现下拉框(hover)</li>
<li>下拉框的淡入淡出(slide)</li>
<li>设置动画延时(setTimeout)</li>
<li>导航栏随滚轮悬浮在顶部</li>
</ul>
<p>文件目录</p>
<ul>
<li>header.html</li>
<li>header.css</li>
<li>header.js  float.js</li>
</ul>
<a id="more"></a>

<h3 id="1-header-html文件"><a href="#1-header-html文件" class="headerlink" title="1. header.html文件"></a>1. header.html文件</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"jquery-3.3.1.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"header.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"float.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">href</span>=<span class="string">"header.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"accordion"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>游戏<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"accordion-contents"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>暗夜基地<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>回路区<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"accordion"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>加入<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"accordion-contents"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>野狼副本<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>精灵祭坛<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>荒原星际<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"accordion"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>关于<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"accordion-contents"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>世界观<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>魔导石<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>空吟术<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-header-css-文件"><a href="#2-header-css-文件" class="headerlink" title="2. header.css 文件"></a>2. header.css 文件</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">*&#123;  <span class="attribute">margin</span>: <span class="number">0</span>;<span class="attribute">padding</span>: <span class="number">0</span>;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*容器*/</span></span><br><span class="line"><span class="selector-class">.container</span>&#123;</span><br><span class="line">    <span class="attribute">font-family</span>: <span class="string">'Trebuchet MS'</span>, <span class="string">'Lucida Sans Unicode'</span>, <span class="string">'Lucida Grande'</span>, <span class="string">'Lucida Sans'</span>, Arial, sans-serif;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">1em</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">40px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">127</span>,<span class="number">255</span>,<span class="number">212</span>,<span class="number">0.5</span>); <span class="comment">/*rgba()0.5设置背景不透明度，而文字不透明*/</span></span><br><span class="line">    <span class="comment">/* overflow: hidden; 超出容器元素会被隐藏 */</span>  <span class="comment">/*此句在导航栏悬浮会出现下拉菜单消失的bug*/</span></span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.container</span> <span class="selector-tag">a</span>&#123;</span><br><span class="line">    <span class="attribute">float</span>: left;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">1em</span>;</span><br><span class="line">    <span class="attribute">color</span>: black;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">40px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">text-decoration</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.accordion</span>&#123;</span><br><span class="line">    <span class="attribute">float</span>: left;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*下拉元素不会遮住此处*/</span></span><br><span class="line"><span class="selector-class">.accordion</span> <span class="selector-tag">a</span>&#123;</span><br><span class="line">    <span class="attribute">float</span>: none;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.accordion-contents</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">background-color</span>: aliceblue;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">8px</span> <span class="number">12px</span> <span class="number">0</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.2</span>);</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 让下拉元素在下部 */</span></span><br><span class="line"><span class="selector-class">.accordion-contents</span> <span class="selector-tag">a</span>&#123;</span><br><span class="line">    <span class="attribute">float</span>: none;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">text-decoration</span>: none; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:hover</span>&#123;</span><br><span class="line">    <span class="attribute">color</span>: white;</span><br><span class="line">    <span class="attribute">background-color</span>: midnightblue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-header-js-使用jQuery实现下拉动画"><a href="#3-header-js-使用jQuery实现下拉动画" class="headerlink" title="3. header.js 使用jQuery实现下拉动画"></a>3. header.js 使用jQuery实现下拉动画</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">// jQuery实现下拉菜单</span></span><br><span class="line">    $(<span class="string">".accordion"</span>).hover(</span><br><span class="line">        <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="comment">//悬停在上</span></span><br><span class="line">            <span class="keyword">var</span> _this = $(<span class="keyword">this</span>); <span class="comment">//setTimeout()中不能使用$(this)</span></span><br><span class="line">            trigger = setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;  <span class="comment">//设置延时处理</span></span><br><span class="line">                _this.children().slideDown(<span class="string">"fast"</span>);</span><br><span class="line">            &#125;, <span class="number">300</span>);</span><br><span class="line">            </span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="comment">//悬停离开</span></span><br><span class="line">            clearTimeout(trigger); <span class="comment">//清除延时</span></span><br><span class="line">            $(<span class="string">".accordion-contents"</span>).slideUp(<span class="string">"fast"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    );</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h3 id="4-float-js-文件实现导航栏随滚轮悬浮在顶部"><a href="#4-float-js-文件实现导航栏随滚轮悬浮在顶部" class="headerlink" title="4. float.js 文件实现导航栏随滚轮悬浮在顶部"></a>4. float.js 文件实现导航栏随滚轮悬浮在顶部</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">// jQuery实现导航栏随滚轮悬浮</span></span><br><span class="line">    <span class="comment">// 首先获取导航栏距离顶部高度</span></span><br><span class="line">    <span class="keyword">var</span> top = $(<span class="string">".container"</span>).offset().top;</span><br><span class="line">    <span class="comment">// 开始监控滚动栏scroll</span></span><br><span class="line">    $(<span class="built_in">document</span>).scroll(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="comment">// 获取当前滚动栏高度</span></span><br><span class="line">        <span class="keyword">var</span> scrTop = $(<span class="built_in">window</span>).scrollTop();</span><br><span class="line">        <span class="comment">// 判断:滚动栏高度大于等于导航栏距离顶部的高度时，悬浮</span></span><br><span class="line">        <span class="keyword">if</span>(scrTop &gt;= top)&#123;</span><br><span class="line">            $(<span class="string">".container"</span>).css(&#123;<span class="string">'position'</span>:<span class="string">'fixed'</span>,<span class="string">'top'</span>:<span class="string">'0'</span>&#125;);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            $(<span class="string">".container"</span>).css(&#123;<span class="string">'position'</span>:<span class="string">''</span>,<span class="string">'top'</span>:<span class="string">''</span>&#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>JavaScript</tag>
        <tag>jQuery</tag>
      </tags>
  </entry>
  <entry>
    <title>vba ArcMap UI控件 线图层-线长与弯曲度</title>
    <url>/2019-09-16-vba-xian-tu-ceng-xian-chang-yu-wan-qu-du.html</url>
    <content><![CDATA[<p>计算线图层</p>
<ul>
<li>添加字段</li>
<li>计算线长</li>
<li>计算弯曲度</li>
<li>弯曲度=线长/曲线首末直线距离</li>
</ul>
<a id="more"></a>

<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight vb"><table><tr><td class="code"><pre><span class="line"><span class="keyword">Private</span> <span class="keyword">Sub</span> UIButtonControl2_Click()</span><br><span class="line"><span class="comment">'功能：计算家乡线图层，线长与弯曲度</span></span><br><span class="line"><span class="comment">'作者：inno</span></span><br><span class="line"><span class="comment">'说明：利用vb代码实现：自动添加两个字段lineLength和wqd，计算出结果、保存在字段</span></span><br><span class="line"><span class="comment">'打印出计算结果</span></span><br><span class="line"><span class="comment">'日期:2019/9/17</span></span><br><span class="line"></span><br><span class="line"><span class="comment">' IApplication开始</span></span><br><span class="line"><span class="keyword">Dim</span> pApp <span class="keyword">As</span> IApplication</span><br><span class="line"><span class="keyword">Set</span> pApp = Application</span><br><span class="line"></span><br><span class="line"><span class="comment">' 获取文档 IMxDocument</span></span><br><span class="line"><span class="keyword">Dim</span> pMxDoc <span class="keyword">As</span> IMxDocument</span><br><span class="line"><span class="keyword">Set</span> pMxDoc = pApp.Document</span><br><span class="line"></span><br><span class="line"><span class="comment">'获取当前地图 IMap</span></span><br><span class="line"><span class="keyword">Dim</span> pMap <span class="keyword">As</span> IMap</span><br><span class="line"><span class="keyword">Set</span> pMap = pMxDoc.FocusMap</span><br><span class="line"></span><br><span class="line"><span class="comment">'获取图层 ILayer</span></span><br><span class="line"><span class="keyword">Dim</span> pLayer <span class="keyword">As</span> ILayer</span><br><span class="line"><span class="keyword">Set</span> pLayer = pMap.Layer(<span class="number">1</span>) <span class="comment">'此文档线图层在第二个位置</span></span><br><span class="line"></span><br><span class="line"><span class="comment">'判断图层是否为矢量图层</span></span><br><span class="line"><span class="keyword">If</span> <span class="keyword">Not</span> <span class="built_in">TypeOf</span> pLayer <span class="keyword">Is</span> IFeatureLayer <span class="keyword">Then</span></span><br><span class="line">    MsgBox <span class="string">"图层不是矢量图层，无法计算"</span></span><br><span class="line">    <span class="keyword">Exit</span> <span class="keyword">Sub</span></span><br><span class="line"><span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line"></span><br><span class="line"><span class="comment">' 获取矢量图层 IFeatureLayer</span></span><br><span class="line"><span class="keyword">Dim</span> pFeatLyr <span class="keyword">As</span> IFeatureLayer</span><br><span class="line"><span class="keyword">Set</span> pFeatLyr = pLayer</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">'获取表 IFeatureClass</span></span><br><span class="line"><span class="keyword">Dim</span> pFeatCls <span class="keyword">As</span> IFeatureClass</span><br><span class="line"><span class="keyword">Set</span> pFeatCls = pFeatLyr.FeatureClass</span><br><span class="line"></span><br><span class="line"><span class="comment">'判断需要创建的字段是否已经存在</span></span><br><span class="line"><span class="keyword">Dim</span> sLenField <span class="keyword">As</span> <span class="built_in">String</span></span><br><span class="line"><span class="keyword">Dim</span> sWqdField <span class="keyword">As</span> <span class="built_in">String</span></span><br><span class="line">sLenField = <span class="string">"lineLength"</span></span><br><span class="line">sWqdField = <span class="string">"wqd"</span></span><br><span class="line"><span class="keyword">If</span> pFeatCls.FindField(sLenField) &lt;&gt; <span class="number">-1</span> <span class="keyword">Or</span> pFeatCls.FindField(sWqdField) &lt;&gt; <span class="number">-1</span> <span class="keyword">Then</span></span><br><span class="line">    MsgBox <span class="string">"字段已经存在，请检查"</span></span><br><span class="line">    <span class="keyword">Exit</span> <span class="keyword">Sub</span></span><br><span class="line"><span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line"><span class="comment">'创建字段</span></span><br><span class="line"><span class="keyword">Dim</span> lenField <span class="keyword">As</span> IFieldEdit</span><br><span class="line"><span class="keyword">Dim</span> wqdField <span class="keyword">As</span> IFieldEdit</span><br><span class="line"><span class="keyword">Set</span> lenField = <span class="keyword">New</span> Field</span><br><span class="line"><span class="keyword">Set</span> wqdField = <span class="keyword">New</span> Field</span><br><span class="line"><span class="comment">'设置字段名称与类型</span></span><br><span class="line">lenField.Name = sLenField</span><br><span class="line">wqdField.Name = sWqdField</span><br><span class="line">lenField.Type = esriFieldTypeDouble</span><br><span class="line">wqdField.Type = esriFieldTypeDouble</span><br><span class="line"><span class="comment">'添加字段</span></span><br><span class="line">pFeatCls.AddField lenField</span><br><span class="line">pFeatCls.AddField wqdField</span><br><span class="line"></span><br><span class="line"><span class="comment">'获取IFeatureCursor</span></span><br><span class="line"><span class="keyword">Dim</span> pFeatCur <span class="keyword">As</span> IFeatureCursor</span><br><span class="line"><span class="keyword">Set</span> pFeatCur = pFeatCls.Update(<span class="literal">Nothing</span>, <span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">'获取 IFeature</span></span><br><span class="line"><span class="keyword">Dim</span> pFeat <span class="keyword">As</span> IFeature</span><br><span class="line"><span class="keyword">Set</span> pFeat = pFeatCur.NextFeature</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">Dim</span> s <span class="keyword">As</span> <span class="built_in">String</span> <span class="comment">'打印的文本字符串</span></span><br><span class="line"><span class="keyword">Dim</span> line <span class="keyword">As</span> IPolyline <span class="comment">'ILine</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">Dim</span> idLen <span class="keyword">As</span> <span class="built_in">Integer</span> <span class="comment">'长度字段的索引</span></span><br><span class="line"><span class="keyword">Dim</span> idWqd <span class="keyword">As</span> <span class="built_in">Integer</span> <span class="comment">'弯曲度字段的索引</span></span><br><span class="line"><span class="keyword">Dim</span> idName <span class="keyword">As</span> <span class="built_in">Integer</span> <span class="comment">'NAME字段的索引</span></span><br><span class="line"><span class="comment">' 索引赋值</span></span><br><span class="line">idLen = pFeatCls.FindField(sLenField)</span><br><span class="line">idWqd = pFeatCls.FindField(sWqdField)</span><br><span class="line">idName = pFeatCls.FindField(<span class="string">"NAME"</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">Dim</span> fPoint <span class="keyword">As</span> IPoint <span class="comment">'线段首点</span></span><br><span class="line"><span class="keyword">Dim</span> lPoint <span class="keyword">As</span> IPoint <span class="comment">'线段末点</span></span><br><span class="line"><span class="keyword">Dim</span> dis <span class="keyword">As</span> <span class="built_in">Double</span> <span class="comment">'首末点直线长度</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">Do</span> <span class="keyword">While</span> <span class="keyword">Not</span> pFeat <span class="keyword">Is</span> <span class="literal">Nothing</span></span><br><span class="line">    <span class="keyword">Set</span> line = pFeat.Shape  <span class="comment">'线</span></span><br><span class="line">    pFeat.Value(idLen) = line.Length  <span class="comment">'给长度字段赋值</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">'首末点直线长度计算</span></span><br><span class="line">    <span class="keyword">Set</span> fPoint = line.FromPoint</span><br><span class="line">    <span class="keyword">Set</span> lPoint = line.ToPoint</span><br><span class="line">    dis = ((fPoint.X - lPoint.X) ^ <span class="number">2</span> + (fPoint.Y - lPoint.Y) ^ <span class="number">2</span>) ^ (<span class="number">1</span> / <span class="number">2</span>)</span><br><span class="line">    pFeat.Value(idWqd) = dis / line.Length <span class="comment">'弯曲度赋值到字段中</span></span><br><span class="line">    </span><br><span class="line">    s = s + pFeat.Value(idName) + Str(line.Length) + sWqdField + Str(dis / line.Length) + vbNewLine    <span class="comment">'输出字符串</span></span><br><span class="line">    pFeatCur.UpdateFeature pFeat <span class="comment">'更新要素</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">Set</span> pFeat = pFeatCur.NextFeature <span class="comment">'不加是死循环</span></span><br><span class="line"><span class="keyword">Loop</span></span><br><span class="line"></span><br><span class="line">MsgBox s</span><br><span class="line"><span class="keyword">End</span> <span class="keyword">Sub</span></span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ArcMapEngine</tag>
        <tag>vba</tag>
      </tags>
  </entry>
  <entry>
    <title>Python arcpy 计算点经纬度坐标</title>
    <url>/2019-09-18-python-arcpy-ji-suan-dian-jing-wei-du-zuo-biao.html</url>
    <content><![CDATA[<ul>
<li>arcpy</li>
</ul>
<a id="more"></a>

<h3 id="脚本"><a href="#脚本" class="headerlink" title="脚本"></a>脚本</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 功能：添加两个字段，计算点的经纬度坐标</span></span><br><span class="line"><span class="comment"># 作者：inno</span></span><br><span class="line"><span class="comment"># 说明：添加两个字段，计算点的经纬度坐标</span></span><br><span class="line"><span class="comment"># 日期：2019/9/18</span></span><br><span class="line"><span class="keyword">import</span> arcpy <span class="keyword">as</span> ap</span><br><span class="line"><span class="keyword">import</span> arcpy.mapping <span class="keyword">as</span> mp</span><br><span class="line">mxd = mp.MapDocument(<span class="string">'current'</span>)</span><br><span class="line"></span><br><span class="line">df = mp.ListDataFrames(mxd)[<span class="number">0</span>]</span><br><span class="line">lyr = mp.ListLayers(df)[<span class="number">2</span>] <span class="comment"># 此文档点图层在第三个位置</span></span><br><span class="line"><span class="comment"># 添加两个字段</span></span><br><span class="line">ap.AddField_management(lyr, <span class="string">"pyX"</span>, <span class="string">"DOUBLE"</span>)</span><br><span class="line">ap.AddField_management(lyr, <span class="string">"pyY"</span>, <span class="string">"DOUBLE"</span>)</span><br><span class="line"><span class="comment"># 使用arcpy.da.UpdateCursor() "shape@XY"几何令牌获取经纬度坐标x,y</span></span><br><span class="line"><span class="comment"># ["shape@XY", "pyX", "pyY"] 后两个参数是传入的字段</span></span><br><span class="line"><span class="keyword">with</span> ap.da.UpdateCursor(lyr, [<span class="string">"shape@XY"</span>, <span class="string">"pyX"</span>, <span class="string">"pyY"</span>]) <span class="keyword">as</span> cur:</span><br><span class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> cur:</span><br><span class="line">        x, y = row[<span class="number">0</span>] </span><br><span class="line">        row[<span class="number">1</span>] = x        </span><br><span class="line">        row[<span class="number">2</span>] = y</span><br><span class="line">        cur.updateRow(row)</span><br></pre></td></tr></table></figure>

<h3 id="工具脚本"><a href="#工具脚本" class="headerlink" title="工具脚本"></a>工具脚本</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 功能：添加两个字段，计算点的经纬度坐标</span></span><br><span class="line"><span class="comment"># 作者：inno</span></span><br><span class="line"><span class="comment"># 说明：工具脚本，添加两个字段，计算点的经纬度坐标</span></span><br><span class="line"><span class="comment"># 日期：2019/9/18</span></span><br><span class="line"><span class="keyword">import</span> arcpy <span class="keyword">as</span> ap</span><br><span class="line"><span class="keyword">import</span> arcpy.mapping <span class="keyword">as</span> mp</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取参数</span></span><br><span class="line">lyr = ap.GetParameterAsText(<span class="number">0</span>)</span><br><span class="line">fldX = ap.GetParameterAsText(<span class="number">1</span>)</span><br><span class="line">fldY = ap.GetParameterAsText(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加两个字段</span></span><br><span class="line">ap.AddField_management(lyr, fldX, <span class="string">"DOUBLE"</span>)</span><br><span class="line">ap.AddField_management(lyr, fldY, <span class="string">"DOUBLE"</span>)</span><br><span class="line"><span class="comment"># 使用arcpy.da.UpdateCursor() "shape@XY"几何令牌获取经纬度坐标x,y</span></span><br><span class="line"><span class="comment"># ["shape@XY", "pyX", "pyY"] 后两个参数是传入的字段</span></span><br><span class="line"><span class="keyword">with</span> ap.da.UpdateCursor(lyr, [<span class="string">"shape@XY"</span>, fldX, fldY]) <span class="keyword">as</span> cur:</span><br><span class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> cur:</span><br><span class="line">        x, y = row[<span class="number">0</span>] </span><br><span class="line">        row[<span class="number">1</span>] = x        </span><br><span class="line">        row[<span class="number">2</span>] = y</span><br><span class="line">        cur.updateRow(row)</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ArcMapEngine</tag>
        <tag>arcpy</tag>
      </tags>
  </entry>
  <entry>
    <title>vba ArcMap UI控件  计算要素图层面积</title>
    <url>/2019-09-18-vba-arcmap-ui-kong-jian-ji-suan-dian-zuo-biao.html</url>
    <content><![CDATA[<ul>
<li>计算点坐标</li>
<li>添加两个字段，X和Y，X为经度，Y为纬度</li>
</ul>
<a id="more"></a>

<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight vb"><table><tr><td class="code"><pre><span class="line"><span class="keyword">Private</span> <span class="keyword">Sub</span> UIButtonControl3_Click()</span><br><span class="line"><span class="comment">'功能：计算点坐标</span></span><br><span class="line"><span class="comment">'作者：inno</span></span><br><span class="line"><span class="comment">'说明：代码实现新建两个字段，X和Y，X为经度，Y为纬度</span></span><br><span class="line"><span class="comment">'日期：2019/9/18</span></span><br><span class="line"></span><br><span class="line"><span class="comment">'IApplicatin开始</span></span><br><span class="line"><span class="keyword">Dim</span> pApp <span class="keyword">As</span> IApplication</span><br><span class="line"><span class="keyword">Set</span> pApp = Application</span><br><span class="line"></span><br><span class="line"><span class="comment">'获取文档 MxDocument</span></span><br><span class="line"><span class="keyword">Dim</span> pMxDoc <span class="keyword">As</span> IMxDocument</span><br><span class="line"><span class="keyword">Set</span> pMxDoc = pApp.Document</span><br><span class="line"></span><br><span class="line"><span class="comment">'获取当前地图 IMap</span></span><br><span class="line"><span class="keyword">Dim</span> pMap <span class="keyword">As</span> IMap</span><br><span class="line"><span class="keyword">Set</span> pMap = pMxDoc.FocusMap</span><br><span class="line"></span><br><span class="line"><span class="comment">'获取点图层 ILayer</span></span><br><span class="line"><span class="keyword">Dim</span> pLayer <span class="keyword">As</span> ILayer</span><br><span class="line"><span class="keyword">Set</span> pLayer = pMap.Layer(<span class="number">2</span>) <span class="comment">'点图层在第三个位置</span></span><br><span class="line"></span><br><span class="line"><span class="comment">'判断图层是否为矢量</span></span><br><span class="line"><span class="keyword">If</span> <span class="keyword">Not</span> <span class="built_in">TypeOf</span> pLayer <span class="keyword">Is</span> IFeatureLayer <span class="keyword">Then</span></span><br><span class="line">    MsgBox <span class="string">"图层不是矢量，已退出"</span></span><br><span class="line">    <span class="keyword">Exit</span> <span class="keyword">Sub</span></span><br><span class="line"><span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line"></span><br><span class="line"><span class="comment">'获取矢量图层 IFeatureLayer</span></span><br><span class="line"><span class="keyword">Dim</span> pFeatLyr <span class="keyword">As</span> IFeatureLayer</span><br><span class="line"><span class="keyword">Set</span> pFeatLyr = pLayer</span><br><span class="line"></span><br><span class="line"><span class="comment">'获取表 IFeatureClass</span></span><br><span class="line"><span class="keyword">Dim</span> pFeatCls <span class="keyword">As</span> IFeatureClass</span><br><span class="line"><span class="keyword">Set</span> pFeatCls = pFeatLyr.FeatureClass</span><br><span class="line"></span><br><span class="line"><span class="comment">'定义添加的字段名</span></span><br><span class="line"><span class="keyword">Dim</span> sXField <span class="keyword">As</span> <span class="built_in">String</span></span><br><span class="line"><span class="keyword">Dim</span> sYField <span class="keyword">As</span> <span class="built_in">String</span></span><br><span class="line">sXField = <span class="string">"X"</span></span><br><span class="line">sYField = <span class="string">"Y"</span></span><br><span class="line"><span class="comment">'判断属性表中是否存在需要创建的字段</span></span><br><span class="line"><span class="keyword">If</span> pFeatCls.FindField(sXField) &lt;&gt; <span class="number">-1</span> <span class="keyword">Or</span> pFeatCls.FindField(sYField) &lt;&gt; <span class="number">-1</span> <span class="keyword">Then</span></span><br><span class="line">    MsgBox <span class="string">"需要创建的字段已存在，请重试"</span></span><br><span class="line">    <span class="keyword">Exit</span> <span class="keyword">Sub</span></span><br><span class="line"><span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line"><span class="comment">'创建字段并添加字段属性</span></span><br><span class="line"><span class="keyword">Dim</span> xField <span class="keyword">As</span> IFieldEdit</span><br><span class="line"><span class="keyword">Dim</span> yField <span class="keyword">As</span> IFieldEdit</span><br><span class="line"><span class="keyword">Set</span> xField = <span class="keyword">New</span> Field</span><br><span class="line"><span class="keyword">Set</span> yField = <span class="keyword">New</span> Field</span><br><span class="line">xField.Name = sXField</span><br><span class="line">yField.Name = sYField</span><br><span class="line">xField.Type = esriFieldTypeDouble</span><br><span class="line">yField.Type = esriFieldTypeDouble</span><br><span class="line"></span><br><span class="line"><span class="comment">'将字段添加到属性表</span></span><br><span class="line">pFeatCls.AddField xField <span class="comment">'加括号报错</span></span><br><span class="line">pFeatCls.AddField yField</span><br><span class="line"></span><br><span class="line"><span class="comment">'获取cursor IFeatureCursor</span></span><br><span class="line"><span class="keyword">Dim</span> pFeatCur <span class="keyword">As</span> IFeatureCursor</span><br><span class="line"><span class="keyword">Set</span> pFeatCur = pFeatCls.Update(<span class="literal">Nothing</span>, <span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">'获取要素 IFeature</span></span><br><span class="line"><span class="keyword">Dim</span> pFeat <span class="keyword">As</span> IFeature</span><br><span class="line"><span class="keyword">Set</span> pFeat = pFeatCur.NextFeature</span><br><span class="line"></span><br><span class="line"><span class="keyword">Dim</span> pnt <span class="keyword">As</span> IPoint <span class="comment">'IPoint 存储点</span></span><br><span class="line"><span class="keyword">Dim</span> s <span class="keyword">As</span> <span class="built_in">String</span> <span class="comment">'字符串，用于打印</span></span><br><span class="line"><span class="keyword">Dim</span> idX <span class="keyword">As</span> <span class="built_in">Integer</span> <span class="comment">'X字段索引</span></span><br><span class="line"><span class="keyword">Dim</span> idY <span class="keyword">As</span> <span class="built_in">Integer</span> <span class="comment">'Y字段索引</span></span><br><span class="line"><span class="keyword">Dim</span> idName <span class="keyword">As</span> <span class="built_in">Integer</span> <span class="comment">'NAME 字段索引</span></span><br><span class="line"></span><br><span class="line"><span class="comment">'给索引赋值</span></span><br><span class="line">idX = pFeatCls.FindField(sXField)</span><br><span class="line">idY = pFeatCls.FindField(sYField)</span><br><span class="line">idName = pFeatCls.FindField(<span class="string">"NAME"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">'循环赋值</span></span><br><span class="line"><span class="keyword">Do</span> <span class="keyword">While</span> <span class="keyword">Not</span> pFeat <span class="keyword">Is</span> <span class="literal">Nothing</span></span><br><span class="line">    <span class="keyword">Set</span> pnt = pFeat.Shape</span><br><span class="line">    <span class="comment">'为字段赋值</span></span><br><span class="line">    pFeat.Value(idX) = pnt.X</span><br><span class="line">    pFeat.Value(idY) = pnt.Y</span><br><span class="line">    pFeatCur.UpdateFeature pFeat <span class="comment">'更新每一行</span></span><br><span class="line">    </span><br><span class="line">    s = s + pFeat.Value(idName) + <span class="string">": X "</span> + Str(pnt.X) + <span class="string">" Y "</span> + Str(pnt.Y) + vbNewLine</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">Set</span> pFeat = pFeatCur.NextFeature <span class="comment">'循环</span></span><br><span class="line"><span class="keyword">Loop</span></span><br><span class="line"></span><br><span class="line">MsgBox s</span><br><span class="line"></span><br><span class="line"><span class="keyword">End</span> <span class="keyword">Sub</span></span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ArcMapEngine</tag>
        <tag>vba</tag>
      </tags>
  </entry>
  <entry>
    <title>Python 计算要素图层面积</title>
    <url>/2019-09-18-py-tian-jia-zi-duan-ji-suan-mian-ji.html</url>
    <content><![CDATA[<ul>
<li>arcpy</li>
<li>获取矢量面图层，添加字段，实现面积的计算</li>
</ul>
<a id="more"></a>

<h3 id="脚本"><a href="#脚本" class="headerlink" title="脚本"></a>脚本</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 功能：计算矢量图层面积</span></span><br><span class="line"><span class="comment"># 作者：inno</span></span><br><span class="line"><span class="comment"># 说明：获取矢量面图层，添加字段，实现面积的计算</span></span><br><span class="line"><span class="comment"># 日期：2019/9/18</span></span><br><span class="line"><span class="keyword">import</span> arcpy <span class="keyword">as</span> ap</span><br><span class="line"><span class="keyword">import</span> arcpy.mapping <span class="keyword">as</span> mp</span><br><span class="line">mxd = mp.MapDocument(<span class="string">'current'</span>) <span class="comment"># 获取当前地图文档</span></span><br><span class="line">df = mp.ListDataFrames(mxd)[<span class="number">0</span>] <span class="comment"># 获取第一个数据框</span></span><br><span class="line">lyr = mp.ListLayers(df)[<span class="number">0</span>] <span class="comment"># 获取第一个图层</span></span><br><span class="line">ap.AddField_management(lyr, <span class="string">"pyArea"</span>, <span class="string">"DOUBLE"</span>) <span class="comment"># 添加字段</span></span><br><span class="line"><span class="comment"># 计算字段-计算面积</span></span><br><span class="line">ap.CalculateField_management(lyr, <span class="string">"pyArea"</span>, <span class="string">"!shape.area!"</span>, <span class="string">"PYTHON"</span>)</span><br></pre></td></tr></table></figure>

<h3 id="工具脚本"><a href="#工具脚本" class="headerlink" title="工具脚本"></a>工具脚本</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 功能：计算矢量图层面积</span></span><br><span class="line"><span class="comment"># 作者：inno</span></span><br><span class="line"><span class="comment"># 说明：在工具中，获取矢量面图层，添加字段，实现面积的计算</span></span><br><span class="line"><span class="comment"># 日期：2019/9/18</span></span><br><span class="line"><span class="keyword">import</span> arcpy <span class="keyword">as</span> ap</span><br><span class="line"><span class="keyword">import</span> arcpy.mapping <span class="keyword">as</span> mp</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取工具中输入的参数</span></span><br><span class="line">lyr = ap.GetParameterAsText(<span class="number">0</span>)</span><br><span class="line">fld = ap.GetParameterAsText(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">ap.AddField_management(lyr, fld, <span class="string">"DOUBLE"</span>) <span class="comment"># 添加字段</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 计算字段-计算面积</span></span><br><span class="line">ap.CalculateField_management(lyr, fld, <span class="string">"!shape.area!"</span>, <span class="string">"PYTHON"</span>)</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ArcMapEngine</tag>
        <tag>arcpy</tag>
      </tags>
  </entry>
  <entry>
    <title>Python arcpy 计算曲线长度与弯曲度</title>
    <url>/2019-09-18-python-arcpy-ji-suan-qu-xian-chang-du-yu-wan-qu-du.html</url>
    <content><![CDATA[<ul>
<li>arcpy</li>
<li>获取线图层，新建两个字段，将计算得到的曲线长度与弯曲度保存在字段</li>
</ul>
<a id="more"></a>

<h3 id="脚本"><a href="#脚本" class="headerlink" title="脚本"></a>脚本</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 功能：计算曲线长度与弯曲度</span></span><br><span class="line"><span class="comment"># 作者：inno</span></span><br><span class="line"><span class="comment"># 说明：获取线图层，新建两个字段，将计算得到的曲线长度与弯曲度保存在字段</span></span><br><span class="line"><span class="comment"># 日期：2019/9/18</span></span><br><span class="line"><span class="keyword">import</span> arcpy <span class="keyword">as</span> ap</span><br><span class="line"><span class="keyword">import</span> arcpy.mapping <span class="keyword">as</span> mp</span><br><span class="line">mxd = mp.MapDocument(<span class="string">'current'</span>)</span><br><span class="line">df = mp.ListDataFrames(mxd)[<span class="number">0</span>]</span><br><span class="line">lyr = mp.ListLayers(df)[<span class="number">1</span>] <span class="comment"># 此文档线图层在第二个位置 #</span></span><br><span class="line"><span class="comment"># 添加两个字段</span></span><br><span class="line">ap.AddField_management(lyr, <span class="string">"pyLength"</span>, <span class="string">"DOUBLE"</span>)</span><br><span class="line">ap.AddField_management(lyr, <span class="string">"pyWqd"</span>, <span class="string">"DOUBLE"</span>)</span><br><span class="line"><span class="comment"># 获取游标</span></span><br><span class="line">cursor = ap.UpdateCursor(lyr)</span><br><span class="line"><span class="comment"># 遍历表中每一行的要素，并计算赋值</span></span><br><span class="line"><span class="keyword">for</span> row <span class="keyword">in</span> cursor:</span><br><span class="line">    line = row.shape <span class="comment"># 获取要素形状</span></span><br><span class="line">    row.setValue(<span class="string">"pyLength"</span>, line.length) <span class="comment"># 曲线长度赋值</span></span><br><span class="line">    fPnt = ap.PointGeometry(line.firstPoint)</span><br><span class="line">    lPnt = ap.PointGeometry(line.lastPoint) <span class="comment"># 获取曲线首末点</span></span><br><span class="line">    dis = fPnt.distanceTo(lPnt) <span class="comment"># 计算两点之间直线距离</span></span><br><span class="line">    row.setValue(<span class="string">"pyWqd"</span>, dis/line.length) <span class="comment"># 弯曲度赋值</span></span><br><span class="line">    cursor.updateRow(row) <span class="comment"># 更新行</span></span><br></pre></td></tr></table></figure>

<h3 id="工具脚本"><a href="#工具脚本" class="headerlink" title="工具脚本"></a>工具脚本</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 功能：计算曲线长度与弯曲度</span></span><br><span class="line"><span class="comment"># 作者：inno</span></span><br><span class="line"><span class="comment"># 说明：工具脚本，获取线图层，新建两个字段，将计算得到的曲线长度与弯曲度保存在字段</span></span><br><span class="line"><span class="comment"># 日期：2019/9/18</span></span><br><span class="line"><span class="keyword">import</span> arcpy <span class="keyword">as</span> ap</span><br><span class="line"><span class="keyword">import</span> arcpy.mapping <span class="keyword">as</span> mp</span><br><span class="line"></span><br><span class="line">lyr = ap.GetParameterAsText(<span class="number">0</span>)</span><br><span class="line"><span class="comment"># 获取要创建的字段名称</span></span><br><span class="line">fldLen = ap.GetParameterAsText(<span class="number">1</span>) </span><br><span class="line">fldWqd = ap.GetParameterAsText(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加两个字段</span></span><br><span class="line">ap.AddField_management(lyr, fldLen, <span class="string">"DOUBLE"</span>)</span><br><span class="line">ap.AddField_management(lyr, fldWqd, <span class="string">"DOUBLE"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取游标</span></span><br><span class="line">cursor = ap.UpdateCursor(lyr)</span><br><span class="line"><span class="comment"># 遍历表中每一行的要素，并计算赋值</span></span><br><span class="line"><span class="keyword">for</span> row <span class="keyword">in</span> cursor:</span><br><span class="line">    line = row.shape <span class="comment"># 获取要素形状</span></span><br><span class="line">    row.setValue(fldLen, line.length) <span class="comment"># 曲线长度赋值</span></span><br><span class="line">    fPnt = ap.PointGeometry(line.firstPoint)</span><br><span class="line">    lPnt = ap.PointGeometry(line.lastPoint) <span class="comment"># 获取曲线首末点</span></span><br><span class="line">    dis = fPnt.distanceTo(lPnt) <span class="comment"># 计算两点之间直线距离</span></span><br><span class="line">    row.setValue(fldWqd, dis/line.length) <span class="comment"># 弯曲度赋值</span></span><br><span class="line">    cursor.updateRow(row) <span class="comment"># 更新行</span></span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ArcMapEngine</tag>
        <tag>arcpy</tag>
      </tags>
  </entry>
  <entry>
    <title>Python 计算面的周长</title>
    <url>/2019-09-19-python-arcpy-ji-suan-mian-de-zhou-chang.html</url>
    <content><![CDATA[<ul>
<li>arcpy</li>
<li>计算面图层周长</li>
</ul>
<a id="more"></a>

<h3 id="脚本"><a href="#脚本" class="headerlink" title="脚本"></a>脚本</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 功能：计算面图层周长</span></span><br><span class="line"><span class="comment"># 作者：inno</span></span><br><span class="line"><span class="comment"># 说明：新建字段，计算面图层的周长</span></span><br><span class="line"><span class="comment"># 日期：2019/9/19</span></span><br><span class="line"><span class="keyword">import</span> arcpy <span class="keyword">as</span> ap</span><br><span class="line"><span class="keyword">import</span> arcpy.mapping <span class="keyword">as</span> mp</span><br><span class="line">mxd = mp.MapDocument(<span class="string">'current'</span>)</span><br><span class="line">df = mp.ListDataFrames(mxd)[<span class="number">0</span>]</span><br><span class="line">lyr = mp.ListLayers(df)[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">ap.AddField_management(lyr, <span class="string">"Perimeter1"</span>, <span class="string">"DOUBLE"</span>) <span class="comment"># 新建字段</span></span><br><span class="line">ap.CalculateField_management(lyr, <span class="string">"Perimeter1"</span>, <span class="string">"!shape.length!"</span>, <span class="string">"PYTHON"</span>)</span><br></pre></td></tr></table></figure>

<h3 id="工具脚本"><a href="#工具脚本" class="headerlink" title="工具脚本"></a>工具脚本</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 功能：计算面图层周长</span></span><br><span class="line"><span class="comment"># 作者：inno</span></span><br><span class="line"><span class="comment"># 说明：工具脚本，新建字段，计算面图层的周长</span></span><br><span class="line"><span class="comment"># 日期：2019/9/19</span></span><br><span class="line"><span class="keyword">import</span> arcpy <span class="keyword">as</span> ap</span><br><span class="line"><span class="keyword">import</span> arcpy.mapping <span class="keyword">as</span> mp</span><br><span class="line"><span class="comment"># 获取输入</span></span><br><span class="line">lyr = ap.GetParameterAsText(<span class="number">0</span>)</span><br><span class="line">fld = ap.GetParameterAsText(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">ap.AddField_management(lyr, fld, <span class="string">"DOUBLE"</span>) <span class="comment"># 新建字段</span></span><br><span class="line"><span class="comment"># 计算周长</span></span><br><span class="line">ap.CalculateField_management(lyr, fld, <span class="string">"!shape.length!"</span>, <span class="string">"PYTHON"</span>)</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ArcMapEngine</tag>
        <tag>arcpy</tag>
      </tags>
  </entry>
  <entry>
    <title>arcEngine 计算点坐标、线长、面积</title>
    <url>/2019-09-23-cshape-arcengine-addin.html</url>
    <content><![CDATA[<ul>
<li>VS新建addin</li>
</ul>
<p>功能：</p>
<ul>
<li>C# 获取当前文档地图图层</li>
<li>添加字段, 计算面图层的面积</li>
<li>添加字段，计算线图层的长度</li>
<li>添加字段，计算点图层的经纬度</li>
</ul>
<a id="more"></a>

<h3 id="addin-xxx-cs文件"><a href="#addin-xxx-cs文件" class="headerlink" title="addin         xxx.cs文件"></a>addin         xxx.cs文件</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">using System;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using System.Text;</span><br><span class="line">using System.IO;</span><br><span class="line">using ESRI.ArcGIS.Geodatabase;</span><br><span class="line">using ESRI.ArcGIS.Carto;</span><br><span class="line">using System.Windows.Forms;</span><br><span class="line">using ESRI.ArcGIS.ArcMapUI;</span><br><span class="line">using ESRI.ArcGIS.Geometry;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">namespace calcArea</span><br><span class="line">&#123;</span><br><span class="line">    public class calcArea : ESRI.ArcGIS.Desktop.AddIns.Button</span><br><span class="line">    &#123;</span><br><span class="line">        &#x2F;&#x2F; 在C#中类有三种，</span><br><span class="line">        &#x2F;&#x2F; 抽象类(无构造函数，不能创建新的对象，用于创建新的类、</span><br><span class="line">        &#x2F;&#x2F; com类(组件类) 用于创建新的对象的类，可用new生成，所以必须有构造函数</span><br><span class="line">        &#x2F;&#x2F; 第三种是普通类，不是抽象类，不能用new创建，是由其他类生成的</span><br><span class="line">        public calcArea()</span><br><span class="line">        &#123;</span><br><span class="line"></span><br><span class="line">            &#x2F;&#x2F; FeatureClass是不可创建对象的普通类</span><br><span class="line">            &#x2F;&#x2F; IFeatureLayer pFeatLyr &#x3D; new FeatureLayer(); &#x2F;&#x2F;是可创建的com类，利用new关键字生成新的矢量图层，</span><br><span class="line">                                                        &#x2F;&#x2F;  是一个对象，用接口操作</span><br><span class="line">                   </span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        private void funAddField(IFeatureClass pFeatCls, string fldName, esriFieldType fldType) </span><br><span class="line">        &#123;</span><br><span class="line">            &#x2F;&#x2F; 添加字段函数 &#x2F;&#x2F;</span><br><span class="line"></span><br><span class="line">            &#x2F;&#x2F; 判断字段是否存在</span><br><span class="line">            if (pFeatCls.FindField(fldName) !&#x3D; -1) &#x2F;&#x2F; 字段已存在</span><br><span class="line">            &#123;</span><br><span class="line">                MessageBox.Show(&quot;欲创建的字段已存在，使用存在字段计算！！&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">            else &#x2F;&#x2F; 字段不存在，创建</span><br><span class="line">            &#123;</span><br><span class="line">                &#x2F;&#x2F; IFields pFlds &#x3D; pFeatCls.Fields;</span><br><span class="line">                IFieldEdit pFieldEdit &#x3D; new FieldClass();</span><br><span class="line">                pFieldEdit.Name_2 &#x3D; fldName;</span><br><span class="line">                pFieldEdit.Type_2 &#x3D; fldType;</span><br><span class="line">                pFieldEdit.Editable_2 &#x3D; true;</span><br><span class="line">                pFeatCls.AddField(pFieldEdit); &#x2F;&#x2F; 添加字段</span><br><span class="line">            &#125;</span><br><span class="line">                       </span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        protected override void OnClick()</span><br><span class="line">        &#123;</span><br><span class="line">            &#x2F;&#x2F;</span><br><span class="line">            &#x2F;&#x2F;  TODO: Sample code showing how to access button host</span><br><span class="line">            &#x2F;&#x2F;</span><br><span class="line">            ArcMap.Application.CurrentTool &#x3D; null;</span><br><span class="line">            &#x2F;*</span><br><span class="line">         功能：计算面图层面积，线图层长度，点图层经纬度坐标</span><br><span class="line">         作者：1985857412@qq.com</span><br><span class="line">         说明：添加字段，计算计算面图层面积，线图层长度，点图层经纬度坐标</span><br><span class="line">         * 操作的是地图文档中第一个图层</span><br><span class="line">         日期：2019&#x2F;9&#x2F;23</span><br><span class="line">         *&#x2F;</span><br><span class="line">            &#x2F;&#x2F; 获取当前地图文档</span><br><span class="line">            IMxDocument pDoc &#x3D; ArcMap.Application.Document as IMxDocument;</span><br><span class="line">            IMap pMap &#x3D; pDoc.ActivatedView.FocusMap; &#x2F;&#x2F; 获取地图</span><br><span class="line">            ILayer pLyr &#x3D; pMap.get_Layer(0); &#x2F;&#x2F; 获取地图第一个图层</span><br><span class="line">            IFeatureLayer pFeatLyr &#x3D; pLyr as IFeatureLayer; &#x2F;&#x2F;QI</span><br><span class="line">            &#x2F;&#x2F;MessageBox.Show(pFeatLyr.Name); 测试打印要素名称</span><br><span class="line">            IFeatureClass pFeatCls &#x3D; pFeatLyr.FeatureClass;</span><br><span class="line"></span><br><span class="line">            IFeatureCursor pFeatCur; &#x2F;&#x2F; 游标</span><br><span class="line">            IFeature pFeat; &#x2F;&#x2F; feature</span><br><span class="line"></span><br><span class="line">            string s &#x3D; &quot;&quot;; &#x2F;&#x2F; 存储打印字符串</span><br><span class="line">                      </span><br><span class="line">            &#x2F;&#x2F; 面图层计算面积</span><br><span class="line">            if (esriGeometryType.esriGeometryPolygon &#x3D;&#x3D; pFeatCls.ShapeType)</span><br><span class="line">            &#123;</span><br><span class="line">                &#x2F;&#x2F; 调用函数，添加字段</span><br><span class="line">                funAddField(pFeatCls, &quot;addin_area&quot;, esriFieldType.esriFieldTypeDouble);</span><br><span class="line"></span><br><span class="line">                pFeatCur &#x3D; pFeatCls.Update(null, false); &#x2F;&#x2F; 获取游标</span><br><span class="line">                pFeat &#x3D; pFeatCur.NextFeature(); &#x2F;&#x2F; 获取feature</span><br><span class="line">                IPolygon pPlg;  &#x2F;&#x2F; polygon对象</span><br><span class="line">                IArea pArea;    &#x2F;&#x2F; area对象</span><br><span class="line">                </span><br><span class="line"></span><br><span class="line">                int nameId &#x3D; pFeatCls.FindField(&quot;NAME&quot;); &#x2F;&#x2F; NAME字段索引</span><br><span class="line">                int areaId &#x3D; pFeatCls.FindField(&quot;addin_area&quot;); &#x2F;&#x2F; addin_area字段索引</span><br><span class="line">                                </span><br><span class="line">                while (pFeat !&#x3D; null) </span><br><span class="line">                &#123;</span><br><span class="line">                    pPlg &#x3D; pFeat.Shape as IPolygon;  &#x2F;&#x2F; 赋值</span><br><span class="line">                    pArea &#x3D; pPlg as IArea;</span><br><span class="line"></span><br><span class="line">                    pFeat.set_Value(areaId, pArea.Area); &#x2F;&#x2F; 面积字段赋值</span><br><span class="line"></span><br><span class="line">                    s &#x3D; s + pFeat.get_Value(nameId) + Convert.ToString(pArea.Area) + &quot;\n&quot;;</span><br><span class="line"></span><br><span class="line">                    pFeatCur.UpdateFeature(pFeat); &#x2F;&#x2F; 更新</span><br><span class="line"></span><br><span class="line">                    pFeat &#x3D; pFeatCur.NextFeature();</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                MessageBox.Show(s);</span><br><span class="line">                MessageBox.Show(&quot;计算面积与赋值字段：ok&quot;);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            &#x2F;&#x2F; 线图层计算长度</span><br><span class="line">            if(esriGeometryType.esriGeometryPolyline &#x3D;&#x3D; pFeatCls.ShapeType)</span><br><span class="line">            &#123;</span><br><span class="line">                &#x2F;&#x2F; 调用函数，添加字段</span><br><span class="line">                funAddField(pFeatCls, &quot;addin_len&quot;, esriFieldType.esriFieldTypeDouble);</span><br><span class="line"></span><br><span class="line">                pFeatCur &#x3D; pFeatCls.Update(null, false); &#x2F;&#x2F; 获取游标</span><br><span class="line">                pFeat &#x3D; pFeatCur.NextFeature(); &#x2F;&#x2F; 获取feature</span><br><span class="line"></span><br><span class="line">                IPolyline pPline;  &#x2F;&#x2F; 线对象</span><br><span class="line">                int nameId &#x3D; pFeatCls.FindField(&quot;NAME&quot;); &#x2F;&#x2F; NAME字段索引</span><br><span class="line">                int lenId &#x3D; pFeatCls.FindField(&quot;addin_len&quot;); &#x2F;&#x2F; addin_len字段索引</span><br><span class="line"></span><br><span class="line">                while (pFeat !&#x3D; null)</span><br><span class="line">                &#123;</span><br><span class="line">                    pPline &#x3D; pFeat.Shape as IPolyline;  &#x2F;&#x2F; 赋值</span><br><span class="line">                   </span><br><span class="line"></span><br><span class="line">                    pFeat.set_Value(lenId, pPline.Length); &#x2F;&#x2F; 长度字段赋值</span><br><span class="line"></span><br><span class="line">                    s &#x3D; s + pFeat.get_Value(nameId) + Convert.ToString(pPline.Length) + &quot;\n&quot;;</span><br><span class="line"></span><br><span class="line">                    pFeatCur.UpdateFeature(pFeat); &#x2F;&#x2F; 更新</span><br><span class="line"></span><br><span class="line">                    pFeat &#x3D; pFeatCur.NextFeature();</span><br><span class="line">                &#125;</span><br><span class="line">                MessageBox.Show(s);</span><br><span class="line">                MessageBox.Show(&quot;计算长度与赋值字段：ok&quot;);</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            &#x2F;&#x2F; 点图层计算经纬度坐标</span><br><span class="line">            if (esriGeometryType.esriGeometryPoint &#x3D;&#x3D; pFeatCls.ShapeType)</span><br><span class="line">            &#123;</span><br><span class="line">                &#x2F;&#x2F; 调用函数，添加x,y字段</span><br><span class="line">                funAddField(pFeatCls, &quot;addin_x&quot;, esriFieldType.esriFieldTypeDouble);</span><br><span class="line">                funAddField(pFeatCls, &quot;addin_y&quot;, esriFieldType.esriFieldTypeDouble);</span><br><span class="line"></span><br><span class="line">                pFeatCur &#x3D; pFeatCls.Update(null, false); &#x2F;&#x2F; 获取游标</span><br><span class="line">                pFeat &#x3D; pFeatCur.NextFeature(); &#x2F;&#x2F; 获取feature</span><br><span class="line"></span><br><span class="line">                IPoint pPnt;  &#x2F;&#x2F; 点对象</span><br><span class="line">                int nameId &#x3D; pFeatCls.FindField(&quot;NAME&quot;); &#x2F;&#x2F; NAME字段索引</span><br><span class="line">                int xId &#x3D; pFeatCls.FindField(&quot;addin_x&quot;); &#x2F;&#x2F; x字段索引</span><br><span class="line">                int yId &#x3D; pFeatCls.FindField(&quot;addin_y&quot;); &#x2F;&#x2F; y字段索引</span><br><span class="line"></span><br><span class="line">                while (pFeat !&#x3D; null)</span><br><span class="line">                &#123;</span><br><span class="line">                    pPnt &#x3D; pFeat.Shape as IPoint;  &#x2F;&#x2F; 赋值</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                    pFeat.set_Value(xId, pPnt.X); &#x2F;&#x2F; x字段赋值</span><br><span class="line">                    pFeat.set_Value(yId, pPnt.Y); &#x2F;&#x2F; y字段赋值</span><br><span class="line"></span><br><span class="line">                    s &#x3D; s + pFeat.get_Value(nameId) + &quot;x:&quot; + Convert.ToString(pPnt.X) + &quot; y:&quot; + </span><br><span class="line">                        Convert.ToString(pPnt.Y) + &quot;\n&quot;;</span><br><span class="line"></span><br><span class="line">                    pFeatCur.UpdateFeature(pFeat); &#x2F;&#x2F; 更新</span><br><span class="line"></span><br><span class="line">                    pFeat &#x3D; pFeatCur.NextFeature();</span><br><span class="line">                &#125;</span><br><span class="line">                MessageBox.Show(s);</span><br><span class="line">                MessageBox.Show(&quot;计算经纬度与赋值字段：ok&quot;);</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            </span><br><span class="line"></span><br><span class="line">            </span><br><span class="line"></span><br><span class="line">            &#x2F;&#x2F;MessageBox.Show(&quot;I am hua&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        protected override void OnUpdate()</span><br><span class="line">        &#123;</span><br><span class="line">            Enabled &#x3D; ArcMap.Application !&#x3D; null;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>ArcMapEngine</tag>
        <tag>VS</tag>
        <tag>addin</tag>
      </tags>
  </entry>
  <entry>
    <title>arcEngine C# 独立的地理信息系统程序 计算点坐标、线长、面积</title>
    <url>/2019-09-23-cshape-du-li-de-di-li-xin-xi-xi-tong-cheng-xu.html</url>
    <content><![CDATA[<p>功能说明：</p>
<ul>
<li>计算面的面积、线的长度、点的坐标</li>
<li>保存在新建的字段</li>
<li>将功能封装为几个函数</li>
<li>函数包括：</li>
<li>AddField() 添加字段</li>
<li>calcArea() 计算面积</li>
<li>calcLine() 计算线长</li>
<li>calcXY() 计算点坐标</li>
</ul>
<h3 id="独立的地理信息系统程序"><a href="#独立的地理信息系统程序" class="headerlink" title="独立的地理信息系统程序"></a>独立的地理信息系统程序</h3><ul>
<li>建立窗体应用程序</li>
<li>添加控件</li>
<li>添加服务代码</li>
<li>新建项classLibrary-&gt;Base Command</li>
</ul>
<h4 id="command1-cs"><a href="#command1-cs" class="headerlink" title="command1.cs"></a>command1.cs</h4><ul>
<li>主要在public command1(){}</li>
<li>OnClick(){}</li>
<li>新建的其他函数</li>
</ul>
<a id="more"></a>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">using System;</span><br><span class="line">using System.Drawing;</span><br><span class="line">using System.Runtime.InteropServices;</span><br><span class="line">using ESRI.ArcGIS.ADF.BaseClasses;</span><br><span class="line">using ESRI.ArcGIS.ADF.CATIDs;</span><br><span class="line">using ESRI.ArcGIS.Controls;</span><br><span class="line">using System.Windows.Forms;</span><br><span class="line">using ESRI.ArcGIS.ArcMapUI;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using System.Text;</span><br><span class="line">using System.IO;</span><br><span class="line">using ESRI.ArcGIS.Geodatabase;</span><br><span class="line">using ESRI.ArcGIS.Carto;</span><br><span class="line">using ESRI.ArcGIS.ArcMapUI;</span><br><span class="line">using ESRI.ArcGIS.Geometry;</span><br><span class="line">using ESRI.ArcGIS;</span><br><span class="line">using System.Windows.Input;</span><br><span class="line">using GISApp;</span><br><span class="line"></span><br><span class="line">namespace ArcMapClassLibrary1</span><br><span class="line">&#123;</span><br><span class="line">    &#x2F;&#x2F;&#x2F; &lt;summary&gt;</span><br><span class="line">    &#x2F;&#x2F;&#x2F; Command that works in ArcMap&#x2F;Map&#x2F;PageLayout</span><br><span class="line">    &#x2F;&#x2F;&#x2F; &lt;&#x2F;summary&gt;</span><br><span class="line">    [Guid(&quot;b31d8a09-03b3-4587-a69e-5944625f7f15&quot;)]</span><br><span class="line">    [ClassInterface(ClassInterfaceType.None)]</span><br><span class="line">    [ProgId(&quot;ArcMapClassLibrary1.Command1&quot;)]</span><br><span class="line">    public sealed class Command1 : BaseCommand</span><br><span class="line">    &#123;</span><br><span class="line">        #region COM Registration Function(s)</span><br><span class="line">        [ComRegisterFunction()]</span><br><span class="line">        [ComVisible(false)]</span><br><span class="line">        static void RegisterFunction(Type registerType)</span><br><span class="line">        &#123;</span><br><span class="line">            &#x2F;&#x2F; Required for ArcGIS Component Category Registrar support</span><br><span class="line">            ArcGISCategoryRegistration(registerType);</span><br><span class="line"></span><br><span class="line">            &#x2F;&#x2F;</span><br><span class="line">            &#x2F;&#x2F; TODO: Add any COM registration code here</span><br><span class="line">            &#x2F;&#x2F;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        [ComUnregisterFunction()]</span><br><span class="line">        [ComVisible(false)]</span><br><span class="line">        static void UnregisterFunction(Type registerType)</span><br><span class="line">        &#123;</span><br><span class="line">            &#x2F;&#x2F; Required for ArcGIS Component Category Registrar support</span><br><span class="line">            ArcGISCategoryUnregistration(registerType);</span><br><span class="line"></span><br><span class="line">            &#x2F;&#x2F;</span><br><span class="line">            &#x2F;&#x2F; TODO: Add any COM unregistration code here</span><br><span class="line">            &#x2F;&#x2F;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        #region ArcGIS Component Category Registrar generated code</span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;summary&gt;</span><br><span class="line">        &#x2F;&#x2F;&#x2F; Required method for ArcGIS Component Category registration -</span><br><span class="line">        &#x2F;&#x2F;&#x2F; Do not modify the contents of this method with the code editor.</span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;&#x2F;summary&gt;</span><br><span class="line">        private static void ArcGISCategoryRegistration(Type registerType)</span><br><span class="line">        &#123;</span><br><span class="line">            string regKey &#x3D; string.Format(&quot;HKEY_CLASSES_ROOT\\CLSID\\&#123;&#123;&#123;0&#125;&#125;&#125;&quot;, registerType.GUID);</span><br><span class="line">            MxCommands.Register(regKey);</span><br><span class="line">            ControlsCommands.Register(regKey);</span><br><span class="line">        &#125;</span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;summary&gt;</span><br><span class="line">        &#x2F;&#x2F;&#x2F; Required method for ArcGIS Component Category unregistration -</span><br><span class="line">        &#x2F;&#x2F;&#x2F; Do not modify the contents of this method with the code editor.</span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;&#x2F;summary&gt;</span><br><span class="line">        private static void ArcGISCategoryUnregistration(Type registerType)</span><br><span class="line">        &#123;</span><br><span class="line">            string regKey &#x3D; string.Format(&quot;HKEY_CLASSES_ROOT\\CLSID\\&#123;&#123;&#123;0&#125;&#125;&#125;&quot;, registerType.GUID);</span><br><span class="line">            MxCommands.Unregister(regKey);</span><br><span class="line">            ControlsCommands.Unregister(regKey);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        #endregion</span><br><span class="line">        #endregion</span><br><span class="line"></span><br><span class="line">        private IHookHelper m_hookHelper &#x3D; null;</span><br><span class="line">        public Command1()</span><br><span class="line">        &#123;</span><br><span class="line">            &#x2F;&#x2F;</span><br><span class="line">            &#x2F;&#x2F; TODO: Define values for the public properties</span><br><span class="line">            &#x2F;&#x2F;</span><br><span class="line">            base.m_category &#x3D; &quot;GISAPP&quot;; &#x2F;&#x2F;localizable text</span><br><span class="line">            base.m_caption &#x3D; &quot;家乡数据处理&quot;;  &#x2F;&#x2F;localizable text </span><br><span class="line">            base.m_message &#x3D; &quot;家乡数据处理&quot;;  &#x2F;&#x2F;localizable text</span><br><span class="line">            base.m_toolTip &#x3D; &quot;家乡数据处理，面图层计算面积，线图层计算长度与弯曲度，点图层计算经纬度坐标&quot;;  &#x2F;&#x2F;localizable text</span><br><span class="line">            base.m_name &#x3D; &quot;&quot;;   &#x2F;&#x2F;unique id, non-localizable (e.g. &quot;MyCategory_MyCommand&quot;)</span><br><span class="line"></span><br><span class="line">            try</span><br><span class="line">            &#123;</span><br><span class="line">                &#x2F;&#x2F;</span><br><span class="line">                &#x2F;&#x2F; TODO: change bitmap name if necessary</span><br><span class="line">                &#x2F;&#x2F;</span><br><span class="line">                string bitmapResourceName &#x3D; GetType().Name + &quot;.bmp&quot;;</span><br><span class="line">                base.m_bitmap &#x3D; new Bitmap(GetType(), bitmapResourceName);</span><br><span class="line">            &#125;</span><br><span class="line">            catch (Exception ex)</span><br><span class="line">            &#123;</span><br><span class="line">                System.Diagnostics.Trace.WriteLine(ex.Message, &quot;Invalid Bitmap&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        #region Overridden Class Methods</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;summary&gt;</span><br><span class="line">        &#x2F;&#x2F;&#x2F; Occurs when this command is created</span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;&#x2F;summary&gt;</span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;param name&#x3D;&quot;hook&quot;&gt;Instance of the application&lt;&#x2F;param&gt;</span><br><span class="line">        public override void OnCreate(object hook)</span><br><span class="line">        &#123;</span><br><span class="line">            if (hook &#x3D;&#x3D; null)</span><br><span class="line">                return;</span><br><span class="line"></span><br><span class="line">            try</span><br><span class="line">            &#123;</span><br><span class="line">                m_hookHelper &#x3D; new HookHelperClass();</span><br><span class="line">                m_hookHelper.Hook &#x3D; hook;</span><br><span class="line">                if (m_hookHelper.ActiveView &#x3D;&#x3D; null)</span><br><span class="line">                    m_hookHelper &#x3D; null;</span><br><span class="line">            &#125;</span><br><span class="line">            catch</span><br><span class="line">            &#123;</span><br><span class="line">                m_hookHelper &#x3D; null;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            if (m_hookHelper &#x3D;&#x3D; null)</span><br><span class="line">                base.m_enabled &#x3D; false;</span><br><span class="line">            else</span><br><span class="line">                base.m_enabled &#x3D; true;</span><br><span class="line"></span><br><span class="line">            &#x2F;&#x2F; TODO:  Add other initialization code</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;summary&gt;</span><br><span class="line">        &#x2F;&#x2F;&#x2F; Occurs when this command is clicked</span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;&#x2F;summary&gt;</span><br><span class="line">        public override void OnClick()</span><br><span class="line">        &#123;</span><br><span class="line">            &#x2F;&#x2F; TODO: Add Command1.OnClick implementation</span><br><span class="line">            &#x2F;&#x2F;MessageBox.Show(&quot;ok&quot;);</span><br><span class="line"></span><br><span class="line">            &#x2F;&#x2F; 获取当前地图</span><br><span class="line">            IMap pMap &#x3D; m_hookHelper.FocusMap;</span><br><span class="line">            &#x2F;&#x2F; 获取地图中第一个图层</span><br><span class="line">            ILayer pLyr &#x3D; pMap.get_Layer(0);</span><br><span class="line">            IFeatureLayer pFeatLyr &#x3D; pLyr as IFeatureLayer; &#x2F;&#x2F;QI</span><br><span class="line"></span><br><span class="line">            &#x2F;&#x2F; 获取表</span><br><span class="line">            IFeatureClass pFeatCls &#x3D; pFeatLyr.FeatureClass;</span><br><span class="line"></span><br><span class="line">            &#x2F;&#x2F; 面图层计算面积 &#x2F;&#x2F;</span><br><span class="line">            if(esriGeometryType.esriGeometryPolygon &#x3D;&#x3D; pFeatCls.ShapeType)</span><br><span class="line">            &#123;</span><br><span class="line">                &#x2F;&#x2F; 添加字段，调用建立字段方法</span><br><span class="line">                addField(pFeatCls, &quot;VS_area&quot;, esriFieldType.esriFieldTypeDouble);</span><br><span class="line"></span><br><span class="line">                &#x2F;&#x2F; 调用计算面积方法</span><br><span class="line">                calcArea(pFeatCls);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            &#x2F;&#x2F; 线图层计算线长 &#x2F;&#x2F;</span><br><span class="line">            if(esriGeometryType.esriGeometryPolyline &#x3D;&#x3D; pFeatCls.ShapeType)</span><br><span class="line">            &#123;</span><br><span class="line">                &#x2F;&#x2F; 添加线长字段，调用新建字段方法</span><br><span class="line">                addField(pFeatCls, &quot;VS_length&quot;, esriFieldType.esriFieldTypeDouble);</span><br><span class="line"></span><br><span class="line">                &#x2F;&#x2F; 调用计算线长方法</span><br><span class="line">                calcLine(pFeatCls);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            &#x2F;&#x2F; 点图层计算经纬度坐标 &#x2F;&#x2F;</span><br><span class="line">            if(esriGeometryType.esriGeometryPoint &#x3D;&#x3D; pFeatCls.ShapeType)</span><br><span class="line">            &#123;</span><br><span class="line">                &#x2F;&#x2F; 添加经纬度坐标字段</span><br><span class="line">                addField(pFeatCls, &quot;VS_X&quot;, esriFieldType.esriFieldTypeDouble);</span><br><span class="line">                addField(pFeatCls, &quot;VS_Y&quot;, esriFieldType.esriFieldTypeDouble);</span><br><span class="line"></span><br><span class="line">                &#x2F;&#x2F; 计算点，调用计算点的方法</span><br><span class="line">                calcXY(pFeatCls);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            </span><br><span class="line"></span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">        &#x2F;&#x2F; 添加字段的方法&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;</span><br><span class="line">        public void addField(IFeatureClass pFeatCls, String fldName, esriFieldType fldType) </span><br><span class="line">        &#123;</span><br><span class="line">            &#x2F;&#x2F; 判断需要新建的字段是否已经存在</span><br><span class="line">            if (pFeatCls.FindField(fldName) !&#x3D; -1) &#x2F;&#x2F; 字段已经存在</span><br><span class="line">            &#123;</span><br><span class="line">                MessageBox.Show(&quot;需要新建的字段已存在，将使用存在字段保存计算结果!&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">            else &#x2F;&#x2F; 字段不存在</span><br><span class="line">            &#123;</span><br><span class="line">                &#x2F;&#x2F; 创建字段变量，并添加name与type</span><br><span class="line">                IFieldEdit pFieldEdit &#x3D; new FieldClass();</span><br><span class="line">                pFieldEdit.Name_2 &#x3D; fldName;</span><br><span class="line">                pFieldEdit.Type_2 &#x3D; fldType;</span><br><span class="line">                &#x2F;&#x2F; 添加字段</span><br><span class="line">                pFeatCls.AddField(pFieldEdit);</span><br><span class="line">            &#125;</span><br><span class="line">               </span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; 计算面积的方法&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;</span><br><span class="line">        public void calcArea(IFeatureClass pFeatCls) </span><br><span class="line">        &#123; </span><br><span class="line">            &#x2F;&#x2F; 面积字段索引</span><br><span class="line">            int idAreaFld &#x3D; pFeatCls.FindField(&quot;VS_area&quot;);</span><br><span class="line">            &#x2F;&#x2F; NAME字段索引</span><br><span class="line">            int idNameFld &#x3D; pFeatCls.FindField(&quot;NAME&quot;);</span><br><span class="line"></span><br><span class="line">            &#x2F;&#x2F; 获取游标</span><br><span class="line">            IFeatureCursor pCur &#x3D; pFeatCls.Update(null, false);</span><br><span class="line"></span><br><span class="line">            IPolygon pPlg;</span><br><span class="line">            IArea pArea;</span><br><span class="line">            string s &#x3D; &quot;&quot;; &#x2F;&#x2F; 计算结果字符串</span><br><span class="line"></span><br><span class="line">            &#x2F;&#x2F; 获取表中要素</span><br><span class="line">            IFeature pFeat &#x3D; pCur.NextFeature();</span><br><span class="line"></span><br><span class="line">            while(pFeat !&#x3D; null)</span><br><span class="line">            &#123;</span><br><span class="line">                pPlg &#x3D; pFeat.Shape as IPolygon;</span><br><span class="line">                pArea &#x3D; pPlg as IArea; &#x2F;&#x2F;QI</span><br><span class="line"></span><br><span class="line">                s &#x3D; s + &quot;NAME:&quot; + pFeat.get_Value(idNameFld) + &quot; 面积:&quot; </span><br><span class="line">                    + Convert.ToString(pArea.Area) + &quot;\n&quot;;   &#x2F;&#x2F; 计算结果保存为字符串</span><br><span class="line"></span><br><span class="line">                pFeat.set_Value(idAreaFld, pArea.Area); &#x2F;&#x2F; 面积赋值给字段</span><br><span class="line"></span><br><span class="line">                pCur.UpdateFeature(pFeat); &#x2F;&#x2F; 更新</span><br><span class="line"></span><br><span class="line">                pFeat &#x3D; pCur.NextFeature(); &#x2F;&#x2F; 循环变量</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">            MessageBox.Show(s);</span><br><span class="line">            MessageBox.Show(&quot;计算面积成功！&quot;);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; 线图层计算线长方法&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;</span><br><span class="line">        public void calcLine(IFeatureClass pFeatCls)</span><br><span class="line">        &#123;</span><br><span class="line">            </span><br><span class="line">            &#x2F;&#x2F; 获取游标</span><br><span class="line">            IFeatureCursor pFeatCur &#x3D; pFeatCls.Update(null, false);</span><br><span class="line">            &#x2F;&#x2F; 获取feature</span><br><span class="line">            IFeature pFeat &#x3D; pFeatCur.NextFeature();</span><br><span class="line"></span><br><span class="line">            &#x2F;&#x2F; 获取线长字段索引</span><br><span class="line">            int idLenFld &#x3D; pFeatCls.FindField(&quot;VS_length&quot;);</span><br><span class="line">            &#x2F;&#x2F; 获取弯曲度字段索引</span><br><span class="line">            &#x2F;&#x2F;int idWqdFld &#x3D; pFeatCls.FindField(&quot;VS_WQD&quot;);</span><br><span class="line">            &#x2F;&#x2F; NAME字段索引</span><br><span class="line">            int idNameFld &#x3D; pFeatCls.FindField(&quot;NAME&quot;);</span><br><span class="line"></span><br><span class="line">            string s &#x3D; &quot;&quot;; &#x2F;&#x2F; 结果字符串</span><br><span class="line"></span><br><span class="line">            IPolyline pPline;</span><br><span class="line"></span><br><span class="line">            while(pFeat !&#x3D; null)</span><br><span class="line">            &#123;</span><br><span class="line">                pPline &#x3D; pFeat.Shape as IPolyline;</span><br><span class="line"></span><br><span class="line">                pFeat.set_Value(idLenFld, pPline.Length); &#x2F;&#x2F; 给长度字段赋值</span><br><span class="line"></span><br><span class="line">                s &#x3D; s + &quot;NAME:&quot; + pFeat.get_Value(idNameFld) + &quot; 长度:&quot; </span><br><span class="line">                    + Convert.ToString(pPline.Length) + &quot;\n&quot;;</span><br><span class="line">                </span><br><span class="line">                pFeatCur.UpdateFeature(pFeat); &#x2F;&#x2F; 更新</span><br><span class="line"></span><br><span class="line">                pFeat &#x3D; pFeatCur.NextFeature(); &#x2F;&#x2F; 循环字段</span><br><span class="line">            &#125;</span><br><span class="line">            MessageBox.Show(s);</span><br><span class="line">            MessageBox.Show(&quot;计算线长成功!!&quot;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; 计算点经纬度坐标的方法 &#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;</span><br><span class="line">        public void calcXY(IFeatureClass pFeatCls) </span><br><span class="line">        &#123;</span><br><span class="line">            &#x2F;&#x2F; 获取游标</span><br><span class="line">            IFeatureCursor pFeatCur &#x3D; pFeatCls.Update(null, false);</span><br><span class="line">            &#x2F;&#x2F; 获取feature</span><br><span class="line">            IFeature pFeat &#x3D; pFeatCur.NextFeature();</span><br><span class="line"> </span><br><span class="line">            &#x2F;&#x2F; 获取经纬度坐标字段索引</span><br><span class="line">            int idXFld &#x3D; pFeatCls.FindField(&quot;VS_X&quot;);</span><br><span class="line">            int idYFld &#x3D; pFeatCls.FindField(&quot;VS_Y&quot;);</span><br><span class="line">            &#x2F;&#x2F; NAME字段索引</span><br><span class="line">            int idNameFld &#x3D; pFeatCls.FindField(&quot;NAME&quot;);</span><br><span class="line"></span><br><span class="line">            IPoint pPnt;</span><br><span class="line">            string s &#x3D; &quot;&quot;; &#x2F;&#x2F; 打印结果字符串</span><br><span class="line"></span><br><span class="line">            while(pFeat !&#x3D; null)</span><br><span class="line">            &#123;</span><br><span class="line">                pPnt &#x3D; pFeat.Shape as IPoint;</span><br><span class="line"></span><br><span class="line">                &#x2F;&#x2F; 给经纬度坐标字段赋值</span><br><span class="line">                pFeat.set_Value(idXFld, pPnt.X);</span><br><span class="line">                pFeat.set_Value(idYFld, pPnt.Y);</span><br><span class="line"></span><br><span class="line">                &#x2F;&#x2F; 结果字符串赋值</span><br><span class="line">                s &#x3D; s + &quot;NAME:&quot; + pFeat.get_Value(idNameFld) + &quot; X:&quot;</span><br><span class="line">                    + Convert.ToString(pPnt.X) + &quot; Y:&quot; + Convert.ToString(pPnt.Y) + &quot;\n&quot;; </span><br><span class="line"></span><br><span class="line">                pFeatCur.UpdateFeature(pFeat); &#x2F;&#x2F; 更新</span><br><span class="line">                pFeat &#x3D; pFeatCur.NextFeature(); &#x2F;&#x2F; 循环字段</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">            MessageBox.Show(s);</span><br><span class="line">            MessageBox.Show(&quot;计算点坐标成功!&quot;);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        #endregion</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ArcMapEngine</tag>
        <tag>VS</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP实现注册时邮箱验证</title>
    <url>/2019-12-11-php-shi-xian-zhu-ce-shi-you-xiang-yan-zheng.html</url>
    <content><![CDATA[<p>说明：</p>
<ul>
<li>PHP7</li>
<li>使用smtp</li>
<li>163邮箱</li>
</ul>
<p>实现思路：</p>
<ul>
<li>注册时利用用户名、加密密码、时间戳构建激活识别码存入数据库，数据库中active_status=0</li>
<li>发送邮件给用户，激活识别码传入 激活链接，点击链接GET方式将激活识别码交给后台处理</li>
<li>激活将active_status=1</li>
</ul>
<p>文件目录:</p>
<ul>
<li>register.html</li>
<li>register.php</li>
<li>sql.php</li>
<li>Smtp.class.php</li>
<li>active.php</li>
</ul>
<a id="more"></a>

<h3 id="数据表"><a href="#数据表" class="headerlink" title="数据表"></a>数据表</h3><p><img src="/assets/images/PHPMail/1.png" alt="image"></p>
<ul>
<li>注意设置数值型字段初值</li>
</ul>
<h3 id="register-html"><a href="#register-html" class="headerlink" title="register.html"></a>register.html</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>注册<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"register.php"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span>姓名：<span class="tag">&lt;/<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"sName"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span>学号：<span class="tag">&lt;/<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"sId"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span>班级：<span class="tag">&lt;/<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"sClass"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span>手机号：<span class="tag">&lt;/<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"sPhone"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span>邮箱：<span class="tag">&lt;/<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"sMail"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span>密码：<span class="tag">&lt;/<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"sPwd"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">name</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"注册"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="sql-php"><a href="#sql-php" class="headerlink" title="sql.php"></a>sql.php</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    $server = <span class="string">"localhost"</span>;</span><br><span class="line">	$user = <span class="string">"root"</span>;</span><br><span class="line">	$password = <span class="string">"密码"</span>;</span><br><span class="line">    $dbname = <span class="string">"users"</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="register-php"><a href="#register-php" class="headerlink" title="register.php"></a>register.php</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    <span class="keyword">if</span>(!<span class="keyword">isset</span>($_POST[<span class="string">"submit"</span>])) &#123;</span><br><span class="line">        <span class="keyword">exit</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">include</span> <span class="string">'./sql.php'</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 连接</span></span><br><span class="line">	$conn = <span class="keyword">new</span> mysqli($server, $user, $password, $dbname);</span><br><span class="line">	<span class="keyword">if</span>($conn-&gt;connect_error)&#123;</span><br><span class="line">		<span class="keyword">die</span>(<span class="string">"连接失败"</span> . $conn-&gt;connect_error);</span><br><span class="line">		<span class="keyword">exit</span>();</span><br><span class="line">	&#125;</span><br><span class="line">    $conn-&gt;query(<span class="string">"set names utf8"</span>);</span><br><span class="line"></span><br><span class="line">    $sName = trim($_POST[<span class="string">"sName"</span>]);</span><br><span class="line">    $sId = trim($_POST[<span class="string">"sId"</span>]);</span><br><span class="line">    $sClass = trim($_POST[<span class="string">"sClass"</span>]);</span><br><span class="line">    $sPhone = trim($_POST[<span class="string">"sPhone"</span>]);</span><br><span class="line">    $sMail = trim($_POST[<span class="string">"sMail"</span>]);</span><br><span class="line">    </span><br><span class="line">    $sPwd = md5(trim($_POST[<span class="string">"sPwd"</span>]));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 用户名是否存在...</span></span><br><span class="line"></span><br><span class="line">    $regtime = time();</span><br><span class="line"> </span><br><span class="line">    $token = md5($sName.$sPwd.$regtime); <span class="comment">//创建用于激活识别码</span></span><br><span class="line">    $token_exptime = time()+<span class="number">60</span>*<span class="number">60</span>*<span class="number">24</span>;<span class="comment">//过期时间为24小时后</span></span><br><span class="line"></span><br><span class="line">    $sql_insert = <span class="string">"INSERT INTO `sys_students` </span></span><br><span class="line"><span class="string">        (`sId`, `sName`, `sClass`, `sPhone`, `sMail`, `sPwd`, `token`, </span></span><br><span class="line"><span class="string">        `token_exptime`, `regtime`)</span></span><br><span class="line"><span class="string">        VALUES ($sId, '$sName', '$sClass', '$sPhone', '$sMail', '$sPwd', '$token', </span></span><br><span class="line"><span class="string">        $token_exptime, $regtime)"</span>;</span><br><span class="line">    $result = $conn-&gt;query($sql_insert);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>($result) &#123;<span class="comment">// 数据插入成功</span></span><br><span class="line">        <span class="keyword">require_once</span> <span class="string">"Smtp.class.php"</span>;</span><br><span class="line">        <span class="comment">//******************** 配置信息 ********************************</span></span><br><span class="line">        $smtpserver = <span class="string">"smtp.163.com"</span>;<span class="comment">//SMTP服务器</span></span><br><span class="line">        $smtpserverport =<span class="number">25</span>;<span class="comment">//SMTP服务器端口</span></span><br><span class="line">        $smtpusermail = <span class="string">"187xx212478@163.com"</span>;<span class="comment">//SMTP服务器的用户邮箱</span></span><br><span class="line">        $smtpemailto = $sMail;<span class="comment">//发送给谁</span></span><br><span class="line">        $smtpuser = <span class="string">"187xx2478@163.com"</span>;<span class="comment">//SMTP服务器的用户帐号，注：部分邮箱只需@前面的用户名</span></span><br><span class="line">        $smtppass = <span class="string">"密码"</span>;<span class="comment">//SMTP服务器的授权码</span></span><br><span class="line">        $mailtitle = <span class="string">"用户帐号激活"</span>;<span class="comment">//邮件主题</span></span><br><span class="line">        $mailcontent = <span class="string">"亲爱的"</span>.$sName.<span class="string">"：&lt;br/&gt;感谢您在我站注册了新帐号。&lt;br/&gt;请点击链接激活您的帐号。&lt;br/&gt;&lt;a href='http://127.0.0.1:82/test/mailValidate/active.php?verify="</span>.$token.<span class="string">"' target='_blank'&gt;http://127.0.0.1:82/test/mailValidate/active.php?verify="</span>.$token.<span class="string">"&lt;/a&gt;&lt;br/&gt;如果以上链接无法点击，请将它复制到你的浏览器地址栏中进入访问，该链接24小时内有效。&lt;br/&gt;如果此次激活请求非你本人所发，请忽略本邮件。&lt;br/&gt;&lt;p style='text-align:right'&gt;注册&lt;/p&gt;"</span>;<span class="comment">//邮件内容</span></span><br><span class="line">        $mailtype = <span class="string">"HTML"</span>;<span class="comment">//邮件格式（HTML/TXT）,TXT为文本邮件</span></span><br><span class="line">        <span class="comment">//************************ 配置信息 ****************************</span></span><br><span class="line">        $smtp = <span class="keyword">new</span> Smtp($smtpserver,$smtpserverport,<span class="keyword">true</span>,$smtpuser,$smtppass);<span class="comment">//这里面的一个true是表示使用身份验证,否则不使用身份验证.</span></span><br><span class="line">        $smtp-&gt;debug = <span class="keyword">false</span>;<span class="comment">//是否显示发送的调试信息</span></span><br><span class="line">        $state = $smtp-&gt;sendmail($smtpemailto, $smtpusermail, $mailtitle, $mailcontent, $mailtype);</span><br><span class="line">    </span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"&lt;div style='width:300px; margin:36px auto;'&gt;"</span>;</span><br><span class="line">        <span class="keyword">if</span>($state==<span class="string">""</span>)&#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">"对不起，邮件发送失败！请检查邮箱填写是否有误。"</span>;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">"&lt;a href='index.html'&gt;点此返回&lt;/a&gt;"</span>;</span><br><span class="line">            <span class="keyword">exit</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"恭喜！注册成功！请登录邮箱即使激活账号，若未收到邮件，请查看垃圾邮件"</span>;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"&lt;a href='index.html'&gt;点此返回&lt;/a&gt;"</span>;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"&lt;/div&gt;"</span>;</span><br><span class="line">       </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h4><ul>
<li>这里使用本地apache服务器</li>
<li>163邮箱开启SMTP需要设置授权码，密码使用授权码</li>
</ul>
<h3 id="Smtp-class-php"><a href="#Smtp-class-php" class="headerlink" title="Smtp.class.php"></a>Smtp.class.php</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * email smtp （support php7）</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Modified by: Reson 2017/06</span></span><br><span class="line"><span class="comment"> * UPDATE:</span></span><br><span class="line"><span class="comment"> * 1、change ereg to preg_match；change ereg_replace to preg_replace.</span></span><br><span class="line"><span class="comment"> * 2、change var to public/private.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Smtp</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">/* Public Variables */</span></span><br><span class="line">    <span class="keyword">public</span> $smtp_port;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> $time_out;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> $host_name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> $log_file;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> $relay_host;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> $debug;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> $auth;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> $user;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> $pass;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Private Variables */</span></span><br><span class="line">    <span class="keyword">private</span> $sock;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Constractor */</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">($relay_host = <span class="string">""</span>, $smtp_port = <span class="number">25</span>,$auth = false,$user,$pass)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;debug = <span class="keyword">FALSE</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">$this</span>-&gt;smtp_port = $smtp_port;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">$this</span>-&gt;relay_host = $relay_host;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">$this</span>-&gt;time_out = <span class="number">30</span>; <span class="comment">//is used in fsockopen()</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">$this</span>-&gt;auth = $auth;<span class="comment">//auth</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">$this</span>-&gt;user = $user;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">$this</span>-&gt;pass = $pass;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">$this</span>-&gt;host_name = <span class="string">"localhost"</span>; <span class="comment">//is used in HELO command</span></span><br><span class="line">        <span class="keyword">$this</span>-&gt;log_file = <span class="string">""</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">$this</span>-&gt;sock = <span class="keyword">FALSE</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Main Function */</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">sendmail</span><span class="params">($to, $from, $subject = <span class="string">""</span>, $body = <span class="string">""</span>, $mailtype, $cc = <span class="string">""</span>, $bcc = <span class="string">""</span>, $additional_headers = <span class="string">""</span>)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line"></span><br><span class="line">        $mail_from = <span class="keyword">$this</span>-&gt;get_address(<span class="keyword">$this</span>-&gt;strip_comment($from));</span><br><span class="line"></span><br><span class="line">        $body = preg_replace(<span class="string">"/(^|(\r\n))(\.)/"</span>, <span class="string">"\1.\3"</span>, $body);</span><br><span class="line"></span><br><span class="line">        $header = <span class="string">"MIME-Version:1.0\r\n"</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>($mailtype==<span class="string">"HTML"</span>)&#123;</span><br><span class="line"></span><br><span class="line">            $header .= <span class="string">"Content-Type:text/html\r\n"</span>;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        $header .= <span class="string">"To: "</span>.$to.<span class="string">"\r\n"</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> ($cc != <span class="string">""</span>) &#123;</span><br><span class="line"></span><br><span class="line">            $header .= <span class="string">"Cc: "</span>.$cc.<span class="string">"\r\n"</span>;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        $header .= <span class="string">"From: $from&lt;"</span>.$from.<span class="string">"&gt;\r\n"</span>;</span><br><span class="line"></span><br><span class="line">        $header .= <span class="string">"Subject: "</span>.$subject.<span class="string">"\r\n"</span>;</span><br><span class="line"></span><br><span class="line">        $header .= $additional_headers;</span><br><span class="line"></span><br><span class="line">        $header .= <span class="string">"Date: "</span>.date(<span class="string">"r"</span>).<span class="string">"\r\n"</span>;</span><br><span class="line"></span><br><span class="line">        $header .= <span class="string">"X-Mailer:By Redhat (PHP/"</span>.phpversion().<span class="string">")\r\n"</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">list</span>($msec, $sec) = explode(<span class="string">" "</span>, microtime());</span><br><span class="line"></span><br><span class="line">        $header .= <span class="string">"Message-ID: &lt;"</span>.date(<span class="string">"YmdHis"</span>, $sec).<span class="string">"."</span>.($msec*<span class="number">1000000</span>).<span class="string">"."</span>.$mail_from.<span class="string">"&gt;\r\n"</span>;</span><br><span class="line"></span><br><span class="line">        $TO = explode(<span class="string">","</span>, <span class="keyword">$this</span>-&gt;strip_comment($to));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> ($cc != <span class="string">""</span>) &#123;</span><br><span class="line"></span><br><span class="line">            $TO = array_merge($TO, explode(<span class="string">","</span>, <span class="keyword">$this</span>-&gt;strip_comment($cc)));</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> ($bcc != <span class="string">""</span>) &#123;</span><br><span class="line"></span><br><span class="line">            $TO = array_merge($TO, explode(<span class="string">","</span>, <span class="keyword">$this</span>-&gt;strip_comment($bcc)));</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        $sent = <span class="keyword">TRUE</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">foreach</span> ($TO <span class="keyword">as</span> $rcpt_to) &#123;</span><br><span class="line"></span><br><span class="line">            $rcpt_to = <span class="keyword">$this</span>-&gt;get_address($rcpt_to);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (!<span class="keyword">$this</span>-&gt;smtp_sockopen($rcpt_to)) &#123;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">$this</span>-&gt;log_write(<span class="string">"Error: Cannot send email to "</span>.$rcpt_to.<span class="string">"\n"</span>);</span><br><span class="line"></span><br><span class="line">                $sent = <span class="keyword">FALSE</span>;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">$this</span>-&gt;smtp_send(<span class="keyword">$this</span>-&gt;host_name, $mail_from, $rcpt_to, $header, $body)) &#123;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">$this</span>-&gt;log_write(<span class="string">"E-mail has been sent to &lt;"</span>.$rcpt_to.<span class="string">"&gt;\n"</span>);</span><br><span class="line"></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">$this</span>-&gt;log_write(<span class="string">"Error: Cannot send email to &lt;"</span>.$rcpt_to.<span class="string">"&gt;\n"</span>);</span><br><span class="line"></span><br><span class="line">                $sent = <span class="keyword">FALSE</span>;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            fclose(<span class="keyword">$this</span>-&gt;sock);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">$this</span>-&gt;log_write(<span class="string">"Disconnected from remote host\n"</span>);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> $sent;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Private Functions */</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">smtp_send</span><span class="params">($helo, $from, $to, $header, $body = <span class="string">""</span>)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!<span class="keyword">$this</span>-&gt;smtp_putcmd(<span class="string">"HELO"</span>, $helo)) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;smtp_error(<span class="string">"sending HELO command"</span>);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//auth</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">$this</span>-&gt;auth)&#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (!<span class="keyword">$this</span>-&gt;smtp_putcmd(<span class="string">"AUTH LOGIN"</span>, base64_encode(<span class="keyword">$this</span>-&gt;user))) &#123;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;smtp_error(<span class="string">"sending HELO command"</span>);</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (!<span class="keyword">$this</span>-&gt;smtp_putcmd(<span class="string">""</span>, base64_encode(<span class="keyword">$this</span>-&gt;pass))) &#123;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;smtp_error(<span class="string">"sending HELO command"</span>);</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!<span class="keyword">$this</span>-&gt;smtp_putcmd(<span class="string">"MAIL"</span>, <span class="string">"FROM:&lt;"</span>.$from.<span class="string">"&gt;"</span>)) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;smtp_error(<span class="string">"sending MAIL FROM command"</span>);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!<span class="keyword">$this</span>-&gt;smtp_putcmd(<span class="string">"RCPT"</span>, <span class="string">"TO:&lt;"</span>.$to.<span class="string">"&gt;"</span>)) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;smtp_error(<span class="string">"sending RCPT TO command"</span>);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!<span class="keyword">$this</span>-&gt;smtp_putcmd(<span class="string">"DATA"</span>)) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;smtp_error(<span class="string">"sending DATA command"</span>);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!<span class="keyword">$this</span>-&gt;smtp_message($header, $body)) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;smtp_error(<span class="string">"sending message"</span>);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!<span class="keyword">$this</span>-&gt;smtp_eom()) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;smtp_error(<span class="string">"sending &lt;CR&gt;&lt;LF&gt;.&lt;CR&gt;&lt;LF&gt; [EOM]"</span>);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!<span class="keyword">$this</span>-&gt;smtp_putcmd(<span class="string">"QUIT"</span>)) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;smtp_error(<span class="string">"sending QUIT command"</span>);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">TRUE</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">smtp_sockopen</span><span class="params">($address)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">$this</span>-&gt;relay_host == <span class="string">""</span>) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;smtp_sockopen_mx($address);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;smtp_sockopen_relay();</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">smtp_sockopen_relay</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">$this</span>-&gt;log_write(<span class="string">"Trying to "</span>.<span class="keyword">$this</span>-&gt;relay_host.<span class="string">":"</span>.<span class="keyword">$this</span>-&gt;smtp_port.<span class="string">"\n"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">$this</span>-&gt;sock = @fsockopen(<span class="keyword">$this</span>-&gt;relay_host, <span class="keyword">$this</span>-&gt;smtp_port, $errno, $errstr, <span class="keyword">$this</span>-&gt;time_out);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!(<span class="keyword">$this</span>-&gt;sock &amp;&amp; <span class="keyword">$this</span>-&gt;smtp_ok())) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">$this</span>-&gt;log_write(<span class="string">"Error: Cannot connenct to relay host "</span>.<span class="keyword">$this</span>-&gt;relay_host.<span class="string">"\n"</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">$this</span>-&gt;log_write(<span class="string">"Error: "</span>.$errstr.<span class="string">" ("</span>.$errno.<span class="string">")\n"</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">FALSE</span>;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">$this</span>-&gt;log_write(<span class="string">"Connected to relay host "</span>.<span class="keyword">$this</span>-&gt;relay_host.<span class="string">"\n"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">TRUE</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">smtp_sockopen_mx</span><span class="params">($address)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line"></span><br><span class="line">        $domain = preg_replace(<span class="string">"/^.+@([^@]+)$/"</span>, <span class="string">"\1"</span>, $address);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!@getmxrr($domain, $MXHOSTS)) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">$this</span>-&gt;log_write(<span class="string">"Error: Cannot resolve MX \""</span>.$domain.<span class="string">"\"\n"</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">FALSE</span>;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">        <span class="keyword">foreach</span> ($MXHOSTS <span class="keyword">as</span> $host) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">$this</span>-&gt;log_write(<span class="string">"Trying to "</span>.$host.<span class="string">":"</span>.<span class="keyword">$this</span>-&gt;smtp_port.<span class="string">"\n"</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">$this</span>-&gt;sock = @fsockopen($host, <span class="keyword">$this</span>-&gt;smtp_port, $errno, $errstr, <span class="keyword">$this</span>-&gt;time_out);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (!(<span class="keyword">$this</span>-&gt;sock &amp;&amp; <span class="keyword">$this</span>-&gt;smtp_ok())) &#123;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">$this</span>-&gt;log_write(<span class="string">"Warning: Cannot connect to mx host "</span>.$host.<span class="string">"\n"</span>);</span><br><span class="line"></span><br><span class="line">                <span class="keyword">$this</span>-&gt;log_write(<span class="string">"Error: "</span>.$errstr.<span class="string">" ("</span>.$errno.<span class="string">")\n"</span>);</span><br><span class="line"></span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">$this</span>-&gt;log_write(<span class="string">"Connected to mx host "</span>.$host.<span class="string">"\n"</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">TRUE</span>;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">$this</span>-&gt;log_write(<span class="string">"Error: Cannot connect to any mx hosts ("</span>.implode(<span class="string">", "</span>, $MXHOSTS).<span class="string">")\n"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">FALSE</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">smtp_message</span><span class="params">($header, $body)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line"></span><br><span class="line">        fputs(<span class="keyword">$this</span>-&gt;sock, $header.<span class="string">"\r\n"</span>.$body);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">$this</span>-&gt;smtp_debug(<span class="string">"&gt; "</span>.str_replace(<span class="string">"\r\n"</span>, <span class="string">"\n"</span>.<span class="string">"&gt; "</span>, $header.<span class="string">"\n&gt; "</span>.$body.<span class="string">"\n&gt; "</span>));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">TRUE</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">smtp_eom</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line"></span><br><span class="line">        fputs(<span class="keyword">$this</span>-&gt;sock, <span class="string">"\r\n.\r\n"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">$this</span>-&gt;smtp_debug(<span class="string">". [EOM]\n"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;smtp_ok();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">smtp_ok</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line"></span><br><span class="line">        $response = str_replace(<span class="string">"\r\n"</span>, <span class="string">""</span>, fgets(<span class="keyword">$this</span>-&gt;sock, <span class="number">512</span>));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">$this</span>-&gt;smtp_debug($response.<span class="string">"\n"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!preg_match(<span class="string">"/^[23]/"</span>, $response)) &#123;</span><br><span class="line"></span><br><span class="line">            fputs(<span class="keyword">$this</span>-&gt;sock, <span class="string">"QUIT\r\n"</span>);</span><br><span class="line"></span><br><span class="line">            fgets(<span class="keyword">$this</span>-&gt;sock, <span class="number">512</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">$this</span>-&gt;log_write(<span class="string">"Error: Remote host returned \""</span>.$response.<span class="string">"\"\n"</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">FALSE</span>;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">TRUE</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">smtp_putcmd</span><span class="params">($cmd, $arg = <span class="string">""</span>)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> ($arg != <span class="string">""</span>) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>($cmd==<span class="string">""</span>) $cmd = $arg;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">else</span> $cmd = $cmd.<span class="string">" "</span>.$arg;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        fputs(<span class="keyword">$this</span>-&gt;sock, $cmd.<span class="string">"\r\n"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">$this</span>-&gt;smtp_debug(<span class="string">"&gt; "</span>.$cmd.<span class="string">"\n"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;smtp_ok();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">smtp_error</span><span class="params">($string)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">$this</span>-&gt;log_write(<span class="string">"Error: Error occurred while "</span>.$string.<span class="string">".\n"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">FALSE</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">log_write</span><span class="params">($message)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">$this</span>-&gt;smtp_debug($message);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">$this</span>-&gt;log_file == <span class="string">""</span>) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">TRUE</span>;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        $message = date(<span class="string">"M d H:i:s "</span>).get_current_user().<span class="string">"["</span>.getmypid().<span class="string">"]: "</span>.$message;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!@file_exists(<span class="keyword">$this</span>-&gt;log_file) || !($fp = @fopen(<span class="keyword">$this</span>-&gt;log_file, <span class="string">"a"</span>))) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">$this</span>-&gt;smtp_debug(<span class="string">"Warning: Cannot open log file \""</span>.<span class="keyword">$this</span>-&gt;log_file.<span class="string">"\"\n"</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">FALSE</span>;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        flock($fp, LOCK_EX);</span><br><span class="line"></span><br><span class="line">        fputs($fp, $message);</span><br><span class="line"></span><br><span class="line">        fclose($fp);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">TRUE</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">strip_comment</span><span class="params">($address)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line"></span><br><span class="line">        $comment = <span class="string">"/\([^()]*\)/"</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (preg_match($comment, $address)) &#123;</span><br><span class="line"></span><br><span class="line">            $address = preg_replace($comment, <span class="string">""</span>, $address);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> $address;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">get_address</span><span class="params">($address)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line"></span><br><span class="line">        $address = preg_replace(<span class="string">"/([ \t\r\n])+/"</span>, <span class="string">""</span>, $address);</span><br><span class="line"></span><br><span class="line">        $address = preg_replace(<span class="string">"/^.*&lt;(.+)&gt;.*$/"</span>, <span class="string">"\1"</span>, $address);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> $address;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">smtp_debug</span><span class="params">($message)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">$this</span>-&gt;debug) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">echo</span> $message;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="active-php"><a href="#active-php" class="headerlink" title="active.php"></a>active.php</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">include</span> <span class="string">'./sql.php'</span>;</span><br><span class="line"><span class="comment">// 连接</span></span><br><span class="line">$conn = <span class="keyword">new</span> mysqli($server, $user, $password, $dbname);</span><br><span class="line"><span class="keyword">if</span>($conn-&gt;connect_error)&#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">"连接失败"</span> . $conn-&gt;connect_error);</span><br><span class="line">    <span class="keyword">exit</span>();</span><br><span class="line">&#125;</span><br><span class="line">$conn-&gt;query(<span class="string">"set names utf8"</span>);</span><br><span class="line"></span><br><span class="line">$verify = stripslashes(trim($_GET[<span class="string">'verify'</span>]));</span><br><span class="line">$nowtime = time();</span><br><span class="line">$sql = <span class="string">"SELECT id,token_exptime FROM sys_students WHERE status=0 AND token='$verify'"</span>;</span><br><span class="line">$result = $conn-&gt;query($sql);</span><br><span class="line">$row = $result-&gt;fetch_assoc();</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> ($row) &#123;</span><br><span class="line">	<span class="keyword">if</span> ($nowtime &gt; $row[<span class="string">'token_exptime'</span>]) &#123; </span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"&lt;script&gt;</span></span><br><span class="line"><span class="string">                alert('您的激活有效期已过，请登录您的帐号重新发送激活邮件');</span></span><br><span class="line"><span class="string">        &lt;/script&gt;"</span>;</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        $sql_update = <span class="string">"UPDATE sys_students SET active_status=1 WHERE id="</span> . $row[<span class="string">'id'</span>];</span><br><span class="line">        $result_update = $conn-&gt;query($sql_update);</span><br><span class="line">        <span class="keyword">if</span> ($result_update) &#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">"&lt;script&gt;</span></span><br><span class="line"><span class="string">            alert('激活成功！');</span></span><br><span class="line"><span class="string">            &lt;/script&gt;"</span>;</span><br><span class="line">            </span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">"&lt;script&gt;</span></span><br><span class="line"><span class="string">            alert('服务器忙！');</span></span><br><span class="line"><span class="string">            &lt;/script&gt;"</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"&lt;script&gt;</span></span><br><span class="line"><span class="string">            alert('error');</span></span><br><span class="line"><span class="string">    &lt;/script&gt;"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><p><a href="https://www.cnblogs.com/linksgo2011/archive/2013/04/23/3037429.html" target="_blank" rel="noopener external nofollow noreferrer">php 邮箱验证原理</a></p>
<p><a href="https://www.moquit.com/1520.html" target="_blank" rel="noopener external nofollow noreferrer">PHP用户注册邮箱验证激活帐号</a></p>
<p><a href="https://segmentfault.com/a/1190000014789528" target="_blank" rel="noopener external nofollow noreferrer">用phpmail发送邮件，简单实现php发邮件功能！</a></p>
]]></content>
      <tags>
        <tag>php</tag>
        <tag>邮箱验证</tag>
      </tags>
  </entry>
  <entry>
    <title>使用PHPMailer库发送邮件支持ssl方式</title>
    <url>/2019-12-14-shi-yong-phpmailer-ku-fa-song-you-jian.html</url>
    <content><![CDATA[<p>说明：</p>
<ul>
<li>PHP7..</li>
<li>PHPMailer 6.1.4 Github下载 <a href="https://github.com/PHPMailer/PHPMailer" target="_blank" rel="noopener external nofollow noreferrer">PHPMailer</a>，直接克隆下来就ok</li>
<li>开启PHP扩展：sockets、openssl；方法:PHP.ini文件中搜索对应名，去掉使用扩展前的注释(不细说了)</li>
<li>本文使用ssl方式</li>
<li>网易邮箱</li>
<li>端口 465</li>
</ul>
<a id="more"></a>

<h3 id="写本文原因"><a href="#写本文原因" class="headerlink" title="写本文原因"></a>写本文原因</h3><p>阿里云25端口被封印，上篇文章使用SMTP 25端口，本地能成，服务器上不行</p>
<p>阿里，emmmmmmmmmmm</p>
<p>网上大量的教程，大部分使用的是低版本PHPMailer；</p>
<p>他们只引入PHPMailer.class.php之类的文件；</p>
<p>然后我发现现在没有这文件了…</p>
<h3 id="PHPMailer的引入"><a href="#PHPMailer的引入" class="headerlink" title="PHPMailer的引入"></a>PHPMailer的引入</h3><p>克隆下来的包重命名为PHPMailer</p>
<p>包的结构：</p>
<p>PHPMailer</p>
<ul>
<li>language</li>
<li>src</li>
<li>…</li>
</ul>
<p>主要使用</p>
<ul>
<li>src/Exception.php</li>
<li>src/PHPMailer.php</li>
<li>PHPMailer/src/SMTP.php</li>
</ul>
<p><strong>将PHPMailer包放在将要使用的项目文件夹下</strong></p>
<h3 id="sendMail-php"><a href="#sendMail-php" class="headerlink" title="sendMail.php"></a>sendMail.php</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line"><span class="comment">// 发送邮件的函数 </span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">use</span> <span class="title">PHPMailer</span>\<span class="title">PHPMailer</span>\<span class="title">PHPMailer</span>;</span><br><span class="line">    <span class="keyword">use</span> <span class="title">PHPMailer</span>\<span class="title">PHPMailer</span>\<span class="title">Exception</span>;</span><br><span class="line">    <span class="comment">//引入项目</span></span><br><span class="line">    <span class="keyword">require</span> <span class="string">'./PHPMailer/src/Exception.php'</span>;</span><br><span class="line">    <span class="keyword">require</span> <span class="string">'./PHPMailer/src/PHPMailer.php'</span>;</span><br><span class="line">    <span class="keyword">require</span> <span class="string">'./PHPMailer/src/SMTP.php'</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">funSendMail</span><span class="params">($toMail, $mailcontent)</span> </span>&#123;     </span><br><span class="line"></span><br><span class="line">        <span class="comment">//实例化PHPMail类</span></span><br><span class="line">        $mail = <span class="keyword">new</span> PHPMailer(<span class="keyword">true</span>);                              </span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//Server settings</span></span><br><span class="line">            $mail-&gt;SMTPDebug = <span class="number">0</span>; <span class="comment">// 0 1 2                                 </span></span><br><span class="line">            $mail-&gt;isSMTP();  <span class="comment">// 使用SMTP发送邮件</span></span><br><span class="line">            $mail-&gt;Host = <span class="string">'smtp.163.com'</span>;  <span class="comment">//SMTP邮件服务器地址（腾讯企业邮为例）</span></span><br><span class="line">            $mail-&gt;SMTPAuth = <span class="keyword">true</span>;                               </span><br><span class="line">            $mail-&gt;Username = <span class="string">'187xxxxx8@163.com'</span>; <span class="comment">// SMTP 发件人邮箱</span></span><br><span class="line">            $mail-&gt;Password = <span class="string">'xxxx'</span>;  <span class="comment">// SMTP 发件人邮箱密码</span></span><br><span class="line">            $mail-&gt;SMTPSecure = <span class="string">'ssl'</span>;      <span class="comment">// Enable TLS encryption, `ssl` also accepted</span></span><br><span class="line">            $mail-&gt;Port = <span class="number">465</span>;       <span class="comment">// TCP port to connect to</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">//发件人</span></span><br><span class="line">            $mail-&gt;setFrom(<span class="string">"187xxxxx8@163.com"</span>, <span class="string">'网站管理系统'</span>); <span class="comment">//发件人邮箱（同 $mail-&gt;Username项设置）、发件人名称</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">//收件人。多收件人可设置多个addAddress</span></span><br><span class="line">            $mail-&gt;addAddress($toMail);<span class="comment">//收件人邮箱地址，收件人姓名（选填）</span></span><br><span class="line">            <span class="comment">//$mail-&gt;addAddress('ellen@example.com');               // 收件人邮箱地址</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="comment">//发送附件</span></span><br><span class="line">            <span class="comment">//$mail-&gt;addAttachment('/var/tmp/file.tar.gz');         // 添加附件</span></span><br><span class="line">            <span class="comment">//$mail-&gt;addAttachment('/tmp/image.jpg', 'new.jpg');    // 设置附件以及附件名称</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">//邮件内容</span></span><br><span class="line">            $mail-&gt;isHTML(<span class="keyword">true</span>);                                  <span class="comment">//   发送html格式邮件</span></span><br><span class="line">            $mail-&gt;Subject = <span class="string">'用户帐号激活'</span>;                                <span class="comment">//邮件标题</span></span><br><span class="line">            $mail-&gt;Body    = $mailcontent; <span class="comment">//邮件内容</span></span><br><span class="line">            <span class="comment">//$mail-&gt;AltBody = '邮件摘要';                    //目测没什么用，可去掉</span></span><br><span class="line"></span><br><span class="line">            $mail-&gt;send();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">echo</span> <span class="string">"恭喜！注册成功！请登录邮箱及时激活账号，若未收到邮件，请查看垃圾邮件"</span>;</span><br><span class="line">            </span><br><span class="line">        &#125; <span class="keyword">catch</span> (<span class="keyword">Exception</span> $e) &#123;</span><br><span class="line">            <span class="comment">//echo 'Message could not be sent. Mailer Error: ', $mail-&gt;ErrorInfo;</span></span><br><span class="line">            <span class="keyword">echo</span> <span class="string">"对不起，邮件发送失败！请检查邮箱填写是否有误。"</span>;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">exit</span>();</span><br><span class="line">        &#125;</span><br><span class="line">            &#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>


<h3 id="test-php"><a href="#test-php" class="headerlink" title="test.php"></a>test.php</h3><p>调用函数</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line">    <span class="keyword">require_once</span> <span class="string">'sendMail.php'</span>;</span><br><span class="line">    $toMail = <span class="string">"1xxxxxxx12@qq.com"</span>;</span><br><span class="line">    $mailcontent = <span class="string">"hello"</span>;</span><br><span class="line">    funSendMail($toMail, $mailcontent);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="邮件内容乱码问题"><a href="#邮件内容乱码问题" class="headerlink" title="邮件内容乱码问题"></a>邮件内容乱码问题</h3><p>电脑邮箱查看不乱码</p>
<p>手机上看乱码</p>
<p>解决: </p>
<p>进入到PHPMailer/src目录，打开PHPMailer.php文件，将CHARSET_ISO88591、CHARSET_UTF8两项修改为UTF-8编码</p>
<p>设置邮件编码</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$mail &#x3D; new PHPMailer();</span><br><span class="line">$mail-&gt;Charset&#x3D;&#39;UTF-8&#39;;</span><br></pre></td></tr></table></figure>

<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><p><a href="https://www.jianshu.com/p/d103cabb9d68" target="_blank" rel="noopener external nofollow noreferrer">PHPMailer6.0.5邮件发送实例，并解决乱码问题</a></p>
<p><a href="https://www.cnblogs.com/wangpg/p/5330759.html" target="_blank" rel="noopener external nofollow noreferrer">PHPMailer中文乱码问题的解决方法</a></p>
]]></content>
      <tags>
        <tag>PHPMailer</tag>
        <tag>邮件</tag>
      </tags>
  </entry>
  <entry>
    <title>搭建IPSec VPN 虚拟局域网</title>
    <url>/2019-11-12-ipsec-vpn-xu-ni-ju-yu-wang-da-jian.html</url>
    <content><![CDATA[<p>环境: </p>
<ul>
<li>服务器：阿里云 ubuntu</li>
<li>客户端：其他设备</li>
</ul>
<a id="more"></a>

<h3 id="服务端"><a href="#服务端" class="headerlink" title="服务端"></a>服务端</h3><p>参考github: <a href="https://github.com/hwdsl2/setup-ipsec-vpn/blob/master/README-zh.md" target="_blank" rel="noopener external nofollow noreferrer">IPsec VPN 服务器一键安装脚本</a></p>
<h3 id="客户端"><a href="#客户端" class="headerlink" title="客户端"></a>客户端</h3><ul>
<li>win10</li>
</ul>
<p>所有问题都能在此找到：<br><a href="https://github.com/hwdsl2/setup-ipsec-vpn/blob/master/docs/clients-zh.md#%E6%95%85%E9%9A%9C%E6%8E%92%E9%99%A4" target="_blank" rel="noopener external nofollow noreferrer">配置 IPsec/L2TP VPN 客户端</a></p>
<h4 id="网络设置里新建VPN"><a href="#网络设置里新建VPN" class="headerlink" title="网络设置里新建VPN"></a>网络设置里新建VPN</h4><p>如下界面进行配置：</p>
<p><img src="/assets/images/IPSec/1.png" alt="图片"></p>
<h4 id="点击新建的vpn进行连接"><a href="#点击新建的vpn进行连接" class="headerlink" title="点击新建的vpn进行连接"></a>点击新建的vpn进行连接</h4><p>未成功连接时，使用以下方法</p>
<h4 id="查看服务"><a href="#查看服务" class="headerlink" title="查看服务"></a>查看服务</h4><p><a href="https://www.tp-link.com/en/support/faq/1029/" target="_blank" rel="noopener external nofollow noreferrer">查看服务是否启动</a></p>
<h4 id="注册表里添加"><a href="#注册表里添加" class="headerlink" title="注册表里添加"></a>注册表里添加</h4><p>方法：使用管理员打开CMD</p>
<p>输入</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">REG ADD HKLM\SYSTEM\CurrentControlSet\Services\PolicyAgent &#x2F;v AssumeUDPEncapsulationContextOnSendRule &#x2F;t REG_DWORD &#x2F;d 0x2 &#x2F;f</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">REG ADD HKLM\SYSTEM\CurrentControlSet\Services\RasMan\Parameters &#x2F;v ProhibitIpSec &#x2F;t REG_DWORD &#x2F;d 0x0 &#x2F;f</span><br></pre></td></tr></table></figure>
<p>CMD提示操作完成</p>
<p>重启计算机</p>
<h4 id="连接后无法使用网络的问题"><a href="#连接后无法使用网络的问题" class="headerlink" title="连接后无法使用网络的问题"></a>连接后无法使用网络的问题</h4><p><img src="/assets/images/IPSec/2.png" alt="图片"></p>
<p><img src="/assets/images/IPSec/3.png" alt="图片"></p>
<h4 id="客户端在同一局域网无法ping通"><a href="#客户端在同一局域网无法ping通" class="headerlink" title="客户端在同一局域网无法ping通"></a>客户端在同一局域网无法ping通</h4><p>关闭本地防火墙</p>
]]></content>
      <tags>
        <tag>VPN</tag>
        <tag>IPSec</tag>
        <tag>虚拟局域网</tag>
      </tags>
  </entry>
  <entry>
    <title>bootstrap网页实例</title>
    <url>/2020-04-22-bootstrap-mo-ban-shi-li.html</url>
    <content><![CDATA[<ul>
<li><p>使用 bootstrap 库建站</p>
</li>
<li><p>基本网页</p>
</li>
<li><p>包括:</p>
</li>
<li><p>主页：导航条、底部</p>
</li>
<li><p>登录、注册、忘记密码页面</p>
</li>
</ul>
<p><strong><em>源码下载</em></strong><br> <a href="https://github.com/zuahua/bootstrap-sample" target="_blank" rel="noopener external nofollow noreferrer">Github</a></p>
<a id="more"></a>

<h3 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h3><p>主页</p>
<p><img src="../images/bootstrap/boot.gif" alt="image"></p>
<h3 id="代码目录结构"><a href="#代码目录结构" class="headerlink" title="代码目录结构"></a>代码目录结构</h3><p>/08.bootstrap实例/主页/</p>
<p>– css/ (样式目录)</p>
<p>– dist/ (bootstrap、jquery文件目录)</p>
<p>– images/ (图片文件目录)</p>
<p>– js/ (JS文件目录)</p>
<p>– page/ (页面目录)</p>
<p>– template/ (自定义组件模板目录)</p>
<p>– index.html (首页)</p>
<h3 id="主页"><a href="#主页" class="headerlink" title="主页"></a>主页</h3><p>文件<br><strong>/08.bootstrap实例/主页/index.html</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">title</span>&gt;</span>S站<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- Bootstrap --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"/08.bootstrap实例/主页/dist/bootstrap.min.css"</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 自定义样式 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"/08.bootstrap实例/主页/css/index.css"</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- HTML5 shim 和 Respond.js 是为了让 IE8 支持 HTML5 元素和媒体查询（media queries）功能 --&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 警告：通过 file:// 协议（就是直接将 html 页面拖拽到浏览器中）访问页面时 Respond.js 不起作用 --&gt;</span></span><br><span class="line">	<span class="comment">&lt;!--[if lt IE 9]&gt;</span></span><br><span class="line"><span class="comment">      &lt;script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="comment">      &lt;script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="comment">	&lt;![endif]--&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- bootstrapJS JQ --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"/08.bootstrap实例/主页/dist/jquery-1.12.1.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"/08.bootstrap实例/主页/dist/bootstrap.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 头部导航 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">nav</span> <span class="attr">class</span>=<span class="string">"navbar navbar-inverse navbar-fixed-top my-navbar"</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- Brand --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container-fluid"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"navbar-header"</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">class</span>=<span class="string">"navbar-toggle collapsed"</span> <span class="attr">data-toggle</span>=<span class="string">"collapse"</span> <span class="attr">data-target</span>=<span class="string">"#myNavLink"</span></span></span><br><span class="line"><span class="tag">					<span class="attr">aria-expanded</span>=<span class="string">"false"</span> <span class="attr">aria-controls</span>=<span class="string">"navbar"</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"sr-only"</span>&gt;</span>Toggle navigation<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"icon-bar"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"icon-bar"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"icon-bar"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span> <span class="attr">class</span>=<span class="string">"navbar-brand"</span>&gt;</span></span><br><span class="line">					<span class="comment">&lt;!-- &lt;img src="" alt="brand"&gt; --&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"glyphicon glyphicon-apple"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">			<span class="comment">&lt;!-- Link --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"navbar-collapse collapse"</span> <span class="attr">id</span>=<span class="string">"myNavLink"</span>&gt;</span></span><br><span class="line">				<span class="comment">&lt;!-- 链接 --&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"nav navbar-nav"</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"active"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/08.bootstrap实例/主页/index.html"</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>Movie<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>Music<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"nav navbar-nav navbar-right"</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/08.bootstrap实例/主页/page/login-register.html?status=login"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"glyphicon glyphicon-log-in"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/08.bootstrap实例/主页/page/login-register.html?status=register"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"glyphicon glyphicon-user"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>注册<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row navbar-fixed-top my-backgroundImg"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-lg-12 backgroundImg"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">h2</span>&gt;</span>bootstrap实例<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 底部 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">nav</span> <span class="attr">class</span>=<span class="string">"navbar navbar-default navbar-fixed-bottom"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container text-center"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">p</span>&gt;</span>本站不提供任何内容上传服务，所有内容均来自视频分享站点所提供的公开引用资源。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">p</span>&gt;</span>若本站收录的内容无意侵犯了贵司版权，请给网页底部邮箱地址来信,我们会及时处理和回复,谢谢。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="symbol">&amp;copy;</span> 2020 S站 管理员：ello<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- 自定义JS --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"/08.bootstrap实例/主页/js/index.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="主页的JS"><a href="#主页的JS" class="headerlink" title="主页的JS"></a>主页的JS</h3><p>控制导航切换active效果</p>
<p>文件<br><strong>/08.bootstrap实例/主页/js/index.js*</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 导航条</span></span><br><span class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="comment">// Link切换 效果</span></span><br><span class="line">	$(<span class="string">'#myNavLink&gt;ul&gt;li'</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		$(<span class="keyword">this</span>).addClass(<span class="string">'active'</span>).siblings(<span class="string">'li'</span>).removeClass(<span class="string">'active'</span>);</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="自定义登录、注册、忘记密码模板组件"><a href="#自定义登录、注册、忘记密码模板组件" class="headerlink" title="自定义登录、注册、忘记密码模板组件"></a>自定义登录、注册、忘记密码模板组件</h3><p>文件<br><strong>/08.bootstrap实例/主页/template/login-register.html</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">"loginForm"</span> <span class="attr">style</span>=<span class="string">"display: none"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">h4</span> <span class="attr">class</span>=<span class="string">"text-center"</span>&gt;</span>用户登录<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"input-group col-md-4 col-md-offset-4"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"usernameLogin"</span> <span class="attr">class</span>=<span class="string">"input-group-addon"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"glyphicon glyphicon-user"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">id</span>=<span class="string">"usernameLogin"</span> <span class="attr">placeholder</span>=<span class="string">"用户名/邮箱"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"input-group col-md-4 col-md-offset-4"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"passwdLogin"</span> <span class="attr">class</span>=<span class="string">"input-group-addon"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"glyphicon glyphicon-lock"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">id</span>=<span class="string">"passwdLogin"</span> <span class="attr">placeholder</span>=<span class="string">"密码"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"input-group col-md-4 col-md-offset-4"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"validateLogin"</span> <span class="attr">class</span>=<span class="string">"input-group-addon"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"glyphicon glyphicon-text-background"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">id</span>=<span class="string">"validateLogin"</span> <span class="attr">placeholder</span>=<span class="string">"验证码"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"input-group-addon"</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">""</span> <span class="attr">alt</span>=<span class="string">"验证码"</span> <span class="attr">class</span>=<span class="string">"col-md-6"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"checkbox input-group col-md-1 col-md-offset-4"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">label</span>&gt;</span></span><br><span class="line">			  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">id</span>=<span class="string">"rememberMeLogin"</span>&gt;</span> 记住我</span><br><span class="line">			<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"input-group col-md-4 col-md-offset-4 col-xs-12"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"text-left"</span> <span class="attr">style</span>=<span class="string">"position:absolute;"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/08.bootstrap实例/主页/page/login-register.html?status=forget"</span>&gt;</span>忘记密码?<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">class</span>=<span class="string">"btn btn-primary col-md-2 col-md-offset-5 col-xs-offset-5"</span> <span class="attr">id</span>=<span class="string">"login"</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"text-right"</span> <span class="attr">style</span>=<span class="string">"float: right;"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/08.bootstrap实例/主页/page/login-register.html?status=register"</span>&gt;</span>没有账号?注册<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">"registerForm"</span> <span class="attr">style</span>=<span class="string">"display: none;"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">h4</span> <span class="attr">class</span>=<span class="string">"text-center"</span>&gt;</span>用户注册<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"input-group col-md-4 col-md-offset-4"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"usernameRe"</span> <span class="attr">class</span>=<span class="string">"input-group-addon"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"glyphicon glyphicon-user"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">id</span>=<span class="string">"usernameRe"</span> <span class="attr">placeholder</span>=<span class="string">"用户名"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"input-group col-md-4 col-md-offset-4"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"emailRe"</span> <span class="attr">class</span>=<span class="string">"input-group-addon"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"glyphicon glyphicon-envelope"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"mail"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">id</span>=<span class="string">"emailRe"</span> <span class="attr">placeholder</span>=<span class="string">"邮箱"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"input-group col-md-4 col-md-offset-4"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"passwdRe"</span> <span class="attr">class</span>=<span class="string">"input-group-addon"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"glyphicon glyphicon-lock"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">id</span>=<span class="string">"passwdRe"</span> <span class="attr">placeholder</span>=<span class="string">"密码"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"input-group col-md-4 col-md-offset-4"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"rePasswdRe"</span> <span class="attr">class</span>=<span class="string">"input-group-addon"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"glyphicon glyphicon-lock"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">id</span>=<span class="string">"rePasswdRe"</span> <span class="attr">placeholder</span>=<span class="string">"确认密码"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"input-group col-md-4 col-md-offset-4"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"validateRe"</span> <span class="attr">class</span>=<span class="string">"input-group-addon"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"glyphicon glyphicon-text-background"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">id</span>=<span class="string">"validateRe"</span> <span class="attr">placeholder</span>=<span class="string">"验证码"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"input-group-addon"</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">""</span> <span class="attr">alt</span>=<span class="string">"验证码"</span> <span class="attr">class</span>=<span class="string">"col-md-6"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"input-group col-md-4 col-md-offset-4 col-xs-12"</span> <span class="attr">style</span>=<span class="string">"margin-top: 1em;"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">class</span>=<span class="string">"btn btn-primary col-md-2 col-md-offset-5 col-xs-offset-5"</span> <span class="attr">id</span>=<span class="string">"register"</span>&gt;</span>注册<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"text-right"</span> <span class="attr">style</span>=<span class="string">"float: right;"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/08.bootstrap实例/主页/page/login-register.html?status=login"</span>&gt;</span>已有账号?登录<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">"forgetForm"</span> <span class="attr">style</span>=<span class="string">"display: none;"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">h4</span> <span class="attr">class</span>=<span class="string">"text-center"</span>&gt;</span>忘记密码<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"input-group col-md-4 col-md-offset-4"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"emailForget"</span> <span class="attr">class</span>=<span class="string">"input-group-addon"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"glyphicon glyphicon-envelope"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"mail"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">id</span>=<span class="string">"emailForget"</span> <span class="attr">placeholder</span>=<span class="string">"邮箱"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"input-group col-md-4 col-md-offset-4"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"passwdForget"</span> <span class="attr">class</span>=<span class="string">"input-group-addon"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"glyphicon glyphicon-lock"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">id</span>=<span class="string">"passwdForget"</span> <span class="attr">placeholder</span>=<span class="string">"密码"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"input-group col-md-4 col-md-offset-4"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"rePasswdForget"</span> <span class="attr">class</span>=<span class="string">"input-group-addon"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"glyphicon glyphicon-lock"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">id</span>=<span class="string">"rePasswdForget"</span> <span class="attr">placeholder</span>=<span class="string">"确认密码"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"input-group col-md-4 col-md-offset-4"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"validateForget"</span> <span class="attr">class</span>=<span class="string">"input-group-addon"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"glyphicon glyphicon-text-background"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">id</span>=<span class="string">"validateForget"</span> <span class="attr">placeholder</span>=<span class="string">"验证码"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"input-group-addon"</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">""</span> <span class="attr">alt</span>=<span class="string">"验证码"</span> <span class="attr">class</span>=<span class="string">"col-md-6"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"input-group col-md-4 col-md-offset-4"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"validateMailForget"</span> <span class="attr">class</span>=<span class="string">"input-group-addon"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"glyphicon glyphicon-header"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">id</span>=<span class="string">"validateMailForget"</span> <span class="attr">placeholder</span>=<span class="string">"邮箱验证码"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"input-group-btn"</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">class</span>=<span class="string">"btn btn-success"</span>&gt;</span>发送邮件<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"input-group col-md-4 col-md-offset-4 col-xs-12"</span> <span class="attr">style</span>=<span class="string">"margin-top: 1em"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"text-left"</span> <span class="attr">style</span>=<span class="string">"position:absolute;"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/08.bootstrap实例/主页/page/login-register.html?status=login"</span>&gt;</span>已有账号?登录<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">class</span>=<span class="string">"btn btn-primary col-md-2 col-md-offset-5 col-xs-offset-5"</span> <span class="attr">id</span>=<span class="string">"forgetPasswdSubmit"</span>&gt;</span>提交<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"text-right"</span> <span class="attr">style</span>=<span class="string">"float: right;"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/08.bootstrap实例/主页/page/login-register.html?status=register"</span>&gt;</span>没有账号?注册<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 切换 登录 注册 忘记密码 组件 JS --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"/08.bootstrap实例/主页/js/login-register/toggle.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="登录、注册、忘记密码的组件切换JS"><a href="#登录、注册、忘记密码的组件切换JS" class="headerlink" title="登录、注册、忘记密码的组件切换JS"></a>登录、注册、忘记密码的组件切换JS</h3><p>文件<br><strong>/08.bootstrap实例/主页/js/login-register/toggle.js</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 功能：登录、注册、忘记密码 组件 切换</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">let</span> url = <span class="keyword">new</span> URL(<span class="built_in">window</span>.location);</span><br><span class="line">	<span class="keyword">let</span> status = url.searchParams.get(<span class="string">'status'</span>);</span><br><span class="line">	<span class="built_in">console</span>.log(status);</span><br><span class="line">	<span class="keyword">if</span>(status === <span class="string">"login"</span>) &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">'ok'</span>)</span><br><span class="line">		$(<span class="string">'#registerForm'</span>).hide();</span><br><span class="line">		$(<span class="string">'#forgetForm'</span>).hide();</span><br><span class="line">		$(<span class="string">'#loginForm'</span>).slideDown();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span>(status === <span class="string">"register"</span>) &#123;</span><br><span class="line">		$(<span class="string">'#forgetForm'</span>).hide();</span><br><span class="line">		$(<span class="string">'#loginForm'</span>).hide();</span><br><span class="line">		$(<span class="string">'#registerForm'</span>).slideDown();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span>(status === <span class="string">"forget"</span>) &#123;</span><br><span class="line">		$(<span class="string">'#loginForm'</span>).hide();</span><br><span class="line">		$(<span class="string">'#registerForm'</span>).hide();</span><br><span class="line">		$(<span class="string">'#forgetForm'</span>).slideDown();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="登录、注册、忘记密码-页面"><a href="#登录、注册、忘记密码-页面" class="headerlink" title="登录、注册、忘记密码 页面"></a>登录、注册、忘记密码 页面</h3><p>将组件通过 jquery <code>load()</code>方法引入</p>
<p>文件<br><strong>/08.bootstrap实例/主页/page/login-register.html</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">title</span>&gt;</span>S站<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- Bootstrap --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"/08.bootstrap实例/主页/dist/bootstrap.min.css"</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 自定义样式 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"/08.bootstrap实例/主页/css/index.css"</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- HTML5 shim 和 Respond.js 是为了让 IE8 支持 HTML5 元素和媒体查询（media queries）功能 --&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 警告：通过 file:// 协议（就是直接将 html 页面拖拽到浏览器中）访问页面时 Respond.js 不起作用 --&gt;</span></span><br><span class="line">	<span class="comment">&lt;!--[if lt IE 9]&gt;</span></span><br><span class="line"><span class="comment">      &lt;script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="comment">      &lt;script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="comment">	&lt;![endif]--&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- bootstrapJS JQ --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"/08.bootstrap实例/主页/dist/jquery-1.12.1.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"/08.bootstrap实例/主页/dist/bootstrap.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 头部导航 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">nav</span> <span class="attr">class</span>=<span class="string">"navbar navbar-inverse navbar-fixed-top my-navbar"</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- Brand --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container-fluid"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"navbar-header"</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">class</span>=<span class="string">"navbar-toggle collapsed"</span> <span class="attr">data-toggle</span>=<span class="string">"collapse"</span> <span class="attr">data-target</span>=<span class="string">"#myNavLink"</span></span></span><br><span class="line"><span class="tag">					<span class="attr">aria-expanded</span>=<span class="string">"false"</span> <span class="attr">aria-controls</span>=<span class="string">"navbar"</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"sr-only"</span>&gt;</span>Toggle navigation<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"icon-bar"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"icon-bar"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"icon-bar"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span> <span class="attr">class</span>=<span class="string">"navbar-brand"</span>&gt;</span></span><br><span class="line">					<span class="comment">&lt;!-- &lt;img src="" alt="brand"&gt; --&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"glyphicon glyphicon-apple"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">			<span class="comment">&lt;!-- Link --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"navbar-collapse collapse"</span> <span class="attr">id</span>=<span class="string">"myNavLink"</span>&gt;</span></span><br><span class="line">				<span class="comment">&lt;!-- 链接 --&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"nav navbar-nav"</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"active"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/08.bootstrap实例/主页/index.html"</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>Movie<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>Music<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"nav navbar-nav navbar-right"</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/08.bootstrap实例/主页/page/login-register.html?status=login"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"glyphicon glyphicon-log-in"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/08.bootstrap实例/主页/page/login-register.html?status=register"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"glyphicon glyphicon-user"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>注册<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row navbar-fixed-top my-backgroundImg"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-lg-12 backgroundImg"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"loginRegisterDiv"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">			$(<span class="string">'#loginRegisterDiv'</span>).load(<span class="string">'/08.bootstrap实例/主页/template/login-register.html'</span>);</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 底部 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">nav</span> <span class="attr">class</span>=<span class="string">"navbar navbar-default navbar-fixed-bottom"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container text-center"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">p</span>&gt;</span>本站不提供任何内容上传服务，所有内容均来自视频分享站点所提供的公开引用资源。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">p</span>&gt;</span>若本站收录的内容无意侵犯了贵司版权，请给网页底部邮箱地址来信,我们会及时处理和回复,谢谢。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="symbol">&amp;copy;</span> 2020 S站 管理员：ello<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- 自定义JS --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"/08.bootstrap实例/主页/js/index.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><p><a href="https://v3.bootcss.com/getting-started/" target="_blank" rel="noopener external nofollow noreferrer">Bootstrap中文网</a></p>
]]></content>
      <tags>
        <tag>bootstrap</tag>
      </tags>
  </entry>
  <entry>
    <title>mysql navicat 创建定时任务</title>
    <url>/2020-04-23-mysql-ding-shi-ren-wu.html</url>
    <content><![CDATA[<p>说明：</p>
<ul>
<li>使用Navicat Premium 12，建立数据库定时任务</li>
</ul>
<p>定时任务说明：</p>
<ul>
<li>每天23:00点重设某个字段</li>
</ul>
<a id="more"></a>

<h3 id="查看定时任务功能是否开启"><a href="#查看定时任务功能是否开启" class="headerlink" title="查看定时任务功能是否开启"></a>查看定时任务功能是否开启</h3><ol>
<li>打开命令面板</li>
</ol>
<p><img src="../images/navicat-mysql/1.png" alt="image"></p>
<ol start="2">
<li>输入</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">VARIABLES</span> <span class="keyword">LIKE</span> <span class="string">'%event_scheduler%'</span>;</span><br></pre></td></tr></table></figure>

<p><img src="../images/navicat-mysql/2.png" alt="image"></p>
<p>ON 表示已经打开</p>
<ol start="3">
<li>未打开时，输入</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SET</span> <span class="keyword">GLOBAL</span> event_scheduler = <span class="keyword">ON</span>;</span><br></pre></td></tr></table></figure>

<p>再测试是否打开</p>
<h3 id="函数中新建过程"><a href="#函数中新建过程" class="headerlink" title="函数中新建过程"></a>函数中新建过程</h3><ol>
<li>右击数据库下<strong>函数</strong>，选择<strong>新建函数</strong></li>
</ol>
<p><img src="../images/navicat-mysql/3.png" alt="image"></p>
<ol start="2">
<li>创建过程</li>
</ol>
<p><img src="../images/navicat-mysql/4.png" alt="image"></p>
<p>直接点击完成</p>
<p><img src="../images/navicat-mysql/5.png" alt="image"></p>
<ol start="3">
<li>过程内容</li>
</ol>
<p><img src="../images/navicat-mysql/6.png" alt="image"></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> DEFINER=<span class="string">`user`</span>@<span class="string">`%`</span> <span class="keyword">PROCEDURE</span> <span class="string">`timer`</span>()</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">	<span class="comment">#Routine body goes here...定时 过程 </span></span><br><span class="line">	<span class="keyword">UPDATE</span> sys_students <span class="keyword">SET</span> <span class="string">`status`</span> = <span class="number">0</span>, <span class="string">`sZWH`</span> = <span class="number">0</span> <span class="keyword">WHERE</span> <span class="string">`status`</span> = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">END</span></span><br></pre></td></tr></table></figure>

<h3 id="新建定时事件-调用过程"><a href="#新建定时事件-调用过程" class="headerlink" title="新建定时事件 调用过程"></a>新建定时事件 调用过程</h3><ol>
<li>右击<strong>事件</strong>，<strong>新建事件</strong></li>
</ol>
<p><img src="../images/navicat-mysql/7.png" alt="image"></p>
<ol start="2">
<li>定义中的内容</li>
</ol>
<p><img src="../images/navicat-mysql/8.png" alt="image"></p>
<ol start="3">
<li>设置定时器</li>
</ol>
<p><img src="../images/navicat-mysql/9.png" alt="image"></p>
<ol start="4">
<li>点击保存</li>
</ol>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><p><a href="https://blog.csdn.net/qq_39101581/article/details/82418851" target="_blank" rel="noopener external nofollow noreferrer">CSDN Navicat for MySQL 创建定时任务</a></p>
<p><a href="https://blog.csdn.net/vleess/article/details/82703950" target="_blank" rel="noopener external nofollow noreferrer">通过Navicat创建MySql定时任务</a></p>
]]></content>
      <tags>
        <tag>mysql</tag>
        <tag>navicat</tag>
      </tags>
  </entry>
  <entry>
    <title>基于 express 的占座系统</title>
    <url>/2020-05-13-zhan-zuo-xi-tong-express.html</url>
    <content><![CDATA[<ul>
<li>介绍</li>
<li>基于 Express Node.js 框架</li>
<li>使用 bootstrap 3 CSS UI 插件</li>
<li>使用 jQuery 1.12.1</li>
<li>使用 art-template 模板引擎</li>
<li>使用 MySql 数据库</li>
</ul>
<a id="more"></a>

<h3 id="占座功能说明"><a href="#占座功能说明" class="headerlink" title="占座功能说明"></a>占座功能说明</h3><ul>
<li>登录</li>
<li>注册</li>
<li>重置密码</li>
<li>用户名修改</li>
<li>用户密码修改</li>
<li>占座</li>
<li>离开座位</li>
<li>当前用户占座信息</li>
<li>发布开会通知邮件</li>
<li>用户授权</li>
</ul>
<h3 id="路由设计"><a href="#路由设计" class="headerlink" title="路由设计"></a>路由设计</h3><table>
<thead>
<tr>
<th align="center">请求方法</th>
<th align="center">请求路径</th>
<th align="center">GET 参数</th>
<th align="center">POST 参数</th>
<th align="center">备注</th>
</tr>
</thead>
<tbody><tr>
<td align="center">get</td>
<td align="center">/</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">主页</td>
</tr>
<tr>
<td align="center">get</td>
<td align="center">/login-register</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">登录、注册、忘记密码页面</td>
</tr>
<tr>
<td align="center">get</td>
<td align="center">/about</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">关于页面</td>
</tr>
<tr>
<td align="center">get</td>
<td align="center">/captcha</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">图片验证码</td>
</tr>
<tr>
<td align="center">get</td>
<td align="center">/mailValidate</td>
<td align="center">token</td>
<td align="center"></td>
<td align="center">注册的邮箱验证</td>
</tr>
<tr>
<td align="center">get</td>
<td align="center">/userinfo</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">用户信息</td>
</tr>
<tr>
<td align="center">get</td>
<td align="center">/logout</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">注销</td>
</tr>
<tr>
<td align="center">get</td>
<td align="center">/reserveseat</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">占座页面</td>
</tr>
<tr>
<td align="center">get</td>
<td align="center">/getLocalUserSeatStatus</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">获取当前用户占座状态</td>
</tr>
<tr>
<td align="center">get</td>
<td align="center">/leaveseat</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">离开座位</td>
</tr>
<tr>
<td align="center">get</td>
<td align="center">/meeting</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">发布开会通知页面</td>
</tr>
<tr>
<td align="center">get</td>
<td align="center">/getadmin</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">授权页面</td>
</tr>
<tr>
<td align="center">post</td>
<td align="center">/login</td>
<td align="center"></td>
<td align="center">usernameLogin、passwdLogin、validateLogin</td>
<td align="center">登录</td>
</tr>
<tr>
<td align="center">post</td>
<td align="center">/register</td>
<td align="center"></td>
<td align="center">usernameRe emailRe passwdRe rePasswdRe validateRe</td>
<td align="center">注册</td>
</tr>
<tr>
<td align="center">post</td>
<td align="center">/forget</td>
<td align="center"></td>
<td align="center">emailForget passwdForget rePasswdForget validateForget validateMailForget</td>
<td align="center">忘记密码</td>
</tr>
<tr>
<td align="center">post</td>
<td align="center">/userinfo-changeusername</td>
<td align="center"></td>
<td align="center">usernameModify</td>
<td align="center">修改用户名</td>
</tr>
<tr>
<td align="center">post</td>
<td align="center">/userinfo-changepassword</td>
<td align="center"></td>
<td align="center">oldPassword newPassword reNewPassword</td>
<td align="center">修改密码</td>
</tr>
<tr>
<td align="center">post</td>
<td align="center">/reserveseat</td>
<td align="center"></td>
<td align="center">mail、seatNumber</td>
<td align="center">占座功能</td>
</tr>
<tr>
<td align="center">post</td>
<td align="center">/meeting</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">发布通知</td>
</tr>
<tr>
<td align="center">post</td>
<td align="center">/getadmin</td>
<td align="center"></td>
<td align="center">username mail admin</td>
<td align="center">授权功能</td>
</tr>
<tr>
<td align="center">post</td>
<td align="center">/cancelAdmin</td>
<td align="center"></td>
<td align="center">username mail admin</td>
<td align="center">取消授权功能</td>
</tr>
</tbody></table>
<h3 id="添加座位接口"><a href="#添加座位接口" class="headerlink" title="添加座位接口"></a>添加座位接口</h3><table>
<thead>
<tr>
<th align="center">文件名/路径</th>
<th align="center">方法</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">\views\seats-tpl.html</td>
<td align="center"></td>
<td align="center">前端渲染座位</td>
</tr>
<tr>
<td align="center">\modules\seat\seats.js</td>
<td align="center">initSeats()</td>
<td align="center">初始化传入前端的座位数组，默认为 11 个座位</td>
</tr>
</tbody></table>
<h3 id="项目GitHub地址"><a href="#项目GitHub地址" class="headerlink" title="项目GitHub地址"></a>项目GitHub地址</h3><p><a href="https://github.com/zuahua/express-reserveSeatSys" target="_blank" rel="noopener external nofollow noreferrer">GitHub</a></p>
<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><p>先安装所有依赖</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">node install</span><br></pre></td></tr></table></figure>

<p>运行</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">node app.js</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>bootstrap</tag>
        <tag>express</tag>
        <tag>Node.js</tag>
        <tag>art-template</tag>
        <tag>jquery</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP上传文件到服务器</title>
    <url>/2020-1-19-php-shang-chuan-wen-jian-dao-fu-wu-qi.html</url>
    <content><![CDATA[<p>环境：</p>
<ul>
<li>PHP7</li>
<li>ubuntu</li>
<li>Apache</li>
<li>vsftp</li>
</ul>
<p>遇到的坑：上传的ftp文件目录不可写入；导致上传没有结果</p>
<a id="more"></a>

<h3 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h3><p>修改上传文件夹的权限：</p>
<p>我在FTP Rush中直接修改：</p>
<p><img src="/images/PHP/1.png" alt="1"></p>
<h3 id="注意上传路径"><a href="#注意上传路径" class="headerlink" title="注意上传路径"></a>注意上传路径</h3><h3 id="PHP文件上传"><a href="#PHP文件上传" class="headerlink" title="PHP文件上传"></a>PHP文件上传</h3><p><a href="https://www.w3school.com.cn/php/php_file_upload.asp" target="_blank" rel="noopener external nofollow noreferrer">W3school</a></p>
]]></content>
      <tags>
        <tag>PHP</tag>
      </tags>
  </entry>
  <entry>
    <title>使用JSONP</title>
    <url>/2020-3-10-jsonp-js.html</url>
    <content><![CDATA[<blockquote>
<p>服务端php</p>
<p>原生JS</p>
<p>JSONP</p>
<p>根据JSON数据创建表格</p>
</blockquote>
<a id="more"></a>

<h3 id="使用JSONP"><a href="#使用JSONP" class="headerlink" title="使用JSONP"></a>使用JSONP</h3><h3 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h3><ul>
<li>原生JS方法</li>
<li>script <strong>标签形式</strong>引入php</li>
<li>src中发送回调函数名</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;script src=<span class="string">"http://127.0.0.1/JSONP/testJSONP.php?jsoncallback=callbackfunction"</span>&gt;&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>客户端构造回调函数</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">callbackfunction</span>(<span class="params">result</span>) </span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>服务端获取回调函数； 并传入json数据</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 获取回调函数名</span></span><br><span class="line">$jsoncallback = htmlspecialchars($_REQUEST[<span class="string">'jsoncallback'</span>]);</span><br></pre></td></tr></table></figure>

<h3 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h3><p><img src="../images/json/jsonp.png" alt="image"></p>
<h3 id="服务器端php文件"><a href="#服务器端php文件" class="headerlink" title="服务器端php文件"></a>服务器端php文件</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line">    <span class="comment">//header("Content-type: application/json");</span></span><br><span class="line">    <span class="comment">// 获取回调函数名</span></span><br><span class="line">    $jsoncallback = htmlspecialchars($_REQUEST[<span class="string">'jsoncallback'</span>]);</span><br><span class="line">    <span class="comment">// 构造json数据</span></span><br><span class="line">    $json_data = <span class="string">'[</span></span><br><span class="line"><span class="string">            &#123;</span></span><br><span class="line"><span class="string">                "id": 1,</span></span><br><span class="line"><span class="string">                "name": "Jone",</span></span><br><span class="line"><span class="string">                "age": 16,</span></span><br><span class="line"><span class="string">            &#125;,</span></span><br><span class="line"><span class="string">            &#123;</span></span><br><span class="line"><span class="string">                "id": 2,</span></span><br><span class="line"><span class="string">                "name": "Kong",</span></span><br><span class="line"><span class="string">                "age": 18, </span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">        ]'</span>;</span><br><span class="line">    <span class="keyword">echo</span> $jsoncallback .<span class="string">"("</span> . $json_data . <span class="string">")"</span>; </span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="客户端代码"><a href="#客户端代码" class="headerlink" title="客户端代码"></a>客户端代码</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>JSONP JS<span class="tag">&lt;/<span class="name">title</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">        table &#123;</span><br><span class="line">            border-collapse: collapse;</span><br><span class="line">        &#125;</span><br><span class="line">        td &#123;</span><br><span class="line"><span class="css">            <span class="selector-tag">border</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#aaa</span>;</span></span><br><span class="line">            padding: 5px 10px;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"box"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">        <span class="function"><span class="keyword">function</span> <span class="title">callbackfunction</span><span class="params">(result)</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> table = <span class="built_in">document</span>.createElement(<span class="string">'table'</span>);    </span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> tr = <span class="built_in">document</span>.createElement(<span class="string">'tr'</span>);</span></span><br><span class="line"><span class="handlebars"><span class="xml">            var td = '<span class="tag">&lt;<span class="name">td</span>&gt;</span>id<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>姓名<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>年龄<span class="tag">&lt;/<span class="name">td</span>&gt;</span>';     </span></span></span><br><span class="line">            tr.innerHTML = td;</span><br><span class="line">            table.appendChild(tr);   </span><br><span class="line"><span class="actionscript">            <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; result.length; i++) &#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> tr = <span class="built_in">document</span>.createElement(<span class="string">'tr'</span>);</span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> td1 = <span class="built_in">document</span>.createElement(<span class="string">'td'</span>);</span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> td2 =  <span class="built_in">document</span>.createElement(<span class="string">'td'</span>);</span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> td3 = <span class="built_in">document</span>.createElement(<span class="string">'td'</span>);</span></span><br><span class="line">                td1.innerHTML = result[i].id;</span><br><span class="line">                td2.innerHTML = result[i].name;</span><br><span class="line">                td3.innerHTML = result[i].age;</span><br><span class="line">                tr.appendChild(td1);</span><br><span class="line">                tr.appendChild(td2);</span><br><span class="line">                tr.appendChild(td3);</span><br><span class="line">                table.appendChild(tr);</span><br><span class="line">            &#125;</span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> box = <span class="built_in">document</span>.getElementById(<span class="string">"box"</span>);</span></span><br><span class="line">            box.appendChild(table);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"http://127.0.0.1/JSONP/testJSONP.php?jsoncallback=callbackfunction"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>JavaScript</tag>
        <tag>JSONP</tag>
      </tags>
  </entry>
  <entry>
    <title>难忘今春2020</title>
    <url>/2020-2-2-wu-han-fei-yan-shi-jian-r.i.p.html</url>
    <content><![CDATA[<ul>
<li>声明:以下时间,地点,人物,事件,笔者都无法证明。如有错误,欢迎指正(请当故事看看)。</li>
</ul>
<a id="more"></a>

<blockquote>
<p>时间: 2019年</p>
</blockquote>
<p>12月,开始从推上了解到武汉肺炎,有可能大范围传播言论出现。国内一片祥和,然后武汉当局抓了几个所谓“造谣者”(有人说是医生在微信群讨论被抓)。</p>
<blockquote>
<p>医生：</p>
<p>受到当局最严厉的批评，并检讨。</p>
<p>注：后 李文亮医生死于新冠病毒。</p>
</blockquote>
<p><img src="../images/note/22.png" alt="image"></p>
<blockquote>
<p>时间:2020年</p>
</blockquote>
<p>1月20日,官方正式发布新型冠状病毒感染事件,人数几十人似乎小事一桩,不足挂齿。</p>
<p>人传人,口罩<strong>疯抢</strong>。</p>
<p>1月21,22日,那时我这小城市也没几人戴口罩,而我自己也不以为意,还跑出去玩了两天。而且,本地药房几乎<strong>没口罩卖了</strong>。</p>
<p>1月23日,武汉突然<strong>封城</strong>,出动军队,震惊全国,政府的不作为,终于到今天有了动静。可以预见的,武汉混乱,与民众恐慌,谣言四起。</p>
<p>1月24日,春节。北京歌舞升平,武汉水深火热🔥。<br>人民日报头条依然是某慰问了党内老干部,和常委看了啥表演和节目,不知道发表了啥讲话,也未提武汉肺炎事件。<br>此时新型冠状病毒官方也早已确定可人传人,人数也已上百。</p>
<p>1月25号,油管看到武汉口罩哥的发声,对武汉政府的绝望,领导人的不作为的披露;<br>看到微博被屏蔽,武汉某医院护士拍摄的视频,走道里裹着的尸体无人问津,说打领导人电话也没人接。</p>
<p>医院也绕过政府,直接向社会求助。鲜明对比的是,某总理慰问病人的照片,都没带口罩,病人也没带口罩,微笑着的摆拍?</p>
<p>陈秋实去了武汉一线,报道情况。<br>面具哥喷他为大外宣。<br>无论站哪队或当个看客,至少那环境下有不同的声音可以发出,再看墙内?封的封,抓的抓。</p>
<p>时间推移,党的宣传机器不知道在讲些什么东西,可能是赞扬党在危难时刻的担当与作为。<br>只让我看着这增长速度愈发快的确诊病例、疑似病例、死亡数据,还有这惨淡的治愈人数。</p>
<p>1月30日,WHO<strong>第三次会议</strong>终于宣布中国新型冠状病毒为国际关注的公共卫生事件。而此时,官方数据9000+的确诊人数。</p>
<p>2月1日,数据<strong>破万</strong>了啊。</p>
<p><strong><em>华丽的分割线</em></strong></p>
<hr>
<p>惊闻红十字会当年汶川物资烂在仓库</p>
<p><img src="../images/note/11.png" alt="image"></p>
<p>莆田医院获得上万口罩物资,武汉领导人的车出现与红会仓库门口,又带走多少口罩?武汉市长甩锅,卫健委甩锅,疫情指挥部和红十字会相互甩锅<br><strong>某:我将亲自部署,亲自指挥(在京)</strong></p>
<p>谁又垃圾堆里捡起口罩?谁又高价卖起口罩发国难财?<br>谁在造谣?中药又可以抑制病毒了（<strong>双盲做了吗？</strong>）?<br>谁辟自己造的谣?谁又交了智商税?谁又没事出去?</p>
<p>那些现在依旧奋斗在一线的医生,护士,其他工作者。志愿者,捐赠物资的人,修建医院的工人,等等,才是伟大而可爱的。</p>
<p>那些等着床位,等着检测试剂的病人,甚至未被记录的等着被火化的老人尸体,无人问津?<br>感染病毒怕传给家人,独自在外,走去遥远医院,没有交通工具,跳桥自杀的人。<br>武警清理了现场,叫路人不要事件发在网上。</p>
<blockquote>
<p>路人哭着笑了。</p>
</blockquote>
<p>每天早上起床第一时间看看,又增加了多少人数,自己所在城市的感染情况,可能成为很多人的习惯。</p>
<p>宅在家里,百无聊赖,感冒买了药吃了还是鼻塞流涕,拖了几天进社区医院,提心吊胆量完温度正常,拿药回家,走时只回想着工作人员的话:没事不要往医院跑。我:我也不想啊!</p>
<p>“闭关锁国”的现状，大部分人要么岁月静好,没主见,禁锢的思想,无法自我思考只能听它一面之词。</p>
<p>大国盛产这类人</p>
<blockquote>
<p>阿Q正传：</p>
<p>你也配姓赵?</p>
</blockquote>
<p>有人不想让你见到的东西是谣言还是他害怕的真相?<br>我不知道,因为立场让你选择相信自己相信的真相。</p>
<p>但是,你需要自己去寻找答案。</p>
<p>请不要说:</p>
<blockquote>
<p>他们也没有办法,谁都没有办法,你行你上。</p>
<p>因为他们身在其位,获得了你想象不到的权利和利益。</p>
<p>但是,他们总是满口谎言和欺骗,甚至用他们制定的法律行驶暴力…</p>
</blockquote>
<p>或许几年之后,人们又已忘记今日伤痛,因为子弹下的幸存者总太多,他们又开始唱起了赞歌,伟大又坚强的中国,如同忘记30年前,如同忘记50年前一样。</p>
<blockquote>
<p>高晓松：</p>
<p>民主、自由、公民的权利从来都不是别人施舍的。</p>
</blockquote>
<hr>
<blockquote>
<p>记于2020-2-1</p>
<p>修改于2020-4-10</p>
</blockquote>
]]></content>
      <tags>
        <tag>随笔</tag>
        <tag>思考</tag>
      </tags>
  </entry>
  <entry>
    <title>jQuery使用JSONP</title>
    <url>/2020-3-10-jsonp-jquery.html</url>
    <content><![CDATA[<blockquote>
<p>服务端php</p>
<p>jQuery</p>
<p>JSONP</p>
<p>根据JSON数据创建表格</p>
</blockquote>
<a id="more"></a>

<h3 id="jQuery使用JSONP"><a href="#jQuery使用JSONP" class="headerlink" title="jQuery使用JSONP"></a>jQuery使用JSONP</h3><h3 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h3><ul>
<li><p>jQuery使用JSONP</p>
</li>
<li><p>$.getJSON(url, callback)</p>
</li>
<li><p>url</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&quot;http:&#x2F;&#x2F;127.0.0.1&#x2F;JSONP&#x2F;testJSONP.php?jsoncallback&#x3D;?&quot;</span><br></pre></td></tr></table></figure>

<h3 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h3><p><img src="../images/json/jsonp.png" alt="image"></p>
<h3 id="服务器端php文件"><a href="#服务器端php文件" class="headerlink" title="服务器端php文件"></a>服务器端php文件</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line">    <span class="comment">//header("Content-type: application/json");</span></span><br><span class="line">    <span class="comment">// 获取回调函数名</span></span><br><span class="line">    $jsoncallback = htmlspecialchars($_REQUEST[<span class="string">'jsoncallback'</span>]);</span><br><span class="line">    <span class="comment">// 构造json数据</span></span><br><span class="line">    $json_data = <span class="string">'[</span></span><br><span class="line"><span class="string">            &#123;</span></span><br><span class="line"><span class="string">                "id": 1,</span></span><br><span class="line"><span class="string">                "name": "Jone",</span></span><br><span class="line"><span class="string">                "age": 16,</span></span><br><span class="line"><span class="string">            &#125;,</span></span><br><span class="line"><span class="string">            &#123;</span></span><br><span class="line"><span class="string">                "id": 2,</span></span><br><span class="line"><span class="string">                "name": "Kong",</span></span><br><span class="line"><span class="string">                "age": 18, </span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">        ]'</span>;</span><br><span class="line">    <span class="keyword">echo</span> $jsoncallback .<span class="string">"("</span> . $json_data . <span class="string">")"</span>; </span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="客户端代码"><a href="#客户端代码" class="headerlink" title="客户端代码"></a>客户端代码</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>JSONP JQ<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/jquery/1.12.4/jquery.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">        table &#123;</span><br><span class="line">            border-collapse: collapse;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        td &#123;</span><br><span class="line"><span class="css">            <span class="selector-tag">border</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#aaa</span>;</span></span><br><span class="line">            padding: 5px 10px;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"box"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 使用jQuery的方式</span></span></span><br><span class="line"><span class="javascript">        $(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            $.getJSON(<span class="string">"http://127.0.0.1/JSONP/testJSONP.php?jsoncallback=?"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">var</span> list = [];</span></span><br><span class="line"><span class="actionscript">                list.push(<span class="string">'&lt;table&gt;'</span>);</span></span><br><span class="line"><span class="handlebars"><span class="xml">                list.push('<span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>id<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>姓名<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>年龄<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span>');</span></span></span><br><span class="line"><span class="javascript">                data.map(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="handlebars"><span class="xml">                    var tr = "<span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>" + item.id + "<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>" + item.name + "<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>" + item</span></span></span><br><span class="line"><span class="handlebars"><span class="xml">                        .age + "<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span>";</span></span></span><br><span class="line">                    list.push(tr);</span><br><span class="line">                &#125;);</span><br><span class="line"><span class="actionscript">                list.push(<span class="string">'&lt;/table&gt;'</span>);</span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> $table = $(list.join(<span class="string">''</span>));</span></span><br><span class="line"><span class="javascript">                $(<span class="string">'#box'</span>).append($table);</span></span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>jQuery</tag>
        <tag>JSONP</tag>
      </tags>
  </entry>
  <entry>
    <title>原生JS封装AJAX</title>
    <url>/2020-3-11-ajax-js.html</url>
    <content><![CDATA[<blockquote>
<p>原生JS封装AJAX为一个外部文件</p>
<p>实现直接调用</p>
<p>GET、POST传输方式</p>
</blockquote>
<a id="more"></a>

<h3 id="原生JS封装AJAX"><a href="#原生JS封装AJAX" class="headerlink" title="原生JS封装AJAX"></a>原生JS封装AJAX</h3><h3 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h3><ul>
<li>XMLHttpRequest()</li>
<li>ActiveXObject(“Microsoft.XMLHTTP”) // 兼容IE</li>
<li>xmlhttp.onreadystatechange</li>
<li>.readyState == 4</li>
<li>.status == 200</li>
<li>xmlhttp.open()</li>
<li>xmlhttp.setRequestHeader(‘Content-Type’, “application/x-www-form-urlencoded”) // POST时，设置头</li>
<li>xmlhttp.send()</li>
</ul>
<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><p>封装: <strong>AJAXloadDoc.js</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 封装AJAX获取数据 函数名：AJAXloadDoc</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;请求方式：string "GET"、"POST"&#125;</span> </span>requestWay </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;请求链接：string&#125;</span> </span>url </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;发送值：string ""、 "value1=1&amp;value2=2"&#125;</span> </span>sendValue </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;回调：参数为得到的结果数据&#125;</span> </span>callback </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">AJAXloadDoc</span>(<span class="params">requestWay, url, sendValue, callback</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> xmlhttp</span><br><span class="line">    <span class="comment">// 兼容写法</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">window</span>.XMLHttpRequest) &#123;</span><br><span class="line">        xmlhttp = <span class="keyword">new</span> <span class="built_in">window</span>.XMLHttpRequest()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        xmlhttp = <span class="keyword">new</span> ActiveXObject(<span class="string">"Microsoft.XMLHTTP"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> response <span class="comment">// 数据</span></span><br><span class="line"></span><br><span class="line">    xmlhttp.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.readyState == <span class="number">4</span> &amp;&amp; <span class="keyword">this</span>.status == <span class="number">200</span>) &#123;</span><br><span class="line">            response = <span class="keyword">this</span>.responseText</span><br><span class="line">            <span class="comment">// 调用 callback 传入 结果数据</span></span><br><span class="line">            callback(response)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (requestWay == <span class="string">"GET"</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> urlAndSend = url + <span class="string">"?"</span> + sendValue</span><br><span class="line">        xmlhttp.open(<span class="string">'GET'</span>, urlAndSend, <span class="literal">true</span>)</span><br><span class="line">        xmlhttp.send()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(requestWay == <span class="string">"POST"</span>) &#123;</span><br><span class="line">        xmlhttp.open(<span class="string">'POST'</span>, url, <span class="literal">true</span>)</span><br><span class="line">        xmlhttp.setRequestHeader(<span class="string">'Content-Type'</span>, <span class="string">"application/x-www-form-urlencoded"</span>)</span><br><span class="line">        xmlhttp.send(sendValue)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="参数说明"><a href="#参数说明" class="headerlink" title="参数说明"></a>参数说明</h3><ul>
<li>requestWay</li>
<li><ul>
<li>请求方式：string “GET”、”POST”</li>
</ul>
</li>
<li>url </li>
<li><ul>
<li>请求链接：string</li>
</ul>
</li>
<li>sendValue </li>
<li><ul>
<li>发送值：string 例：””（空）、 “value1=1&amp;value2=2”</li>
</ul>
</li>
<li>callback</li>
<li><ul>
<li>回调：参数为得到的结果数据</li>
</ul>
</li>
</ul>
<h3 id="调用方式"><a href="#调用方式" class="headerlink" title="调用方式"></a>调用方式</h3><p>引入：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;script src=<span class="string">"./AJAXloadDoc.js"</span>&gt;&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>

<p>使用：</p>
<ol>
<li>sendValue参数为空字符串 GET</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">AJAXloadDoc(<span class="string">"GET"</span>, <span class="string">"./test_ajax.php"</span>, <span class="string">""</span>, <span class="function"><span class="keyword">function</span>(<span class="params">res</span>) </span>&#123;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>有sendValue参数 GET</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">AJAXloadDoc(<span class="string">"GET"</span>, <span class="string">"./test_ajax.php"</span>, <span class="string">"x=1&amp;y=3"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">res</span>) </span>&#123;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>sendValue参数为空字符串 POST</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">AJAXloadDoc(<span class="string">"POST"</span>, <span class="string">"./test_ajax.php"</span>, <span class="string">""</span>, <span class="function"><span class="keyword">function</span>(<span class="params">res</span>) </span>&#123;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>有sendValue参数 POST</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">AJAXloadDoc(<span class="string">"POST"</span>, <span class="string">"./test_ajax.php"</span>, <span class="string">"x=1&amp;y=3"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">res</span>) </span>&#123;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="实例：根据AJAX传回数据建立表格"><a href="#实例：根据AJAX传回数据建立表格" class="headerlink" title="实例：根据AJAX传回数据建立表格"></a>实例：根据AJAX传回数据建立表格</h3><p>html</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>test_ajax JS<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./AJAXloadDoc.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span>    </span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn"</span>&gt;</span>获取数据<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"box"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> btn = <span class="built_in">document</span>.getElementById(<span class="string">'btn'</span>);</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> box = <span class="built_in">document</span>.getElementById(<span class="string">'box'</span>);</span></span><br><span class="line"><span class="actionscript">        btn.onclick = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">            <span class="comment">// sendValue参数为空字符串 POST</span></span></span><br><span class="line"><span class="actionscript">            AJAXloadDoc(<span class="string">"POST"</span>, <span class="string">"./test_ajax.php"</span>, <span class="string">""</span>, <span class="function"><span class="keyword">function</span><span class="params">(res)</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">                box.innerHTML = <span class="built_in">JSON</span>.parse(res).join(<span class="string">'-'</span>);</span></span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">        &#125;;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>php</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line">    <span class="comment">// sendValue参数为空字符串 POST</span></span><br><span class="line">    $data = <span class="keyword">array</span>(<span class="string">'1'</span>, <span class="string">'2'</span>, <span class="string">'3'</span>, <span class="string">'4'</span>, <span class="string">'5'</span>, <span class="string">'6'</span>, <span class="string">'7'</span>);</span><br><span class="line">    <span class="keyword">echo</span> json_encode($data);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

]]></content>
      <tags>
        <tag>JavaScript</tag>
        <tag>AJAX</tag>
      </tags>
  </entry>
  <entry>
    <title>jQuery中使用AJAX</title>
    <url>/2020-3-11-ajax-jquery.html</url>
    <content><![CDATA[<p>主要内容：</p>
<blockquote>
<p>load()</p>
<p>get()</p>
<p>post()</p>
</blockquote>
<a id="more"></a>

<h3 id="jQuery中使用AJAX"><a href="#jQuery中使用AJAX" class="headerlink" title="jQuery中使用AJAX"></a>jQuery中使用AJAX</h3><h3 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h3><ul>
<li>load()</li>
<li>get()</li>
<li>post()</li>
</ul>
<h3 id="load"><a href="#load" class="headerlink" title="load()"></a>load()</h3><ul>
<li><p>给页面加载数据</p>
</li>
<li><p>语法</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$(selector).load(URL,data,callback);</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>例：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>load jQuery<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/jquery/1.12.3/jquery.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"content"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">        $(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">            <span class="comment">// 给标签加载数据</span></span></span><br><span class="line"><span class="javascript">            $(<span class="string">'#container'</span>).load(<span class="string">'http://localhost/AJAX/load.txt'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">responseTxt, statusTxt, xhr</span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">if</span> (statusTxt == <span class="string">"success"</span>)</span></span><br><span class="line"><span class="actionscript">                    alert(<span class="string">"外部内容加载成功!"</span>);</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">if</span> (statusTxt == <span class="string">"error"</span>)</span></span><br><span class="line"><span class="actionscript">                    alert(<span class="string">"Error: "</span> + xhr.status + <span class="string">": "</span> + xhr.statusText);</span></span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="get"><a href="#get" class="headerlink" title="get()"></a>get()</h3><ul>
<li>语法：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$.get(URL,callback);</span><br></pre></td></tr></table></figure>

<p>例：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>.get() jQuery<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/jquery/1.12.3/jquery.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"box"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">        $(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">            $.get(<span class="string">"get.php?x=1&amp;y=2"</span>, <span class="function"><span class="keyword">function</span><span class="params">(data, status)</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">                $(<span class="string">'#box'</span>).html(data + <span class="string">"-"</span> + status);</span></span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="post"><a href="#post" class="headerlink" title="post()"></a>post()</h3><ul>
<li>语法:</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>post() jQuery<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/jquery/1.12.3/jquery.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"box"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">        $(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            $.post(<span class="string">'post.php'</span>, <span class="string">"x=1&amp;y=2"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                $(<span class="string">"#box"</span>).html(data);</span></span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>jQuery</tag>
        <tag>AJAX</tag>
      </tags>
  </entry>
  <entry>
    <title>php读取文件目录中文乱码</title>
    <url>/2020-3-20-php-du-qu-wen-jian-mu-lu-zhong-wen-luan-ma.html</url>
    <content><![CDATA[<p>环境说明：</p>
<blockquote>
<p>php7.x</p>
<p>ubuntu18.04</p>
<p>Nginx</p>
</blockquote>
<a id="more"></a>

<h3 id="需求说明"><a href="#需求说明" class="headerlink" title="需求说明"></a>需求说明</h3><blockquote>
<p>FTP上传文件到ubuntu服务器 /var/html目录下</p>
<p>使用php读取上传文件夹目录</p>
<p>并将结果使用 echo json_encode($data) 传出</p>
</blockquote>
<h3 id="出现问题"><a href="#出现问题" class="headerlink" title="出现问题"></a>出现问题</h3><blockquote>
<p>echo json_encode($data) 为空</p>
<p>再使用 print_r打印 发现中文乱码</p>
<p>json编码为空的原因是：json只能编码utf-8的数据</p>
</blockquote>
<h3 id="中文目录乱码解决"><a href="#中文目录乱码解决" class="headerlink" title="中文目录乱码解决"></a>中文目录乱码解决</h3><h4 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h4><p>Nginx中default配置文件添加编码charset utf-8;</p>
<p>打开文件</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">vim &#x2F;etc&#x2F;nginx&#x2F;sites-available&#x2F;default</span><br></pre></td></tr></table></figure>

<p>添加配置</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen 80 default_server;</span><br><span class="line">    listen [::]:80 default_server;</span><br><span class="line"></span><br><span class="line">    root &#x2F;var&#x2F;www&#x2F;html;</span><br><span class="line">    index index.html index.htm index.nginx-debian.html;</span><br><span class="line">    </span><br><span class="line">    charset utf-8;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="使用convmv将目录名编码全部转为utf-8"><a href="#使用convmv将目录名编码全部转为utf-8" class="headerlink" title="使用convmv将目录名编码全部转为utf-8"></a>使用convmv将目录名编码全部转为utf-8</h4><p>ubuntu安装convmv</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">apt install convmv -y</span><br></pre></td></tr></table></figure>

<p>把 /var/www/html目录下文件名编码全部转为utf-8</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">convmv -f GB2312 -t UTF-8 -r --nosmart --notest &#x2F;var&#x2F;www&#x2F;html</span><br></pre></td></tr></table></figure>


]]></content>
      <tags>
        <tag>php</tag>
        <tag>读文件</tag>
      </tags>
  </entry>
  <entry>
    <title>fetch的简单使用</title>
    <url>/2020-3-11-fetch.html</url>
    <content><![CDATA[<blockquote>
<p>fetch的简单使用</p>
<p>promise对象</p>
</blockquote>
<a id="more"></a>

<h3 id="fetch的使用"><a href="#fetch的使用" class="headerlink" title="fetch的使用"></a>fetch的使用</h3><ul>
<li>IE不支持</li>
</ul>
<h3 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h3><ul>
<li>new Promise()</li>
<li>fetch(url, obj) </li>
<li>.then((response) =&gt; {})</li>
</ul>
<h3 id="promise对象"><a href="#promise对象" class="headerlink" title="promise对象"></a>promise对象</h3><p>回调参数</p>
<ul>
<li>resolve 下决定去做(成功)</li>
<li>reject 拒绝做(失败)</li>
<li>.then(fun1, fun2)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">//resolve('123');</span></span><br><span class="line">        reject(<span class="string">'456'</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(<span class="function">(<span class="params">num</span>) =&gt;</span> &#123; <span class="comment">// 成功</span></span><br><span class="line">        alert(num)</span><br><span class="line">    &#125;, (err) =&gt; &#123; <span class="comment">// 失败</span></span><br><span class="line">        alert(err)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// .catch((num) =&gt; &#123; // 失败2</span></span><br><span class="line">    <span class="comment">//     alert(num)</span></span><br><span class="line">    <span class="comment">// &#125;)</span></span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="GET"><a href="#GET" class="headerlink" title="GET"></a>GET</h3><p>简单使用例子：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">fetch(<span class="string">`http://localhost/fetch/fetch.php?user=<span class="subst">$&#123;user&#125;</span>&amp;password=<span class="subst">$&#123;password&#125;</span>`</span>, &#123;</span><br><span class="line">    method: <span class="string">'GET'</span></span><br><span class="line">&#125;)</span><br><span class="line">.then(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">    response.json(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(<span class="function">(<span class="params">result</span>) =&gt;</span> &#123; <span class="comment">// 获取返回数据</span></span><br><span class="line">        <span class="built_in">console</span>.log(result)</span><br><span class="line">    &#125;)</span><br><span class="line">    .catch(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'服务器错误'</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="POST"><a href="#POST" class="headerlink" title="POST"></a>POST</h3><ul>
<li>obj</li>
<li><ul>
<li>method</li>
</ul>
</li>
<li><ul>
<li>headers // (头文件)</li>
</ul>
</li>
<li><ul>
<li>body // (post数据)</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">fetch(<span class="string">`http://localhost/fetch/fetch.php`</span>, &#123;</span><br><span class="line">    method: <span class="string">'POST'</span>,</span><br><span class="line">    headers: &#123; <span class="string">'Content-Type'</span>: <span class="string">'application/x-www-form-urlencoded'</span>&#125;,</span><br><span class="line">    body: <span class="string">`user=<span class="subst">$&#123;user&#125;</span>&amp;password=<span class="subst">$&#123;password&#125;</span>`</span></span><br><span class="line">&#125;)</span><br><span class="line">.then(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">    response.json(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(<span class="function">(<span class="params">result</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(result.status)</span><br><span class="line">    &#125;)</span><br><span class="line">    .catch(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'服务器错误'</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>JavaScript</tag>
        <tag>fetch</tag>
      </tags>
  </entry>
  <entry>
    <title>php读文件目录名及文件夹列表</title>
    <url>/2020-3-20-php-du-wen-jian-mu-lu.html</url>
    <content><![CDATA[<p>环境说明：</p>
<blockquote>
<p>php7.x</p>
<p>php函数读取文件夹目录</p>
</blockquote>
<a id="more"></a>

<h3 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h3><ul>
<li>opendir()</li>
<li>readdir()</li>
</ul>
<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 读取文件夹 文件和目录</span></span><br><span class="line"><span class="comment">     * $filepath 要读取的文件夹路径</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">readfiledir</span><span class="params">($filepath)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//遍历目录下面的所有文件和目录</span></span><br><span class="line">        $str = opendir($filepath);<span class="comment">//指定获取此目录下的文件及文件夹列表</span></span><br><span class="line">        $file_array = <span class="keyword">array</span>();</span><br><span class="line">        $dir_array = <span class="keyword">array</span>();</span><br><span class="line">        <span class="keyword">while</span>( ($filename = readdir($str)) !== <span class="keyword">false</span> ) </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>($filename != <span class="string">"."</span> &amp;&amp; $filename != <span class="string">".."</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">//判断是否是文件，文件放在文件列表数组中，子文件夹放在子文件夹列表数组中</span></span><br><span class="line">                <span class="keyword">if</span> (is_file($filename))&#123;</span><br><span class="line">                    $file_array[]=$filename;</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    $dir_array[]=$filename;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        closedir($str);</span><br><span class="line">        $all_files = <span class="keyword">array</span>();</span><br><span class="line">        array_push($all_files, $dir_array, $file_array);</span><br><span class="line">        <span class="keyword">return</span> $all_files;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><p><a href="https://blog.qzze.com/977.html" target="_blank" rel="noopener external nofollow noreferrer">链接</a></p>
]]></content>
      <tags>
        <tag>php</tag>
        <tag>读文件</tag>
      </tags>
  </entry>
  <entry>
    <title>html、CSS 文字两边居中横线</title>
    <url>/2020-3-26-wen-zi-liang-bian-ju-zhong-heng-xian.html</url>
    <content><![CDATA[<ul>
<li>html、CSS </li>
<li></li>
<li>文字两边居中横线</li>
</ul>
<a id="more"></a>

<h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><blockquote>
<p>文字两边使用 span (inline-block) </p>
<p>span 上边框 (border)</p>
<p>vertical-align: center;</p>
<p>或 vertical-align: length; // 表示将元素向上或向下移动length（支持负值）</p>
</blockquote>
<h3 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h3><p><img src="../images/html/1585193510703-8655ad384fdafb52.png" alt="image"></p>
<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>文字左右居中横线<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.container</span> &#123;</span></span><br><span class="line">            width: 300px;</span><br><span class="line">            height: 300px;</span><br><span class="line">            margin: 20px auto;</span><br><span class="line">            background-color: pink;</span><br><span class="line">            text-align: center;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.line</span> &#123;</span></span><br><span class="line">            display: inline-block;</span><br><span class="line">            width: 100px;</span><br><span class="line">            border-top: 1px solid black;</span><br><span class="line">            vertical-align: 5px;</span><br><span class="line"><span class="css">            <span class="comment">/* vertical-align: center; */</span></span></span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.word</span> &#123;</span></span><br><span class="line">            display: inline;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"line"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"word"</span>&gt;</span>文字<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"line"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><p><a href="https://www.w3schools.com/cssref/pr_pos_vertical-align.asp" target="_blank" rel="noopener external nofollow noreferrer">vertical-align w3schools</a></p>
]]></content>
      <tags>
        <tag>HTML</tag>
        <tag>CSS</tag>
      </tags>
  </entry>
  <entry>
    <title>页面只同时播放一个音频</title>
    <url>/2020-3-26-ye-mian-zhi-tong-shi-bo-fang-yi-ge-yin-pin.html</url>
    <content><![CDATA[<blockquote>
<p>需求：页面只同时播放一个音频</p>
<p>使用三种方式</p>
<p>JavaScript</p>
<p>jQuery</p>
</blockquote>
<a id="more"></a>

<h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><ul>
<li>监听每个audio的play事件</li>
<li>保存当前播放audio</li>
<li>遍历所有audio</li>
<li>停止不为当前播放的所有audio (audio.pause()方法)</li>
</ul>
<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><p>html如下</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>页面只同时播放一个音频<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/jquery/1.12.4/jquery.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">audio</span> <span class="attr">src</span>=<span class="string">"周杰倫 - 斗牛.mp3"</span> <span class="attr">controls</span>&gt;</span><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">audio</span> <span class="attr">src</span>=<span class="string">"周杰倫 - 星晴.mp3"</span> <span class="attr">controls</span>&gt;</span><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">audio</span> <span class="attr">src</span>=<span class="string">"周杰倫 - 可爱女人.mp3"</span> <span class="attr">controls</span>&gt;</span><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">audio</span> <span class="attr">src</span>=<span class="string">"周杰倫 - 伊斯坦堡.mp3"</span> <span class="attr">controls</span>&gt;</span><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="方式一-JS"><a href="#方式一-JS" class="headerlink" title="方式一 (JS)"></a>方式一 (JS)</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> audio = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"audio"</span>);</span><br><span class="line"><span class="comment">// 遍历</span></span><br><span class="line"><span class="built_in">Array</span>.prototype.forEach.call(audio, <span class="function"><span class="keyword">function</span>(<span class="params">item</span>) </span>&#123;</span><br><span class="line">    item.addEventListener(<span class="string">'play'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">// 添加播放时的监听事件</span></span><br><span class="line">        <span class="keyword">var</span> currentPlay = <span class="keyword">this</span>; <span class="comment">// 获取当前播放DOM元素</span></span><br><span class="line">        <span class="built_in">Array</span>.prototype.forEach.call(audio, <span class="function"><span class="keyword">function</span>(<span class="params">i</span>) </span>&#123;</span><br><span class="line">            <span class="comment">// 再次遍历；当audio不为当前播放元素时，调用停止播放方法</span></span><br><span class="line">            i != currentPlay &amp;&amp; i.pause();</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="方式二-JS函数"><a href="#方式二-JS函数" class="headerlink" title="方式二 (JS函数)"></a>方式二 (JS函数)</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">pauseOtherAudios</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> currentPlay = <span class="keyword">this</span>; <span class="comment">// 绑定当前播放audio</span></span><br><span class="line">    <span class="keyword">var</span> audio = <span class="built_in">document</span>.getElementsByTagName(<span class="string">'audio'</span>); <span class="comment">// 获取所有audio</span></span><br><span class="line">    <span class="comment">// 遍历 停止不为当前播放的audio</span></span><br><span class="line">    <span class="built_in">Array</span>.prototype.forEach.call(audio, <span class="function"><span class="keyword">function</span>(<span class="params">item</span>) </span>&#123;</span><br><span class="line">        item !== currentPlay &amp;&amp; item.pause();</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 绑定播放监听事件</span></span><br><span class="line"><span class="keyword">var</span> audio = <span class="built_in">document</span>.getElementsByTagName(<span class="string">'audio'</span>);</span><br><span class="line"><span class="built_in">Array</span>.prototype.forEach.call(audio, <span class="function"><span class="keyword">function</span>(<span class="params">item</span>) </span>&#123;</span><br><span class="line">    item.addEventListener(<span class="string">'play'</span>, pauseOtherAudios.bind(item));</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="方式三-jQuery"><a href="#方式三-jQuery" class="headerlink" title="方式三 (jQuery)"></a>方式三 (jQuery)</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    $(<span class="string">'audio'</span>).on(<span class="string">'play'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> currentPlay = <span class="keyword">this</span>; <span class="comment">// 当前播放的DOM元素</span></span><br><span class="line">        <span class="built_in">Array</span>.prototype.forEach.call($(<span class="string">'audio'</span>), <span class="function"><span class="keyword">function</span>(<span class="params">item</span>) </span>&#123;</span><br><span class="line">            <span class="comment">// 遍历得到的item是DOM元素 不是jQ对象</span></span><br><span class="line">            item !== currentPlay &amp;&amp; item.pause();</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><p><a href="https://blog.csdn.net/qq_17497931/article/details/81000806" target="_blank" rel="noopener external nofollow noreferrer">一个页面中有多个audio标签，播放其中一个时暂停其他，只允许一个audio播放</a></p>
<p><a href="https://www.w3schools.com/tags/ref_av_dom.asp" target="_blank" rel="noopener external nofollow noreferrer">HTML Audio/Video DOM Reference</a></p>
]]></content>
      <tags>
        <tag>HTML</tag>
        <tag>JavaScript</tag>
        <tag>jQuery</tag>
      </tags>
  </entry>
  <entry>
    <title>React + Ant Design 豆瓣电影学习实例</title>
    <url>/2020-3-6-react-antd.html</url>
    <content><![CDATA[<blockquote>
<p>版本说明:<br>webpack4.x<br>antd 3.x<br>react 16.x<br>其他插件版本 查看 <strong>package.json</strong>配置文件</p>
</blockquote>
<p>已上传至<a href="https://github.com/zuahua/React_Antd_DouBanMovie" target="_blank" rel="noopener external nofollow noreferrer">GitHub仓库</a></p>
<a id="more"></a>

<h2 id="React-Ant-Design-豆瓣电影学习实例"><a href="#React-Ant-Design-豆瓣电影学习实例" class="headerlink" title="React + Ant Design 豆瓣电影学习实例"></a>React + Ant Design 豆瓣电影学习实例</h2><h3 id="豆瓣API"><a href="#豆瓣API" class="headerlink" title="豆瓣API"></a>豆瓣API</h3><p>由于官方豆瓣API文档不再提供;这里使用网上个体提供的豆瓣API;</p>
<p>链接<a href="https://douban.uieee.com/" target="_blank" rel="noopener external nofollow noreferrer">Douban API Proxy</a></p>
<h3 id="最终效果"><a href="#最终效果" class="headerlink" title="最终效果"></a>最终效果</h3><h4 id="首页"><a href="#首页" class="headerlink" title="首页"></a>首页</h4><p><img src="../images/React/home.PNG" alt="首页"></p>
<h4 id="电影页"><a href="#电影页" class="headerlink" title="电影页"></a>电影页</h4><p><img src="../images/React/movie.PNG" alt="电影"></p>
<h3 id="clone-说明"><a href="#clone-说明" class="headerlink" title="clone 说明"></a>clone 说明</h3><p>下载下来后先运行</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cnpm install</span><br></pre></td></tr></table></figure>

<p>根目录下运行:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">npm run dev</span><br></pre></td></tr></table></figure>

<p>本地查看<br><strong><a href="http://127.0.0.1:3000/" target="_blank" rel="noopener external nofollow noreferrer">http://127.0.0.1:3000/</a></strong></p>
]]></content>
      <tags>
        <tag>React</tag>
        <tag>Antd</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaScript日期格式化</title>
    <url>/2020-3-30-js-ri-qi-ge-shi-hua.html</url>
    <content><![CDATA[<ul>
<li>JavaScript 日期格式化</li>
<li>格式化为：中文形式 年:月:日 小时:分钟:秒</li>
<li>24小时制</li>
<li>Date.toLocaleString(‘zh-CN’, {hour12: false})</li>
</ul>
<a id="more"></a>

<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> nowTime = <span class="keyword">new</span> <span class="built_in">Date</span>(); <span class="comment">// 当前时间</span></span><br><span class="line">nowTime = nowTime.toLocaleString(<span class="string">'zh-CN'</span>, &#123;<span class="attr">hour12</span>: <span class="literal">false</span>&#125;); <span class="comment">// 转换格式</span></span><br><span class="line"><span class="built_in">console</span>.log(nowTime)</span><br><span class="line"><span class="comment">// 2020/3/30 17:23:57</span></span><br></pre></td></tr></table></figure>

<p>正则表达式方式 去掉秒</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">nowTime = nowTime.replace(<span class="regexp">/:\d&#123;2&#125;$/</span>, <span class="string">""</span>)</span><br><span class="line"><span class="built_in">console</span>.log(nowTime)</span><br><span class="line"><span class="comment">// 2020/3/30 17:23</span></span><br></pre></td></tr></table></figure>

<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><p><a href="http://www.zhangbing.club/doc/javascript-tutorial/stdlib/date.html" target="_blank" rel="noopener external nofollow noreferrer">Date 对象</a></p>
<p><a href="http://www.zhangbing.club/doc/javascript-tutorial/stdlib/regexp.html" target="_blank" rel="noopener external nofollow noreferrer">RegExp 对象</a></p>
]]></content>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>1984</title>
    <url>/2020-3-8-1984.html</url>
    <content><![CDATA[<blockquote>
<p>读后感</p>
<p>书屋</p>
</blockquote>
<p>离读完1984已有月余，感概此时书中角色名称我已忘记。脑海中却隐约浮现那几个字句：<strong>老大哥</strong>、<strong>电幕</strong>、<strong>双重思想</strong>、<strong>101号房</strong>、<strong>谁控制了过去，谁就控制了未来，谁控制了现在，谁就控制了过去</strong>…</p>
<a id="more"></a>

<h3 id="末世的预言之书"><a href="#末世的预言之书" class="headerlink" title="末世的预言之书"></a>末世的预言之书</h3><p>此书成于40年代奥威尔之手，感慨作者作为一个<strong>民主社会主义</strong>的拥护者，独裁者斯大林自然容不下他的，惨遭迫害，或许这样，才成就了他写出《<em>1984<em>》 、《</em>动物庄园</em> 》这些奇书吧。</p>
<p><a href="https://zh.wikipedia.org/wiki/%E4%B9%94%E6%B2%BB%C2%B7%E5%A5%A5%E5%A8%81%E5%B0%94" target="_blank" rel="noopener external nofollow noreferrer">奥威尔</a></p>
<blockquote>
<p>奥威尔描绘了一个极权主义达到顶峰的可怕的社会，在这个社会中思想自由是一种死罪，独立自主的个人被消灭干净，每一个人的思想都受到严密的控制，掌握权力的人们以追逐权力为终极目标并对权力顶礼膜拜。(wiki)</p>
</blockquote>
<blockquote>
<p>我并不相信我在书中所描述的社会必定会到来，但是，我相信某些与其相似的事情可能会发生。还相信，极权主义思想已经在每一个地方的知识分子心中扎下了根，我试图从这些极权主义思想出发，通过逻辑推理，引出其发展下去的必然结果。(奥威尔)</p>
</blockquote>
<h3 id="记"><a href="#记" class="headerlink" title="记"></a>记</h3><p>作为<strong><em>反乌托邦</em></strong> 题材的著作，其中描绘出一幅独裁到极致的社会画卷。公民受到<strong>电幕</strong>监控、每天都在因<strong><em>形势</em></strong> 修改历史、人们思想受控制<strong>洗脑</strong>、精神领袖<strong>老大哥</strong>等等。</p>
<p>老大哥每天都看着你，人们不知道老大哥什么时候存在，也不知道祂何时死去，甚至认为祂从人类诞生之时就已经存在了。</p>
<p>主人翁在报社工作，每天按要求使用<strong>新语</strong>修改着以前的报纸。新语删除对“社会不利的词”，使人们忘记它。</p>
<blockquote>
<p>历史可以被修改，因为几十年后，没人见证过历史，他仅仅被记录，被人记录，自然能被人修改的。</p>
</blockquote>
<p>文中经常会出现的“我们到底在跟谁打仗？”</p>
<blockquote>
<p>我们在同欧亚国打仗？不，如果情势有变，我们可以和欧亚国从未打过仗，我们仅仅和东亚国打仗而与欧亚国结盟。</p>
</blockquote>
<p>人们如何相信被修改的历史呢？</p>
<blockquote>
<p>双重思想</p>
</blockquote>
<p>或许<em>新思想覆写旧思想</em> 就是<strong>双重思想</strong>吧</p>
<p>如何消减人们反抗的欲望？</p>
<p>如何麻木身边的痛苦？</p>
<p>在高度压力下，饥寒交迫时，精神领袖的伟大崇拜，再塑造远在天边的敌国。总会有方法来转移注意力的。💥</p>
<p>即使在如此高压下，总有人去追求原始的欲望–爱情，总有人想要挣脱牢笼，去反抗、去寻找、去追逐😡。</p>
<h3 id="思"><a href="#思" class="headerlink" title="思"></a>思</h3><blockquote>
<p>老大哥</p>
</blockquote>
<p>精神领袖，无处不在</p>
<blockquote>
<p>电幕</p>
</blockquote>
<p>作为监控人们的设备，观察人们是否有异常，来怕排除思想出问题的人。</p>
<blockquote>
<p>双重思想</p>
</blockquote>
<p>用于洗脑的“思想”，以此相信被修改的历史。</p>
<blockquote>
<p>101号房</p>
</blockquote>
<p>犯下思想罪的人，不会被马上处死，而是需要被“清洗成思想纯洁的，对老大哥忠诚的人”，然后才能被处死。101号房，用于“罪犯”被“清洗”后的刑房。</p>
<blockquote>
<p>谁控制了过去，谁就控制了未来，谁控制了现在，谁就控制了过去</p>
</blockquote>
<p>然后推出谁控制现在，谁就控制了过去和未来</p>
<h3 id="末"><a href="#末" class="headerlink" title="末"></a>末</h3><p>主人翁最后在监狱里被折磨成“纯洁”的人，磨灭了他全部的自我的思想。</p>
<p>我想，这就是反乌托邦吧。</p>
<p>欧洲人可能会觉得这描写的是纳粹，国人会认为是文革……每个国家有他的记忆与痛。</p>
<p>可是，人们会从历史中学到什么呢？前车之鉴？还是重蹈覆辙？</p>
<p>我不知道，只知道人类需要保持警惕吧。</p>
<blockquote>
<p>上一个1984已经过去，下一个还会远吗？</p>
</blockquote>
]]></content>
      <tags>
        <tag>随笔</tag>
        <tag>树屋</tag>
      </tags>
  </entry>
  <entry>
    <title>jQuery实例1-防止连续触发的导航栏</title>
    <url>/2020-3-9-jquery-shi-li-1.html</url>
    <content><![CDATA[<blockquote>
<p>笔记整理</p>
<p>jQuery实例</p>
<p>下拉导航栏</p>
<p>防止下拉事件连续触发</p>
</blockquote>
<a id="more"></a>

<h3 id="jQuery实例1-防止连续触发的导航栏"><a href="#jQuery实例1-防止连续触发的导航栏" class="headerlink" title="jQuery实例1-防止连续触发的导航栏"></a>jQuery实例1-防止连续触发的导航栏</h3><h3 id="主要方法"><a href="#主要方法" class="headerlink" title="主要方法"></a>主要方法</h3><p>使用鼠标移入移出事件</p>
<ul>
<li>防止事件连续触发</li>
<li>mouseenter()</li>
<li>mouseleave()</li>
</ul>
<p>普通移入移出事件</p>
<ul>
<li>mouseover()</li>
<li>mouseout()</li>
</ul>
<h3 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h3><blockquote>
<p>导航栏；鼠标悬停在 一级标题时，显示二级标题；离开时，隐藏二级标题</p>
</blockquote>
<h3 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h3><p><img src="../images/gif/nav.gif" alt="image"></p>
<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>导航栏 jQuery<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/jquery/1.12.3/jquery.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.container</span>&gt;<span class="selector-tag">ul</span>&#123;</span></span><br><span class="line">            float: left;</span><br><span class="line">        &#125;</span><br><span class="line">        ul &#123;</span><br><span class="line">            margin: 0;</span><br><span class="line">            padding: 0;</span><br><span class="line">        &#125;</span><br><span class="line">        ul li&#123;</span><br><span class="line">            list-style: none; </span><br><span class="line">            background-color: aqua;</span><br><span class="line">            border: 1px solid yellow;</span><br><span class="line">            width: 100px;</span><br><span class="line">            height: 30px;   </span><br><span class="line">            text-align: center;        </span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-tag">ul</span> <span class="selector-tag">li</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line">            cursor: pointer;</span><br><span class="line">        &#125;</span><br><span class="line">        a &#123;</span><br><span class="line">            line-height: 30px;</span><br><span class="line">        &#125;</span><br><span class="line">        li ul &#123;</span><br><span class="line">            display: none;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span>&gt;</span>一级标题<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span>&gt;</span>二级标题<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span>&gt;</span>二级标题<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span>&gt;</span>二级标题<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span>&gt;</span>二级标题<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span>&gt;</span>一级标题<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span>&gt;</span>二级标题<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span>&gt;</span>二级标题<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span>&gt;</span>二级标题<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span>&gt;</span>二级标题<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span>&gt;</span>一级标题<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span>&gt;</span>二级标题<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span>&gt;</span>二级标题<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span>&gt;</span>二级标题<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span>&gt;</span>二级标题<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span>&gt;</span>一级标题<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span>&gt;</span>二级标题<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span>&gt;</span>二级标题<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span>&gt;</span>二级标题<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span>&gt;</span>二级标题<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 需求：导航栏；鼠标悬停在 一级标题时，显示二级标题；离开时，隐藏二级标题</span></span></span><br><span class="line"><span class="javascript">        $(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            $(<span class="string">'.container&gt;ul&gt;li'</span>).mouseenter(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                $(<span class="keyword">this</span>).children(<span class="string">'ul'</span>).show();</span></span><br><span class="line">            &#125;);</span><br><span class="line"><span class="javascript">            $(<span class="string">'.container&gt;ul&gt;li'</span>).mouseleave(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                $(<span class="keyword">this</span>).children(<span class="string">'ul'</span>).hide();</span></span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>jQuery</tag>
      </tags>
  </entry>
  <entry>
    <title>jQuery实例2-手风琴</title>
    <url>/2020-3-9-jquery-shi-li-2.html</url>
    <content><![CDATA[<blockquote>
<p>笔记整理</p>
<p>jQuery实例</p>
<p>手风琴</p>
</blockquote>
<a id="more"></a>
<h3 id="jQuery实例2-手风琴"><a href="#jQuery实例2-手风琴" class="headerlink" title="jQuery实例2-手风琴"></a>jQuery实例2-手风琴</h3><h3 id="主要方法"><a href="#主要方法" class="headerlink" title="主要方法"></a>主要方法</h3><p>显示、隐藏</p>
<ul>
<li><p>show()</p>
</li>
<li><p>hide()</p>
</li>
<li><p>选择器</p>
</li>
<li><p>链式编程</p>
</li>
</ul>
<h3 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h3><blockquote>
<p>// 实现手风琴；点击一级 显示对应div; 其他一级下div都关闭</p>
</blockquote>
<h3 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h3><p><img src="../images/gif/acc.gif" alt="image"></p>
<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>手风琴 jQuery<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/jquery/1.12.3/jquery.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">        ul li&#123;</span><br><span class="line">            list-style: none;    </span><br><span class="line">            width: 200px;       </span><br><span class="line">        &#125;</span><br><span class="line">        ul li span&#123;     </span><br><span class="line">            display: inline-block;</span><br><span class="line">            width: 200px;       </span><br><span class="line"><span class="css">            <span class="selector-tag">border</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#ccc</span>;</span></span><br><span class="line">            background-color: aqua;</span><br><span class="line">            text-align: center;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-tag">ul</span> <span class="selector-tag">li</span> <span class="selector-tag">span</span><span class="selector-pseudo">:hover</span>&#123;</span></span><br><span class="line">            cursor: pointer;</span><br><span class="line">        &#125;</span><br><span class="line">        ul li div &#123;</span><br><span class="line">            height: 50px;</span><br><span class="line">            border: 1px dashed blue;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span>&gt;</span>一级：点击打开<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span>&gt;</span>这是点击后的显示。<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span>&gt;</span>一级：点击打开<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span>&gt;</span>这是点击后的显示。<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span>&gt;</span>一级：点击打开<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span>&gt;</span>这是点击后的显示。<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span>&gt;</span>一级：点击打开<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span>&gt;</span>这是点击后的显示。<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span>&gt;</span>一级：点击打开<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span>&gt;</span>这是点击后的显示。<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 需求：实现手风琴；</span></span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 点击一级 显示对应div; 其他一级下div都关闭</span></span></span><br><span class="line"><span class="javascript">        $(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">            <span class="comment">// 默认关闭</span></span></span><br><span class="line"><span class="javascript">            $(<span class="string">'ul li div'</span>).hide();</span></span><br><span class="line"><span class="actionscript">            <span class="comment">// 点击</span></span></span><br><span class="line"><span class="javascript">            $(<span class="string">'ul li span'</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">                <span class="comment">// 链式编程</span></span></span><br><span class="line"><span class="javascript">                $(<span class="keyword">this</span>).siblings(<span class="string">'div'</span>).show().parent().siblings(<span class="string">'li'</span>).children(<span class="string">'div'</span>).hide();</span></span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>jQuery</tag>
      </tags>
  </entry>
  <entry>
    <title>jQuery实例10-5颗心评分案例</title>
    <url>/2020-3-9-jquery-shi-li-10.html</url>
    <content><![CDATA[<blockquote>
<p>笔记整理</p>
<p>jQuery实例</p>
<p>5颗心评分案例</p>
</blockquote>
<a id="more"></a>

<h3 id="jQuery实例10-5颗心评分案例"><a href="#jQuery实例10-5颗心评分案例" class="headerlink" title="jQuery实例10-5颗心评分案例"></a>jQuery实例10-5颗心评分案例</h3><h3 id="主要方法"><a href="#主要方法" class="headerlink" title="主要方法"></a>主要方法</h3><ul>
<li>.text() // 给元素设置文本</li>
<li>prevAll() // 前面的所有兄弟</li>
<li>nextAll() // 后面的所有兄弟</li>
<li>attr() // 添加属性</li>
<li>removeAttr() // 移除属性</li>
</ul>
<h3 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h3><blockquote>
<p>鼠标移入 移入的心及之前的心变红心，之后的变灰心</p>
<p>鼠标移出，红心变灰心</p>
<p>鼠标单击，此灰心和之前的灰心变红心，之后的变灰心</p>
</blockquote>
<h3 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h3><p><img src="../images/gif/xin.gif" alt="image"></p>
<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>五角星评分 jQuery<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/jquery/1.12.3/jquery.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">        ul &#123;</span><br><span class="line">            margin: 0;</span><br><span class="line">            padding: 0;</span><br><span class="line">        &#125;</span><br><span class="line">        ul li &#123;</span><br><span class="line">            list-style: none;</span><br><span class="line">            float: left;</span><br><span class="line">            margin: 2px 4px;</span><br><span class="line">            width: 45px;</span><br><span class="line">            height: 30px;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-tag">ul</span> <span class="selector-tag">li</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line">            cursor: pointer;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>💜<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>💜<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>💜<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>💜<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>💜<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 需求1：鼠标移入 移入的心及之前的心变红心，之后的变灰心</span></span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 需求2：鼠标移出，红心变灰心</span></span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 需求3：鼠标单击，此灰心和之前的灰心变红心，之后的变灰心</span></span></span><br><span class="line"><span class="javascript">        $(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">var</span> huix = <span class="string">'💜'</span>;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">var</span> hongx = <span class="string">'💖'</span>;</span></span><br><span class="line"><span class="javascript">            $(<span class="string">'li'</span>).on(<span class="string">'mouseenter'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">//鼠标移入</span></span></span><br><span class="line"><span class="actionscript">                <span class="comment">// 之前的变红心</span></span></span><br><span class="line"><span class="javascript">                $(<span class="keyword">this</span>).text(hongx).prevAll().text(hongx);</span></span><br><span class="line"><span class="actionscript">                <span class="comment">// 之后的变灰心</span></span></span><br><span class="line"><span class="javascript">                $(<span class="keyword">this</span>).nextAll().text(huix);</span></span><br><span class="line"><span class="actionscript">            &#125;).on(<span class="string">'mouseleave'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123; <span class="comment">// 鼠标移出</span></span></span><br><span class="line"><span class="actionscript">                <span class="comment">// 都变灰心</span></span></span><br><span class="line"><span class="javascript">                $(<span class="keyword">this</span>).text(huix).prevAll().text(huix);</span></span><br><span class="line"><span class="actionscript">                <span class="comment">// 判断点击的属性</span></span></span><br><span class="line"><span class="javascript">                $(<span class="string">'li[clickCurrent]'</span>).text(hongx).prevAll().text(hongx);</span></span><br><span class="line"><span class="actionscript">            &#125;).on(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123; <span class="comment">// 点击事件</span></span></span><br><span class="line"><span class="actionscript">                <span class="comment">// 记录点击的是哪一个心，可以设置一个独一无二的属性</span></span></span><br><span class="line"><span class="javascript">                $(<span class="keyword">this</span>).attr(<span class="string">'clickCurrent'</span>, <span class="string">'current'</span>).siblings(<span class="string">'li'</span>).removeAttr(<span class="string">'clickCurrent'</span>);</span></span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>jQuery</tag>
      </tags>
  </entry>
  <entry>
    <title>jQuery实例3-商品显示</title>
    <url>/2020-3-9-jquery-shi-li-3.html</url>
    <content><![CDATA[<blockquote>
<p>笔记整理</p>
<p>jQuery实例</p>
<p>商品显示</p>
</blockquote>
<a id="more"></a>

<h3 id="jQuery实例3-商品显示"><a href="#jQuery实例3-商品显示" class="headerlink" title="jQuery实例3-商品显示"></a>jQuery实例3-商品显示</h3><h3 id="主要方法"><a href="#主要方法" class="headerlink" title="主要方法"></a>主要方法</h3><p>显示、隐藏</p>
<ul>
<li>show()</li>
<li>hide()</li>
</ul>
<p>选择器</p>
<ul>
<li>$(‘#center&gt;li:first’) // 选择第一个li</li>
<li>eq(index) // 按索引获取兄弟节点</li>
<li>siblings(‘li’) // 获取所有li兄弟节点</li>
</ul>
<p>索引</p>
<ul>
<li>$().index() // 获取元素在兄弟中的索引</li>
</ul>
<h3 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h3><blockquote>
<p>鼠标悬停在商品上时，中间对应显示图片 </p>
</blockquote>
<h3 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h3><p><img src="../images/gif/goodsShow.gif" alt="image"></p>
<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width,initial-scale=1"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>商品显示 jQuery<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/jquery/1.12.3/jquery.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.container</span>&#123;</span></span><br><span class="line">            width: 500px;</span><br><span class="line">            height: 500px;</span><br><span class="line">            margin: 50px auto;</span><br><span class="line">        &#125;</span><br><span class="line">        ul &#123;</span><br><span class="line">            float: left;</span><br><span class="line">            margin: 0;</span><br><span class="line">            padding: 0;</span><br><span class="line">        &#125;</span><br><span class="line">        ul li &#123;</span><br><span class="line">            list-style: none;</span><br><span class="line">        &#125;        </span><br><span class="line"><span class="css">        <span class="selector-id">#left</span> <span class="selector-tag">li</span>, <span class="selector-id">#right</span> <span class="selector-tag">li</span> &#123;</span></span><br><span class="line">            width: 55px;</span><br><span class="line"><span class="css">            <span class="selector-tag">border</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#ccc</span>;</span></span><br><span class="line">            text-align: center;</span><br><span class="line">            background-color: aqua;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-id">#left</span> <span class="selector-tag">li</span><span class="selector-pseudo">:hover</span>, <span class="selector-id">#right</span> <span class="selector-tag">li</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">background-color</span>: <span class="selector-id">#ccc</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line">        a &#123;</span><br><span class="line">            text-decoration: none;</span><br><span class="line">            color: black;</span><br><span class="line">        &#125;</span><br><span class="line">        img &#123;</span><br><span class="line">            width: 300px;</span><br><span class="line">            height: 400px;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"left"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>商品1<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>商品2<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>商品3<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"center"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"../images/1.jpg"</span> /&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"../images/2.png"</span> /&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"../images/3.jpg"</span> /&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"../images/4.jpg"</span> /&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"../images/5.png"</span> /&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"../images/6.png"</span> /&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"right"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>商品4<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>商品5<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>商品6<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 需求：鼠标悬停在商品上时，中间对应显示图片        </span></span></span><br><span class="line"><span class="javascript">        $(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">            <span class="comment">// 默认显示第一张图片</span></span></span><br><span class="line"><span class="javascript">            $(<span class="string">'#center&gt;li:first'</span>).show().siblings(<span class="string">'li'</span>).hide();</span></span><br><span class="line"><span class="actionscript">            <span class="comment">// 鼠标悬停时，显示对应图片</span></span></span><br><span class="line"><span class="javascript">            $(<span class="string">'#left li'</span>).mouseenter(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> idx = $(<span class="keyword">this</span>).index();</span></span><br><span class="line"><span class="javascript">                $(<span class="string">'#center&gt;li'</span>).eq(idx).show().siblings(<span class="string">'li'</span>).hide();</span></span><br><span class="line">            &#125;);</span><br><span class="line"><span class="javascript">            $(<span class="string">'#right li'</span>).mouseenter(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> idx = $(<span class="keyword">this</span>).index() + <span class="number">3</span>;</span></span><br><span class="line"><span class="javascript">                $(<span class="string">'#center&gt;li'</span>).eq(idx).show().siblings(<span class="string">'li'</span>).hide();</span></span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>jQuery</tag>
      </tags>
  </entry>
  <entry>
    <title>jQuery实例11-自定义tabs插件 实现tab切换</title>
    <url>/2020-3-9-jquery-shi-li-11.html</url>
    <content><![CDATA[<blockquote>
<p>笔记整理</p>
<p>jQuery实例</p>
<p>自定义tabs插件 实现tab切换</p>
</blockquote>
<a id="more"></a>

<h3 id="jQuery实例11-自定义tabs插件-实现tab切换"><a href="#jQuery实例11-自定义tabs插件-实现tab切换" class="headerlink" title="jQuery实例11-自定义tabs插件 实现tab切换"></a>jQuery实例11-自定义tabs插件 实现tab切换</h3><h3 id="主要方法"><a href="#主要方法" class="headerlink" title="主要方法"></a>主要方法</h3><blockquote>
<p>自定义jQuery插件</p>
</blockquote>
<h3 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h3><ul>
<li>tab栏的切换</li>
</ul>
<h3 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h3><p><img src="../images/gif/sd_tabs.gif" alt="image"></p>
<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><h4 id="jquery-tabs-js-自定义tabs插件"><a href="#jquery-tabs-js-自定义tabs插件" class="headerlink" title="jquery-tabs.js 自定义tabs插件"></a>jquery-tabs.js 自定义tabs插件</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params">$</span>) </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 添加原型方法 tabs</span></span><br><span class="line"><span class="comment">     * options.tabsId tab栏的标签选择器</span></span><br><span class="line"><span class="comment">     * options.tabClass tab栏点击后的类</span></span><br><span class="line"><span class="comment">     * options.tabBody tab主体页的标签选择器</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    $.fn.tabs = <span class="function"><span class="keyword">function</span>(<span class="params">options</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 保存 大盒子元素对象</span></span><br><span class="line">        <span class="keyword">var</span> $bigBox = <span class="keyword">this</span>;</span><br><span class="line">        <span class="comment">// 点击tab栏</span></span><br><span class="line">        $(options.tabsId).find(<span class="string">'li'</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            $(<span class="keyword">this</span>).addClass(options.tabClass).siblings(<span class="string">'li'</span>).removeClass(options.tabClass);</span><br><span class="line">            <span class="comment">// 记录点击元素索引</span></span><br><span class="line">            <span class="keyword">var</span> idx = $(<span class="keyword">this</span>).index();</span><br><span class="line">            <span class="comment">// 显示tab主体</span></span><br><span class="line">            $(options.tabBody).find(<span class="string">'div'</span>).eq(idx).fadeIn(<span class="number">500</span>).siblings(<span class="string">'div'</span>).hide();</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;(<span class="built_in">window</span>.jQuery));</span><br></pre></td></tr></table></figure>

<h4 id="html文件"><a href="#html文件" class="headerlink" title="html文件"></a>html文件</h4><p>引用</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;script src=<span class="string">"../plugin/jquery-tabs.js"</span>&gt;&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>

<p>调用</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; 调用 tabs方法</span><br><span class="line">$(&#39;#container&#39;).tabs(&#123;</span><br><span class="line">    tabsId: &#39;#tabs&#39;,</span><br><span class="line">    tabClass: &#39;active&#39;,</span><br><span class="line">    tabBody: &#39;#items&#39;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>


<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>自定义tabs 插件实现tab jQuery<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/jquery/1.12.3/jquery.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../plugin/jquery-tabs.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.container</span> &#123;</span></span><br><span class="line">            width: 750px;</span><br><span class="line">            height: 350px;</span><br><span class="line">            border: 2px solid yellow;</span><br><span class="line">            margin: 100px auto;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-id">#tabs</span> &#123;</span></span><br><span class="line">            margin-top: 5px;</span><br><span class="line">        &#125;</span><br><span class="line">        ul &#123;</span><br><span class="line">            margin: 0;</span><br><span class="line">            padding: 0;</span><br><span class="line">        &#125;</span><br><span class="line">        ul li &#123;</span><br><span class="line">            list-style: none;</span><br><span class="line">            float: left;</span><br><span class="line"><span class="css">            <span class="selector-tag">border</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#aaa</span>;</span></span><br><span class="line">            padding: 5px 10px;</span><br><span class="line"><span class="css">            <span class="selector-tag">background-color</span>: <span class="selector-id">#8DEEEE</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-tag">ul</span> <span class="selector-tag">li</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line">            cursor: pointer;</span><br><span class="line">        &#125;       </span><br><span class="line"><span class="css">        <span class="selector-id">#items</span> &#123;</span></span><br><span class="line">            width: 700px;</span><br><span class="line">            height: 300px;</span><br><span class="line">            border: 1px solid gray;</span><br><span class="line">            float: left;</span><br><span class="line">            margin-top: 5px;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-id">#items</span> <span class="selector-tag">img</span> &#123;</span></span><br><span class="line">            width: 700px;</span><br><span class="line">            height: 300px; </span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.noDisplay</span> &#123;</span></span><br><span class="line">            display: none;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="comment">/* 点击tab后 tab上出现红杠 */</span></span></span><br><span class="line"><span class="css">        <span class="selector-class">.active</span> &#123;</span></span><br><span class="line">            border-top: 3px solid red;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span> <span class="attr">id</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"tabs"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"active"</span>&gt;</span>发现好货<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span>品牌闪购<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span>每日特价<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span>精选<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"items"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"../images/tabs/发现好货.png"</span> <span class="attr">alt</span>=<span class="string">"发现好货"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"noDisplay"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"../images/tabs/品牌闪购.png"</span> <span class="attr">alt</span>=<span class="string">"品牌闪购"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"noDisplay"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"../images/tabs/每日特价.png"</span> <span class="attr">alt</span>=<span class="string">"每日特价"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"noDisplay"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"../images/tabs/精选.png"</span> <span class="attr">alt</span>=<span class="string">"精选"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">        $(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">            <span class="comment">// 调用 tabs方法</span></span></span><br><span class="line"><span class="javascript">            $(<span class="string">'#container'</span>).tabs(&#123;</span></span><br><span class="line"><span class="actionscript">                tabsId: <span class="string">'#tabs'</span>,</span></span><br><span class="line"><span class="actionscript">                tabClass: <span class="string">'active'</span>,</span></span><br><span class="line"><span class="actionscript">                tabBody: <span class="string">'#items'</span></span></span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>jQuery</tag>
      </tags>
  </entry>
  <entry>
    <title>jQuery实例4-tab栏切换</title>
    <url>/2020-3-9-jquery-shi-li-4.html</url>
    <content><![CDATA[<blockquote>
<p>笔记整理</p>
<p>jQuery实例</p>
<p>tab栏切换</p>
</blockquote>
<a id="more"></a>

<h3 id="jQuery实例4-tab栏切换"><a href="#jQuery实例4-tab栏切换" class="headerlink" title="jQuery实例4-tab栏切换"></a>jQuery实例4-tab栏切换</h3><h3 id="主要方法"><a href="#主要方法" class="headerlink" title="主要方法"></a>主要方法</h3><p>类</p>
<ul>
<li>.addClass() //添加类</li>
<li>.removeClass(‘active’) // 移除 active 类</li>
</ul>
<p>选择器</p>
<ul>
<li>.children(‘div’) // 节点div孩子</li>
<li>$(‘.tabContainer li:first’) // 第一个li</li>
<li>.eq() // 根据索引获取此节点</li>
</ul>
<p>索引</p>
<ul>
<li>$(this).index() </li>
</ul>
<h3 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h3><blockquote>
<p>实现tab栏切换不同的显示；鼠标悬停时显示</p>
</blockquote>
<h3 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h3><p><img src="../images/gif/tabS.gif" alt="image"></p>
<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>tab栏切换 jQuery<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/jquery/1.12.3/jquery.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">        ul &#123;</span><br><span class="line">            margin: 0;</span><br><span class="line">            padding: 0;</span><br><span class="line">        &#125;</span><br><span class="line">        ul li &#123;</span><br><span class="line">            list-style: none;</span><br><span class="line">            float: left;</span><br><span class="line">            width: 100px;</span><br><span class="line">            height: 30px;</span><br><span class="line"><span class="css">            <span class="selector-tag">background-color</span>: <span class="selector-id">#ccc</span>;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">border</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#ddd</span>;</span></span><br><span class="line">            line-height: 30px;</span><br><span class="line">            text-align: center;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-tag">ul</span> <span class="selector-tag">li</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line">            cursor: pointer;</span><br><span class="line">        &#125;</span><br><span class="line">        img &#123;</span><br><span class="line">            width: 200px;</span><br><span class="line">            height: 300px;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.tabContainer</span> &#123;</span></span><br><span class="line">            width: 500px;</span><br><span class="line">            height: 30px;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.items</span>&#123;</span></span><br><span class="line">            width: 800px;</span><br><span class="line">            height: 340px;</span><br><span class="line">            border: 1px solid gray;</span><br><span class="line">            margin-top: 4px;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.active</span> &#123;</span></span><br><span class="line">            border-top: 2px solid red;            </span><br><span class="line">            background-color: pink;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"tabContainer"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>图组1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>图组2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>图组3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>图组4<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span>        </span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"items"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"../images/1.jpg"</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"../images/2.png"</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"../images/3.jpg"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"../images/1F13G503-23.jpg"</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"../images/1F13I149-33.jpg"</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"../images/1e10aaff94728cad.jpg"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"../images/1F13KG7-5.jpg"</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"../images/1F13I149-33.jpg"</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"../images/1e10aaff94728cad.jpg"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"../images/1e10aaff94728cad.jpg"</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"../images/1F13ID3-10.jpg"</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"../images/1F13ID3-10.jpg"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">            <span class="comment">// 需求：实现tab栏切换 不同的显示</span></span></span><br><span class="line"><span class="javascript">            $(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">                <span class="comment">// 默认只显示第一个</span></span></span><br><span class="line"><span class="javascript">                $(<span class="string">'.items'</span>).children(<span class="string">'div'</span>).hide();</span></span><br><span class="line"><span class="javascript">                $(<span class="string">'.items&gt;div:first'</span>).show();</span></span><br><span class="line"><span class="javascript">                $(<span class="string">'.tabContainer li:first'</span>).addClass(<span class="string">'active'</span>);</span></span><br><span class="line"><span class="actionscript">                <span class="comment">// 鼠标移动切换</span></span></span><br><span class="line"><span class="javascript">                $(<span class="string">'ul&gt;li'</span>).mouseenter(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                    $(<span class="keyword">this</span>).addClass(<span class="string">'active'</span>).siblings(<span class="string">'li'</span>).removeClass(<span class="string">'active'</span>);</span></span><br><span class="line"><span class="actionscript">                    <span class="comment">// 获取索引</span></span></span><br><span class="line"><span class="javascript">                    <span class="keyword">var</span> idx = $(<span class="keyword">this</span>).index();</span></span><br><span class="line"><span class="actionscript">                    <span class="comment">// 显示对应 item</span></span></span><br><span class="line"><span class="javascript">                    $(<span class="string">'.items&gt;div'</span>).eq(idx).show().siblings(<span class="string">'div'</span>).hide();</span></span><br><span class="line">                &#125;);</span><br><span class="line"></span><br><span class="line">            &#125;);</span><br><span class="line">        <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>jQuery</tag>
      </tags>
  </entry>
  <entry>
    <title>jQuery实例6-动态添加和删除表格元素</title>
    <url>/2020-3-9-jquery-shi-li-6.html</url>
    <content><![CDATA[<blockquote>
<p>笔记整理</p>
<p>jQuery实例</p>
<p>动态添加和删除表格元素</p>
</blockquote>
<a id="more"></a>

<h3 id="jQuery实例6-动态添加和删除表格元素"><a href="#jQuery实例6-动态添加和删除表格元素" class="headerlink" title="jQuery实例6-动态添加和删除表格元素"></a>jQuery实例6-动态添加和删除表格元素</h3><h3 id="主要方法"><a href="#主要方法" class="headerlink" title="主要方法"></a>主要方法</h3><ul>
<li>show()</li>
<li>hide()</li>
<li>click()</li>
</ul>
<p>节点操作</p>
<ul>
<li>append()</li>
<li>remove()</li>
</ul>
<h3 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h3><blockquote>
<p>点击删除按钮 删除此条数据</p>
<p>点击添加数据,显示遮罩层,显示添加数据的框</p>
<p>点击添加数据框的 X 后关闭,关闭遮罩层,关闭数据框</p>
<p>数据框添加数据</p>
</blockquote>
<h3 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h3><p><img src="../images/gif/dynamicTable.gif" alt="image"></p>
<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>动态添加和删除表格元素 jQuery<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/jquery/1.12.3/jquery.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">        * &#123;</span><br><span class="line">            margin: 0;</span><br><span class="line">            padding: 0;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.box</span> &#123;</span></span><br><span class="line">            position: relative;</span><br><span class="line">            width: 100%;</span><br><span class="line">            height: 100%;</span><br><span class="line"><span class="css">            <span class="selector-tag">border</span>: 2<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#ccc</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.container</span> &#123;</span></span><br><span class="line">            width: 300px;</span><br><span class="line">            margin: 200px auto;</span><br><span class="line">            border: 1px solid red;</span><br><span class="line">            text-align: center;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.zzc</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="comment">/* 遮罩层 */</span></span></span><br><span class="line">            position: absolute;</span><br><span class="line">            width: 100%;</span><br><span class="line">            height: 100%;</span><br><span class="line"><span class="css">            <span class="selector-tag">background-color</span>: <span class="selector-id">#bbb</span>;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">opacity</span>: 0<span class="selector-class">.5</span>;</span></span><br><span class="line">            z-index: 1;</span><br><span class="line">            display: none;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#btn1</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">background-color</span>: <span class="selector-id">#8DEEEE</span>;</span></span><br><span class="line">            padding: 0 10px;</span><br><span class="line">            font-size: 20px;</span><br><span class="line"><span class="css">            <span class="selector-tag">border</span>: 2<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#ccc</span>;</span></span><br><span class="line">            margin: 10px 0;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.container</span> <span class="selector-tag">table</span> &#123;</span></span><br><span class="line">            border-collapse: collapse;</span><br><span class="line">            margin: auto;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.container</span> <span class="selector-tag">thead</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">background-color</span>: <span class="selector-id">#8DEEEE</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.container</span> <span class="selector-tag">tbody</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">background-color</span>: <span class="selector-id">#aaa</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.container</span> <span class="selector-tag">td</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">border</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#ddd</span>;</span></span><br><span class="line">            text-align: center;</span><br><span class="line">            padding: 5px 15px;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.addData</span> &#123;</span></span><br><span class="line">            position: absolute;</span><br><span class="line">            border: 1px solid blue;</span><br><span class="line">            width: 300px;</span><br><span class="line">            height: 120px;</span><br><span class="line">            text-align: center;</span><br><span class="line">            </span><br><span class="line"><span class="css">            <span class="selector-tag">background-color</span>: <span class="selector-id">#aaa</span>;</span></span><br><span class="line">            z-index: 2;</span><br><span class="line">            margin-left: 50%;</span><br><span class="line">            top: 50%;</span><br><span class="line">            left: -150px;</span><br><span class="line">            display: none;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.addData</span> <span class="selector-tag">table</span> &#123;</span></span><br><span class="line">            margin: auto;</span><br><span class="line">            border-collapse: collapse;</span><br><span class="line">            margin-top: 10px;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.addData</span> <span class="selector-tag">table</span> <span class="selector-tag">td</span> &#123;</span></span><br><span class="line">            padding: 4px 5px;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.addData</span> <span class="selector-tag">table</span> <span class="selector-tag">td</span> <span class="selector-tag">input</span> &#123;</span></span><br><span class="line">            padding: 2px 5px;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#submit</span> &#123;</span></span><br><span class="line">            margin: 5px 0;</span><br><span class="line">            padding: 5px 10px;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.addData</span> <span class="selector-tag">tr</span> <span class="selector-tag">td</span><span class="selector-pseudo">:first-child</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">background-color</span>: <span class="selector-id">#8dEEEE</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.addData</span> <span class="selector-tag">span</span> &#123;</span></span><br><span class="line">            float: right;</span><br><span class="line">            margin-right: 5px;</span><br><span class="line">            font-weight: bold;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        a &#123;</span><br><span class="line">            text-decoration: none;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 遮罩层 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"zzc"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"btn1"</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"添加数据"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">td</span>&gt;</span>课程名称<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">td</span>&gt;</span>学时<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">td</span>&gt;</span>操作<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">td</span>&gt;</span>数学<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">td</span>&gt;</span>10<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>DELETE<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">td</span>&gt;</span>大物<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">td</span>&gt;</span>15<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>DELETE<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">td</span>&gt;</span>英语<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">td</span>&gt;</span>20<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>DELETE<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 添加数据框 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"addData"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>X<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>课程名称：<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"nameInp"</span> <span class="attr">type</span>=<span class="string">"text"</span> /&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>学时：<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"timeInp"</span> <span class="attr">type</span>=<span class="string">"text"</span> /&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"submit"</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"添加数据"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">        $(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">            <span class="comment">// 需求1：点击删除按钮 删除此条数据</span></span></span><br><span class="line"><span class="javascript">            $(<span class="string">'.container td a'</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                $(<span class="keyword">this</span>).parent().parent().remove();</span></span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line"><span class="actionscript">            <span class="comment">// 需求2：点击添加数据</span></span></span><br><span class="line"><span class="javascript">            $(<span class="string">'#btn1'</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">                <span class="comment">// 显示遮罩层</span></span></span><br><span class="line"><span class="javascript">                $(<span class="string">'.zzc'</span>).show();</span></span><br><span class="line"><span class="actionscript">                <span class="comment">// 显示添加数据的框</span></span></span><br><span class="line"><span class="javascript">                $(<span class="string">'.addData'</span>).show();</span></span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line"><span class="actionscript">            <span class="comment">// 需求3：点击添加数据框的 X 后关闭</span></span></span><br><span class="line"><span class="javascript">            $(<span class="string">'.addData a'</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">                <span class="comment">// 关闭遮罩层</span></span></span><br><span class="line"><span class="javascript">                $(<span class="string">'.zzc'</span>).hide();</span></span><br><span class="line"><span class="actionscript">                <span class="comment">// 关闭数据框</span></span></span><br><span class="line"><span class="javascript">                $(<span class="string">'.addData'</span>).hide();</span></span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line"><span class="actionscript">            <span class="comment">// 数据框添加数据</span></span></span><br><span class="line"><span class="javascript">            $(<span class="string">'#submit'</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">                <span class="comment">// 获取值</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> $name = $(<span class="string">'#nameInp'</span>).val();</span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> $time = $(<span class="string">'#timeInp'</span>).val();</span></span><br><span class="line"><span class="actionscript">                <span class="comment">// 构造 tr</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> $tr = $(<span class="string">'&lt;tr&gt;&lt;td&gt;'</span> + $name + <span class="string">'&lt;/td&gt;&lt;td&gt;'</span> + $time +</span></span><br><span class="line"><span class="handlebars"><span class="xml">                    '<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>DELETE<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span>');</span></span></span><br><span class="line"><span class="actionscript">                <span class="comment">// tr的DELETE 按钮事件</span></span></span><br><span class="line"><span class="actionscript">                $tr.find(<span class="string">'a'</span>).click(<span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">                    $(<span class="keyword">this</span>).parent().parent().remove();</span></span><br><span class="line">                &#125;);</span><br><span class="line"><span class="actionscript">                <span class="comment">// 添加</span></span></span><br><span class="line"><span class="javascript">                $(<span class="string">'.container tbody'</span>).append($tr);</span></span><br><span class="line"><span class="actionscript">                <span class="comment">// 关闭 遮罩层 和 数据框</span></span></span><br><span class="line"><span class="javascript">                $(<span class="string">'.addData a'</span>).click();</span></span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>jQuery</tag>
      </tags>
  </entry>
  <entry>
    <title>jQuery实例7-城市选择案例</title>
    <url>/2020-3-9-jquery-shi-li-7.html</url>
    <content><![CDATA[<blockquote>
<p>笔记整理</p>
<p>jQuery实例</p>
<p>城市选择案例</p>
</blockquote>
<a id="more"></a>

<h3 id="jQuery实例7-城市选择案例"><a href="#jQuery实例7-城市选择案例" class="headerlink" title="jQuery实例7-城市选择案例"></a>jQuery实例7-城市选择案例</h3><h3 id="主要方法"><a href="#主要方法" class="headerlink" title="主要方法"></a>主要方法</h3><ul>
<li>appendTo()</li>
<li>select标签的multiple属性，占多行</li>
<li><strong>$(‘#city2&gt;option:selected’)</strong> 选择器</li>
</ul>
<h3 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h3><blockquote>
<p>把城市全部移动到右边</p>
<p>把城市全部移动到左边</p>
<p>把选中的城市移动到右边</p>
<p>把选中的城市移动到左边</p>
</blockquote>
<h3 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h3><p><img src="../images/gif/city_sele.gif" alt="image"></p>
<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>城市选择案例<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/jquery/1.12.3/jquery.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">        select &#123;</span><br><span class="line">            height: 100px;</span><br><span class="line">            width: 100px;</span><br><span class="line"><span class="css">            <span class="selector-tag">background-color</span>: <span class="selector-id">#ccc</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.sBox</span> &#123;</span></span><br><span class="line">            display: inline-block;</span><br><span class="line">            height: 100px;</span><br><span class="line">            width: 50px;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>城市选择<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"city1"</span> <span class="attr">multiple</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"1"</span>&gt;</span>北京<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"2"</span>&gt;</span>深圳<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"3"</span>&gt;</span>上海<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"4"</span>&gt;</span>广州<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"sBox"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"allToR"</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"&gt;&gt;&gt;"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"allToL"</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"&lt;&lt;&lt;"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"sToR"</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"&gt;"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"sToL"</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"&lt;"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"city2"</span> <span class="attr">multiple</span>&gt;</span><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">        $(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">            <span class="comment">// 把城市全部移动到右边</span></span></span><br><span class="line"><span class="javascript">            $(<span class="string">'#allToR'</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                $(<span class="string">'#city1&gt;option'</span>).appendTo($(<span class="string">'#city2'</span>));</span></span><br><span class="line">            &#125;);</span><br><span class="line"><span class="actionscript">            <span class="comment">// 把城市全部移动到左边</span></span></span><br><span class="line"><span class="javascript">            $(<span class="string">'#allToL'</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                $(<span class="string">'#city2&gt;option'</span>).appendTo($(<span class="string">'#city1'</span>));</span></span><br><span class="line">            &#125;);</span><br><span class="line"><span class="actionscript">            <span class="comment">// 把选中的城市移动到右边</span></span></span><br><span class="line"><span class="javascript">            $(<span class="string">'#sToR'</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                $(<span class="string">'#city1&gt;option:selected'</span>).appendTo($(<span class="string">'#city2'</span>));</span></span><br><span class="line">            &#125;);</span><br><span class="line"><span class="actionscript">            <span class="comment">// 把选中的城市移动到左边</span></span></span><br><span class="line"><span class="javascript">            $(<span class="string">'#sToL'</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                $(<span class="string">'#city2&gt;option:selected'</span>).appendTo($(<span class="string">'#city1'</span>));</span></span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>jQuery</tag>
      </tags>
  </entry>
  <entry>
    <title>jQuery实例9-固定导航栏</title>
    <url>/2020-3-9-jquery-shi-li-9.html</url>
    <content><![CDATA[<blockquote>
<p>笔记整理</p>
<p>jQuery实例</p>
<p>固定导航栏</p>
</blockquote>
<a id="more"></a>

<h3 id="jQuery实例9-固定导航栏"><a href="#jQuery实例9-固定导航栏" class="headerlink" title="jQuery实例9-固定导航栏"></a>jQuery实例9-固定导航栏</h3><h3 id="主要方法"><a href="#主要方法" class="headerlink" title="主要方法"></a>主要方法</h3><ul>
<li>css()</li>
<li>height() // 获取元素高度</li>
<li>$(window).scrollTop() //获取滚轮卷曲高度</li>
<li>$(window).scroll() //监听滚轮事件</li>
<li>注意 fixed 的<strong>脱离标准流</strong>特点;需要防止main主体突然冒出</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 固定导航栏</span></span><br><span class="line">$(<span class="string">'#nav'</span>).css(&#123;</span><br><span class="line">    position: <span class="string">'fixed'</span>,</span><br><span class="line">    top: <span class="number">0</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 还原导航栏</span></span><br><span class="line">$(<span class="string">'#nav'</span>).css(&#123;</span><br><span class="line">    position: <span class="string">'static'</span>,</span><br><span class="line">    top: <span class="number">0</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h3><blockquote>
<p>固定导航栏</p>
<p>还原导航栏</p>
<p>由于 fixed 定位脱离标准流；需要防止main主体突然冒出</p>
</blockquote>
<h3 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h3><p><img src="../images/gif/fixedNav.gif" alt="image"></p>
<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>固定导航栏 jQuery<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/jquery/1.12.3/jquery.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">        body &#123;</span><br><span class="line">            margin: 0;</span><br><span class="line">            padding: 0;</span><br><span class="line">            width: 100%;</span><br><span class="line">            height: 100%;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-id">#main</span> &#123;</span></span><br><span class="line">            border: 2px solid red;</span><br><span class="line">            margin: 50px 0;</span><br><span class="line">        &#125;</span><br><span class="line">        img &#123;</span><br><span class="line">            width: 100%;</span><br><span class="line">            height: 100%;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"top"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"../images/2/20200307180120.png"</span> <span class="attr">alt</span>=<span class="string">"top"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"nav"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"../images/2/20200307175929.png"</span> <span class="attr">alt</span>=<span class="string">"nav"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"main"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"../images/2/20200307180010.png"</span> <span class="attr">alt</span>=<span class="string">"main1"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"../images/2/20200307180044.png"</span> <span class="attr">alt</span>=<span class="string">"main2"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 固定导航栏</span></span></span><br><span class="line"><span class="javascript">        $(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">            <span class="comment">// 获取 top 栏的高度</span></span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> $top = $(<span class="string">'#top'</span>).height(); </span></span><br><span class="line"><span class="actionscript">            <span class="comment">// 获取nav导航栏的高度</span></span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> $navHeight = $(<span class="string">'#nav'</span>).height();         </span></span><br><span class="line"><span class="actionscript">            <span class="comment">// 监听滚轮事件</span></span></span><br><span class="line"><span class="javascript">            $(<span class="built_in">window</span>).scroll(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">                <span class="comment">// 获取滚轮卷曲高度</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> $scrTop = $(<span class="built_in">window</span>).scrollTop();</span></span><br><span class="line">                if($scrTop &gt; $top) &#123; </span><br><span class="line"><span class="actionscript">                    <span class="comment">// 固定导航栏</span></span></span><br><span class="line"><span class="javascript">                    $(<span class="string">'#nav'</span>).css(&#123;</span></span><br><span class="line"><span class="actionscript">                        position: <span class="string">'fixed'</span>,</span></span><br><span class="line">                        top: 0</span><br><span class="line">                    &#125;);</span><br><span class="line"><span class="actionscript">                    <span class="comment">// 由于 fixed 定位脱离标准流；需要防止main主体突然冒出</span></span></span><br><span class="line"><span class="javascript">                    $(<span class="string">'#main'</span>).css(&#123;</span></span><br><span class="line">                        marginTop: $navHeight+50</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;</span><br><span class="line"><span class="actionscript">                <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="actionscript">                    <span class="comment">// 还原导航栏</span></span></span><br><span class="line"><span class="javascript">                    $(<span class="string">'#nav'</span>).css(&#123;</span></span><br><span class="line"><span class="actionscript">                        position: <span class="string">'static'</span>,</span></span><br><span class="line">                        top: 0</span><br><span class="line">                    &#125;);</span><br><span class="line"><span class="actionscript">                    <span class="comment">// 还原 main主体 marginTop</span></span></span><br><span class="line"><span class="javascript">                    $(<span class="string">'#main'</span>).css(&#123;</span></span><br><span class="line">                        marginTop: 50</span><br><span class="line">                    &#125;)</span><br><span class="line">                    </span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>jQuery</tag>
      </tags>
  </entry>
  <entry>
    <title>jQuery实例8-表格全选和反选</title>
    <url>/2020-3-9-jquery-shi-li-8.html</url>
    <content><![CDATA[<blockquote>
<p>笔记整理</p>
<p>jQuery实例</p>
<p>表格全选和反选</p>
</blockquote>
<a id="more"></a>

<h3 id="jQuery实例8-表格全选和反选"><a href="#jQuery实例8-表格全选和反选" class="headerlink" title="jQuery实例8-表格全选和反选"></a>jQuery实例8-表格全选和反选</h3><h3 id="主要方法"><a href="#主要方法" class="headerlink" title="主要方法"></a>主要方法</h3><ul>
<li>checkbox</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>prop(‘checked’, true) // 布尔属性使用 prop()设置和获取</li>
<li>$(‘tbody input:checked’).length</li>
</ul>
<h3 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h3><blockquote>
<p>表格中有一个没选中 全选就不选中 ；表格中全被选中时，全选就选中</p>
</blockquote>
<h3 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h3><p><img src="../images/gif/allSele.gif" alt="image"></p>
<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>表格的全选反选 jQuery<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/jquery/1.12.3/jquery.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">        table &#123;</span><br><span class="line"><span class="css">            <span class="selector-tag">border-collapse</span><span class="selector-pseudo">:collapse</span>;</span></span><br><span class="line">            margin: auto;</span><br><span class="line">        &#125;</span><br><span class="line">        td &#123;</span><br><span class="line"><span class="css">            <span class="selector-tag">border</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#aaa</span>;</span></span><br><span class="line">            padding: 5px 10px;</span><br><span class="line">            text-align: center;</span><br><span class="line">        &#125;</span><br><span class="line">        thead &#123;</span><br><span class="line"><span class="css">            <span class="selector-tag">background-color</span>: <span class="selector-id">#8DEEEE</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"allSlt"</span> <span class="attr">type</span>=<span class="string">"checkbox"</span>/&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>课程名<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>任课老师<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span>/&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>地理学<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>张老师<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span>/&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>计算机原理<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>何老师<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span>/&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>前端课程<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>黎老师<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span>/&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>环境学<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>莫老师<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">        $(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">            <span class="comment">// 全选和全反选</span></span></span><br><span class="line"><span class="javascript">            $(<span class="string">'#allSlt'</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> $allSlt = $(<span class="keyword">this</span>).prop(<span class="string">'checked'</span>);</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">if</span>($allSlt) &#123; <span class="comment">// 选中后 表格中全选</span></span></span><br><span class="line"><span class="javascript">                    $(<span class="string">'tbody input'</span>).prop(<span class="string">'checked'</span>, <span class="literal">true</span>);</span></span><br><span class="line">                &#125;</span><br><span class="line"><span class="actionscript">                <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">                    $(<span class="string">'tbody input'</span>).prop(<span class="string">'checked'</span>, <span class="literal">false</span>);</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line"><span class="actionscript">            <span class="comment">// 表格中有一个没选中 全选就不选中 ；表格中全被选中时，全选就选中</span></span></span><br><span class="line"><span class="javascript">            $(<span class="string">'tbody input'</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">                <span class="comment">// 获取 单选框个数</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> $numOfSelect = $(<span class="string">'tbody input'</span>).length;</span></span><br><span class="line"><span class="actionscript">                <span class="comment">// 获取 单选框 被 选中的 个数</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> $numOfSelected = $(<span class="string">'tbody input:checked'</span>).length;</span></span><br><span class="line"><span class="actionscript">                <span class="comment">// 判断是否全选 再操作</span></span></span><br><span class="line"><span class="actionscript">                <span class="keyword">if</span>($numOfSelect == $numOfSelected) &#123; <span class="comment">// 全选</span></span></span><br><span class="line"><span class="javascript">                    $(<span class="string">'#allSlt'</span>).prop(<span class="string">'checked'</span>, <span class="literal">true</span>);</span></span><br><span class="line">                &#125;</span><br><span class="line"><span class="actionscript">                <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">                    $(<span class="string">'#allSlt'</span>).prop(<span class="string">'checked'</span>, <span class="literal">false</span>);</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>jQuery</tag>
      </tags>
  </entry>
  <entry>
    <title>jQuery实例5-仿360关机动画</title>
    <url>/2020-3-9-jquery-shi-li-5.html</url>
    <content><![CDATA[<blockquote>
<p>笔记整理</p>
<p>jQuery实例</p>
<p>仿360关机动画</p>
</blockquote>
<a id="more"></a>

<h3 id="jQuery实例5-仿360关机动画"><a href="#jQuery实例5-仿360关机动画" class="headerlink" title="jQuery实例5-仿360关机动画"></a>jQuery实例5-仿360关机动画</h3><h3 id="主要方法"><a href="#主要方法" class="headerlink" title="主要方法"></a>主要方法</h3><ul>
<li>animate()</li>
<li><ul>
<li>参数1：必选，对象，需要做的动画属性</li>
</ul>
</li>
<li><ul>
<li>参数2：可选，动画执行时间</li>
</ul>
</li>
<li><ul>
<li>参数3：可选，匀速：linear；缓动：swing；默认缓动</li>
</ul>
</li>
<li><ul>
<li>参数4：可选，回调函数;<strong>回调中继续写此元素动画，动画会顺序执行</strong></li>
</ul>
</li>
</ul>
<h3 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h3><blockquote>
<p>实现点击 叉叉 之后的动画；下移，右移，消失</p>
</blockquote>
<h3 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h3><p><img src="../images/gif/360close.gif" alt="image"></p>
<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>360开关机动画 jQuery<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/jquery/1.12.3/jquery.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.box</span> &#123;</span></span><br><span class="line">            width: 300px;</span><br><span class="line">            height: 400px;   </span><br><span class="line">            position: fixed;</span><br><span class="line">            bottom: 0;</span><br><span class="line">            right: 0;      </span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.headBox</span> &#123;</span></span><br><span class="line">            height: 300px;</span><br><span class="line"><span class="css">            <span class="selector-tag">background-color</span>: <span class="selector-id">#ccc</span>;               </span></span><br><span class="line">            border-left: 2px solid green;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.bottomBox</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">background-color</span>: <span class="selector-id">#ccc</span>;</span></span><br><span class="line">            margin-top: 2px;</span><br><span class="line">            height: 100px;</span><br><span class="line">            border-left: 2px solid green;</span><br><span class="line">        &#125;</span><br><span class="line">        img &#123;</span><br><span class="line">            width: 25px;</span><br><span class="line">            height: 25px;</span><br><span class="line">            float: right;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-tag">img</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line">            cursor: pointer;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span>    </span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"headBox"</span>&gt;</span></span><br><span class="line">            360助手提醒您</span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"../images/叉.png"</span> /&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"bottomBox"</span>&gt;</span>天气....<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 实现点击 叉叉 之后的动画</span></span></span><br><span class="line"><span class="javascript">        $(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            $(<span class="string">'img'</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                $(<span class="string">'.box'</span>).animate(&#123;            </span></span><br><span class="line">                    bottom: -100</span><br><span class="line"><span class="actionscript">                &#125;, <span class="number">500</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">                    $(<span class="string">'.box'</span>).animate(&#123;</span></span><br><span class="line">                        right: -300</span><br><span class="line">                    &#125;, 1000)</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>jQuery</tag>
      </tags>
  </entry>
</search>
